# 3.2. CÃ€I Äáº¶T VÃ€ TRIá»‚N KHAI CÃC CHá»¨C NÄ‚NG Cá»T LÃ•I

## 3.2.1. XÃ¢y dá»±ng Kiáº¿n trÃºc Frontend (Frontend Architecture)

> **Pháº§n nÃ y trÃ¬nh bÃ y chi tiáº¿t kiáº¿n trÃºc Frontend cá»§a á»©ng dá»¥ng QuizTrivia, bao gá»“m cáº¥u trÃºc dá»± Ã¡n, routing, state management vÃ  Ä‘a ngÃ´n ngá»¯.**

---

### a) Cáº¥u trÃºc dá»± Ã¡n theo hÆ°á»›ng tÃ­nh nÄƒng (Feature-based Folder Structure)

#### Triáº¿t lÃ½ thiáº¿t káº¿

Dá»± Ã¡n QuizTrivia Ã¡p dá»¥ng **Feature-based Architecture** thay vÃ¬ Layer-based truyá»n thá»‘ng. Má»—i tÃ­nh nÄƒng Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i Ä‘á»™c láº­p, giÃºp dá»… dÃ ng maintain vÃ  scale.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SO SÃNH Cáº¤U TRÃšC THÆ¯ Má»¤C                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âŒ Layer-based (Truyá»n thá»‘ng)    âœ… Feature-based (Hiá»‡n Ä‘áº¡i)   â”‚
â”‚                                                                 â”‚
â”‚  src/                             src/                          â”‚
â”‚  â”œâ”€â”€ components/                  â”œâ”€â”€ features/                 â”‚
â”‚  â”‚   â”œâ”€â”€ QuizCard.tsx             â”‚   â”œâ”€â”€ quiz/                 â”‚
â”‚  â”‚   â”œâ”€â”€ UserCard.tsx             â”‚   â”‚   â”œâ”€â”€ components/       â”‚
â”‚  â”‚   â””â”€â”€ RoomCard.tsx             â”‚   â”‚   â”œâ”€â”€ pages/            â”‚
â”‚  â”œâ”€â”€ pages/                       â”‚   â”‚   â”œâ”€â”€ services/         â”‚
â”‚  â”‚   â”œâ”€â”€ QuizPage.tsx             â”‚   â”‚   â”œâ”€â”€ hooks/            â”‚
â”‚  â”‚   â”œâ”€â”€ UserPage.tsx             â”‚   â”‚   â”œâ”€â”€ types/            â”‚
â”‚  â”‚   â””â”€â”€ RoomPage.tsx             â”‚   â”‚   â””â”€â”€ store.ts          â”‚
â”‚  â”œâ”€â”€ services/                    â”‚   â”œâ”€â”€ auth/                 â”‚
â”‚  â”‚   â”œâ”€â”€ quizService.ts           â”‚   â”‚   â””â”€â”€ ...               â”‚
â”‚  â”‚   â””â”€â”€ userService.ts           â”‚   â””â”€â”€ multiplayer/          â”‚
â”‚  â””â”€â”€ hooks/                       â”‚       â””â”€â”€ ...               â”‚
â”‚      â””â”€â”€ useQuiz.ts               â””â”€â”€ shared/                   â”‚
â”‚                                       â”œâ”€â”€ components/           â”‚
â”‚                                       â””â”€â”€ hooks/                â”‚
â”‚                                                                 â”‚
â”‚  Váº¥n Ä‘á»: File liÃªn quan náº±m       Æ¯u Ä‘iá»ƒm: Táº¥t cáº£ file cá»§a      â”‚
â”‚  ráº£i rÃ¡c nhiá»u thÆ° má»¥c            má»™t feature náº±m cÃ¹ng nhau     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Cáº¥u trÃºc thÆ° má»¥c chi tiáº¿t

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROJECT STRUCTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“ src/                                                        â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ features/           â† CÃ¡c module tÃ­nh nÄƒng chÃ­nh        â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“ admin/          â† Quáº£n trá»‹ há»‡ thá»‘ng                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ components/    AdminStats, AdminUtilities          â”‚
â”‚  â”‚   â”‚   â””â”€â”€ pages/         Admin, UserManagement, QuizMgmt     â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“ auth/           â† XÃ¡c thá»±c ngÆ°á»i dÃ¹ng               â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ components/    ProtectedRoute, RoleSelection       â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ pages/         AuthPageNew, Profile                â”‚
â”‚  â”‚   â”‚   â””â”€â”€ store.ts       authSlice (Redux)                   â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“ quiz/           â† Module Quiz chÃ­nh                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ api/           base, creator, user, admin APIs     â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ components/    QuizCard, QuestionEditor, Timer     â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ pages/         QuizList, QuizPage, CreateQuiz      â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ services/      quiz.ts, learningService.ts         â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ hooks/         useQuizData, useQuizSession         â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ types/         Quiz, Question interfaces           â”‚
â”‚  â”‚   â”‚   â””â”€â”€ store.ts       quizSlice                           â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“ multiplayer/    â† Cháº¿ Ä‘á»™ nhiá»u ngÆ°á»i chÆ¡i           â”‚
â”‚  â”‚   â”‚   â””â”€â”€ modern/                                            â”‚
â”‚  â”‚   â”‚       â”œâ”€â”€ components/ ModernRoomLobby, GamePlay          â”‚
â”‚  â”‚   â”‚       â”œâ”€â”€ services/  modernMultiplayerService            â”‚
â”‚  â”‚   â”‚       â”œâ”€â”€ utils/     rateLimiter, networkMonitor         â”‚
â”‚  â”‚   â”‚       â””â”€â”€ errors/    Custom error classes                â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“ flashcard/      â† Flashcard há»c táº­p                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ pages/         FlashcardPage                       â”‚
â”‚  â”‚   â”‚   â””â”€â”€ services/      database.ts (Dexie IndexedDB)       â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“ offline/        â† Quáº£n lÃ½ offline                   â”‚
â”‚  â”‚   â”‚   â””â”€â”€ DownloadManager.ts                                 â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â”œâ”€â”€ ğŸ“ feedback/       â† Pháº£n há»“i ngÆ°á»i dÃ¹ng               â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ components/    FeedbackManagement                  â”‚
â”‚  â”‚   â”‚   â””â”€â”€ services/      feedbackService                     â”‚
â”‚  â”‚   â”‚                                                          â”‚
â”‚  â”‚   â””â”€â”€ ğŸ“ settings/       â† CÃ i Ä‘áº·t ngÆ°á»i dÃ¹ng                â”‚
â”‚  â”‚       â””â”€â”€ pages/         SettingsPage                        â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ shared/             â† Components dÃ¹ng chung             â”‚
â”‚  â”‚   â”œâ”€â”€ components/        Header, Layout, ErrorBoundary       â”‚
â”‚  â”‚   â”œâ”€â”€ pages/             LandingPage, Dashboard              â”‚
â”‚  â”‚   â””â”€â”€ services/          autoSync, syncWorker                â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ components/         â† Components global                 â”‚
â”‚  â”‚   â”œâ”€â”€ rag/               ChatbotModal, MessageList           â”‚
â”‚  â”‚   â”œâ”€â”€ MusicPlayer.tsx                                        â”‚
â”‚  â”‚   â””â”€â”€ OfflineIndicator.tsx                                   â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ lib/                â† Core libraries                    â”‚
â”‚  â”‚   â”œâ”€â”€ firebase/          config.ts (Firebase init)           â”‚
â”‚  â”‚   â”œâ”€â”€ store/             Redux store configuration           â”‚
â”‚  â”‚   â””â”€â”€ services/          chunkPreloader, quizAccess          â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ hooks/              â† Custom React hooks                â”‚
â”‚  â”‚   â”œâ”€â”€ usePresence.ts     Online/offline presence             â”‚
â”‚  â”‚   â””â”€â”€ useNotifications.ts                                    â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ contexts/           â† React Context providers           â”‚
â”‚  â”‚   â””â”€â”€ SettingsContext.tsx Theme, Language settings           â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ services/           â† Global services                   â”‚
â”‚  â”‚   â”œâ”€â”€ EnhancedSyncService.ts                                 â”‚
â”‚  â”‚   â”œâ”€â”€ adminStatsService.ts                                   â”‚
â”‚  â”‚   â””â”€â”€ notificationService.ts                                 â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ types/              â† TypeScript type definitions       â”‚
â”‚  â”‚   â””â”€â”€ index.ts                                               â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ utils/              â† Utility functions                 â”‚
â”‚  â”‚   â””â”€â”€ initializeCategories.ts                                â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ App.tsx                â† Root component                    â”‚
â”‚  â”œâ”€â”€ main.tsx               â† Entry point                       â”‚
â”‚  â””â”€â”€ index.css              â† Global styles (Tailwind)          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Quy táº¯c Import/Export

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IMPORT RULES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âœ… Allowed Imports:                                            â”‚
â”‚  â”œâ”€â”€ Feature â†’ Shared (shared/components, shared/hooks)         â”‚
â”‚  â”œâ”€â”€ Feature â†’ Lib (lib/firebase, lib/store)                    â”‚
â”‚  â”œâ”€â”€ Feature â†’ Types (types/)                                   â”‚
â”‚  â””â”€â”€ Feature â†’ Utils (utils/)                                   â”‚
â”‚                                                                 â”‚
â”‚  âŒ Forbidden Imports:                                          â”‚
â”‚  â”œâ”€â”€ Feature A â†’ Feature B (causes coupling)                    â”‚
â”‚  â””â”€â”€ Shared â†’ Feature (breaks abstraction)                      â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ Exception:                                                  â”‚
â”‚  â””â”€â”€ App.tsx can import from any feature (routing setup)        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### b) Cáº¥u hÃ¬nh Routing vÃ  CÆ¡ cháº¿ báº£o vá»‡ Route (Protected Routes)

#### React Router v7 Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROUTING ARCHITECTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Router Type: BrowserRouter (HTML5 History API)                 â”‚
â”‚  Version: React Router DOM v7.6.3                               â”‚
â”‚                                                                 â”‚
â”‚  Route Categories:                                              â”‚
â”‚  â”œâ”€â”€ ğŸŒ Public Routes (No auth required)                        â”‚
â”‚  â”œâ”€â”€ ğŸ”’ Protected Routes (Auth required)                        â”‚
â”‚  â”œâ”€â”€ ğŸ‘‘ Admin Routes (Admin role required)                      â”‚
â”‚  â””â”€â”€ âœï¸ Creator Routes (Creator/Admin role)                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Route Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APPLICATION ROUTES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸŒ PUBLIC ROUTES                                               â”‚
â”‚  â”œâ”€â”€ /                    â†’ LandingPage                         â”‚
â”‚  â””â”€â”€ /login               â†’ AuthPageNew                         â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”’ PROTECTED ROUTES (Authenticated Users)                      â”‚
â”‚  â”œâ”€â”€ /dashboard           â†’ Dashboard                           â”‚
â”‚  â”œâ”€â”€ /quizzes             â†’ RealQuizListPage                    â”‚
â”‚  â”œâ”€â”€ /quiz/:id            â†’ QuizPage (Play quiz)                â”‚
â”‚  â”œâ”€â”€ /quiz/:id/preview    â†’ QuizPreviewPage                     â”‚
â”‚  â”œâ”€â”€ /quiz/:id/reviews    â†’ QuizReviewsPage                     â”‚
â”‚  â”œâ”€â”€ /quiz/:id/results/:resultId â†’ QuizResultViewer             â”‚
â”‚  â”œâ”€â”€ /favorites           â†’ FavoritesPage                       â”‚
â”‚  â”œâ”€â”€ /leaderboard         â†’ LeaderboardPage                     â”‚
â”‚  â”œâ”€â”€ /profile             â†’ Profile                             â”‚
â”‚  â”œâ”€â”€ /settings            â†’ SettingsPage                        â”‚
â”‚  â”œâ”€â”€ /multiplayer         â†’ ModernMultiplayerPage               â”‚
â”‚  â”œâ”€â”€ /flashcards          â†’ FlashcardPage                       â”‚
â”‚  â”œâ”€â”€ /learning-materials  â†’ LearningMaterialsPage               â”‚
â”‚  â”œâ”€â”€ /offline-queue       â†’ OfflineQueuePage                    â”‚
â”‚  â”œâ”€â”€ /downloaded          â†’ DownloadedQuizzesPage               â”‚
â”‚  â””â”€â”€ /feedback            â†’ FeedbackPage                        â”‚
â”‚                                                                 â”‚
â”‚  âœï¸ CREATOR ROUTES (Creator + Admin)                            â”‚
â”‚  â”œâ”€â”€ /creator             â†’ CreatorLayout (wrapper)             â”‚
â”‚  â”œâ”€â”€ /creator/quizzes     â†’ MyQuizzesPage                       â”‚
â”‚  â”œâ”€â”€ /creator/create      â†’ CreateQuizPage                      â”‚
â”‚  â”œâ”€â”€ /creator/edit/:id    â†’ EditQuizPageAdvanced                â”‚
â”‚  â””â”€â”€ /creator/stats/:id   â†’ QuizDetailedStats                   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ‘‘ ADMIN ROUTES (Admin Only)                                   â”‚
â”‚  â”œâ”€â”€ /admin               â†’ Admin Dashboard                     â”‚
â”‚  â”œâ”€â”€ /admin/quizzes       â†’ AdminQuizManagement                 â”‚
â”‚  â”œâ”€â”€ /admin/users         â†’ AdminUserManagement                 â”‚
â”‚  â”œâ”€â”€ /admin/categories    â†’ CategoryManagement                  â”‚
â”‚  â”œâ”€â”€ /admin/stats         â†’ AdminStats                          â”‚
â”‚  â”œâ”€â”€ /admin/utilities     â†’ AdminUtilities                      â”‚
â”‚  â”œâ”€â”€ /admin/feedback      â†’ FeedbackManagement                  â”‚
â”‚  â””â”€â”€ /admin/build-index   â†’ BuildIndexPage (RAG)                â”‚
â”‚                                                                 â”‚
â”‚  ğŸš« FALLBACK                                                    â”‚
â”‚  â””â”€â”€ *                    â†’ NotFound (404)                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Protected Route Component

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROTECTED ROUTE FLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   User Request                                                  â”‚
â”‚        â”‚                                                        â”‚
â”‚        â–¼                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚   â”‚ ProtectedRoute  â”‚                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚            â”‚                                                    â”‚
â”‚            â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     No      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ Is Loading?     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ Check Auth State â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚            â”‚ Yes                           â”‚                    â”‚
â”‚            â–¼                               â–¼                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ Show Spinner    â”‚             â”‚ Is Authenticated?â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                            â”‚                    â”‚
â”‚                              Yes â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â” No       â”‚
â”‚                                  â–¼                   â–¼          â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                         â”‚ Check Role      â”‚ â”‚ Redirect /login â”‚ â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                  â”‚                              â”‚
â”‚                    Has Role â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â” No Role                 â”‚
â”‚                             â–¼         â–¼                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                    â”‚ Render Page â”‚ â”‚ Redirect /      â”‚          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Lazy Loading Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CODE SPLITTING STRATEGY                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Eager Loading (Included in main bundle):                       â”‚
â”‚  â”œâ”€â”€ LandingPage          : First impression, no delay          â”‚
â”‚  â”œâ”€â”€ AuthPageNew          : Login flow critical                 â”‚
â”‚  â”œâ”€â”€ Layout               : Used everywhere                     â”‚
â”‚  â””â”€â”€ ErrorBoundary        : Error handling                      â”‚
â”‚                                                                 â”‚
â”‚  Lazy Loading (Separate chunks):                                â”‚
â”‚  â”œâ”€â”€ Dashboard            : ~3 KB gzipped                       â”‚
â”‚  â”œâ”€â”€ QuizList             : ~10 KB gzipped                      â”‚
â”‚  â”œâ”€â”€ QuizPage             : ~25 KB gzipped                      â”‚
â”‚  â”œâ”€â”€ CreateQuizPage       : ~24 KB gzipped                      â”‚
â”‚  â”œâ”€â”€ ModernMultiplayerPage: ~80 KB gzipped (largest)            â”‚
â”‚  â”œâ”€â”€ AdminStats           : ~110 KB gzipped                     â”‚
â”‚  â””â”€â”€ FlashcardPage        : ~6 KB gzipped                       â”‚
â”‚                                                                 â”‚
â”‚  Implementation:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  const QuizPage = React.lazy(() =>                      â”‚    â”‚
â”‚  â”‚    import('./features/quiz/pages/QuizPage')             â”‚    â”‚
â”‚  â”‚  );                                                     â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  <Suspense fallback={<LoadingSpinner />}>               â”‚    â”‚
â”‚  â”‚    <QuizPage />                                         â”‚    â”‚
â”‚  â”‚  </Suspense>                                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### c) Quáº£n lÃ½ tráº¡ng thÃ¡i toÃ n cá»¥c vá»›i Redux Toolkit (Store, Slices)

#### Redux Store Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REDUX STORE STRUCTURE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                      â”‚   Redux Store    â”‚                       â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                               â”‚                                 â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚           â”‚                   â”‚                   â”‚             â”‚
â”‚           â–¼                   â–¼                   â–¼             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚  auth Slice   â”‚   â”‚  quiz Slice   â”‚   â”‚ settings Sliceâ”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                 â”‚
â”‚  State Shape:                                                   â”‚
â”‚  {                                                              â”‚
â”‚    auth: {                                                      â”‚
â”‚      user: User | null,                                         â”‚
â”‚      isAuthenticated: boolean,                                  â”‚
â”‚      isLoading: boolean,                                        â”‚
â”‚      role: 'admin' | 'creator' | 'user' | null,                 â”‚
â”‚      authChecked: boolean                                       â”‚
â”‚    },                                                           â”‚
â”‚    quiz: {                                                      â”‚
â”‚      currentQuiz: Quiz | null,                                  â”‚
â”‚      quizzes: Quiz[],                                           â”‚
â”‚      loading: boolean,                                          â”‚
â”‚      error: string | null                                       â”‚
â”‚    },                                                           â”‚
â”‚    settings: {                                                  â”‚
â”‚      theme: 'light' | 'dark' | 'system',                        â”‚
â”‚      language: 'vi' | 'en',                                     â”‚
â”‚      soundEnabled: boolean                                      â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Auth Slice Detail

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUTH SLICE                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Actions:                                                       â”‚
â”‚  â”œâ”€â”€ loginSuccess(user, role)    : Set user after login         â”‚
â”‚  â”œâ”€â”€ logout()                    : Clear user state             â”‚
â”‚  â”œâ”€â”€ authCheckComplete()         : Mark auth check done         â”‚
â”‚  â”œâ”€â”€ updateProfile(data)         : Update user profile          â”‚
â”‚  â””â”€â”€ setRole(role)               : Update user role             â”‚
â”‚                                                                 â”‚
â”‚  Selectors:                                                     â”‚
â”‚  â”œâ”€â”€ selectUser                  : Get current user             â”‚
â”‚  â”œâ”€â”€ selectIsAuthenticated       : Check if logged in           â”‚
â”‚  â”œâ”€â”€ selectUserRole              : Get user role                â”‚
â”‚  â”œâ”€â”€ selectIsAdmin               : Check admin role             â”‚
â”‚  â””â”€â”€ selectAuthChecked           : Check if auth verified       â”‚
â”‚                                                                 â”‚
â”‚  Flow:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  App Mount                                              â”‚    â”‚
â”‚  â”‚      â”‚                                                  â”‚    â”‚
â”‚  â”‚      â–¼                                                  â”‚    â”‚
â”‚  â”‚  onAuthStateChanged (Firebase)                          â”‚    â”‚
â”‚  â”‚      â”‚                                                  â”‚    â”‚
â”‚  â”‚      â”œâ”€â”€ User exists â†’ Fetch role from Firestore        â”‚    â”‚
â”‚  â”‚      â”‚                     â”‚                            â”‚    â”‚
â”‚  â”‚      â”‚                     â–¼                            â”‚    â”‚
â”‚  â”‚      â”‚              dispatch(loginSuccess)              â”‚    â”‚
â”‚  â”‚      â”‚                                                  â”‚    â”‚
â”‚  â”‚      â””â”€â”€ No user â†’ dispatch(logout)                     â”‚    â”‚
â”‚  â”‚                          â”‚                              â”‚    â”‚
â”‚  â”‚                          â–¼                              â”‚    â”‚
â”‚  â”‚               dispatch(authCheckComplete)               â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Redux DevTools Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REDUX DEVTOOLS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Features enabled:                                              â”‚
â”‚  â”œâ”€â”€ âœ… Time-travel debugging                                   â”‚
â”‚  â”œâ”€â”€ âœ… Action logging                                          â”‚
â”‚  â”œâ”€â”€ âœ… State diff visualization                                â”‚
â”‚  â”œâ”€â”€ âœ… Action dispatch from DevTools                           â”‚
â”‚  â””â”€â”€ âœ… State export/import                                     â”‚
â”‚                                                                 â”‚
â”‚  Configuration:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  export const store = configureStore({                  â”‚    â”‚
â”‚  â”‚    reducer: {                                           â”‚    â”‚
â”‚  â”‚      auth: authReducer,                                 â”‚    â”‚
â”‚  â”‚      quiz: quizReducer,                                 â”‚    â”‚
â”‚  â”‚      settings: settingsReducer                          â”‚    â”‚
â”‚  â”‚    },                                                   â”‚    â”‚
â”‚  â”‚    devTools: process.env.NODE_ENV !== 'production'      â”‚    â”‚
â”‚  â”‚  });                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### d) TÃ­ch há»£p Ä‘a ngÃ´n ngá»¯ (i18n)

#### i18next Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    I18N ARCHITECTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Library Stack:                                                 â”‚
â”‚  â”œâ”€â”€ i18next@25.3.2               : Core i18n framework         â”‚
â”‚  â”œâ”€â”€ react-i18next@15.6.1         : React bindings              â”‚
â”‚  â”œâ”€â”€ i18next-http-backend@3.0.2   : Load translations via HTTP  â”‚
â”‚  â””â”€â”€ i18next-browser-languagedetector@8.2.0 : Auto-detect lang  â”‚
â”‚                                                                 â”‚
â”‚  Supported Languages:                                           â”‚
â”‚  â”œâ”€â”€ ğŸ‡»ğŸ‡³ Vietnamese (vi) - Default                              â”‚
â”‚  â””â”€â”€ ğŸ‡ºğŸ‡¸ English (en)                                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Translation File Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRANSLATION FILES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“ public/locales/                                             â”‚
â”‚  â”‚                                                              â”‚
â”‚  â”œâ”€â”€ ğŸ“ vi/                                                     â”‚
â”‚  â”‚   â””â”€â”€ common.json        (~2000 keys)                        â”‚
â”‚  â”‚                                                              â”‚
â”‚  â””â”€â”€ ğŸ“ en/                                                     â”‚
â”‚      â””â”€â”€ common.json        (~2000 keys)                        â”‚
â”‚                                                                 â”‚
â”‚  Key Namespaces:                                                â”‚
â”‚  â”œâ”€â”€ common.*               : Shared UI elements                â”‚
â”‚  â”œâ”€â”€ auth.*                 : Authentication                    â”‚
â”‚  â”œâ”€â”€ quiz.*                 : Quiz related                      â”‚
â”‚  â”œâ”€â”€ multiplayer.*          : Multiplayer mode                  â”‚
â”‚  â”œâ”€â”€ admin.*                : Admin panel                       â”‚
â”‚  â”œâ”€â”€ settings.*             : Settings page                     â”‚
â”‚  â”œâ”€â”€ errors.*               : Error messages                    â”‚
â”‚  â””â”€â”€ validation.*           : Form validation                   â”‚
â”‚                                                                 â”‚
â”‚  Example Keys:                                                  â”‚
â”‚  {                                                              â”‚
â”‚    "common": {                                                  â”‚
â”‚      "save": "LÆ°u",                                             â”‚
â”‚      "cancel": "Há»§y",                                           â”‚
â”‚      "loading": "Äang táº£i..."                                   â”‚
â”‚    },                                                           â”‚
â”‚    "quiz": {                                                    â”‚
â”‚      "title": "TiÃªu Ä‘á» Quiz",                                   â”‚
â”‚      "questions": "{{count}} cÃ¢u há»i",                          â”‚
â”‚      "startQuiz": "Báº¯t Ä‘áº§u lÃ m bÃ i"                             â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Language Detection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LANGUAGE DETECTION                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   App Load                                                      â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚              Language Detection Order                   â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚  1. localStorage ('i18nextLng')     â† User preference   â”‚   â”‚
â”‚   â”‚           â”‚                                             â”‚   â”‚
â”‚   â”‚           â–¼ (if not found)                              â”‚   â”‚
â”‚   â”‚  2. Navigator language              â† Browser setting   â”‚   â”‚
â”‚   â”‚           â”‚                                             â”‚   â”‚
â”‚   â”‚           â–¼ (if not supported)                          â”‚   â”‚
â”‚   â”‚  3. Fallback: 'vi'                  â† Default           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚   Load translation file via HTTP                                â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚   Cache in memory + Service Worker                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Usage in Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    I18N USAGE PATTERNS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Hook Usage (Functional Components):                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  const { t } = useTranslation();                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  // Simple key                                          â”‚    â”‚
â”‚  â”‚  <h1>{t('quiz.title')}</h1>                             â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  // With interpolation                                  â”‚    â”‚
â”‚  â”‚  <p>{t('quiz.questions', { count: 10 })}</p>            â”‚    â”‚
â”‚  â”‚  // Output: "10 cÃ¢u há»i"                                â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  // Pluralization                                       â”‚    â”‚
â”‚  â”‚  <span>{t('common.items', { count: items.length })}</spanâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  Language Switcher:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  const { i18n } = useTranslation();                     â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  const changeLanguage = (lang: 'vi' | 'en') => {        â”‚    â”‚
â”‚  â”‚    i18n.changeLanguage(lang);                           â”‚    â”‚
â”‚  â”‚    // Auto-saves to localStorage                        â”‚    â”‚
â”‚  â”‚  };                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Offline Translation Support

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OFFLINE I18N SUPPORT                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  PWA Caching Strategy:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  // vite.config.ts - VitePWA configuration              â”‚    â”‚
â”‚  â”‚  workbox: {                                             â”‚    â”‚
â”‚  â”‚    globPatterns: [                                      â”‚    â”‚
â”‚  â”‚      '**/*.{js,css,html,ico,png,svg}',                  â”‚    â”‚
â”‚  â”‚      'locales/**/*.json'  // â† i18n files               â”‚    â”‚
â”‚  â”‚    ],                                                   â”‚    â”‚
â”‚  â”‚    runtimeCaching: [{                                   â”‚    â”‚
â”‚  â”‚      urlPattern: /\/locales\/.*\.json$/,                â”‚    â”‚
â”‚  â”‚      handler: 'CacheFirst',                             â”‚    â”‚
â”‚  â”‚      options: {                                         â”‚    â”‚
â”‚  â”‚        cacheName: 'i18n-locales-cache',                 â”‚    â”‚
â”‚  â”‚        expiration: {                                    â”‚    â”‚
â”‚  â”‚          maxAgeSeconds: 60 * 60 * 24 * 30 // 30 days    â”‚    â”‚
â”‚  â”‚        }                                                â”‚    â”‚
â”‚  â”‚      }                                                  â”‚    â”‚
â”‚  â”‚    }]                                                   â”‚    â”‚
â”‚  â”‚  }                                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  Result:                                                        â”‚
â”‚  â”œâ”€â”€ âœ… Translations cached after first load                    â”‚
â”‚  â”œâ”€â”€ âœ… Works completely offline                                â”‚
â”‚  â”œâ”€â”€ âœ… Auto-updates when online                                â”‚
â”‚  â””â”€â”€ âœ… ~50KB total for both languages                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tá»•ng káº¿t pháº§n 3.2.1

Pháº§n 3.2.1 Ä‘Ã£ trÃ¬nh bÃ y chi tiáº¿t **Kiáº¿n trÃºc Frontend** cá»§a QuizTrivia:

| Má»¥c | Ná»™i dung | CÃ´ng nghá»‡ |
|-----|----------|-----------|
| **Cáº¥u trÃºc dá»± Ã¡n** | Feature-based Architecture | React 18.2 |
| **Routing** | Protected Routes, Lazy Loading | React Router 7 |
| **State Management** | Redux Store, Slices | Redux Toolkit 1.9 |
| **Äa ngÃ´n ngá»¯** | Vietnamese + English | i18next 25.3 |

**Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c:**
- âœ… Cáº¥u trÃºc dá»± Ã¡n rÃµ rÃ ng, dá»… maintain
- âœ… Route protection theo role (User/Creator/Admin)
- âœ… Code splitting giáº£m 60% initial bundle size
- âœ… Äa ngÃ´n ngá»¯ vá»›i offline support

---

*Tiáº¿p theo: [3.2.2. Hiá»‡n thá»±c hÃ³a Module Táº¡o Quiz vÃ  TÃ­ch há»£p AI](CHAPTER3_2_2_AI_QUIZ_GENERATION.md)*
