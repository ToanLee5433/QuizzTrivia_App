import{a as t,u as e,e as i,r as s,f as a,j as r,g as n,h as u,i as c}from"./index-Cq0ntLoY.js";import o from"./QuizList-Bv54F-Xm.js";const h=()=>{const{t:h}=t(),l=e(t=>t.auth.user),d=e(t=>t.quiz.quizzes),f=e(t=>t.quiz.loading||t.quiz.isLoading),z=i(),[g,m]=s.useState([]),[x,q]=s.useState(!0),[v,p]=s.useState(null);return s.useEffect(()=>{if(!l)return;if(0===d.length&&!f)return void z(a({user:l})).unwrap().catch(()=>{p(h("favorites.loadError","Không thể tải danh sách quiz. Vui lòng kiểm tra kết nối mạng hoặc thử lại sau.")),q(!1)});(async()=>{q(!0);try{const t=n(u,"user_favorites",l.uid),e=await c(t);if(e.exists()){const t=e.data().quizIds||[];m(d.filter(e=>t.includes(e.id)))}else m([]);p(null)}catch(t){p(h("favorites.fetchError","Không thể tải quiz yêu thích."))}q(!1)})()},[l,d,f,z]),l?v?r.jsx("div",{className:"p-8 text-center text-red-600",children:v}):x||f?r.jsx("div",{className:"p-8 text-center",children:h("common.loading","Đang tải...")}):r.jsx(o,{quizzes:g,title:h("favorites.title","Quiz Yêu Thích")}):r.jsx("div",{className:"p-8 text-center",children:h("favorites.loginRequired","Bạn cần đăng nhập để xem quiz yêu thích.")})};export{h as default};
