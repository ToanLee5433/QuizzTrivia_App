import{d as e,r as s,j as t,S as a,U as l,a as i,B as r,H as n,y as c,b as d,V as x,T as m,c as h}from"./index-Dp2ZjDRA.js";import{R as o}from"./ReviewForm-CnYN07IR.js";import{C as g}from"./calendar-BSwB87ak.js";import{M as u}from"./message-square-DhERZ26W.js";import{C as j}from"./chart-column-rKyrDkFw.js";import"./x-Bbxc2d81.js";import"./send-CZRsQT1N.js";
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=e("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),b=e("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),N=e("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),y=({reviews:e,loading:i,onHelpfulClick:r,onReportClick:n})=>{const[c,d]=s.useState(new Set),x=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"})},m=e=>{switch(e){case 1:return"Ráº¥t tá»‡";case 2:return"Tá»‡";case 3:return"BÃ¬nh thÆ°á»ng";case 4:return"Tá»‘t";case 5:return"Ráº¥t tá»‘t";default:return""}};return i?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>t.jsx("div",{className:"animate-pulse",children:t.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4 mb-1"}),t.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/3"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-300 rounded w-full"}),t.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"})]})]})},e))}):0===e.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(a,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o"}),t.jsx("p",{className:"text-gray-600",children:"HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡ quiz nÃ y!"})]}):t.jsx("div",{className:"space-y-4",children:e.map(e=>{var s;const i=c.has(e.id),h=e.comment&&e.comment.length>200,o=h&&!i?e.comment.substring(0,200)+"...":e.comment;return t.jsxs("div",{className:"bg-white rounded-lg border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.userAvatar?t.jsx("img",{src:e.userAvatar,alt:e.userName,className:"w-full h-full rounded-full object-cover"}):t.jsx(l,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:e.userName||"NgÆ°á»i dÃ¹ng áº©n danh"}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[t.jsx(g,{className:"w-3 h-3"}),t.jsx("span",{children:x(e.createdAt)})]})]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:t.jsx(p,{className:"w-4 h-4"})})})]}),t.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[(u=e.rating,t.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>t.jsx(a,{className:"w-4 h-4 "+(e<=u?"fill-yellow-400 text-yellow-400":"text-gray-300")},e))})),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:m(e.rating)}),t.jsxs("span",{className:"text-sm text-gray-500",children:["(",e.rating,"/5 sao)"]})]}),e.comment&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-gray-700 leading-relaxed",children:o}),h&&t.jsx("button",{onClick:()=>(e=>{const s=new Set(c);s.has(e)?s.delete(e):s.add(e),d(s)})(e.id),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:i?"Thu gá»n":"Xem thÃªm"})]}),t.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{onClick:()=>null==r?void 0:r(e.id),className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-green-600 transition-colors",children:[t.jsx(N,{className:"w-4 h-4"}),t.jsxs("span",{children:["Há»¯u Ã­ch (",(null==(s=e.helpful)?void 0:s.length)||0,")"]})]}),t.jsxs("button",{onClick:()=>null==n?void 0:n(e.id),className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-red-600 transition-colors",children:[t.jsx(b,{className:"w-4 h-4"}),t.jsx("span",{children:"BÃ¡o cÃ¡o"})]})]}),e.updatedAt&&e.updatedAt!==e.createdAt&&t.jsxs("span",{className:"text-xs text-gray-500",children:["ÄÃ£ chá»‰nh sá»­a ",x(e.updatedAt)]})]})]},e.id);var u})})},v=()=>{const{t:e}=i(),{id:l}=r(),[g,p]=s.useState(null),[b,N]=s.useState([]),[v,f]=s.useState(null),[w,C]=s.useState(!0),[k,R]=s.useState(!1);s.useEffect(()=>{l?A():C(!1)},[l]);const A=async()=>{if(l){C(!0);try{let t;try{if(t=await n(l),t)p(t);else{p({id:l,title:`Quiz Sample ${l}`,description:"ÄÃ¢y lÃ  quiz máº«u Ä‘á»ƒ test há»‡ thá»‘ng Ä‘Ã¡nh giÃ¡",category:"General",difficulty:"easy",questions:[{id:"1",text:"CÃ¢u há»i máº«u?",type:"multiple",answers:[{id:"1",text:"ÄÃ¡p Ã¡n A",isCorrect:!0},{id:"2",text:"ÄÃ¡p Ã¡n B",isCorrect:!1},{id:"3",text:"ÄÃ¡p Ã¡n C",isCorrect:!1},{id:"4",text:"ÄÃ¡p Ã¡n D",isCorrect:!1}],explanation:"Giáº£i thÃ­ch máº«u",points:10}],duration:300,createdBy:"system",createdAt:new Date,updatedAt:new Date,isPublished:!0,tags:["sample","test"]})}}catch(e){return c.error("KhÃ´ng tÃ¬m tháº¥y quiz nÃ y"),void C(!1)}try{const e=await d.getQuizReviewsSimple(l);if(N(e||[]),e&&e.length>0){const s=e.reduce((e,s)=>e+(s.rating||0),0)/e.length,t={5:e.filter(e=>5===e.rating).length,4:e.filter(e=>4===e.rating).length,3:e.filter(e=>3===e.rating).length,2:e.filter(e=>2===e.rating).length,1:e.filter(e=>1===e.rating).length};f({totalReviews:e.length,averageRating:Math.round(10*s)/10,ratingDistribution:t})}else f({totalReviews:0,averageRating:0,ratingDistribution:{5:0,4:0,3:0,2:0,1:0}})}catch(s){N([]),f({totalReviews:0,averageRating:0,ratingDistribution:{5:0,4:0,3:0,2:0,1:0}}),c.error("KhÃ´ng thá»ƒ táº£i Ä‘Ã¡nh giÃ¡")}}catch(t){c.error("CÃ³ lá»—i khi táº£i trang Ä‘Ã¡nh giÃ¡")}finally{C(!1)}}else C(!1)};return w?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Äang táº£i thÃ´ng tin quiz..."})]})}):g?t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:g.title}),t.jsx("p",{className:"text-gray-600 mb-4",children:g.description}),t.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(x,{className:"w-4 h-4"}),t.jsx("span",{children:g.category})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(m,{className:"w-4 h-4"}),t.jsx("span",{className:"capitalize",children:g.difficulty})]}),t.jsxs("span",{className:"flex items-center space-x-1",children:[t.jsx(u,{className:"w-4 h-4"}),t.jsxs("span",{children:[g.questions.length," cÃ¢u há»i"]})]})]})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>{A()},disabled:w,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium disabled:opacity-50",title:"LÃ m má»›i Ä‘Ã¡nh giÃ¡",children:t.jsx(h,{className:"w-4 h-4 "+(w?"animate-spin":"")})}),t.jsx("button",{onClick:()=>R(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Viáº¿t Ä‘Ã¡nh giÃ¡"})]})]})}),v&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:t.jsx(a,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.averageRating.toFixed(1)}),t.jsx("p",{className:"text-sm text-gray-600",children:e("multiplayer.avgScore")}),t.jsx("div",{className:"flex items-center mt-1",children:[1,2,3,4,5].map(e=>t.jsx(a,{className:"w-4 h-4 "+(e<=Math.round(v.averageRating)?"fill-yellow-400 text-yellow-400":"text-gray-300")},e))})]})]})}),t.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:t.jsx(u,{className:"w-6 h-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==v?void 0:v.totalReviews)||0}),t.jsx("p",{className:"text-sm text-gray-600",children:e("admin.stats.totalReviews")}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:0===(null==v?void 0:v.totalReviews)?"ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡":"ngÆ°á»i Ä‘Ã£ Ä‘Ã¡nh giÃ¡"})]})]})}),t.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:t.jsx(m,{className:"w-6 h-6 text-purple-600"})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[v.totalReviews>0?Math.round((v.ratingDistribution[5]+v.ratingDistribution[4])/v.totalReviews*100):0,"%"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"ÄÃ¡nh giÃ¡ tÃ­ch cá»±c"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx("div",{className:"lg:col-span-1",children:v?t.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(j,{className:"w-5 h-5 mr-2"}),e("admin.stats.ratingDistribution")]}),t.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(e=>{const s=v.ratingDistribution[e]||0,l=v.totalReviews>0?s/v.totalReviews*100:0;return t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("div",{className:"flex items-center space-x-1 w-16",children:[t.jsx("span",{className:"text-sm font-medium",children:e}),t.jsx(a,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"})]}),t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${l}%`}})}),t.jsx("span",{className:"text-sm text-gray-600 w-12",children:s})]},e)})})]}):null}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:[t.jsx("div",{className:"p-6 border-b border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["ÄÃ¡nh giÃ¡ tá»« ngÆ°á»i dÃ¹ng (",b.length,")"]}),t.jsx("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Viáº¿t Ä‘Ã¡nh giÃ¡"})]})}),t.jsx("div",{className:"p-6",children:0===b.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’­"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o"}),t.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"HÃ£y trá»Ÿ thÃ nh ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡ quiz nÃ y! Chia sáº» tráº£i nghiá»‡m cá»§a báº¡n Ä‘á»ƒ giÃºp nhá»¯ng ngÆ°á»i khÃ¡c."}),t.jsxs("button",{onClick:()=>R(!0),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[t.jsx(u,{className:"w-5 h-5 mr-2"}),"Viáº¿t Ä‘Ã¡nh giÃ¡ Ä‘áº§u tiÃªn"]}),t.jsxs("div",{className:"mt-8 flex justify-center space-x-4",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-200 rounded-full animate-pulse"}),t.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full animate-pulse delay-75"}),t.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse delay-150"})]})]}):t.jsx(y,{reviews:b,loading:!1,onHelpfulClick:async e=>{},onReportClick:async e=>{}})})]})})]}),k&&l&&t.jsx(o,{quizId:l,onReviewSubmitted:async()=>{R(!1),N([]),C(!0),setTimeout(()=>{A()},1500)},onClose:()=>R(!1)})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ðŸ˜”"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Quiz khÃ´ng tá»“n táº¡i"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"KhÃ´ng thá»ƒ tÃ¬m tháº¥y quiz nÃ y"}),t.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:e("common.back")})]})})};export{v as default};
