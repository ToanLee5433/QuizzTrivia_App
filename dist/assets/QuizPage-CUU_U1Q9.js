const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CF88gCND.js","assets/index-B5c4m5bM.css"])))=>i.map(i=>d[i]);
import{a as A,b as S,c as T,u as Q,r as c,s as M,d as z,_ as E,j as e}from"./index-CF88gCND.js";const $=()=>{const{id:s}=A(),r=S(),t=T(),{quizzes:n,currentQuiz:a,loading:d,error:h}=Q(x=>x.quiz),[m,p]=c.useState(null);return c.useEffect(()=>{if(console.log("🔍 QuizPage: Looking for quiz:",s),console.log("🔍 Available quizzes:",n.map(l=>({id:l.id,title:l.title}))),!s){console.log("❌ No quiz ID provided"),r("/quiz-list");return}const x=n.find(l=>l.id===s);console.log("🔍 Found quiz in store:",x?x.title:"NOT FOUND"),x?(p(x),t(M(x))):(console.log("❌ Quiz not found in store"),r("/quiz-list"))},[s,n,r,t]),c.useEffect(()=>{a&&a.id===s&&(console.log("🔍 Using currentQuiz from Redux:",a.title),p(a))},[a,s]),{quiz:m,loading:d,error:h}},I=({questions:s,currentQuestionIndex:r,onQuestionChange:t,answers:n})=>{const a=S(),[d,h]=c.useState(!1),[m,p]=c.useState(!1),[x,l]=c.useState(!1),g=c.useCallback(()=>{r<s.length-1&&t(r+1)},[r,s.length,t]),o=c.useCallback(()=>{r>0&&t(r-1)},[r,t]),i=c.useCallback(y=>{y>=0&&y<s.length&&t(y)},[s.length,t]),u=c.useCallback(()=>{h(!0)},[]),N=c.useCallback(()=>{a("/quiz-list")},[a]),w=c.useCallback(()=>{s.filter(k=>!n[k.id]||Array.isArray(n[k.id])&&n[k.id].length===0||n[k.id]==="").length>0?l(!0):p(!0)},[s,n]),v=c.useCallback(()=>s.filter(y=>!n[y.id]||Array.isArray(n[y.id])&&n[y.id].length===0||n[y.id]===""),[s,n]),b=r===0,f=r===s.length-1;return{goToNextQuestion:g,goToPreviousQuestion:o,goToQuestion:i,handleExitQuiz:u,confirmExitQuiz:N,handleSubmitQuiz:w,getUnansweredQuestions:v,isFirstQuestion:b,isLastQuestion:f,modalControls:{showExitModal:d,setShowExitModal:h,showSubmitModal:m,setShowSubmitModal:p,showUnansweredModal:x,setShowUnansweredModal:l}}},L=({onTimeUp:s,isActive:r=!0})=>{const t=T(),{timeLeft:n,totalTime:a,quizStartTime:d,isTimeWarning:h}=Q(b=>b.quiz),m=c.useRef(null),[p,x]=c.useState(!1);c.useEffect(()=>(r&&d&&a>0?(m.current=setInterval(()=>{t(z())},1e3),t(z())):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&(clearInterval(m.current),m.current=null)}),[r,d,a,t]),c.useEffect(()=>{n<=0&&!p&&d&&(x(!0),s())},[n,p,s,d]);const l=c.useCallback(b=>{const f=Math.floor(b/60),j=b%60;return`${f.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`},[]),g=l(n),o=a>0?(a-n)/a*100:0,i=Math.ceil(a*.1),u=n<=i,N=n<=Math.ceil(a*.05),w=d?Math.floor((Date.now()-d)/1e3):0,v=l(w);return{timeLeft:n,formattedTime:g,percentage:o,isRunning:r,isTimeRunningOut:u,isTimeCritical:N,isTimeWarning:h,timeTaken:w,timeTakenFormatted:v,totalTime:a,formatTime:l}},R=(s,r)=>{if(r.type!=="short_answer")return!1;const t=a=>a.trim().toLowerCase().replace(/\s+/g," "),n=t(s);return r.correctAnswer&&t(r.correctAnswer)===n?!0:r.acceptedAnswers?r.acceptedAnswers.some(a=>t(a)===n):!1},U=({quiz:s})=>{const r=S(),{user:t}=Q(o=>o.auth),[n,a]=c.useState({quizId:s.id,startTime:Date.now(),currentQuestionIndex:0,answers:{},isCompleted:!1,timeSpent:0});c.useEffect(()=>{const o=setInterval(()=>{a(i=>({...i,timeSpent:Date.now()-i.startTime}))},1e3);return()=>clearInterval(o)},[]);const d=c.useCallback((o,i)=>{a(u=>({...u,answers:{...u.answers,[o]:i}}))},[]),h=c.useCallback(o=>{a(i=>({...i,currentQuestionIndex:o}))},[]),m=c.useCallback((o,i)=>{let u=0,N=o.length;return o.forEach(v=>{var j;const b=i[v.id];if(b==null)return;let f=!1;switch(v.type){case"boolean":case"multiple":case"image":{const y=(j=v.answers.find(k=>k.isCorrect))==null?void 0:j.id;f=b===y,f&&u++;break}case"checkbox":{const y=v.answers.filter(C=>C.isCorrect).map(C=>C.id).sort(),k=Array.isArray(b)?[...b].sort():[];f=JSON.stringify(y)===JSON.stringify(k),f&&u++;break}case"short_answer":{f=R(b,v),f&&u++;break}}}),{correct:u,total:N,percentage:Math.round(u/N*100)}},[]),p=c.useCallback(async()=>{var u;const o={...n,isCompleted:!0,endTime:Date.now(),timeSpent:Date.now()-n.startTime};a(o);const i=m(s.questions,o.answers);try{if(t){console.log("💾 Saving quiz result to Firestore...");const N=Object.entries(o.answers).map(([f,j])=>({questionId:f,selectedAnswerId:typeof j=="string"?j:JSON.stringify(j),isCorrect:!1,timeSpent:0})),w={userId:t.uid,userEmail:t.email||"",userName:t.displayName||((u=t.email)==null?void 0:u.split("@")[0])||"Anonymous",quizId:s.id,score:i.percentage,correctAnswers:i.correct,totalQuestions:i.total,timeSpent:Math.round(o.timeSpent/1e3),answers:N,completedAt:new Date},{submitQuizResult:v}=await E(async()=>{const{submitQuizResult:f}=await import("./index-CF88gCND.js").then(j=>j.ab);return{submitQuizResult:f}},__vite__mapDeps([0,1])),b=await v(w);console.log("✅ Quiz result saved with ID:",b)}}catch(N){console.error("❌ Failed to save quiz result:",N)}r(`/results/${s.id}`,{state:{quiz:s,session:o,score:i,correct:i.correct,total:i.total,answers:o.answers,timeSpent:Math.round(o.timeSpent/1e3),quizId:s.id}})},[n,s,r,m,t]),x=c.useCallback(()=>Object.keys(n.answers).filter(o=>{const i=n.answers[o];return i!=null&&i!==""&&!(Array.isArray(i)&&i.length===0)}),[n.answers]),l=c.useCallback(()=>s.questions.filter(o=>{const i=n.answers[o.id];return i==null||i===""||Array.isArray(i)&&i.length===0}),[s.questions,n.answers]),g=x().length/s.questions.length*100;return{session:n,updateAnswer:d,setCurrentQuestion:h,completeQuiz:p,calculateScore:m,getAnsweredQuestions:x,getUnansweredQuestions:l,progress:g}},B=({timeLeft:s,isWarning:r,isCritical:t,percentage:n=0})=>{const a=()=>t?"text-red-600":r?"text-amber-600":"text-blue-600",d=()=>t?"bg-red-50 border-red-200":r?"bg-amber-50 border-amber-200":"bg-blue-50 border-blue-200",h=()=>t?"bg-red-500":r?"bg-amber-500":"bg-blue-500";return e.jsxs("div",{className:`rounded-md border p-3 transition-all duration-300 ${d()} ${t?"animate-pulse":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600 flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Thời gian còn lại"]}),e.jsx("span",{className:`text-lg font-bold font-mono ${a()}`,children:s})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-1000 ${h()}`,style:{width:`${Math.min(n,100)}%`}})}),t&&e.jsxs("div",{className:"text-xs text-red-600 font-medium mt-1 flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Sắp hết giờ!"]}),r&&!t&&e.jsxs("div",{className:"text-xs text-amber-600 font-medium mt-1 flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Còn ít thời gian"]})]})},D=({current:s,total:r,percentage:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Tiến độ"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[s," / ",r]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})})]}),_=({question:s,questionNumber:r,value:t,onChange:n})=>{const a=()=>e.jsx("div",{className:"space-y-3",children:s.answers.map((l,g)=>e.jsx("button",{onClick:()=>n(l.id),className:`w-full p-4 text-left rounded-lg border-2 transition-all ${t===l.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t===l.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:t===l.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})}),e.jsxs("span",{className:"font-medium mr-3",children:[String.fromCharCode(65+g),"."]}),e.jsx("span",{className:"flex-1",children:l.text})]})},l.id))}),d=()=>e.jsx("div",{className:"space-y-3",children:s.answers.map((l,g)=>e.jsx("button",{onClick:()=>n(l.id),className:`w-full p-4 text-left rounded-lg border-2 transition-all ${t===l.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t===l.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:t===l.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})}),e.jsxs("span",{className:"font-medium mr-3",children:[String.fromCharCode(65+g),"."]}),e.jsx("span",{className:`flex-1 font-medium ${l.text==="Đúng"?"text-green-600":"text-red-600"}`,children:l.text})]})},l.id))}),h=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"💡 Nhập đáp án vào ô bên dưới:"}),e.jsx("input",{type:"text",value:t||"",onChange:l=>n(l.target.value),placeholder:"Nhập câu trả lời của bạn...",className:"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-lg"})]})}),m=()=>e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.answers.map((l,g)=>e.jsxs("button",{onClick:()=>n(l.id),className:`relative p-4 rounded-lg border-2 transition-all ${t===l.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[l.imageUrl?e.jsxs("div",{className:"w-full h-32 mb-3 rounded-lg overflow-hidden bg-gray-100",children:[e.jsx("img",{src:l.imageUrl,alt:l.text||`Option ${String.fromCharCode(65+g)}`,className:"w-full h-full object-cover",onError:o=>{var u;const i=o.target;i.style.display="none",(u=i.nextElementSibling)==null||u.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("span",{className:"text-sm",children:"Không thể tải ảnh"})})]}):e.jsx("div",{className:"w-full h-32 mb-3 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"Chưa có ảnh"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[String.fromCharCode(65+g),". ",l.text||`Ảnh ${g+1}`]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${t===l.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:t===l.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})]},l.id))}),p=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"💡 Bạn có thể chọn nhiều đáp án cho câu hỏi này."})}),s.answers.map((l,g)=>{const o=Array.isArray(t)&&t.includes(l.id);return e.jsx("button",{onClick:()=>{const i=Array.isArray(t)?t:[],u=o?i.filter(N=>N!==l.id):[...i,l.id];n(u)},className:`w-full p-4 text-left rounded-lg border-2 transition-all ${o?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded border-2 ${o?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:o&&e.jsx("div",{className:"text-white text-xs flex items-center justify-center h-full",children:"✓"})}),e.jsxs("span",{className:"font-medium mr-3",children:[String.fromCharCode(65+g),"."]}),e.jsx("span",{className:"flex-1",children:l.text})]})},l.id)})]}),x=()=>{switch(s.type){case"multiple":return a();case"boolean":return d();case"short_answer":return h();case"image":return m();case"checkbox":return p();default:return e.jsx("div",{children:"Loại câu hỏi không được hỗ trợ"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["Câu hỏi ",r," / ",s.points," điểm"]}),e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[s.type==="multiple"&&"Trắc nghiệm",s.type==="boolean"&&"Đúng/Sai",s.type==="short_answer"&&"Điền từ",s.type==="image"&&"Hình ảnh",s.type==="checkbox"&&"Nhiều lựa chọn"]})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:s.text})]}),x()]})},O=({questions:s,currentQuestionIndex:r,answers:t,onQuestionSelect:n})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-3",children:"Điều hướng nhanh"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:s.map((a,d)=>e.jsx("button",{onClick:()=>n(d),className:`w-8 h-8 rounded text-xs font-medium transition-colors ${d===r?"bg-blue-500 text-white":t[a.id]?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:d+1},a.id))})]}),P=({modalControls:s,onConfirmExit:r,onConfirmSubmit:t,unansweredQuestions:n,onGoToQuestion:a})=>e.jsxs(e.Fragment,{children:[s.showExitModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bạn có chắc muốn thoát?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Tiến độ của bạn sẽ bị mất nếu thoát bây giờ."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>s.setShowExitModal(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Tiếp tục làm bài"}),e.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Thoát"})]})]})}),s.showSubmitModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Xác nhận nộp bài"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Bạn có chắc chắn muốn nộp bài? Sau khi nộp sẽ không thể thay đổi đáp án."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>s.setShowSubmitModal(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Hủy"}),e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Nộp bài"})]})]})}),s.showUnansweredModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Còn câu hỏi chưa trả lời"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Bạn còn ",n.length," câu hỏi chưa trả lời:"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto mb-6",children:n.map((d,h)=>e.jsxs("button",{onClick:()=>{s.setShowUnansweredModal(!1),a(h)},className:"block w-full text-left p-2 hover:bg-gray-100 rounded text-blue-600 hover:text-blue-800",children:["Câu ",h+1,": ",d.text.slice(0,50),"..."]},d.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>s.setShowUnansweredModal(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Tiếp tục làm bài"}),e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Nộp bài luôn"})]})]})})]}),W=()=>{const{quiz:s,loading:r,error:t}=$();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Đang tải quiz..."})]})}):t||!s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Không thể tải quiz"}),e.jsx("p",{className:"text-gray-600",children:t||"Quiz không tồn tại"})]})}):e.jsx(F,{quiz:s})},F=({quiz:s})=>{const{session:r,updateAnswer:t,setCurrentQuestion:n,completeQuiz:a,getUnansweredQuestions:d,progress:h}=U({quiz:s}),{formattedTime:m,isTimeRunningOut:p,isTimeCritical:x,percentage:l}=L({onTimeUp:a,isActive:!r.isCompleted}),{goToNextQuestion:g,goToPreviousQuestion:o,goToQuestion:i,handleExitQuiz:u,confirmExitQuiz:N,handleSubmitQuiz:w,isFirstQuestion:v,isLastQuestion:b,modalControls:f}=I({questions:s.questions,currentQuestionIndex:r.currentQuestionIndex,onQuestionChange:n,answers:r.answers}),j=s.questions[r.currentQuestionIndex];return r.isCompleted?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Đang xử lý kết quả..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Thoát"})]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:s.title})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(D,{current:r.currentQuestionIndex+1,total:s.questions.length,percentage:h}),e.jsx(B,{timeLeft:m,isWarning:p,isCritical:x,percentage:l})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(O,{questions:s.questions,currentQuestionIndex:r.currentQuestionIndex,answers:r.answers,onQuestionSelect:i})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[e.jsx(_,{question:j,questionNumber:r.currentQuestionIndex+1,value:r.answers[j.id],onChange:y=>t(j.id,y)}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t",children:[e.jsxs("button",{onClick:o,disabled:v,className:`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all ${v?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700 shadow-sm hover:shadow-md"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Câu trước"})]}),e.jsx("div",{className:"flex space-x-3",children:b?e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-8 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm hover:shadow-md transition-all",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Nộp bài"})]}):e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-sm hover:shadow-md transition-all",children:[e.jsx("span",{children:"Câu tiếp"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})})]})}),e.jsx(P,{modalControls:f,onConfirmExit:N,onConfirmSubmit:a,unansweredQuestions:d(),onGoToQuestion:i}),p&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-600 rounded-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"⏰"}),e.jsx("span",{className:"font-medium",children:x?"Chỉ còn ít hơn 1 phút! Hãy hoàn thành ngay.":"Sắp hết giờ! Chỉ còn 10% thời gian."})]})]})};export{W as default};
