import{a as t,u as e,e as i,r as s,f as a,j as r,g as n,h as u,i as c}from"./index-BcvsJ6SD.js";import h from"./QuizList-CKYQv5H4.js";const l=()=>{const{t:l}=t(),o=e(t=>t.auth.user),d=e(t=>t.quiz.quizzes),f=e(t=>t.quiz.loading||t.quiz.isLoading),z=i(),[g,x]=s.useState([]),[m,q]=s.useState(!0),[v,p]=s.useState(null);return s.useEffect(()=>{if(!o)return;if(0===d.length&&!f)return void z(a({user:o})).unwrap().catch(()=>{p(l("favorites.loadError","Không thể tải danh sách quiz. Vui lòng kiểm tra kết nối mạng hoặc thử lại sau.")),q(!1)});(async()=>{q(!0);try{const t=n(u,"user_favorites",o.uid),e=await c(t);if(e.exists()){const t=e.data().quizIds||[];x(d.filter(e=>t.includes(e.id)))}else x([]);p(null)}catch(t){p(l("favorites.fetchError","Không thể tải quiz yêu thích."))}q(!1)})()},[o,d,f,z]),o?v?r.jsx("div",{className:"p-8 text-center text-red-600",children:v}):m||f?r.jsx("div",{className:"p-8 text-center",children:l("loading","Đang tải...")}):r.jsx(h,{quizzes:g,title:l("favorites.title","Quiz Yêu Thích")}):r.jsx("div",{className:"p-8 text-center",children:l("favorites.loginRequired","Bạn cần đăng nhập để xem quiz yêu thích.")})};export{l as default};
