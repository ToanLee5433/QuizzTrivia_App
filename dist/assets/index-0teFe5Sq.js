const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/QuizPreviewPage-BjiCzDAD.js","assets/ReviewForm-DFyaBPyv.js","assets/x-sV7BFGxA.js","assets/send-CSXJnp51.js","assets/message-square-iM3Tfj7y.js","assets/book-open-BT7ZWvad.js","assets/play-BU8_lzyw.js","assets/QuizReviewsPage-C9UYMSXJ.js","assets/calendar-CpInk3DW.js","assets/chart-column-DFFU1UK5.js","assets/RealQuizListPage-CLtW1A-R.js","assets/realDataService-Du34vTjp.js","assets/Profile-D0fd3ETu.js","assets/pen-line-Che2o0Bt.js","assets/trophy-BN99QkA-.js","assets/search-B4lNefS0.js","assets/arrow-up-DE2lsYAV.js","assets/rotate-ccw-BV3v9_8w.js","assets/FavoritesPage-yEhIHb6x.js","assets/QuizList-B4TdZJd5.js","assets/CreateQuizPage-BkTFzS9-.js","assets/tag-CP0jCl7_.js","assets/circle-x-Dfvncfrb.js","assets/CreateQuizPage-DZrYvFpI.css","assets/EditQuizPageAdvanced-CcVQcVLB.js","assets/check-D89JMzBC.js","assets/trash-2-DcPTudVx.js","assets/plus-4hh2Ehcx.js","assets/circle-alert-zBFyIZbN.js","assets/save-DMMKUgMo.js","assets/Creator-CbjrS4pR.js","assets/MyQuizzesPage-B1MjgLp5.js","assets/square-pen-BKijrNdk.js","assets/Admin-D9dWVymH.js","assets/AdminLayout-DR5EOYqR.js","assets/AdminQuizManagement-DYWVknQH.js","assets/AdminUserManagement-C-98yCNM.js","assets/StatsDashboard-B-hdyFOt.js","assets/AdminStats-CfO548EH.js","assets/award-BzKFJH-3.js","assets/CategoryManagement-Cu6737RB.js","assets/MultiplayerPage-Bjgqvd5J.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i={exports:{}},s={},a={exports:{}},o={},l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function _(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||w}function S(){}function E(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||w}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=_.prototype;var T=E.prototype=new S;T.constructor=E,x(T,_.prototype),T.isPureReactComponent=!0;var C=Array.isArray,N=Object.prototype.hasOwnProperty,I={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)N.call(t,r)&&!j.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return{$$typeof:l,type:e,key:s,ref:a,props:i,_owner:I.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var R=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function L(e,t,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var a=!1;if(null===e)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case l:case c:a=!0}}if(a)return i=i(a=e),e=""===r?"."+O(a,0):r,C(i)?(n="",null!=e&&(n=e.replace(R,"$&/")+"/"),L(i,t,n,"",function(e){return e})):null!=i&&(A(i)&&(i=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(R,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",C(e))for(var o=0;o<e.length;o++){var u=r+O(s=e[o],o);a+=L(s,t,n,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=b&&e[b]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),o=0;!(s=e.next()).done;)a+=L(s=s.value,t,n,u=r+O(s,o++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function D(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",function(e){return t.call(n,e,i++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},F={transition:null},U={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:F,ReactCurrentOwner:I};function V(){throw Error("act(...) is not supported in production builds of React.")}o.Children={map:D,forEach:function(e,t,n){D(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return D(e,function(){t++}),t},toArray:function(e){return D(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o.Component=_,o.Fragment=u,o.Profiler=h,o.PureComponent=E,o.StrictMode=d,o.Suspense=g,o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,o.act=V,o.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=x({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=I.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)N.call(t,c)&&!j.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:l,type:e.type,key:i,ref:s,props:r,_owner:a}},o.createContext=function(e){return(e={$$typeof:p,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},o.createElement=P,o.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},o.createRef=function(){return{current:null}},o.forwardRef=function(e){return{$$typeof:m,render:e}},o.isValidElement=A,o.lazy=function(e){return{$$typeof:v,_payload:{_status:-1,_result:e},_init:M}},o.memo=function(e,t){return{$$typeof:y,type:e,compare:void 0===t?null:t}},o.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},o.unstable_act=V,o.useCallback=function(e,t){return z.current.useCallback(e,t)},o.useContext=function(e){return z.current.useContext(e)},o.useDebugValue=function(){},o.useDeferredValue=function(e){return z.current.useDeferredValue(e)},o.useEffect=function(e,t){return z.current.useEffect(e,t)},o.useId=function(){return z.current.useId()},o.useImperativeHandle=function(e,t,n){return z.current.useImperativeHandle(e,t,n)},o.useInsertionEffect=function(e,t){return z.current.useInsertionEffect(e,t)},o.useLayoutEffect=function(e,t){return z.current.useLayoutEffect(e,t)},o.useMemo=function(e,t){return z.current.useMemo(e,t)},o.useReducer=function(e,t,n){return z.current.useReducer(e,t,n)},o.useRef=function(e){return z.current.useRef(e)},o.useState=function(e){return z.current.useState(e)},o.useSyncExternalStore=function(e,t,n){return z.current.useSyncExternalStore(e,t,n)},o.useTransition=function(){return z.current.useTransition()},o.version="18.3.1",a.exports=o;var $=a.exports;const q=r($);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=$,H=Symbol.for("react.element"),K=Symbol.for("react.fragment"),W=Object.prototype.hasOwnProperty,Q=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function X(e,t,n){var r,i={},s=null,a=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(a=t.ref),t)W.call(t,r)&&!G.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:H,type:e,key:s,ref:a,props:i,_owner:Q.current}}s.Fragment=K,s.jsx=X,s.jsxs=X,i.exports=s;var Y=i.exports,J={exports:{}},Z={},ee={exports:{}},te={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function w(e){if(m=!1,b(e),!p)if(null!==n(l))p=!0,A(x);else{var t=n(c);null!==t&&R(w,t.startTime-e)}}function x(t,i){p=!1,m&&(m=!1,y(E),E=-1),f=!0;var s=h;try{for(b(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!N());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),b(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&R(w,g.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,S=null,E=-1,T=5,C=-1;function N(){return!(e.unstable_now()-C<T)}function I(){if(null!==S){var t=e.unstable_now();C=t;var n=!0;try{n=S(!0,t)}finally{n?k():(_=!1,S=null)}}else _=!1}if("function"==typeof v)k=function(){v(I)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel,P=j.port2;j.port1.onmessage=I,k=function(){P.postMessage(null)}}else k=function(){g(I,0)};function A(e){S=e,_||(_=!0,k())}function R(t,n){E=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,A(x))},e.unstable_forceFrameRate=function(e){0>e||125<e||(T=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(y(E),E=-1):m=!0,R(w,s-a))):(r.sortIndex=o,t(l,r),p||f||(p=!0,A(x))),r},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(te),ee.exports=te;var ne=ee.exports,re=$,ie=ne;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ae=new Set,oe={};function le(e,t){ce(e,t),ce(e+"Capture",t)}function ce(e,t){for(oe[e]=t,e=0;e<t.length;e++)ae.add(t[e])}var ue=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),de=Object.prototype.hasOwnProperty,he=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fe={},pe={};function me(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ge[e]=new me(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ge[t]=new me(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ge[e]=new me(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ge[e]=new me(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ge[e]=new me(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ge[e]=new me(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ge[e]=new me(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ge[e]=new me(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ge[e]=new me(e,5,!1,e.toLowerCase(),null,!1,!1)});var ye=/[\-:]([a-z])/g;function ve(e){return e[1].toUpperCase()}function be(e,t,n,r){var i=ge.hasOwnProperty(t)?ge[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!de.call(pe,e)||!de.call(fe,e)&&(he.test(e)?pe[e]=!0:(fe[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ye,ve);ge[t]=new me(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ye,ve);ge[t]=new me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ye,ve);ge[t]=new me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ge[e]=new me(e,1,!1,e.toLowerCase(),null,!1,!1)}),ge.xlinkHref=new me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ge[e]=new me(e,1,!1,e.toLowerCase(),null,!0,!0)});var we=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),ke=Symbol.for("react.portal"),_e=Symbol.for("react.fragment"),Se=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Te=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),Oe=Symbol.iterator;function Le(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Oe&&e[Oe]||e["@@iterator"])?e:null}var De,Me=Object.assign;function ze(e){if(void 0===De)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);De=t&&t[1]||""}return"\n"+De+e}var Fe=!1;function Ue(e,t){if(!e||Fe)return"";Fe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{Fe=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ze(e):""}function Ve(e){switch(e.tag){case 5:return ze(e.type);case 16:return ze("Lazy");case 13:return ze("Suspense");case 19:return ze("SuspenseList");case 0:case 2:case 15:return e=Ue(e.type,!1);case 11:return e=Ue(e.type.render,!1);case 1:return e=Ue(e.type,!0);default:return""}}function $e(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _e:return"Fragment";case ke:return"Portal";case Ee:return"Profiler";case Se:return"StrictMode";case Ie:return"Suspense";case je:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ce:return(e.displayName||"Context")+".Consumer";case Te:return(e._context.displayName||"Context")+".Provider";case Ne:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Pe:return null!==(t=e.displayName||null)?t:$e(e.type)||"Memo";case Ae:t=e._payload,e=e._init;try{return $e(e(t))}catch(n){}}return null}function qe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(t);case 8:return t===Se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Be(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function He(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ke(e){e._valueTracker||(e._valueTracker=function(e){var t=He(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function We(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=He(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Qe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ge(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Be(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ye(e,t){null!=(t=t.checked)&&be(e,"checked",t,!1)}function Je(e,t){Ye(e,t);var n=Be(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?et(e,t.type,n):t.hasOwnProperty("defaultValue")&&et(e,t.type,Be(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ze(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function et(e,t,n){"number"===t&&Qe(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tt=Array.isArray;function nt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Be(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function rt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(se(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function it(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(se(92));if(tt(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Be(n)}}function st(e,t){var n=Be(t.value),r=Be(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function at(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ot(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ot(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ct,ut,dt=(ut=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ut(e,t)})}:ut);function ht(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ft.hasOwnProperty(e)&&ft[e]?(""+t).trim():t+"px"}function gt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ft).forEach(function(e){pt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ft[t]=ft[e]})});var yt=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(e,t){if(t){if(yt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(se(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(se(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(se(62))}}function bt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function xt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,_t=null,St=null;function Et(e){if(e=bs(e)){if("function"!=typeof kt)throw Error(se(280));var t=e.stateNode;t&&(t=xs(t),kt(e.stateNode,e.type,t))}}function Tt(e){_t?St?St.push(e):St=[e]:_t=e}function Ct(){if(_t){var e=_t,t=St;if(St=_t=null,Et(e),t)for(e=0;e<t.length;e++)Et(t[e])}}function Nt(e,t){return e(t)}function It(){}var jt=!1;function Pt(e,t,n){if(jt)return e(t,n);jt=!0;try{return Nt(e,t,n)}finally{jt=!1,(null!==_t||null!==St)&&(It(),Ct())}}function At(e,t){var n=e.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(se(231,t,typeof n));return n}var Rt=!1;if(ue)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ut){Rt=!1}function Lt(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Dt=!1,Mt=null,zt=!1,Ft=null,Ut={onError:function(e){Dt=!0,Mt=e}};function Vt(e,t,n,r,i,s,a,o,l){Dt=!1,Mt=null,Lt.apply(Ut,arguments)}function $t(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Bt(e){if($t(e)!==e)throw Error(se(188))}function Ht(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=$t(e)))throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Bt(i),e;if(s===r)return Bt(i),t;s=s.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(3!==n.tag)throw Error(se(188));return n.stateNode.current===n?e:t}(e))?Kt(e):null}function Kt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Kt(e);if(null!==t)return t;e=e.sibling}return null}var Wt=ie.unstable_scheduleCallback,Qt=ie.unstable_cancelCallback,Gt=ie.unstable_shouldYield,Xt=ie.unstable_requestPaint,Yt=ie.unstable_now,Jt=ie.unstable_getCurrentPriorityLevel,Zt=ie.unstable_ImmediatePriority,en=ie.unstable_UserBlockingPriority,tn=ie.unstable_NormalPriority,nn=ie.unstable_LowPriority,rn=ie.unstable_IdlePriority,sn=null,an=null;var on=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ln(e)/cn|0)|0},ln=Math.log,cn=Math.LN2;var un=64,dn=4194304;function hn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=hn(o):0!==(s&=a)&&(r=hn(s))}else 0!==(a=n&~i)?r=hn(a):0!==s&&(r=hn(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-on(t)),r|=e[n],t&=~i;return r}function pn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=un;return!(4194240&(un<<=1))&&(un=64),e}function yn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-on(t)]=n}function bn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wn=0;function xn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var kn,_n,Sn,En,Tn,Cn=!1,Nn=[],In=null,jn=null,Pn=null,An=new Map,Rn=new Map,On=[],Ln="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dn(e,t){switch(e){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":An.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(t.pointerId)}}function Mn(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bs(t))&&_n(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zn(e){var t=vs(e.target);if(null!==t){var n=$t(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qt(n)))return e.blockedOn=t,void Tn(e.priority,function(){Sn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&_n(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);wt=r,n.target.dispatchEvent(r),wt=null,t.shift()}return!0}function Un(e,t,n){Fn(e)&&n.delete(t)}function Vn(){Cn=!1,null!==In&&Fn(In)&&(In=null),null!==jn&&Fn(jn)&&(jn=null),null!==Pn&&Fn(Pn)&&(Pn=null),An.forEach(Un),Rn.forEach(Un)}function $n(e,t){e.blockedOn===t&&(e.blockedOn=null,Cn||(Cn=!0,ie.unstable_scheduleCallback(ie.unstable_NormalPriority,Vn)))}function qn(e){function t(t){return $n(t,e)}if(0<Nn.length){$n(Nn[0],e);for(var n=1;n<Nn.length;n++){var r=Nn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==In&&$n(In,e),null!==jn&&$n(jn,e),null!==Pn&&$n(Pn,e),An.forEach(t),Rn.forEach(t),n=0;n<On.length;n++)(r=On[n]).blockedOn===e&&(r.blockedOn=null);for(;0<On.length&&null===(n=On[0]).blockedOn;)zn(n),null===n.blockedOn&&On.shift()}var Bn=we.ReactCurrentBatchConfig,Hn=!0;function Kn(e,t,n,r){var i=wn,s=Bn.transition;Bn.transition=null;try{wn=1,Qn(e,t,n,r)}finally{wn=i,Bn.transition=s}}function Wn(e,t,n,r){var i=wn,s=Bn.transition;Bn.transition=null;try{wn=4,Qn(e,t,n,r)}finally{wn=i,Bn.transition=s}}function Qn(e,t,n,r){if(Hn){var i=Xn(e,t,n,r);if(null===i)Bi(e,t,r,Gn,n),Dn(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return In=Mn(In,e,t,n,r,i),!0;case"dragenter":return jn=Mn(jn,e,t,n,r,i),!0;case"mouseover":return Pn=Mn(Pn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return An.set(s,Mn(An.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rn.set(s,Mn(Rn.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dn(e,r),4&t&&-1<Ln.indexOf(e)){for(;null!==i;){var s=bs(i);if(null!==s&&kn(s),null===(s=Xn(e,t,n,r))&&Bi(e,t,r,Gn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Bi(e,t,r,null,n)}}var Gn=null;function Xn(e,t,n,r){if(Gn=null,null!==(e=vs(e=xt(r))))if(null===(t=$t(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gn=e,null}function Yn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case en:return 4;case tn:case nn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Jn=null,Zn=null,er=null;function tr(){if(er)return er;var e,t,n=Zn,r=n.length,i="value"in Jn?Jn.value:Jn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return er=i.slice(e,1<t?1-t:void 0)}function nr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ir(){return!1}function sr(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:ir,this.isPropagationStopped=ir,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,or,lr,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=sr(cr),dr=Me({},cr,{view:0,detail:0}),hr=sr(dr),fr=Me({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(ar=e.screenX-lr.screenX,or=e.screenY-lr.screenY):or=ar=0,lr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:or}}),pr=sr(fr),mr=sr(Me({},fr,{dataTransfer:0})),gr=sr(Me({},dr,{relatedTarget:0})),yr=sr(Me({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=Me({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=sr(vr),wr=sr(Me({},cr,{data:0})),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function Er(){return Sr}var Tr=Me({},dr,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?nr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=sr(Tr),Nr=sr(Me({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=sr(Me({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),jr=sr(Me({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=Me({},fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=sr(Pr),Rr=[9,13,27,32],Or=ue&&"CompositionEvent"in window,Lr=null;ue&&"documentMode"in document&&(Lr=document.documentMode);var Dr=ue&&"TextEvent"in window&&!Lr,Mr=ue&&(!Or||Lr&&8<Lr&&11>=Lr),zr=String.fromCharCode(32),Fr=!1;function Ur(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var $r=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Hr(e,t,n,r){Tt(r),0<(t=Ki(t,"onChange")).length&&(n=new ur("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,Wr=null;function Qr(e){zi(e,0)}function Gr(e){if(We(ws(e)))return e}function Xr(e,t){if("change"===e)return t}var Yr=!1;if(ue){var Jr;if(ue){var Zr="oninput"in document;if(!Zr){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zr="function"==typeof ei.oninput}Jr=Zr}else Jr=!1;Yr=Jr&&(!document.documentMode||9<document.documentMode)}function ti(){Kr&&(Kr.detachEvent("onpropertychange",ni),Wr=Kr=null)}function ni(e){if("value"===e.propertyName&&Gr(Wr)){var t=[];Hr(t,Wr,e,xt(e)),Pt(Qr,t)}}function ri(e,t,n){"focusin"===e?(ti(),Wr=n,(Kr=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Wr)}function si(e,t){if("click"===e)return Gr(t)}function ai(e,t){if("input"===e||"change"===e)return Gr(t)}var oi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function li(e,t){if(oi(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!de.call(t,i)||!oi(e[i],t[i]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,r=ci(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ci(r)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=Qe();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Qe((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=hi(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==r&&fi(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ui(n,s);var a=ui(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=ue&&"documentMode"in document&&11>=document.documentMode,gi=null,yi=null,vi=null,bi=!1;function wi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==Qe(r)||("selectionStart"in(r=gi)&&fi(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vi&&li(vi,r)||(vi=r,0<(r=Ki(yi,"onSelect")).length&&(t=new ur("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gi)))}function xi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},_i={},Si={};function Ei(e){if(_i[e])return _i[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return _i[e]=n[t];return e}ue&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ti=Ei("animationend"),Ci=Ei("animationiteration"),Ni=Ei("animationstart"),Ii=Ei("transitionend"),ji=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){ji.set(e,t),le(t,[e])}for(var Ri=0;Ri<Pi.length;Ri++){var Oi=Pi[Ri];Ai(Oi.toLowerCase(),"on"+(Oi[0].toUpperCase()+Oi.slice(1)))}Ai(Ti,"onAnimationEnd"),Ai(Ci,"onAnimationIteration"),Ai(Ni,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(Ii,"onTransitionEnd"),ce("onMouseEnter",["mouseout","mouseover"]),ce("onMouseLeave",["mouseout","mouseover"]),ce("onPointerEnter",["pointerout","pointerover"]),ce("onPointerLeave",["pointerout","pointerover"]),le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),le("onBeforeInput",["compositionend","keypress","textInput","paste"]),le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Mi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,o,l){if(Vt.apply(this,arguments),Dt){if(!Dt)throw Error(se(198));var c=Mt;Dt=!1,Mt=null,zt||(zt=!0,Ft=c)}}(r,t,void 0,e),e.currentTarget=null}function zi(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mi(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mi(i,o,c),s=l}}}if(zt)throw e=Ft,zt=!1,Ft=null,e}function Fi(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(qi(t,e,2,!1),n.add(r))}function Ui(e,t,n){var r=0;t&&(r|=4),qi(n,e,r,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function $i(e){if(!e[Vi]){e[Vi]=!0,ae.forEach(function(t){"selectionchange"!==t&&(Di.has(t)||Ui(t,!1,e),Ui(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Ui("selectionchange",!1,t))}}function qi(e,t,n,r){switch(Yn(t)){case 1:var i=Kn;break;case 4:i=Wn;break;default:i=Qn}n=i.bind(null,t,n,e),i=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bi(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pt(function(){var r=s,i=xt(n),a=[];e:{var o=ji.get(e);if(void 0!==o){var l=ur,c=e;switch(e){case"keypress":if(0===nr(n))break e;case"keydown":case"keyup":l=Cr;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ir;break;case Ti:case Ci:case Ni:l=yr;break;case Ii:l=jr;break;case"scroll":l=hr;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nr}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=At(p,h))&&u.push(Hi(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===wt||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=$t(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nr,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:ws(l),f=null==c?o:ws(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,vs(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Wi(f))p++;for(f=0,m=h;m;m=Wi(m))f++;for(;0<p-f;)u=Wi(u),p--;for(;0<f-p;)h=Wi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wi(u),h=Wi(h)}u=null}else u=null;null!==l&&Qi(a,o,l,u,!1),null!==c&&null!==d&&Qi(a,d,c,u,!0)}if("select"===(l=(o=r?ws(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xr;else if(Br(o))if(Yr)g=ai;else{g=ii;var y=ri}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,r))?Hr(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&et(o,"number",o.value)),y=r?ws(r):window,e){case"focusin":(Br(y)||"true"===y.contentEditable)&&(gi=y,yi=r,vi=null);break;case"focusout":vi=yi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(a,n,i);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":wi(a,n,i)}var v;if(Or)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $r?Ur(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mr&&"ko"!==n.locale&&($r||"onCompositionStart"!==b?"onCompositionEnd"===b&&$r&&(v=tr()):(Zn="value"in(Jn=i)?Jn.value:Jn.textContent,$r=!0)),0<(y=Ki(r,b)).length&&(b=new wr(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vr(n))&&(b.data=v))),(v=Dr?function(e,t){switch(e){case"compositionend":return Vr(t);case"keypress":return 32!==t.which?null:(Fr=!0,zr);case"textInput":return(e=t.data)===zr&&Fr?null:e;default:return null}}(e,n):function(e,t){if($r)return"compositionend"===e||!Or&&Ur(e,t)?(e=tr(),er=Zn=Jn=null,$r=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mr&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Ki(r,"onBeforeInput")).length&&(i=new wr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}zi(a,t)})}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ki(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=At(e,n))&&r.unshift(Hi(e,s,i)),null!=(s=At(e,t))&&r.push(Hi(e,s,i))),e=e.return}return r}function Wi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qi(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=At(n,s))&&a.unshift(Hi(n,l,o)):i||null!=(l=At(n,s))&&a.push(Hi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Yi(e){return("string"==typeof e?e:""+e).replace(Gi,"\n").replace(Xi,"")}function Ji(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(se(425))}function Zi(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"==typeof setTimeout?setTimeout:void 0,is="function"==typeof clearTimeout?clearTimeout:void 0,ss="function"==typeof Promise?Promise:void 0,as="function"==typeof queueMicrotask?queueMicrotask:void 0!==ss?function(e){return ss.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qn(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ps="__reactContainer$"+ds,ms="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ws(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(se(33))}function xs(e){return e[fs]||null}var ks=[],_s=-1;function Ss(e){return{current:e}}function Es(e){0>_s||(e.current=ks[_s],ks[_s]=null,_s--)}function Ts(e,t){_s++,ks[_s]=e.current,e.current=t}var Cs={},Ns=Ss(Cs),Is=Ss(!1),js=Cs;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function As(e){return null!=(e=e.childContextTypes)}function Rs(){Es(Is),Es(Ns)}function Os(e,t,n){if(Ns.current!==Cs)throw Error(se(168));Ts(Ns,t),Ts(Is,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(se(108,qe(e)||"Unknown",i));return Me({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,js=Ns.current,Ts(Ns,e),Ts(Is,Is.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=Ls(e,t,js),r.__reactInternalMemoizedMergedChildContext=e,Es(Is),Es(Ns),Ts(Ns,e)):Es(Is),Ts(Is,n)}var zs=null,Fs=!1,Us=!1;function Vs(e){null===zs?zs=[e]:zs.push(e)}function $s(){if(!Us&&null!==zs){Us=!0;var e=0,t=wn;try{var n=zs;for(wn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zs=null,Fs=!1}catch(i){throw null!==zs&&(zs=zs.slice(e+1)),Wt(Zt,$s),i}finally{wn=t,Us=!1}}return null}var qs=[],Bs=0,Hs=null,Ks=0,Ws=[],Qs=0,Gs=null,Xs=1,Ys="";function Js(e,t){qs[Bs++]=Ks,qs[Bs++]=Hs,Hs=e,Ks=t}function Zs(e,t,n){Ws[Qs++]=Xs,Ws[Qs++]=Ys,Ws[Qs++]=Gs,Gs=e;var r=Xs;e=Ys;var i=32-on(r)-1;r&=~(1<<i),n+=1;var s=32-on(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xs=1<<32-on(t)+i|n<<i|r,Ys=s+e}else Xs=1<<s|n<<i|r,Ys=e}function ea(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ta(e){for(;e===Hs;)Hs=qs[--Bs],qs[Bs]=null,Ks=qs[--Bs],qs[Bs]=null;for(;e===Gs;)Gs=Ws[--Qs],Ws[Qs]=null,Ys=Ws[--Qs],Ws[Qs]=null,Xs=Ws[--Qs],Ws[Qs]=null}var na=null,ra=null,ia=!1,sa=null;function aa(e,t){var n=ju(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gs?{id:Xs,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=ju(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return!(!(1&e.mode)||128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(se(418));t=cs(n.nextSibling);var r=na;t&&oa(e,t)?aa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(se(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(se(418));for(;t;)aa(e,t),t=cs(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?cs(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=cs(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===sa?sa=[e]:sa.push(e)}var ma=we.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Au(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Du(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===_e?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Ae&&va(s)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Ru(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Ou(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Du(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case xe:return(n=Ru(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case ke:return(t=Mu(t,e.mode,n)).return=e,t;case Ae:return d(e,(0,t._init)(t._payload),n)}if(tt(t)||Le(t))return(t=Ou(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case xe:return n.key===i?l(e,t,n,r):null;case ke:return n.key===i?c(e,t,n,r):null;case Ae:return h(e,t,(i=n._init)(n._payload),r)}if(tt(n)||Le(n))return null!==i?null:u(e,t,n,r,null);ya(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case xe:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case ke:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Ae:return f(e,t,n,(0,r._init)(r._payload),i)}if(tt(r)||Le(r))return u(t,e=e.get(n)||null,r,i,null);ya(t,r)}return null}return function o(l,c,u,p){if("object"==typeof u&&null!==u&&u.type===_e&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case xe:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===_e){if(7===g.tag){n(l,g.sibling),(c=i(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Ae&&va(m)===g.type){n(l,g.sibling),(c=i(g,u.props)).ref=ga(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===_e?((c=Ou(u.props.children,l.mode,p,u.key)).return=l,l=c):((p=Ru(u.type,u.key,u.props,null,l.mode,p)).ref=ga(l,c,u),p.return=l,l=p)}return a(l);case ke:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Mu(u,l.mode,p)).return=l,l=c}return a(l);case Ae:return o(l,c,(g=u._init)(u._payload),p)}if(tt(u))return function(i,a,o,l){for(var c=null,u=null,p=a,m=a=0,g=null;null!==p&&m<o.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(i,p,o[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,p=g}if(m===o.length)return n(i,p),ia&&Js(i,m),c;if(null===p){for(;m<o.length;m++)null!==(p=d(i,o[m],l))&&(a=s(p,a,m),null===u?c=p:u.sibling=p,u=p);return ia&&Js(i,m),c}for(p=r(i,p);m<o.length;m++)null!==(g=f(p,i,m,o[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach(function(e){return t(i,e)}),ia&&Js(i,m),c}(l,c,u,p);if(Le(u))return function(i,a,o,l){var c=Le(o);if("function"!=typeof c)throw Error(se(150));if(null==(o=c.call(o)))throw Error(se(151));for(var u=c=null,p=a,m=a=0,g=null,y=o.next();null!==p&&!y.done;m++,y=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=h(i,p,y.value,l);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=s(v,a,m),null===u?c=v:u.sibling=v,u=v,p=g}if(y.done)return n(i,p),ia&&Js(i,m),c;if(null===p){for(;!y.done;m++,y=o.next())null!==(y=d(i,y.value,l))&&(a=s(y,a,m),null===u?c=y:u.sibling=y,u=y);return ia&&Js(i,m),c}for(p=r(i,p);!y.done;m++,y=o.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(i,e)}),ia&&Js(i,m),c}(l,c,u,p);ya(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,u)).return=l,l=c):(n(l,c),(c=Du(u,l.mode,p)).return=l,l=c),a(l)):n(l,c)}}var wa=ba(!0),xa=ba(!1),ka=Ss(null),_a=null,Sa=null,Ea=null;function Ta(){Ea=Sa=_a=null}function Ca(e){var t=ka.current;Es(ka),e._currentValue=t}function Na(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){_a=e,Ea=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vl=!0),e.firstContext=null)}function ja(e){var t=e._currentValue;if(Ea!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===_a)throw Error(se(308));Sa=e,_a.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Pa=null;function Aa(e){null===Pa?Pa=[e]:Pa.push(e)}function Ra(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Aa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Oa(e,r)}function Oa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var La=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Cc){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Oa(e,n)}return null===(i=r.interleaved)?(t.next=t,Aa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Oa(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bn(e,n)}}function Va(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $a(e,t,n,r){var i=e.updateQueue;La=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=Me({},d,h);break e;case 2:La=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Lc|=a,e.lanes=a,e.memoizedState=d}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(se(191,i));i.call(r)}}}var Ba={},Ha=Ss(Ba),Ka=Ss(Ba),Wa=Ss(Ba);function Qa(e){if(e===Ba)throw Error(se(174));return e}function Ga(e,t){switch(Ts(Wa,t),Ts(Ka,e),Ts(Ha,Ba),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lt(null,"");break;default:t=lt(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Es(Ha),Ts(Ha,t)}function Xa(){Es(Ha),Es(Ka),Es(Wa)}function Ya(e){Qa(Wa.current);var t=Qa(Ha.current),n=lt(t,e.type);t!==n&&(Ts(Ka,e),Ts(Ha,n))}function Ja(e){Ka.current===e&&(Es(Ha),Es(Ka))}var Za=Ss(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=we.ReactCurrentDispatcher,io=we.ReactCurrentBatchConfig,so=0,ao=null,oo=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(se(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,s){if(so=s,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:el,e=n(r,i),uo){s=0;do{if(uo=!1,ho=0,25<=s)throw Error(se(301));s+=1,lo=oo=null,t.updateQueue=null,ro.current=tl,e=n(r,i)}while(uo)}if(ro.current=Jo,t=null!==oo&&null!==oo.next,so=0,lo=oo=ao=null,co=!1,t)throw Error(se(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?ao.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===oo){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=oo.next;var t=null===lo?ao.memoizedState:lo.next;if(null!==t)lo=t,oo=e;else{if(null===e)throw Error(se(310));e={memoizedState:(oo=e).memoizedState,baseState:oo.baseState,baseQueue:oo.baseQueue,queue:oo.queue,next:null},null===lo?ao.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"==typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(se(311));n.lastRenderedReducer=e;var r=oo,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((so&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,ao.lanes|=u,Lc|=u}c=c.next}while(null!==c&&c!==s);null===l?a=r:l.next=o,oi(r,t.memoizedState)||(vl=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ao.lanes|=s,Lc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ko(e){var t=bo(),n=t.queue;if(null===n)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);oi(s,t.memoizedState)||(vl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _o(){}function So(e,t){var n=ao,r=bo(),i=t(),s=!oi(r.memoizedState,i);if(s&&(r.memoizedState=i,vl=!0),r=r.queue,Do(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,To.bind(null,n,r,i,t),void 0,null),null===Nc)throw Error(se(349));30&so||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Io(e)}function Co(e,t,n){return n(function(){No(t)&&Io(e)})}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(r){return!0}}function Io(e){var t=Oa(e,1);null!==t&&tu(t,e,1,-1)}function jo(e){var t=vo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,ao,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ao(){return bo().memoizedState}function Ro(e,t,n,r){var i=vo();ao.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==oo){var a=oo.memoizedState;if(s=a.destroy,null!==r&&mo(r,a.deps))return void(i.memoizedState=Po(t,n,s,r))}ao.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Lo(e,t){return Ro(8390656,8,e,t)}function Do(e,t){return Oo(2048,8,e,t)}function Mo(e,t){return Oo(4,2,e,t)}function zo(e,t){return Oo(4,4,e,t)}function Fo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!=n?n.concat([e]):null,Oo(4,4,Fo.bind(null,t,e),n)}function Vo(){}function $o(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bo(e,t,n){return 21&so?(oi(n,t)||(n=gn(),ao.lanes|=n,Lc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=n)}function Ho(e,t){var n=wn;wn=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wn=n,io.transition=r}}function Ko(){return bo().memoizedState}function Wo(e,t,n){var r=eu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Go(e))Xo(t,n);else if(null!==(n=Ra(e,t,n,r))){tu(n,e,r,Zc()),Yo(n,t,r)}}function Qo(e,t,n){var r=eu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Go(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(i.next=i,Aa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ra(e,t,i,r))&&(tu(n,e,r,i=Zc()),Yo(n,t,r))}}function Go(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bn(e,n)}}var Jo={readContext:ja,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:ja,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:ja,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ro(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,ao,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:jo,useDebugValue:Vo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ao,i=vo();if(ia){if(void 0===n)throw Error(se(407));n=n()}else{if(n=t(),null===Nc)throw Error(se(349));30&so||Eo(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Lo(Co.bind(null,r,s,e),[e]),r.flags|=2048,Po(9,To.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vo(),t=Nc.identifierPrefix;if(ia){var n=Ys;t=":"+t+"R"+(n=(Xs&~(1<<32-on(Xs)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},el={readContext:ja,useCallback:$o,useContext:ja,useEffect:Do,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:zo,useMemo:qo,useReducer:xo,useRef:Ao,useState:function(){return xo(wo)},useDebugValue:Vo,useDeferredValue:function(e){return Bo(bo(),oo.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1},tl={readContext:ja,useCallback:$o,useContext:ja,useEffect:Do,useImperativeHandle:Uo,useInsertionEffect:Mo,useLayoutEffect:zo,useMemo:qo,useReducer:ko,useRef:Ao,useState:function(){return ko(wo)},useDebugValue:Vo,useDeferredValue:function(e){var t=bo();return null===oo?t.memoizedState=e:Bo(t,oo.memoizedState,e)},useTransition:function(){return[ko(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1};function nl(e,t){if(e&&e.defaultProps){for(var n in t=Me({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Me({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var il={isMounted:function(e){return!!(e=e._reactInternals)&&$t(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zc(),i=eu(e),s=za(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Fa(e,s,i))&&(tu(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zc(),i=eu(e),s=za(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Fa(e,s,i))&&(tu(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zc(),r=eu(e),i=za(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Fa(e,i,r))&&(tu(t,e,r,n),Ua(t,e,r))}};function sl(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,r)||!li(i,s))}function al(e,t,n){var r=!1,i=Cs,s=t.contextType;return"object"==typeof s&&null!==s?s=ja(s):(i=As(t)?js:Ns.current,s=(r=null!=(r=t.contextTypes))?Ps(e,i):Cs),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=il,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ol(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&il.enqueueReplaceState(t,t.state,null)}function ll(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Da(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=ja(s):(s=As(t)?js:Ns.current,i.context=Ps(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(rl(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&il.enqueueReplaceState(i,i.state,null),$a(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function cl(e,t){try{var n="",r=t;do{n+=Ve(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ul(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var dl="function"==typeof WeakMap?WeakMap:Map;function hl(e,t,n){(n=za(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qc||(qc=!0,Bc=r)},n}function fl(e,t,n){(n=za(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new dl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function ml(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gl(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=za(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e)}var yl=we.ReactCurrentOwner,vl=!1;function bl(e,t,n,r){t.child=null===e?xa(t,null,n,r):wa(t,e.child,n,r)}function wl(e,t,n,r,i){n=n.render;var s=t.ref;return Ia(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||vl?(ia&&n&&ea(t),t.flags|=1,bl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ql(e,t,i))}function xl(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Pu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ru(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,kl(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,r)&&e.ref===t.ref)return ql(e,t,i)}return t.flags|=1,(e=Au(s,r)).ref=t.ref,e.return=t,t.child=e}function kl(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(li(s,r)&&e.ref===t.ref){if(vl=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,ql(e,t,i);131072&e.flags&&(vl=!0)}}return El(e,t,n,r,i)}function _l(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ts(Ac,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ts(Ac,Pc),Pc|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ts(Ac,Pc),Pc|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ts(Ac,Pc),Pc|=r;return bl(e,t,i,n),t.child}function Sl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function El(e,t,n,r,i){var s=As(n)?js:Ns.current;return s=Ps(t,s),Ia(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||vl?(ia&&r&&ea(t),t.flags|=1,bl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ql(e,t,i))}function Tl(e,t,n,r,i){if(As(n)){var s=!0;Ds(t)}else s=!1;if(Ia(t,i),null===t.stateNode)$l(e,t),al(t,n,r),ll(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=ja(c):c=Ps(t,c=As(n)?js:Ns.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ol(t,a,r,c),La=!1;var h=t.memoizedState;a.state=h,$a(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Is.current||La?("function"==typeof u&&(rl(t,n,u,r),l=t.memoizedState),(o=La||sl(t,n,o,r,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ma(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:nl(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=ja(l):l=Ps(t,l=As(n)?js:Ns.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ol(t,a,r,l),La=!1,h=t.memoizedState,a.state=h,$a(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Is.current||La?("function"==typeof f&&(rl(t,n,f,r),p=t.memoizedState),(c=La||sl(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cl(e,t,n,r,s,i)}function Cl(e,t,n,r,i,s){Sl(e,t);var a=!!(128&t.flags);if(!r&&!a)return i&&Ms(t,n,!1),ql(e,t,s);r=t.stateNode,yl.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wa(t,e.child,null,s),t.child=wa(t,null,o,s)):bl(e,t,o,s),t.memoizedState=r.state,i&&Ms(t,n,!0),t.child}function Nl(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Ga(e,t.containerInfo)}function Il(e,t,n,r,i){return fa(),pa(i),t.flags|=256,bl(e,t,n,r),t.child}var jl,Pl,Al,Rl,Ol={dehydrated:null,treeContext:null,retryLane:0};function Ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dl(e,t,n){var r,i=t.pendingProps,s=Za.current,a=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ts(Za,1&s),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},1&i||null===a?a=Lu(o,i,0,null):(a.childLanes=0,a.pendingProps=o),e=Ou(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ll(n),t.memoizedState=Ol,e):Ml(t,o));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,zl(e,t,a,r=ul(Error(se(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Lu({mode:"visible",children:r.children},i,0,null),(s=Ou(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&wa(t,e.child,null,a),t.child.memoizedState=Ll(a),t.memoizedState=Ol,s);if(!(1&t.mode))return zl(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var o=r.dgst;return r=o,zl(e,t,a,r=ul(s=Error(se(419)),r,void 0))}if(o=0!==(a&e.childLanes),vl||o){if(null!==(r=Nc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Oa(e,i),tu(r,e,i,-1))}return pu(),zl(e,t,a,r=ul(Error(se(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=cs(i.nextSibling),na=t,ia=!0,sa=null,null!==e&&(Ws[Qs++]=Xs,Ws[Qs++]=Ys,Ws[Qs++]=Gs,Xs=e.id,Ys=e.overflow,Gs=t),t=Ml(t,r.children),t.flags|=4096,t)}(e,t,o,i,r,s,n);if(a){a=i.fallback,o=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&o||t.child===s?(i=Au(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?a=Au(r,a):(a=Ou(a,o,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,o=null===(o=e.child.memoizedState)?Ll(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Ol,i}return e=(a=e.child).sibling,i=Au(a,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ml(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zl(e,t,n,r){return null!==r&&pa(r),wa(t,e.child,null,n),(e=Ml(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Na(e.return,t,n)}function Ul(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bl(e,t,r.children,n),2&(r=Za.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fl(e,n,t);else if(19===e.tag)Fl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ts(Za,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ul(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ul(t,!0,n,null,s);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function $l(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ql(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(se(153));if(null!==t.child){for(n=Au(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Au(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Bl(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Kl(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hl(t),null;case 1:case 17:return As(t.type)&&Rs(),Hl(t),null;case 3:return r=t.stateNode,Xa(),Es(Is),Es(Ns),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==sa&&(su(sa),sa=null))),Pl(e,t),Hl(t),null;case 5:Ja(t);var i=Qa(Wa.current);if(n=t.type,null!==e&&null!=t.stateNode)Al(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(se(166));return Hl(t),null}if(e=Qa(Ha.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hs]=t,r[fs]=s,e=!!(1&t.mode),n){case"dialog":Fi("cancel",r),Fi("close",r);break;case"iframe":case"object":case"embed":Fi("load",r);break;case"video":case"audio":for(i=0;i<Li.length;i++)Fi(Li[i],r);break;case"source":Fi("error",r);break;case"img":case"image":case"link":Fi("error",r),Fi("load",r);break;case"details":Fi("toggle",r);break;case"input":Xe(r,s),Fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fi("invalid",r);break;case"textarea":it(r,s),Fi("invalid",r)}for(var a in vt(n,s),i=null,s)if(s.hasOwnProperty(a)){var o=s[a];"children"===a?"string"==typeof o?r.textContent!==o&&(!0!==s.suppressHydrationWarning&&Ji(r.textContent,o,e),i=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==s.suppressHydrationWarning&&Ji(r.textContent,o,e),i=["children",""+o]):oe.hasOwnProperty(a)&&null!=o&&"onScroll"===a&&Fi("scroll",r)}switch(n){case"input":Ke(r),Ze(r,s,!0);break;case"textarea":Ke(r),at(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Zi)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ot(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[hs]=t,e[fs]=r,jl(e,t,!1,!1),t.stateNode=e;e:{switch(a=bt(n,r),n){case"dialog":Fi("cancel",e),Fi("close",e),i=r;break;case"iframe":case"object":case"embed":Fi("load",e),i=r;break;case"video":case"audio":for(i=0;i<Li.length;i++)Fi(Li[i],e);i=r;break;case"source":Fi("error",e),i=r;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),i=r;break;case"details":Fi("toggle",e),i=r;break;case"input":Xe(e,r),i=Ge(e,r),Fi("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Fi("invalid",e);break;case"textarea":it(e,r),i=rt(e,r),Fi("invalid",e)}for(s in vt(n,i),o=i)if(o.hasOwnProperty(s)){var l=o[s];"style"===s?gt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&dt(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&ht(e,l):"number"==typeof l&&ht(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(oe.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Fi("scroll",e):null!=l&&be(e,s,l,a))}switch(n){case"input":Ke(e),Ze(e,r,!1);break;case"textarea":Ke(e),at(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Be(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?nt(e,!!r.multiple,s,!1):null!=r.defaultValue&&nt(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hl(t),null;case 6:if(e&&null!=t.stateNode)Rl(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(se(166));if(n=Qa(Wa.current),Qa(Ha.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Ji(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Hl(t),null;case 13:if(Es(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&1&t.mode&&!(128&t.flags))ha(),fa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(se(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(se(317));s[hs]=t}else fa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hl(t),s=!1}else null!==sa&&(su(sa),sa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Za.current?0===Rc&&(Rc=3):pu())),null!==t.updateQueue&&(t.flags|=4),Hl(t),null);case 4:return Xa(),Pl(e,t),null===e&&$i(t.stateNode.containerInfo),Hl(t),null;case 10:return Ca(t.type._context),Hl(t),null;case 19:if(Es(Za),null===(s=t.memoizedState))return Hl(t),null;if(r=!!(128&t.flags),null===(a=s.rendering))if(r)Bl(s,!1);else{if(0!==Rc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=eo(e))){for(t.flags|=128,Bl(s,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(a=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ts(Za,1&Za.current|2),t.child}e=e.sibling}null!==s.tail&&Yt()>Vc&&(t.flags|=128,r=!0,Bl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Bl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!ia)return Hl(t),null}else 2*Yt()-s.renderingStartTime>Vc&&1073741824!==n&&(t.flags|=128,r=!0,Bl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=s.last)?n.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Yt(),t.sibling=null,n=Za.current,Ts(Za,r?1&n|2:1&n),t):(Hl(t),null);case 22:case 23:return uu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Pc)&&(Hl(t),6&t.subtreeFlags&&(t.flags|=8192)):Hl(t),null;case 24:case 25:return null}throw Error(se(156,t.tag))}function Wl(e,t){switch(ta(t),t.tag){case 1:return As(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Es(Is),Es(Ns),no(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(Es(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(se(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Es(Za),null;case 4:return Xa(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return uu(),null;default:return null}}jl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pl=function(){},Al=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qa(Ha.current);var s,a=null;switch(n){case"input":i=Ge(e,i),r=Ge(e,r),a=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),a=[];break;case"textarea":i=rt(e,i),r=rt(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zi)}for(c in vt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(oe.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(oe.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Fi("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Rl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ql=!1,Gl=!1,Xl="function"==typeof WeakSet?WeakSet:Set,Yl=null;function Jl(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){_u(e,t,r)}else n.current=null}function Zl(e,t,n){try{n()}catch(r){_u(e,t,r)}}var ec=!1;function tc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Zl(t,n,s)}i=i.next}while(i!==r)}}function nc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zi));else if(4!==r&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var cc=null,uc=!1;function dc(e,t,n){for(n=n.child;null!==n;)hc(e,t,n),n=n.sibling}function hc(e,t,n){if(an&&"function"==typeof an.onCommitFiberUnmount)try{an.onCommitFiberUnmount(sn,n)}catch(o){}switch(n.tag){case 5:Gl||Jl(n,t);case 6:var r=cc,i=uc;cc=null,dc(e,t,n),uc=i,null!==(cc=r)&&(uc?(e=cc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cc.removeChild(n.stateNode));break;case 18:null!==cc&&(uc?(e=cc,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),qn(e)):ls(cc,n.stateNode));break;case 4:r=cc,i=uc,cc=n.stateNode.containerInfo,uc=!0,dc(e,t,n),cc=r,uc=i;break;case 0:case 11:case 14:case 15:if(!Gl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(2&s||4&s)&&Zl(n,t,a),i=i.next}while(i!==r)}dc(e,t,n);break;case 1:if(!Gl&&(Jl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_u(n,t,o)}dc(e,t,n);break;case 21:dc(e,t,n);break;case 22:1&n.mode?(Gl=(r=Gl)||null!==n.memoizedState,dc(e,t,n),Gl=r):dc(e,t,n);break;default:dc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xl),t.forEach(function(t){var r=Cu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:cc=o.stateNode,uc=!1;break e;case 3:case 4:cc=o.stateNode.containerInfo,uc=!0;break e}o=o.return}if(null===cc)throw Error(se(160));hc(s,a,i),cc=null,uc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){_u(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),gc(e),4&r){try{tc(3,e,e.return),nc(3,e)}catch(m){_u(e,e.return,m)}try{tc(5,e,e.return)}catch(m){_u(e,e.return,m)}}break;case 1:pc(t,e),gc(e),512&r&&null!==n&&Jl(n,n.return);break;case 5:if(pc(t,e),gc(e),512&r&&null!==n&&Jl(n,n.return),32&e.flags){var i=e.stateNode;try{ht(i,"")}catch(m){_u(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&Ye(i,s),bt(o,a);var c=bt(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?gt(i,d):"dangerouslySetInnerHTML"===u?dt(i,d):"children"===u?ht(i,d):be(i,u,d,c)}switch(o){case"input":Je(i,s);break;case"textarea":st(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?nt(i,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fs]=s}catch(m){_u(e,e.return,m)}}break;case 6:if(pc(t,e),gc(e),4&r){if(null===e.stateNode)throw Error(se(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){_u(e,e.return,m)}}break;case 3:if(pc(t,e),gc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qn(t.containerInfo)}catch(m){_u(e,e.return,m)}break;case 4:default:pc(t,e),gc(e);break;case 13:pc(t,e),gc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Uc=Yt())),4&r&&fc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Gl=(c=Gl)||u,pc(t,e),Gl=c):pc(t,e),gc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Yl=e,u=e.child;null!==u;){for(d=Yl=u;null!==Yl;){switch(f=(h=Yl).child,h.tag){case 0:case 11:case 14:case 15:tc(4,h,h.return);break;case 1:Jl(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){_u(r,n,m)}}break;case 5:Jl(h,h.return);break;case 22:if(null!==h.memoizedState){wc(d);continue}}null!==f?(f.return=h,Yl=f):wc(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(o=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=mt("display",a))}catch(m){_u(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){_u(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pc(t,e),gc(e),4&r&&fc(e);case 21:}}function gc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ht(i,""),r.flags&=-33),lc(e,ac(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;oc(e,ac(e),s);break;default:throw Error(se(161))}}catch(a){_u(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Yl=e,vc(e)}function vc(e,t,n){for(var r=!!(1&e.mode);null!==Yl;){var i=Yl,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ql;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Gl;o=Ql;var c=Gl;if(Ql=a,(Gl=l)&&!c)for(Yl=i;null!==Yl;)l=(a=Yl).child,22===a.tag&&null!==a.memoizedState?xc(i):null!==l?(l.return=a,Yl=l):xc(i);for(;null!==s;)Yl=s,vc(s),s=s.sibling;Yl=i,Ql=o,Gl=c}bc(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Yl=s):bc(e)}}function bc(e){for(;null!==Yl;){var t=Yl;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Gl||nc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:nl(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qa(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,a,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&qn(d)}}}break;default:throw Error(se(163))}Gl||512&t.flags&&rc(t)}catch(h){_u(t,t.return,h)}}if(t===e){Yl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yl=n;break}Yl=t.return}}function wc(e){for(;null!==Yl;){var t=Yl;if(t===e){Yl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yl=n;break}Yl=t.return}}function xc(e){for(;null!==Yl;){var t=Yl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nc(4,t)}catch(l){_u(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_u(t,i,l)}}var s=t.return;try{rc(t)}catch(l){_u(t,s,l)}break;case 5:var a=t.return;try{rc(t)}catch(l){_u(t,a,l)}}}catch(l){_u(t,t.return,l)}if(t===e){Yl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yl=o;break}Yl=t.return}}var kc,_c=Math.ceil,Sc=we.ReactCurrentDispatcher,Ec=we.ReactCurrentOwner,Tc=we.ReactCurrentBatchConfig,Cc=0,Nc=null,Ic=null,jc=0,Pc=0,Ac=Ss(0),Rc=0,Oc=null,Lc=0,Dc=0,Mc=0,zc=null,Fc=null,Uc=0,Vc=1/0,$c=null,qc=!1,Bc=null,Hc=null,Kc=!1,Wc=null,Qc=0,Gc=0,Xc=null,Yc=-1,Jc=0;function Zc(){return 6&Cc?Yt():-1!==Yc?Yc:Yc=Yt()}function eu(e){return 1&e.mode?2&Cc&&0!==jc?jc&-jc:null!==ma.transition?(0===Jc&&(Jc=gn()),Jc):0!==(e=wn)?e:e=void 0===(e=window.event)?16:Yn(e.type):1}function tu(e,t,n,r){if(50<Gc)throw Gc=0,Xc=null,Error(se(185));vn(e,n,r),2&Cc&&e===Nc||(e===Nc&&(!(2&Cc)&&(Dc|=n),4===Rc&&au(e,jc)),nu(e,r),1===n&&0===Cc&&!(1&t.mode)&&(Vc=Yt()+500,Fs&&$s()))}function nu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-on(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pn(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=fn(e,e===Nc?jc:0);if(0===r)null!==n&&Qt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qt(n),1===t)0===e.tag?function(e){Fs=!0,Vs(e)}(ou.bind(null,e)):Vs(ou.bind(null,e)),as(function(){!(6&Cc)&&$s()}),n=null;else{switch(xn(r)){case 1:n=Zt;break;case 4:n=en;break;case 16:default:n=tn;break;case 536870912:n=rn}n=Nu(n,ru.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ru(e,t){if(Yc=-1,Jc=0,6&Cc)throw Error(se(327));var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=fn(e,e===Nc?jc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=Cc;Cc|=2;var s=fu();for(Nc===e&&jc===t||($c=null,Vc=Yt()+500,du(e,t));;)try{yu();break}catch(o){hu(e,o)}Ta(),Sc.current=s,Cc=i,null!==Ic?t=0:(Nc=null,jc=0,t=Rc)}if(0!==t){if(2===t&&(0!==(i=mn(e))&&(r=i,t=iu(e,i))),1===t)throw n=Oc,du(e,0),au(e,r),nu(e,Yt()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!oi(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=mu(e,r),2===t&&(s=mn(e),0!==s&&(r=s,t=iu(e,s))),1!==t)))throw n=Oc,du(e,0),au(e,r),nu(e,Yt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:case 5:wu(e,Fc,$c);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=Uc+500-Yt())){if(0!==fn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=rs(wu.bind(null,e,Fc,$c),t);break}wu(e,Fc,$c);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-on(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Yt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_c(r/1960))-r)){e.timeoutHandle=rs(wu.bind(null,e,Fc,$c),r);break}wu(e,Fc,$c);break;default:throw Error(se(329))}}}return nu(e,Yt()),e.callbackNode===n?ru.bind(null,e):null}function iu(e,t){var n=zc;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Fc,Fc=n,null!==t&&su(t)),e}function su(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function au(e,t){for(t&=~Mc,t&=~Dc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function ou(e){if(6&Cc)throw Error(se(327));xu();var t=fn(e,0);if(!(1&t))return nu(e,Yt()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=mn(e);0!==r&&(t=r,n=iu(e,r))}if(1===n)throw n=Oc,du(e,0),au(e,t),nu(e,Yt()),n;if(6===n)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Fc,$c),nu(e,Yt()),null}function lu(e,t){var n=Cc;Cc|=1;try{return e(t)}finally{0===(Cc=n)&&(Vc=Yt()+500,Fs&&$s())}}function cu(e){null!==Wc&&0===Wc.tag&&!(6&Cc)&&xu();var t=Cc;Cc|=1;var n=Tc.transition,r=wn;try{if(Tc.transition=null,wn=1,e)return e()}finally{wn=r,Tc.transition=n,!(6&(Cc=t))&&$s()}}function uu(){Pc=Ac.current,Es(Ac)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,is(n)),null!==Ic)for(n=Ic.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Rs();break;case 3:Xa(),Es(Is),Es(Ns),no();break;case 5:Ja(r);break;case 4:Xa();break;case 13:case 19:Es(Za);break;case 10:Ca(r.type._context);break;case 22:case 23:uu()}n=n.return}if(Nc=e,Ic=e=Au(e.current,null),jc=Pc=t,Rc=0,Oc=null,Mc=Dc=Lc=0,Fc=zc=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(r=(n=Pa[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Pa=null}return e}function hu(e,t){for(;;){var n=Ic;try{if(Ta(),ro.current=Jo,co){for(var r=ao.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=oo=ao=null,uo=!1,ho=0,Ec.current=null,null===n||null===n.return){Rc=1,Oc=t,Ic=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=jc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ml(a);if(null!==f){f.flags&=-257,gl(f,a,o,0,t),1&f.mode&&pl(s,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(!(1&t)){pl(s,c,t),pu();break e}l=Error(se(426))}else if(ia&&1&o.mode){var g=ml(a);if(null!==g){!(65536&g.flags)&&(g.flags|=256),gl(g,a,o,0,t),pa(cl(l,o));break e}}s=l=cl(l,o),4!==Rc&&(Rc=2),null===zc?zc=[s]:zc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Va(s,hl(0,l,t));break e;case 1:o=l;var y=s.type,v=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===v||"function"!=typeof v.componentDidCatch||null!==Hc&&Hc.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Va(s,fl(s,o,t));break e}}s=s.return}while(null!==s)}bu(n)}catch(b){t=b,Ic===n&&null!==n&&(Ic=n=n.return);continue}break}}function fu(){var e=Sc.current;return Sc.current=Jo,null===e?Jo:e}function pu(){0!==Rc&&3!==Rc&&2!==Rc||(Rc=4),null===Nc||!(268435455&Lc)&&!(268435455&Dc)||au(Nc,jc)}function mu(e,t){var n=Cc;Cc|=2;var r=fu();for(Nc===e&&jc===t||($c=null,du(e,t));;)try{gu();break}catch(i){hu(e,i)}if(Ta(),Cc=n,Sc.current=r,null!==Ic)throw Error(se(261));return Nc=null,jc=0,Rc}function gu(){for(;null!==Ic;)vu(Ic)}function yu(){for(;null!==Ic&&!Gt();)vu(Ic)}function vu(e){var t=kc(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?bu(e):Ic=t,Ec.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Wl(n,t)))return n.flags&=32767,void(Ic=n);if(null===e)return Rc=6,void(Ic=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Kl(n,t,Pc)))return void(Ic=n);if(null!==(t=t.sibling))return void(Ic=t);Ic=t=e}while(null!==t);0===Rc&&(Rc=5)}function wu(e,t,n){var r=wn,i=Tc.transition;try{Tc.transition=null,wn=1,function(e,t,n,r){do{xu()}while(null!==Wc);if(6&Cc)throw Error(se(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-on(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===Nc&&(Ic=Nc=null,jc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Kc||(Kc=!0,Nu(tn,function(){return xu(),null})),s=!!(15990&n.flags),!!(15990&n.subtreeFlags)||s){s=Tc.transition,Tc.transition=null;var a=wn;wn=1;var o=Cc;Cc|=4,Ec.current=null,function(e,t){if(es=Hn,fi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(o=a+i),d!==s||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===i&&(o=a),h===s&&++u===r&&(l=a),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Hn=!1,Yl=t;null!==Yl;)if(e=(t=Yl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Yl=e;else for(;null!==Yl;){t=Yl;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:nl(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(se(163))}}catch(w){_u(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Yl=e;break}Yl=t.return}p=ec,ec=!1}(e,n),mc(n,e),pi(ts),Hn=!!es,ts=es=null,e.current=n,yc(n),Xt(),Cc=o,wn=a,Tc.transition=s}else e.current=n;if(Kc&&(Kc=!1,Wc=e,Qc=i),s=e.pendingLanes,0===s&&(Hc=null),function(e){if(an&&"function"==typeof an.onCommitFiberRoot)try{an.onCommitFiberRoot(sn,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),nu(e,Yt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qc)throw qc=!1,e=Bc,Bc=null,e;!!(1&Qc)&&0!==e.tag&&xu(),s=e.pendingLanes,1&s?e===Xc?Gc++:(Gc=0,Xc=e):Gc=0,$s()}(e,t,n,r)}finally{Tc.transition=i,wn=r}return null}function xu(){if(null!==Wc){var e=xn(Qc),t=Tc.transition,n=wn;try{if(Tc.transition=null,wn=16>e?16:e,null===Wc)var r=!1;else{if(e=Wc,Wc=null,Qc=0,6&Cc)throw Error(se(331));var i=Cc;for(Cc|=4,Yl=e.current;null!==Yl;){var s=Yl,a=s.child;if(16&Yl.flags){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Yl=c;null!==Yl;){var u=Yl;switch(u.tag){case 0:case 11:case 15:tc(8,u,s)}var d=u.child;if(null!==d)d.return=u,Yl=d;else for(;null!==Yl;){var h=(u=Yl).sibling,f=u.return;if(ic(u),u===c){Yl=null;break}if(null!==h){h.return=f,Yl=h;break}Yl=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Yl=s}}if(2064&s.subtreeFlags&&null!==a)a.return=s,Yl=a;else e:for(;null!==Yl;){if(2048&(s=Yl).flags)switch(s.tag){case 0:case 11:case 15:tc(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Yl=y;break e}Yl=s.return}}var v=e.current;for(Yl=v;null!==Yl;){var b=(a=Yl).child;if(2064&a.subtreeFlags&&null!==b)b.return=a,Yl=b;else e:for(a=v;null!==Yl;){if(2048&(o=Yl).flags)try{switch(o.tag){case 0:case 11:case 15:nc(9,o)}}catch(x){_u(o,o.return,x)}if(o===a){Yl=null;break e}var w=o.sibling;if(null!==w){w.return=o.return,Yl=w;break e}Yl=o.return}}if(Cc=i,$s(),an&&"function"==typeof an.onPostCommitFiberRoot)try{an.onPostCommitFiberRoot(sn,e)}catch(x){}r=!0}return r}finally{wn=n,Tc.transition=t}}return!1}function ku(e,t,n){e=Fa(e,t=hl(0,t=cl(n,t),1),1),t=Zc(),null!==e&&(vn(e,1,t),nu(e,t))}function _u(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Fa(t,e=fl(t,e=cl(n,e),1),1),e=Zc(),null!==t&&(vn(t,1,e),nu(t,e));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zc(),e.pingedLanes|=e.suspendedLanes&n,Nc===e&&(jc&n)===n&&(4===Rc||3===Rc&&(130023424&jc)===jc&&500>Yt()-Uc?du(e,0):Mc|=n),nu(e,t)}function Eu(e,t){0===t&&(1&e.mode?(t=dn,!(130023424&(dn<<=1))&&(dn=4194304)):t=1);var n=Zc();null!==(e=Oa(e,t))&&(vn(e,t,n),nu(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}null!==r&&r.delete(t),Eu(e,n)}function Nu(e,t){return Wt(e,t)}function Iu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ju(e,t,n,r){return new Iu(e,t,n,r)}function Pu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Au(e,t){var n=e.alternate;return null===n?((n=ju(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ru(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)Pu(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case _e:return Ou(n.children,i,s,t);case Se:a=8,i|=8;break;case Ee:return(e=ju(12,n,t,2|i)).elementType=Ee,e.lanes=s,e;case Ie:return(e=ju(13,n,t,i)).elementType=Ie,e.lanes=s,e;case je:return(e=ju(19,n,t,i)).elementType=je,e.lanes=s,e;case Re:return Lu(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Te:a=10;break e;case Ce:a=9;break e;case Ne:a=11;break e;case Pe:a=14;break e;case Ae:a=16,r=null;break e}throw Error(se(130,null==e?e:typeof e,""))}return(t=ju(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ou(e,t,n,r){return(e=ju(7,e,r,t)).lanes=n,e}function Lu(e,t,n,r){return(e=ju(22,e,r,t)).elementType=Re,e.lanes=n,e.stateNode={isHidden:!1},e}function Du(e,t,n){return(e=ju(6,e,null,t)).lanes=n,e}function Mu(e,t,n){return(t=ju(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yn(0),this.expirationTimes=yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,r,i,s,a,o,l){return e=new zu(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=ju(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(s),e}function Uu(e){if(!e)return Cs;e:{if($t(e=e._reactInternals)!==e||1!==e.tag)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(As(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(se(171))}if(1===e.tag){var n=e.type;if(As(n))return Ls(e,n,t)}return t}function Vu(e,t,n,r,i,s,a,o,l){return(e=Fu(n,r,!0,e,0,s,0,o,l)).context=Uu(null),n=e.current,(s=za(r=Zc(),i=eu(n))).callback=null!=t?t:null,Fa(n,s,i),e.current.lanes=i,vn(e,i,r),nu(e,r),e}function $u(e,t,n,r){var i=t.current,s=Zc(),a=eu(i);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=za(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fa(i,t,a))&&(tu(e,i,a,s),Ua(e,i,a)),a}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Bu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Bu(e,t),(e=e.alternate)&&Bu(e,t)}kc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)vl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return vl=!1,function(e,t,n){switch(t.tag){case 3:Nl(t),fa();break;case 5:Ya(t);break;case 1:As(t.type)&&Ds(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ts(ka,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ts(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Dl(e,t,n):(Ts(Za,1&Za.current),null!==(e=ql(e,t,n))?e.sibling:null);Ts(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Vl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ts(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,_l(e,t,n)}return ql(e,t,n)}(e,t,n);vl=!!(131072&e.flags)}else vl=!1,ia&&1048576&t.flags&&Zs(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$l(e,t),e=t.pendingProps;var i=Ps(t,Ns.current);Ia(t,n),i=go(null,t,r,e,i,n);var s=yo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,As(r)?(s=!0,Ds(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=il,t.stateNode=i,i._reactInternals=t,ll(t,r,e,n),t=Cl(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),bl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($l(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Pu(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ne)return 11;if(e===Pe)return 14}return 2}(r),e=nl(r,e),i){case 0:t=El(null,t,r,e,n);break e;case 1:t=Tl(null,t,r,e,n);break e;case 11:t=wl(null,t,r,e,n);break e;case 14:t=xl(null,t,r,nl(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,El(e,t,r,i=t.elementType===r?i:nl(r,i),n);case 1:return r=t.type,i=t.pendingProps,Tl(e,t,r,i=t.elementType===r?i:nl(r,i),n);case 3:e:{if(Nl(t),null===e)throw Error(se(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ma(e,t),$a(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Il(e,t,r,n,i=cl(Error(se(423)),t));break e}if(r!==i){t=Il(e,t,r,n,i=cl(Error(se(424)),t));break e}for(ra=cs(t.stateNode.containerInfo.firstChild),na=t,ia=!0,sa=null,n=xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=ql(e,t,n);break e}bl(e,t,r,n)}t=t.child}return t;case 5:return Ya(t),null===e&&ca(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ns(r,i)?a=null:null!==s&&ns(r,s)&&(t.flags|=32),Sl(e,t),bl(e,t,a,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Dl(e,t,n);case 4:return Ga(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):bl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wl(e,t,r,i=t.elementType===r?i:nl(r,i),n);case 7:return bl(e,t,t.pendingProps,n),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ts(ka,r._currentValue),r._currentValue=a,null!==s)if(oi(s.value,a)){if(s.children===i.children&&!Is.current){t=ql(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){a=s.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=za(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Na(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(se(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),Na(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}bl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=ja(i)),t.flags|=1,bl(e,t,r,n),t.child;case 14:return i=nl(r=t.type,t.pendingProps),xl(e,t,r,i=nl(r.type,i),n);case 15:return kl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nl(r,i),$l(e,t),t.tag=1,As(r)?(e=!0,Ds(t)):e=!1,Ia(t,n),al(t,r,i),ll(t,r,i,n),Cl(null,t,r,!0,e,n);case 19:return Vl(e,t,n);case 22:return _l(e,t,n)}throw Error(se(156,t.tag))};var Ku="function"==typeof reportError?reportError:function(e){};function Wu(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function Gu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yu(){}function Ju(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=qu(a);o.call(e)}}$u(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=qu(a);s.call(e)}}var a=Vu(t,r,e,0,null,!1,0,"",Yu);return e._reactRootContainer=a,e[ps]=a.current,$i(8===e.nodeType?e.parentNode:e),cu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=qu(l);o.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Yu);return e._reactRootContainer=l,e[ps]=l.current,$i(8===e.nodeType?e.parentNode:e),cu(function(){$u(t,l,n,r)}),l}(n,t,e,i,r);return qu(a)}Qu.prototype.render=Wu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(se(409));$u(e,t,null,null)},Qu.prototype.unmount=Wu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu(function(){$u(null,e,null,null)}),t[ps]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=En();e={blockedOn:null,target:e,priority:t};for(var n=0;n<On.length&&0!==t&&t<On[n].priority;n++);On.splice(n,0,e),0===n&&zn(e)}},kn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hn(t.pendingLanes);0!==n&&(bn(t,1|n),nu(t,Yt()),!(6&Cc)&&(Vc=Yt()+500,$s()))}break;case 13:cu(function(){var t=Oa(e,1);if(null!==t){var n=Zc();tu(t,e,1,n)}}),Hu(e,1)}},_n=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)tu(t,e,134217728,Zc());Hu(e,134217728)}},Sn=function(e){if(13===e.tag){var t=eu(e),n=Oa(e,t);if(null!==n)tu(n,e,t,Zc());Hu(e,t)}},En=function(){return wn},Tn=function(e,t){var n=wn;try{return wn=e,t()}finally{wn=n}},kt=function(e,t,n){switch(t){case"input":if(Je(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xs(r);if(!i)throw Error(se(90));We(r),Je(r,i)}}}break;case"textarea":st(e,n);break;case"select":null!=(t=n.value)&&nt(e,!!n.multiple,t,!1)}},Nt=lu,It=cu;var Zu={usingClientEntryPoint:!1,Events:[bs,ws,xs,Tt,Ct,lu]},ed={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ht(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{sn=nd.inject(td),an=nd}catch(ut){}}Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zu,Z.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gu(t))throw Error(se(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ke,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},Z.createRoot=function(e,t){if(!Gu(e))throw Error(se(299));var n=!1,r="",i=Ku;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,r,i),e[ps]=t.current,$i(8===e.nodeType?e.parentNode:e),new Wu(t)},Z.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(se(188));throw e=Object.keys(e).join(","),Error(se(268,e))}return e=null===(e=Ht(t))?null:e.stateNode},Z.flushSync=function(e){return cu(e)},Z.hydrate=function(e,t,n){if(!Xu(t))throw Error(se(200));return Ju(null,e,t,!0,n)},Z.hydrateRoot=function(e,t,n){if(!Gu(e))throw Error(se(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Ku;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,i,0,s,a),e[ps]=t.current,$i(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qu(t)},Z.render=function(e,t,n){if(!Xu(t))throw Error(se(200));return Ju(null,e,t,!1,n)},Z.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(se(40));return!!e._reactRootContainer&&(cu(function(){Ju(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},Z.unstable_batchedUpdates=lu,Z.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xu(n))throw Error(se(200));if(null==e||void 0===e._reactInternals)throw Error(se(38));return Ju(e,t,n,!1,r)},Z.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),J.exports=Z;var rd,id=J.exports,sd=id;rd=sd.createRoot,sd.hydrateRoot;const ad={},od=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in ad)return;ad[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,n&&i.setAttribute("nonce",n),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},ld={},cd=(e,t,n,r)=>{fd(n)&&ld[n]||(fd(n)&&(ld[n]=new Date),((e,t,n,r)=>{var i,s,a,o;const l=[n,{code:t,...r||{}}];if(null==(s=null==(i=null==e?void 0:e.services)?void 0:i.logger)?void 0:s.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);fd(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(null==(o=null==(a=null==e?void 0:e.services)?void 0:a.logger)?void 0:o.warn)?e.services.logger.warn(...l):null==console||console.warn})(e,t,n,r))},ud=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},dd=(e,t,n)=>{e.loadNamespaces(t,ud(e,n))},hd=(e,t,n,r)=>{if(fd(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return dd(e,n,r);n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,ud(e,r))},fd=e=>"string"==typeof e,pd=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,md={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},gd=e=>md[e];let yd={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(pd,gd)};let vd;const bd={type:"3rdParty",init(e){((e={})=>{yd={...yd,...e}})(e.options.react),(e=>{vd=e})(e)}},wd=$.createContext();class xd{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const kd=(e,t,n,r)=>e.getFixedT(t,n,r),_d=(e,t={})=>{var n,r,i,s;const{i18n:a}=t,{i18n:o,defaultNS:l}=$.useContext(wd)||{},c=a||o||vd;if(c&&!c.reportNamespaces&&(c.reportNamespaces=new xd),!c){cd(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return fd(t)?t:"object"==typeof(n=t)&&null!==n&&fd(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}(null==(n=c.options.react)?void 0:n.wait)&&cd(c,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...yd,...c.options.react,...t},{useSuspense:d,keyPrefix:h}=u;let f=l||(null==(r=c.options)?void 0:r.defaultNS);f=fd(f)?[f]:f||["translation"],null==(s=(i=c.reportNamespaces).addUsedNamespaces)||s.call(i,f);const p=(c.isInitialized||c.initializedStoreOnce)&&f.every(e=>((e,t,n={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(cd(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,c,u)),m=((e,t,n,r)=>$.useCallback(kd(e,t,n,r),[e,t,n,r]))(c,t.lng||null,"fallback"===u.nsMode?f:f[0],h),g=()=>m,y=()=>kd(c,t.lng||null,"fallback"===u.nsMode?f:f[0],h),[v,b]=$.useState(g);let w=f.join();t.lng&&(w=`${t.lng}${w}`);const x=((e,t)=>{const n=$.useRef();return $.useEffect(()=>{n.current=e},[e,t]),n.current})(w),k=$.useRef(!0);$.useEffect(()=>{const{bindI18n:e,bindI18nStore:n}=u;k.current=!0,p||d||(t.lng?hd(c,t.lng,f,()=>{k.current&&b(y)}):dd(c,f,()=>{k.current&&b(y)})),p&&x&&x!==w&&k.current&&b(y);const r=()=>{k.current&&b(y)};return e&&(null==c||c.on(e,r)),n&&(null==c||c.store.on(n,r)),()=>{k.current=!1,c&&e&&(null==e||e.split(" ").forEach(e=>c.off(e,r))),n&&c&&n.split(" ").forEach(e=>c.store.off(e,r))}},[c,w]),$.useEffect(()=>{k.current&&p&&b(g)},[c,h,p]);const _=[v,c,p];if(_.t=v,_.i18n=c,_.ready=p,p)return _;if(!p&&!d)return _;throw new Promise(e=>{t.lng?hd(c,t.lng,f,()=>e()):dd(c,f,()=>e())})};var Sd={};Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.parse=function(e,t){const n=new jd,r=e.length;if(r<2)return n;const i=(null==t?void 0:t.decode)||Rd;let s=0;do{const t=e.indexOf("=",s);if(-1===t)break;const a=e.indexOf(";",s),o=-1===a?r:a;if(t>o){s=e.lastIndexOf(";",t-1)+1;continue}const l=Pd(e,s,t),c=Ad(e,t,l),u=e.slice(l,c);if(void 0===n[u]){let r=Pd(e,t+1,o),s=Ad(e,o,r);const a=i(e.slice(r,s));n[u]=a}s=o+1}while(s<r);return n},Sd.serialize=function(e,t,n){const r=(null==n?void 0:n.encode)||encodeURIComponent;if(!Ed.test(e))throw new TypeError(`argument name is invalid: ${e}`);const i=r(t);if(!Td.test(i))throw new TypeError(`argument val is invalid: ${t}`);let s=e+"="+i;if(!n)return s;if(void 0!==n.maxAge){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!Cd.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!Nd.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!function(e){return"[object Date]"===Id.call(e)}(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(s+="; HttpOnly");n.secure&&(s+="; Secure");n.partitioned&&(s+="; Partitioned");if(n.priority){switch("string"==typeof n.priority?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}}if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}}return s};const Ed=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Td=/^[\u0021-\u003A\u003C-\u007E]*$/,Cd=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Nd=/^[\u0020-\u003A\u003D-\u007E]*$/,Id=Object.prototype.toString,jd=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Pd(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function Ad(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function Rd(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}var Od="popstate";function Ld(e={}){return function(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=u();null==c&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o="PUSH";let n=Fd(m.location,e,t);c=u()+1;let r=zd(n,c),d=m.createHref(n);try{a.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}s&&l&&l({action:o,location:m.location,delta:1})}function f(e,t){o="REPLACE";let n=Fd(m.location,e,t);c=u();let r=zd(n,c),i=m.createHref(n);a.replaceState(r,"",i),s&&l&&l({action:o,location:m.location,delta:0})}function p(e){return function(e,t=!1){let n="http://localhost";"undefined"!=typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href);Dd(n,"No window.location.(origin|href) available to create URL");let r="string"==typeof e?e:Ud(e);r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r);return new URL(r,n)}(e)}let m={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Od,d),l=e,()=>{i.removeEventListener(Od,d),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>a.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return Fd("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:Ud(t)},0,e)}function Dd(e,t){if(!1===e||null==e)throw new Error(t)}function Md(e,t){if(!e)try{throw new Error(t)}catch(n){}}function zd(e,t){return{usr:e.state,key:e.key,idx:t}}function Fd(e,t,n=null,r){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Vd(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function Ud({pathname:e="/",search:t="",hash:n=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(e+="#"===n.charAt(0)?n:"#"+n),e}function Vd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function $d(e,t,n="/"){return function(e,t,n,r){let i="string"==typeof t?Vd(t):t,s=nh(i.pathname||"/",n);if(null==s)return null;let a=qd(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let l=0;null==o&&l<a.length;++l){let e=th(s);o=Zd(a[l],e,r)}return o}(e,t,n,!1)}function qd(e,t=[],n=[],r=""){let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(Dd(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let o=ah([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(Dd(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${o}".`),qd(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Jd(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&(null==(n=e.path)?void 0:n.includes("?")))for(let r of Bd(e.path))i(e,t,r);else i(e,t)}),t}function Bd(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=Bd(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var Hd=/^:[\w-]+$/,Kd=3,Wd=2,Qd=1,Gd=10,Xd=-2,Yd=e=>"*"===e;function Jd(e,t){let n=e.split("/"),r=n.length;return n.some(Yd)&&(r+=Xd),t&&(r+=Wd),n.filter(e=>!Yd(e)).reduce((e,t)=>e+(Hd.test(t)?Kd:""===t?Qd:Gd),r)}function Zd(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=eh({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=eh({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:ah([s,u.pathname]),pathnameBase:oh(ah([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=ah([s,u.pathnameBase]))}return a}function eh(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t=!1,n=!0){Md("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if("*"===t){let e=o[r]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const i=o[r];return e[t]=n&&!i?void 0:(i||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function th(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Md(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function nh(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function rh(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ih(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function sh(e,t,n,r=!1){let i;"string"==typeof e?i=Vd(e):(i={...e},Dd(!i.pathname||!i.pathname.includes("?"),rh("?","pathname","search",i)),Dd(!i.pathname||!i.pathname.includes("#"),rh("#","pathname","hash",i)),Dd(!i.search||!i.search.includes("#"),rh("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:n,search:r="",hash:i=""}="string"==typeof e?Vd(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:lh(r),hash:ch(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var ah=e=>e.join("/").replace(/\/\/+/g,"/"),oh=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lh=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ch=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var uh=["POST","PUT","PATCH","DELETE"];new Set(uh);var dh=["GET",...uh];new Set(dh);var hh=$.createContext(null);hh.displayName="DataRouter";var fh=$.createContext(null);fh.displayName="DataRouterState";var ph=$.createContext({isTransitioning:!1});ph.displayName="ViewTransition",$.createContext(new Map).displayName="Fetchers",$.createContext(null).displayName="Await";var mh=$.createContext(null);mh.displayName="Navigation";var gh=$.createContext(null);gh.displayName="Location";var yh=$.createContext({outlet:null,matches:[],isDataRoute:!1});yh.displayName="Route";var vh=$.createContext(null);function bh(){return null!=$.useContext(gh)}function wh(){return Dd(bh(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(gh).location}vh.displayName="RouteError";var xh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kh(e){$.useContext(mh).static||$.useLayoutEffect(e)}function _h(){let{isDataRoute:e}=$.useContext(yh);return e?function(){let{router:e}=function(e){let t=$.useContext(hh);return Dd(t,Ph(e)),t}("useNavigate"),t=Ah("useNavigate"),n=$.useRef(!1);return kh(()=>{n.current=!0}),$.useCallback(async(r,i={})=>{Md(n.current,xh),n.current&&("number"==typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}():function(){Dd(bh(),"useNavigate() may be used only in the context of a <Router> component.");let e=$.useContext(hh),{basename:t,navigator:n}=$.useContext(mh),{matches:r}=$.useContext(yh),{pathname:i}=wh(),s=JSON.stringify(ih(r)),a=$.useRef(!1);return kh(()=>{a.current=!0}),$.useCallback((r,o={})=>{if(Md(a.current,xh),!a.current)return;if("number"==typeof r)return void n.go(r);let l=sh(r,JSON.parse(s),i,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:ah([t,l.pathname])),(o.replace?n.replace:n.push)(l,o.state,o)},[t,n,s,i,e])}()}function Sh(){let{matches:e}=$.useContext(yh),t=e[e.length-1];return t?t.params:{}}function Eh(e,{relative:t}={}){let{matches:n}=$.useContext(yh),{pathname:r}=wh(),i=JSON.stringify(ih(n));return $.useMemo(()=>sh(e,JSON.parse(i),r,"path"===t),[e,i,r,t])}function Th(e,t,n,r){var i;Dd(bh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=$.useContext(mh),{matches:a}=$.useContext(yh),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let e=d&&d.path||"";Oh(c,!d||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,f=wh();if(t){let e="string"==typeof t?Vd(t):t;Dd("/"===u||(null==(i=e.pathname)?void 0:i.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=f;let p=h.pathname||"/",m=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=$d(e,{pathname:m});Md(d||null!=g,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Md(null==g||void 0!==g[g.length-1].route.element||void 0!==g[g.length-1].route.Component||void 0!==g[g.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],n=null){if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,i=null==n?void 0:n.errors;if(null!=i){let e=r.findIndex(e=>e.route.id&&void 0!==(null==i?void 0:i[e.route.id]));Dd(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let s=!1,a=-1;if(n)for(let o=0;o<r.length;o++){let e=r[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=o),e.route.id){let{loaderData:t,errors:i}=n,o=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||o){s=!0,r=a>=0?r.slice(0,a+1):[r[0]];break}}}return r.reduceRight((e,o,l)=>{let c,u=!1,d=null,h=null;n&&(c=i&&o.route.id?i[o.route.id]:void 0,d=o.route.errorElement||Nh,s&&(a<0&&0===l?(Oh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,h=null):a===l&&(u=!0,h=o.route.hydrateFallbackElement||null)));let f=t.concat(r.slice(0,l+1)),p=()=>{let t;return t=c?d:u?h:o.route.Component?$.createElement(o.route.Component,null):o.route.element?o.route.element:e,$.createElement(jh,{match:o,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(o.route.ErrorBoundary||o.route.errorElement||0===l)?$.createElement(Ih,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:ah([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:ah([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,r);return t&&y?$.createElement(gh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function Ch(){let e=function(){var e;let t=$.useContext(vh),n=function(e){let t=$.useContext(fh);return Dd(t,Ph(e)),t}("useRouteError"),r=Ah("useRouteError");if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return a=$.createElement($.Fragment,null,$.createElement("p",null,"💿 Hey developer 👋"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:s},"ErrorBoundary")," or"," ",$.createElement("code",{style:s},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),n?$.createElement("pre",{style:i},n):null,a)}$.createContext(null);var Nh=$.createElement(Ch,null),Ih=class extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?$.createElement(yh.Provider,{value:this.props.routeContext},$.createElement(vh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jh({routeContext:e,match:t,children:n}){let r=$.useContext(hh);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),$.createElement(yh.Provider,{value:e},n)}function Ph(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ah(e){let t=function(e){let t=$.useContext(yh);return Dd(t,Ph(e)),t}(e),n=t.matches[t.matches.length-1];return Dd(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}var Rh={};function Oh(e,t,n){t||Rh[e]||(Rh[e]=!0,Md(!1,n))}function Lh({to:e,replace:t,state:n,relative:r}){Dd(bh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=$.useContext(mh);Md(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=$.useContext(yh),{pathname:a}=wh(),o=_h(),l=sh(e,ih(s),a,"path"===r),c=JSON.stringify(l);return $.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:r})},[o,c,r,t,n]),null}function Dh(e){Dd(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Mh({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Dd(!bh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=$.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);"string"==typeof n&&(n=Vd(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=n,f=$.useMemo(()=>{let e=nh(l,a);return null==e?null:{location:{pathname:e,search:c,hash:u,state:d,key:h},navigationType:r}},[a,l,c,u,d,h,r]);return Md(null!=f,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:$.createElement(mh.Provider,{value:o},$.createElement(gh.Provider,{children:t,value:f}))}function zh({children:e,location:t}){return Th(Fh(e),t)}function Fh(e,t=[]){let n=[];return $.Children.forEach(e,(e,r)=>{if(!$.isValidElement(e))return;let i=[...t,r];if(e.type===$.Fragment)return void n.push.apply(n,Fh(e.props.children,i));Dd(e.type===Dh,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dd(!e.props.index||!e.props.children,"An index route cannot have child routes.");let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=Fh(e.props.children,i)),n.push(s)}),n}$.memo(function({routes:e,future:t,state:n}){return Th(e,void 0,n,t)});var Uh="get",Vh="application/x-www-form-urlencoded";function $h(e){return null!=e&&"string"==typeof e.tagName}var qh=null;var Bh=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hh(e){return null==e||Bh.has(e)?e:(Md(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vh}"`),null)}function Kh(e,t){let n,r,i,s,a;if($h(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?nh(a,t):null,n=e.getAttribute("method")||Uh,i=Hh(e.getAttribute("enctype"))||Vh,s=new FormData(e)}else if(function(e){return $h(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return $h(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?nh(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Uh,i=Hh(e.getAttribute("formenctype"))||Hh(a.getAttribute("enctype"))||Vh,s=new FormData(a,e),!function(){if(null===qh)try{new FormData(document.createElement("form"),0),qh=!1}catch(e){qh=!0}return qh}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if($h(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Uh,r=null,i=Vh,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}function Wh(e,t){if(!1===e||null==e)throw new Error(t)}function Qh(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function Gh(e,t,n){return function(e,t){let n=new Set;return new Set(t),e.reduce((e,t)=>{let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(t));return n.has(r)||(n.add(r),e.push({key:r,link:t})),e},[])}((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Qh).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Xh(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null==(r=n[t].route.path)?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{var l;let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null==(l=n[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof r)return r}return!0}):[]}function Yh(e,t,{includeHydrateFallback:n}={}){return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jh(){let e=$.useContext(hh);return Wh(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}var Zh=$.createContext(void 0);function ef(){let e=$.useContext(Zh);return Wh(e,"You must render this element inside a <HydratedRouter> element"),e}function tf(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function nf({page:e,...t}){let{router:n}=Jh(),r=$.useMemo(()=>$d(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?$.createElement(rf,{page:e,matches:r,...t}):null}function rf({page:e,matches:t,...n}){let r=wh(),{manifest:i,routeModules:s}=ef(),{basename:a}=Jh(),{loaderData:o,matches:l}=function(){let e=$.useContext(fh);return Wh(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=$.useMemo(()=>Xh(e,t,l,i,r,"data"),[e,t,l,i,r]),u=$.useMemo(()=>Xh(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=$.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{var t;let r=i.routes[e.route.id];r&&r.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in o&&(null==(t=s[e.route.id])?void 0:t.shouldRevalidate)||r.hasClientLoader?l=!0:n.add(e.route.id))}),0===n.size)return[];let u=function(e,t){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===nh(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}(e,a);return l&&n.size>0&&u.searchParams.set("_routes",t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(",")),[u.pathname+u.search]},[a,o,r,i,c,t,e,s]),h=$.useMemo(()=>Yh(u,i),[u,i]),f=function(e){let{manifest:t,routeModules:n}=ef(),[r,i]=$.useState([]);return $.useEffect(()=>{let r=!1;return Gh(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}(u);return $.createElement($.Fragment,null,d.map(e=>$.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...n})),h.map(e=>$.createElement("link",{key:e,rel:"modulepreload",href:e,...n})),f.map(({key:e,link:t})=>$.createElement("link",{key:e,...t})))}function sf(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Zh.displayName="FrameworkContext";var af="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{af&&(window.__reactRouterVersion="7.6.3")}catch(_D){}function of({basename:e,children:t,window:n}){let r=$.useRef();null==r.current&&(r.current=Ld({window:n,v5Compat:!0}));let i=r.current,[s,a]=$.useState({action:i.action,location:i.location}),o=$.useCallback(e=>{$.startTransition(()=>a(e))},[a]);return $.useLayoutEffect(()=>i.listen(o),[i,o]),$.createElement(Mh,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var lf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cf=$.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:i,replace:s,state:a,target:o,to:l,preventScrollReset:c,viewTransition:u,...d},h){let f,{basename:p}=$.useContext(mh),m="string"==typeof l&&lf.test(l),g=!1;if("string"==typeof l&&m&&(f=l,af))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),n=nh(t.pathname,p);t.origin===e.origin&&null!=n?l=n+t.search+t.hash:g=!0}catch(_D){Md(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e,{relative:t}={}){Dd(bh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=$.useContext(mh),{hash:i,pathname:s,search:a}=Eh(e,{relative:t}),o=s;return"/"!==n&&(o="/"===s?n:ah([n,s])),r.createHref({pathname:o,search:a,hash:i})}(l,{relative:r}),[v,b,w]=function(e,t){let n=$.useContext(Zh),[r,i]=$.useState(!1),[s,a]=$.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,h=$.useRef(null);$.useEffect(()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),$.useEffect(()=>{if(r){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),a(!1)};return n?"intent"!==e?[s,h,{}]:[s,h,{onFocus:tf(o,f),onBlur:tf(l,p),onMouseEnter:tf(c,f),onMouseLeave:tf(u,p),onTouchStart:tf(d,f)}]:[!1,h,{}]}(n,d),x=function(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=_h(),l=wh(),c=Eh(e,{relative:s});return $.useCallback(u=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(u,t)){u.preventDefault();let t=void 0!==n?n:Ud(l)===Ud(c);o(e,{replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[l,o,c,n,r,t,e,i,s,a])}(l,{replace:s,state:a,target:o,preventScrollReset:c,relative:r,viewTransition:u});let k=$.createElement("a",{...d,...w,href:f||y,onClick:g||i?e:function(t){e&&e(t),t.defaultPrevented||x(t)},ref:sf(h,b),target:o,"data-discover":m||"render"!==t?void 0:"true"});return v&&!m?$.createElement($.Fragment,null,k,$.createElement(nf,{page:y})):k});function uf(e){let t=$.useContext(hh);return Dd(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}cf.displayName="Link",$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:i,to:s,viewTransition:a,children:o,...l},c){let u=Eh(s,{relative:l.relative}),d=wh(),h=$.useContext(fh),{navigator:f,basename:p}=$.useContext(mh),m=null!=h&&function(e,t={}){let n=$.useContext(ph);Dd(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uf("useViewTransitionState"),i=Eh(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=nh(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=nh(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=eh(i.pathname,a)||null!=eh(i.pathname,s)}(u)&&!0===a,g=f.encodeLocation?f.encodeLocation(u).pathname:u.pathname,y=d.pathname,v=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(y=y.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&p&&(v=nh(v,p)||v);const b="/"!==g&&g.endsWith("/")?g.length-1:g.length;let w,x=y===g||!r&&y.startsWith(g)&&"/"===y.charAt(b),k=null!=v&&(v===g||!r&&v.startsWith(g)&&"/"===v.charAt(g.length)),_={isActive:x,isPending:k,isTransitioning:m},S=x?e:void 0;w="function"==typeof n?n(_):[n,x?"active":null,k?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let E="function"==typeof i?i(_):i;return $.createElement(cf,{...l,"aria-current":S,className:w,ref:c,style:E,to:s,viewTransition:a},"function"==typeof o?o(_):o)}).displayName="NavLink",$.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=Uh,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},f)=>{let p=function(){let{router:e}=uf("useSubmit"),{basename:t}=$.useContext(mh),n=Ah("useRouteId");return $.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=Kh(r,t);if(!1===i.navigate){let t=i.fetcherKey||hf();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}(),m=function(e,{relative:t}={}){let{basename:n}=$.useContext(mh),r=$.useContext(yh);Dd(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Eh(e||".",{relative:t})},a=wh();if(null==e){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(s.pathname="/"===s.pathname?n:ah([n,s.pathname]));return Ud(s)}(o,{relative:c}),g="get"===a.toLowerCase()?"get":"post",y="string"==typeof o&&lf.test(o);return $.createElement("form",{ref:f,method:g,action:m,onSubmit:r?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,o=(null==r?void 0:r.getAttribute("formmethod"))||a;p(r||e.currentTarget,{fetcherKey:t,method:o,navigate:n,replace:i,state:s,relative:c,preventScrollReset:u,viewTransition:d})},...h,"data-discover":y||"render"!==e?void 0:"true"})}).displayName="Form";var df=0,hf=()=>`__${String(++df)}__`;var ff={exports:{}},pf={},mf=$;var gf="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},yf=mf.useState,vf=mf.useEffect,bf=mf.useLayoutEffect,wf=mf.useDebugValue;function xf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gf(e,n)}catch(r){return!0}}var kf="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=yf({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return bf(function(){i.value=n,i.getSnapshot=t,xf(i)&&s({inst:i})},[e,n,t]),vf(function(){return xf(i)&&s({inst:i}),e(function(){xf(i)&&s({inst:i})})},[e]),wf(n),n};pf.useSyncExternalStore=void 0!==mf.useSyncExternalStore?mf.useSyncExternalStore:kf,ff.exports=pf;var _f=ff.exports,Sf={exports:{}},Ef={},Tf=$,Cf=_f;var Nf="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},If=Cf.useSyncExternalStore,jf=Tf.useRef,Pf=Tf.useEffect,Af=Tf.useMemo,Rf=Tf.useDebugValue;Ef.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=jf(null);if(null===s.current){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=Af(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return o=t}return o=e}if(t=o,Nf(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,o=n)}var s,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var o=If(e,s[0],s[1]);return Pf(function(){a.hasValue=!0,a.value=o},[o]),Rf(o),o},Sf.exports=Ef;var Of=Sf.exports;let Lf=function(e){e()};const Df=Symbol.for("react-redux-context"),Mf="undefined"!=typeof globalThis?globalThis:{};function zf(){var e;if(!$.createContext)return{};const t=null!=(e=Mf[Df])?e:Mf[Df]=new Map;let n=t.get($.createContext);return n||(n=$.createContext(null),t.set($.createContext,n)),n}const Ff=zf();function Uf(e=Ff){return function(){return $.useContext(e)}}const Vf=Uf();let $f=()=>{throw new Error("uSES not initialized!")};const qf=(e,t)=>e===t;function Bf(e=Ff){const t=e===Ff?Vf:Uf(e);return function(e,n={}){const{equalityFn:r=qf,stabilityCheck:i,noopCheck:s}="function"==typeof n?{equalityFn:n}:n,{store:a,subscription:o,getServerState:l,stabilityCheck:c,noopCheck:u}=t();$.useRef(!0);const d=$.useCallback({[e.name]:t=>e(t)}[e.name],[e,c,i]),h=$f(o.addNestedSub,a.getState,l||a.getState,d,r);return $.useDebugValue(h),h}}const Hf=Bf();var Kf={exports:{}},Wf={},Qf="function"==typeof Symbol&&Symbol.for,Gf=Qf?Symbol.for("react.element"):60103,Xf=Qf?Symbol.for("react.portal"):60106,Yf=Qf?Symbol.for("react.fragment"):60107,Jf=Qf?Symbol.for("react.strict_mode"):60108,Zf=Qf?Symbol.for("react.profiler"):60114,ep=Qf?Symbol.for("react.provider"):60109,tp=Qf?Symbol.for("react.context"):60110,np=Qf?Symbol.for("react.async_mode"):60111,rp=Qf?Symbol.for("react.concurrent_mode"):60111,ip=Qf?Symbol.for("react.forward_ref"):60112,sp=Qf?Symbol.for("react.suspense"):60113,ap=Qf?Symbol.for("react.suspense_list"):60120,op=Qf?Symbol.for("react.memo"):60115,lp=Qf?Symbol.for("react.lazy"):60116,cp=Qf?Symbol.for("react.block"):60121,up=Qf?Symbol.for("react.fundamental"):60117,dp=Qf?Symbol.for("react.responder"):60118,hp=Qf?Symbol.for("react.scope"):60119;function fp(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Gf:switch(e=e.type){case np:case rp:case Yf:case Zf:case Jf:case sp:return e;default:switch(e=e&&e.$$typeof){case tp:case ip:case lp:case op:case ep:return e;default:return t}}case Xf:return t}}}function pp(e){return fp(e)===rp}Wf.AsyncMode=np,Wf.ConcurrentMode=rp,Wf.ContextConsumer=tp,Wf.ContextProvider=ep,Wf.Element=Gf,Wf.ForwardRef=ip,Wf.Fragment=Yf,Wf.Lazy=lp,Wf.Memo=op,Wf.Portal=Xf,Wf.Profiler=Zf,Wf.StrictMode=Jf,Wf.Suspense=sp,Wf.isAsyncMode=function(e){return pp(e)||fp(e)===np},Wf.isConcurrentMode=pp,Wf.isContextConsumer=function(e){return fp(e)===tp},Wf.isContextProvider=function(e){return fp(e)===ep},Wf.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Gf},Wf.isForwardRef=function(e){return fp(e)===ip},Wf.isFragment=function(e){return fp(e)===Yf},Wf.isLazy=function(e){return fp(e)===lp},Wf.isMemo=function(e){return fp(e)===op},Wf.isPortal=function(e){return fp(e)===Xf},Wf.isProfiler=function(e){return fp(e)===Zf},Wf.isStrictMode=function(e){return fp(e)===Jf},Wf.isSuspense=function(e){return fp(e)===sp},Wf.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Yf||e===rp||e===Zf||e===Jf||e===sp||e===ap||"object"==typeof e&&null!==e&&(e.$$typeof===lp||e.$$typeof===op||e.$$typeof===ep||e.$$typeof===tp||e.$$typeof===ip||e.$$typeof===up||e.$$typeof===dp||e.$$typeof===hp||e.$$typeof===cp)},Wf.typeOf=fp,Kf.exports=Wf;var mp=Kf.exports,gp={};gp[mp.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gp[mp.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var yp,vp={exports:{}},bp={},wp=Symbol.for("react.element"),xp=Symbol.for("react.portal"),kp=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),Sp=Symbol.for("react.profiler"),Ep=Symbol.for("react.provider"),Tp=Symbol.for("react.context"),Cp=Symbol.for("react.server_context"),Np=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),jp=Symbol.for("react.suspense_list"),Pp=Symbol.for("react.memo"),Ap=Symbol.for("react.lazy"),Rp=Symbol.for("react.offscreen");function Op(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case wp:switch(e=e.type){case kp:case Sp:case _p:case Ip:case jp:return e;default:switch(e=e&&e.$$typeof){case Cp:case Tp:case Np:case Ap:case Pp:case Ep:return e;default:return t}}case xp:return t}}}yp=Symbol.for("react.module.reference"),bp.ContextConsumer=Tp,bp.ContextProvider=Ep,bp.Element=wp,bp.ForwardRef=Np,bp.Fragment=kp,bp.Lazy=Ap,bp.Memo=Pp,bp.Portal=xp,bp.Profiler=Sp,bp.StrictMode=_p,bp.Suspense=Ip,bp.SuspenseList=jp,bp.isAsyncMode=function(){return!1},bp.isConcurrentMode=function(){return!1},bp.isContextConsumer=function(e){return Op(e)===Tp},bp.isContextProvider=function(e){return Op(e)===Ep},bp.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===wp},bp.isForwardRef=function(e){return Op(e)===Np},bp.isFragment=function(e){return Op(e)===kp},bp.isLazy=function(e){return Op(e)===Ap},bp.isMemo=function(e){return Op(e)===Pp},bp.isPortal=function(e){return Op(e)===xp},bp.isProfiler=function(e){return Op(e)===Sp},bp.isStrictMode=function(e){return Op(e)===_p},bp.isSuspense=function(e){return Op(e)===Ip},bp.isSuspenseList=function(e){return Op(e)===jp},bp.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===kp||e===Sp||e===_p||e===Ip||e===jp||e===Rp||"object"==typeof e&&null!==e&&(e.$$typeof===Ap||e.$$typeof===Pp||e.$$typeof===Ep||e.$$typeof===Tp||e.$$typeof===Np||e.$$typeof===yp||void 0!==e.getModuleId)},bp.typeOf=Op,vp.exports=bp;var Lp=vp.exports;function Dp(){const e=Lf;let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const Mp={notify(){},get:()=>[]};const zp=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?$.useLayoutEffect:$.useEffect;function Fp({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const a=$.useMemo(()=>{const t=function(e){let t,n=Mp,r=0,i=!1;function s(){l.onStateChange&&l.onStateChange()}function a(){r++,t||(t=e.subscribe(s),n=Dp())}function o(){r--,t&&0===r&&(t(),t=void 0,n.clear(),n=Mp)}const l={addNestedSub:function(e){a();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),o())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:s,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,a())},tryUnsubscribe:function(){i&&(i=!1,o())},getListeners:()=>n};return l}(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[e,r,i,s]),o=$.useMemo(()=>e.getState(),[e]);zp(()=>{const{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),o!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[a,o]);const l=t||Ff;return $.createElement(l.Provider,{value:a},n)}function Up(e=Ff){const t=e===Ff?Vf:Uf(e);return function(){const{store:e}=t();return e}}const Vp=Up();function $p(e=Ff){const t=e===Ff?Vp:Up(e);return function(){return t().dispatch}}const qp=$p();var Bp,Hp;function Kp(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Wp(e){return!!e&&!!e[Rm]}function Qp(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Om}(e)||Array.isArray(e)||!!e[Am]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Am])||em(e)||tm(e))}function Gp(e,t,n){void 0===n&&(n=!1),0===Xp(e)?(n?Object.keys:Lm)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function Xp(e){var t=e[Rm];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:em(e)?2:tm(e)?3:0}function Yp(e,t){return 2===Xp(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Jp(e,t,n){var r=Xp(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Zp(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function em(e){return Nm&&e instanceof Map}function tm(e){return Im&&e instanceof Set}function nm(e){return e.o||e.t}function rm(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Dm(e);delete t[Rm];for(var n=Lm(t),r=0;r<n.length;r++){var i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function im(e,t){return void 0===t&&(t=!1),am(e)||Wp(e)||!Qp(e)||(Xp(e)>1&&(e.set=e.add=e.clear=e.delete=sm),Object.freeze(e),t&&Gp(e,function(e,t){return im(t,!0)},!0)),e}function sm(){Kp(2)}function am(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function om(e){var t=Mm[e];return t||Kp(18,e),t}function lm(){return Tm}function cm(e,t){t&&(om("Patches"),e.u=[],e.s=[],e.v=t)}function um(e){dm(e),e.p.forEach(fm),e.p=null}function dm(e){e===Tm&&(Tm=e.l)}function hm(e){return Tm={p:[],l:Tm,h:e,m:!0,_:0}}function fm(e){var t=e[Rm];0===t.i||1===t.i?t.j():t.g=!0}function pm(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||om("ES5").S(t,e,r),r?(n[Rm].P&&(um(t),Kp(4)),Qp(e)&&(e=mm(t,e),t.l||ym(t,e)),t.u&&om("Patches").M(n[Rm].t,e,t.u,t.s)):e=mm(t,n,[]),um(t),t.u&&t.v(t.u,t.s),e!==Pm?e:void 0}function mm(e,t,n){if(am(t))return t;var r=t[Rm];if(!r)return Gp(t,function(i,s){return gm(e,r,t,i,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return ym(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=rm(r.k):r.o,s=i,a=!1;3===r.i&&(s=new Set(i),i.clear(),a=!0),Gp(s,function(t,s){return gm(e,r,i,t,s,n,a)}),ym(e,i,!1),n&&e.u&&om("Patches").N(r,n,e.u,e.s)}return r.o}function gm(e,t,n,r,i,s,a){if(Wp(i)){var o=mm(e,i,s&&t&&3!==t.i&&!Yp(t.R,r)?s.concat(r):void 0);if(Jp(n,r,o),!Wp(o))return;e.m=!1}else a&&n.add(i);if(Qp(i)&&!am(i)){if(!e.h.D&&e._<1)return;mm(e,i),t&&t.A.l||ym(e,i)}}function ym(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&im(t,n)}function vm(e,t){var n=e[Rm];return(n?nm(n):e)[t]}function bm(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function wm(e){e.P||(e.P=!0,e.l&&wm(e.l))}function xm(e){e.o||(e.o=rm(e.t))}function km(e,t,n){var r=em(t)?om("MapSet").F(t,n):tm(t)?om("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:lm(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,s=zm;n&&(i=[r],s=Fm);var a=Proxy.revocable(i,s),o=a.revoke,l=a.proxy;return r.k=l,r.j=o,l}(t,n):om("ES5").J(t,n);return(n?n.A:lm()).p.push(r),r}function _m(e){return Wp(e)||Kp(22,e),function e(t){if(!Qp(t))return t;var n,r=t[Rm],i=Xp(t);if(r){if(!r.P&&(r.i<4||!om("ES5").K(r)))return r.t;r.I=!0,n=Sm(t,i),r.I=!1}else n=Sm(t,i);return Gp(n,function(t,i){r&&function(e,t){return 2===Xp(e)?e.get(t):e[t]}(r.t,t)===i||Jp(n,t,e(i))}),3===i?new Set(n):n}(e)}function Sm(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return rm(e)}Bp=Of.useSyncExternalStoreWithSelector,$f=Bp,Hp=id.unstable_batchedUpdates,Lf=Hp;var Em,Tm,Cm="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Nm="undefined"!=typeof Map,Im="undefined"!=typeof Set,jm="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Pm=Cm?Symbol.for("immer-nothing"):((Em={})["immer-nothing"]=!0,Em),Am=Cm?Symbol.for("immer-draftable"):"__$immer_draftable",Rm=Cm?Symbol.for("immer-state"):"__$immer_state",Om=""+Object.prototype.constructor,Lm="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Dm=Object.getOwnPropertyDescriptors||function(e){var t={};return Lm(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Mm={},zm={get:function(e,t){if(t===Rm)return e;var n,r,i,s=nm(e);if(!Yp(s,t))return n=e,(i=bm(s,t))?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(n.k):void 0;var a=s[t];return e.I||!Qp(a)?a:a===vm(e.t,t)?(xm(e),e.o[t]=km(e.A.h,a,e)):a},has:function(e,t){return t in nm(e)},ownKeys:function(e){return Reflect.ownKeys(nm(e))},set:function(e,t,n){var r=bm(nm(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=vm(nm(e),t),s=null==i?void 0:i[Rm];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Zp(n,i)&&(void 0!==n||Yp(e.t,t)))return!0;xm(e),wm(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==vm(e.t,t)||t in e.t?(e.R[t]=!1,xm(e),wm(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=nm(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Kp(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Kp(12)}},Fm={};Gp(zm,function(e,t){Fm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Fm.deleteProperty=function(e,t){return Fm.set.call(this,e,t,void 0)},Fm.set=function(e,t,n){return zm.set.call(this,e[0],t,n,e[0])};var Um=function(){function e(e){var t=this;this.O=jm,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var s=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return s.produce(e,function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))})}}var a;if("function"!=typeof n&&Kp(6),void 0!==r&&"function"!=typeof r&&Kp(7),Qp(e)){var o=hm(t),l=km(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?um(o):dm(o)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then(function(e){return cm(o,r),pm(e,o)},function(e){throw um(o),e}):(cm(o,r),pm(a,o))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===Pm&&(a=void 0),t.D&&im(a,!0),r){var u=[],d=[];om("Patches").M(e,a,u,d),r(u,d)}return a}Kp(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,s=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return[e,r,i]}):[s,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Qp(e)||Kp(8),Wp(e)&&(e=_m(e));var t=hm(this),n=km(this,e,void 0);return n[Rm].C=!0,dm(t),n},t.finishDraft=function(e,t){var n=(e&&e[Rm]).A;return cm(n,t),pm(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!jm&&Kp(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=om("Patches").$;return Wp(e)?i(e,t):this.produce(e,function(e){return i(e,t)})},e}(),Vm=new Um,$m=Vm.produce;function qm(e){return(qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bm(e){var t=function(e,t){if("object"!=qm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=qm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qm(t)?t:t+""}function Hm(e,t,n){return(t=Bm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Km(Object(n),!0).forEach(function(t){Hm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Km(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qm(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}Vm.produceWithPatches.bind(Vm),Vm.setAutoFreeze.bind(Vm),Vm.setUseProxies.bind(Vm),Vm.applyPatches.bind(Vm),Vm.createDraft.bind(Vm),Vm.finishDraft.bind(Vm);var Gm="function"==typeof Symbol&&Symbol.observable||"@@observable",Xm=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ym={INIT:"@@redux/INIT"+Xm(),REPLACE:"@@redux/REPLACE"+Xm(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Xm()}};function Jm(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Qm(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Qm(1));return n(Jm)(e,t)}if("function"!=typeof e)throw new Error(Qm(2));var i=e,s=t,a=[],o=a,l=!1;function c(){o===a&&(o=a.slice())}function u(){if(l)throw new Error(Qm(3));return s}function d(e){if("function"!=typeof e)throw new Error(Qm(4));if(l)throw new Error(Qm(5));var t=!0;return c(),o.push(e),function(){if(t){if(l)throw new Error(Qm(6));t=!1,c();var n=o.indexOf(e);o.splice(n,1),a=null}}}function h(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(Qm(7));if(void 0===e.type)throw new Error(Qm(8));if(l)throw new Error(Qm(9));try{l=!0,s=i(s,e)}finally{l=!1}for(var t=a=o,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Ym.INIT}),(r={dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Qm(10));i=e,h({type:Ym.REPLACE})}})[Gm]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Qm(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[Gm]=function(){return this},e},r}function Zm(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var s,a=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:Ym.INIT}))throw new Error(Qm(12));if(void 0===n(void 0,{type:Ym.PROBE_UNKNOWN_ACTION()}))throw new Error(Qm(13))})}(n)}catch(_D){s=_D}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},o=0;o<a.length;o++){var l=a[o],c=n[l],u=e[l],d=c(u,t);if(void 0===d)throw t&&t.type,new Error(Qm(14));i[l]=d,r=r||d!==u}return(r=r||a.length!==Object.keys(e).length)?i:e}}function eg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function tg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Qm(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map(function(e){return e(i)});return r=eg.apply(void 0,s)(n.dispatch),Wm(Wm({},n),{},{dispatch:r})}}}function ng(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var rg=ng();rg.withExtraArgument=ng;var ig=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sg=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(_D){s=[6,_D],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},ag=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},og=Object.defineProperty,lg=Object.defineProperties,cg=Object.getOwnPropertyDescriptors,ug=Object.getOwnPropertySymbols,dg=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,fg=function(e,t,n){return t in e?og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},pg=function(e,t){for(var n in t||(t={}))dg.call(t,n)&&fg(e,n,t[n]);if(ug)for(var r=0,i=ug(t);r<i.length;r++){n=i[r];hg.call(t,n)&&fg(e,n,t[n])}return e},mg=function(e,t){return lg(e,cg(t))},gg=function(e,t,n){return new Promise(function(r,i){var s=function(e){try{o(n.next(e))}catch(_D){i(_D)}},a=function(e){try{o(n.throw(e))}catch(_D){i(_D)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(s,a)};o((n=n.apply(e,t)).next())})},yg="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?eg:eg.apply(null,arguments)};function vg(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function bg(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return pg(pg({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var wg=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return ig(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ag([void 0],e[0].concat(this)))):new(t.bind.apply(t,ag([void 0],e.concat(this))))},t}(Array),xg=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return ig(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ag([void 0],e[0].concat(this)))):new(t.bind.apply(t,ag([void 0],e.concat(this))))},t}(Array);function kg(e){return Qp(e)?$m(e,function(){}):e}function _g(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new wg;n&&("boolean"==typeof n?r.push(rg):r.push(rg.withExtraArgument(n.extraArgument)));return r}(e)}}function Sg(e){var t,n=_g(),r=e||{},i=r.reducer,s=void 0===i?void 0:i,a=r.middleware,o=void 0===a?n():a,l=r.devTools,c=void 0===l||l,u=r.preloadedState,d=void 0===u?void 0:u,h=r.enhancers,f=void 0===h?void 0:h;if("function"==typeof s)t=s;else{if(!vg(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Zm(s)}var p=o;"function"==typeof p&&(p=p(n));var m=tg.apply(void 0,p),g=eg;c&&(g=yg(pg({trace:!1},"object"==typeof c&&c)));var y=new xg(m),v=y;return Array.isArray(f)?v=ag([m],f):"function"==typeof f&&(v=f(y)),Jm(t,d,g.apply(void 0,v))}function Eg(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Tg(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:kg(e.initialState),i=e.reducers||{},s=Object.keys(i),a={},o={},l={};function c(){var t="function"==typeof e.extraReducers?Eg(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,s=t[1],a=void 0===s?[]:s,l=t[2],c=void 0===l?void 0:l,u=pg(pg({},i),o);return function(e,t,n,r){void 0===n&&(n=[]);var i,s="function"==typeof t?Eg(t):[t,n,r],a=s[0],o=s[1],l=s[2];if("function"==typeof e)i=function(){return kg(e())};else{var c=kg(e);i=function(){return c}}function u(e,t){void 0===e&&(e=i());var n=ag([a[t.type]],o.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===n.filter(function(e){return!!e}).length&&(n=[l]),n.reduce(function(e,n){if(n){var r;if(Wp(e))return void 0===(r=n(e,t))?e:r;if(Qp(e))return $m(e,function(e){return n(e,t)});if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e},e)}return u.getInitialState=i,u}(r,function(e){for(var t in u)e.addCase(t,u[t]);for(var n=0,r=a;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)})}return s.forEach(function(e){var n,r,s=i[e],c=t+"/"+e;"reducer"in s?(n=s.reducer,r=s.prepare):n=s,a[e]=n,o[c]=n,l[e]=r?bg(c,r):bg(c)}),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:a,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var Cg=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Ng=["name","message","stack","code"],Ig=function(){return function(e,t){this.payload=e,this.meta=t}}(),jg=function(){return function(e,t){this.payload=e,this.meta=t}}(),Pg=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=Ng;n<r.length;n++){var i=r[n];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},Ag=function(){function e(e,t,n){var r=bg(e+"/fulfilled",function(e,t,n,r){return{payload:e,meta:mg(pg({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}}),i=bg(e+"/pending",function(e,t,n){return{payload:void 0,meta:mg(pg({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),s=bg(e+"/rejected",function(e,t,r,i,s){return{payload:i,error:(n&&n.serializeError||Pg)(e||"Rejected"),meta:mg(pg({},s||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}}),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign(function(e){return function(o,l,c){var u,d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Cg(),h=new a;function f(e){u=e,h.abort()}var p=function(){return gg(this,null,function(){var a,p,m,g,y,v;return sg(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),g=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:l,extra:c}),null===(w=g)||"object"!=typeof w||"function"!=typeof w.then?[3,2]:[4,g];case 1:g=b.sent(),b.label=2;case 2:if(!1===g||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise(function(e,t){return h.signal.addEventListener("abort",function(){return t({name:"AbortError",message:u||"Aborted"})})}),o(i(d,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:d,arg:e},{getState:l,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:o,getState:l,extra:c,requestId:d,signal:h.signal,abort:f,rejectWithValue:function(e,t){return new Ig(e,t)},fulfillWithValue:function(e,t){return new jg(e,t)}})).then(function(t){if(t instanceof Ig)throw t;return t instanceof jg?r(t.payload,d,e,t.meta):r(t,d,e)})])];case 3:return m=b.sent(),[3,5];case 4:return v=b.sent(),m=v instanceof Ig?s(null,d,e,v.payload,v.meta):s(v,d,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&s.match(m)&&m.meta.condition||o(m),[2,m]}var w})})}();return Object.assign(p,{abort:f,requestId:d,arg:e,unwrap:function(){return p.then(Rg)}})}},{pending:i,rejected:s,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function Rg(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Og=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},Lg=function(){},Dg=function(e,t){return void 0===t&&(t=Lg),e.catch(t),e},Mg=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},zg=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Fg="listener",Ug="completed",Vg="cancelled",$g="task-"+Vg,qg="task-"+Ug,Bg=Fg+"-"+Vg,Hg=Fg+"-"+Ug,Kg=function(){return function(e){this.code=e,this.name="TaskAbortError",this.message="task "+Vg+" (reason: "+e+")"}}(),Wg=function(e){if(e.aborted)throw new Kg(e.reason)};function Qg(e,t){var n=Lg;return new Promise(function(r,i){var s=function(){return i(new Kg(e.reason))};e.aborted?s():(n=Mg(e,s),t.finally(function(){return n()}).then(r,i))}).finally(function(){n=Lg})}var Gg=function(e){return function(t){return Dg(Qg(e,t).then(function(t){return Wg(e),t}))}},Xg=function(e){var t=Gg(e);return function(e){return t(new Promise(function(t){return setTimeout(t,e)}))}},Yg=Object.assign,Jg={},Zg="listenerMiddleware",ey=function(e,t){return function(n,r){Og(n,"taskExecutor");var i,s=new AbortController;i=s,Mg(e,function(){return zg(i,e.reason)});var a,o,l=(a=function(){return gg(void 0,null,function(){var t;return sg(this,function(r){switch(r.label){case 0:return Wg(e),Wg(s.signal),[4,n({pause:Gg(s.signal),delay:Xg(s.signal),signal:s.signal})];case 1:return t=r.sent(),Wg(s.signal),[2,t]}})})},o=function(){return zg(s,qg)},gg(void 0,null,function(){var e;return sg(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return t.sent(),[4,a()];case 2:return[2,{status:"ok",value:t.sent()}];case 3:return[2,{status:(e=t.sent())instanceof Kg?"cancelled":"rejected",error:e}];case 4:return null==o||o(),[7];case 5:return[2]}})}));return(null==r?void 0:r.autoJoin)&&t.push(l),{result:Gg(e)(l),cancel:function(){zg(s,$g)}}}},ty=function(e,t){return function(n,r){return Dg(function(n,r){return gg(void 0,null,function(){var i,s,a,o;return sg(this,function(l){switch(l.label){case 0:Wg(t),i=function(){},s=new Promise(function(t,r){var s=e({predicate:n,effect:function(e,n){n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});i=function(){s(),r()}}),a=[s],null!=r&&a.push(new Promise(function(e){return setTimeout(e,r,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Qg(t,Promise.race(a))];case 2:return o=l.sent(),Wg(t),[2,o];case 3:return i(),[7];case 4:return[2]}})})}(n,r))}},ny=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=bg(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Og(s,"options.listener"),{predicate:i,type:t,effect:s}},ry=function(e){e.pending.forEach(function(e){zg(e,Bg)})},iy=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},sy=bg(Zg+"/add"),ay=bg(Zg+"/removeAll"),oy=bg(Zg+"/remove"),ly=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]};function cy(e){var t=this;void 0===e&&(e={});var n=new Map,r=e.extra,i=e.onError,s=void 0===i?ly:i;Og(s,"onError");var a=function(e){for(var t=0,r=Array.from(n.values());t<r.length;t++){var i=r[t];if(e(i))return i}},o=function(e){var t=a(function(t){return t.effect===e.effect});return t||(t=function(e){var t=ny(e),n=t.type,r=t.predicate,i=t.effect;return{id:Cg(),effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}}(e)),function(e){return e.unsubscribe=function(){return n.delete(e.id)},n.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&ry(e)}}(t)},l=function(e){var t=ny(e),n=t.type,r=t.effect,i=t.predicate,s=a(function(e){return("string"==typeof n?e.type===n:e.predicate===i)&&e.effect===r});return s&&(s.unsubscribe(),e.cancelActive&&ry(s)),!!s},c=function(e,i,a,l){return gg(t,null,function(){var t,c,u,d;return sg(this,function(h){switch(h.label){case 0:t=new AbortController,c=ty(o,t.signal),u=[],h.label=1;case 1:return h.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(i,Yg({},a,{getOriginalState:l,condition:function(e,t){return c(e,t).then(Boolean)},take:c,delay:Xg(t.signal),pause:Gg(t.signal),extra:r,signal:t.signal,fork:ey(t.signal,u),unsubscribe:e.unsubscribe,subscribe:function(){n.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach(function(e,n,r){e!==t&&(zg(e,Bg),r.delete(e))})}})))];case 2:return h.sent(),[3,6];case 3:return(d=h.sent())instanceof Kg||iy(s,d,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(u)];case 5:return h.sent(),zg(t,Hg),e.pending.delete(t),[7];case 6:return[2]}})})},u=function(e){return function(){e.forEach(ry),e.clear()}}(n);return{middleware:function(e){return function(t){return function(r){if(!function(e){return vg(e)&&"type"in e}(r))return t(r);if(sy.match(r))return o(r.payload);if(!ay.match(r)){if(oy.match(r))return l(r.payload);var i,a=e.getState(),d=function(){if(a===Jg)throw new Error(Zg+": getOriginalState can only be called synchronously");return a};try{if(i=t(r),n.size>0)for(var h=e.getState(),f=Array.from(n.values()),p=0,m=f;p<m.length;p++){var g=m[p],y=!1;try{y=g.predicate(r,h,a)}catch(v){y=!1,iy(s,v,{raisedBy:"predicate"})}y&&c(g,r,e,d)}}finally{a=Jg}return i}u()}}},startListening:o,stopListening:l,clearListeners:u}}"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:globalThis),function(){function e(e,t){var n=a[e];return n?n.enumerable=t:a[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Rm];return zm.get(t,e)},set:function(t){var n=this[Rm];zm.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Rm];if(!i.P)switch(i.i){case 5:r(i)&&wm(i);break;case 4:n(i)&&wm(i)}}}function n(e){for(var t=e.t,n=e.k,r=Lm(n),i=r.length-1;i>=0;i--){var s=r[i];if(s!==Rm){var a=t[s];if(void 0===a&&!Yp(t,s))return!0;var o=n[s],l=o&&o[Rm];if(l?l.t!==a:!Zp(o,a))return!0}}var c=!!t[Rm];return r.length!==Lm(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i,s,a={};s={J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var s=Dm(n);delete s[Rm];for(var a=Lm(s),o=0;o<a.length;o++){var l=a[o];s[l]=e(l,t||!!s[l].enumerable)}return Object.create(Object.getPrototypeOf(n),s)}(r,t),s={i:r?5:4,A:n?n.A:lm(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Rm,{value:s,writable:!0}),i},S:function(e,n,i){i?Wp(n)&&n[Rm].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Rm];if(n){var i=n.t,s=n.k,a=n.R,o=n.i;if(4===o)Gp(s,function(t){t!==Rm&&(void 0!==i[t]||Yp(i,t)?a[t]||e(s[t]):(a[t]=!0,wm(n)))}),Gp(i,function(e){void 0!==s[e]||Yp(s,e)||(a[e]=!1,wm(n))});else if(5===o){if(r(n)&&(wm(n),a.length=!0),s.length<i.length)for(var l=s.length;l<i.length;l++)a[l]=!1;else for(var c=i.length;c<s.length;c++)a[c]=!0;for(var u=Math.min(s.length,i.length),d=0;d<u;d++)s.hasOwnProperty(d)||(a[d]=!0),void 0===a[d]&&e(s[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}},Mm[i="ES5"]||(Mm[i]=s)}();const uy=Tg({name:"auth",initialState:{user:null,isLoading:!0,error:null,isAuthenticated:!1,needsRoleSelection:!1,authChecked:!1},reducers:{loginStart:e=>{e.isLoading=!0,e.error=null},loginSuccess:(e,t)=>{e.isLoading=!1,e.user=t.payload,e.isAuthenticated=!0,e.error=null,e.needsRoleSelection=t.payload.needsRoleSelection??!t.payload.role},loginFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload,e.user=null,e.isAuthenticated=!1},logout:e=>{e.user=null,e.isAuthenticated=!1,e.isLoading=!1},authCheckComplete:e=>{e.isLoading=!1,e.authChecked=!0},setRole:(e,t)=>{e.user&&(e.user.role=t.payload,e.needsRoleSelection=!1)},setLoading:(e,t)=>{e.isLoading=t.payload}}}),{loginSuccess:dy,logout:hy,authCheckComplete:fy,setRole:py}=uy.actions,my=uy.reducer;var gy={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},vy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(yy(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new by;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class by extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wy=function(e){return function(e){const t=yy(e);return vy.encodeByteArray(t,!0)}(e).replace(/\./g,"")},xy=function(e){try{return vy.decodeString(e,!0)}catch(_D){}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ky=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof globalThis)return globalThis;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,_y=()=>{try{return ky()||(()=>{if("undefined"==typeof process)return;const e=gy.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(_D){return}const t=e&&xy(e[1]);return t&&JSON.parse(t)})()}catch(_D){return}},Sy=e=>{var t,n;return null===(n=null===(t=_y())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ey=()=>{var e;return null===(e=_y())||void 0===e?void 0:e.config},Ty=e=>{var t;return null===(t=_y())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Cy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ny(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Iy(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function jy(){return!function(){var e;const t=null===(e=_y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(globalThis.process)}catch(_D){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Py(){try{return"object"==typeof indexedDB}catch(_D){return!1}}function Ay(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class Ry extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ry.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oy.prototype.create)}}class Oy{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Ly,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new Ry(r,a,n)}}const Ly=/\{\$([^}]+)}/g;function Dy(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(My(n)&&My(s)){if(!Dy(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function My(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Fy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Uy(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Vy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=$y),void 0===r.error&&(r.error=$y),void 0===r.complete&&(r.complete=$y);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(_D){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(_D){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $y(){}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(e){return e&&e._delegate?e._delegate:e}class Hy{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Cy;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(_D){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(_D){if(r)return null;throw _D}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Ky})}catch(_D){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(_D){}}}}clearInstance(e=Ky){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Ky){return this.instances.has(e)}getOptions(e=Ky){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Ky?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=Ky){return this.component?this.component.multipleInstances?e:Ky:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Wy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gy,Xy;(Xy=Gy||(Gy={}))[Xy.DEBUG=0]="DEBUG",Xy[Xy.VERBOSE=1]="VERBOSE",Xy[Xy.INFO=2]="INFO",Xy[Xy.WARN=3]="WARN",Xy[Xy.ERROR=4]="ERROR",Xy[Xy.SILENT=5]="SILENT";const Yy={debug:Gy.DEBUG,verbose:Gy.VERBOSE,info:Gy.INFO,warn:Gy.WARN,error:Gy.ERROR,silent:Gy.SILENT},Jy=Gy.INFO,Zy={[Gy.DEBUG]:"log",[Gy.VERBOSE]:"log",[Gy.INFO]:"info",[Gy.WARN]:"warn",[Gy.ERROR]:"error"},ev=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!Zy[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let tv=class{constructor(e){this.name=e,this._logLevel=Jy,this._logHandler=ev,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gy))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Yy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gy.DEBUG,...e),this._logHandler(this,Gy.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gy.VERBOSE,...e),this._logHandler(this,Gy.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gy.INFO,...e),this._logHandler(this,Gy.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gy.WARN,...e),this._logHandler(this,Gy.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gy.ERROR,...e),this._logHandler(this,Gy.ERROR,...e)}};let nv,rv;const iv=new WeakMap,sv=new WeakMap,av=new WeakMap,ov=new WeakMap,lv=new WeakMap;let cv={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return sv.get(e);if("objectStoreNames"===t)return e.objectStoreNames||av.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hv(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function uv(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(fv(this),t),hv(iv.get(this))}:function(...t){return hv(e.apply(fv(this),t))}:function(t,...n){const r=e.call(fv(this),t,...n);return av.set(r,t.sort?t.sort():[t]),hv(r)}}function dv(e){return"function"==typeof e?uv(e):(e instanceof IDBTransaction&&function(e){if(sv.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});sv.set(e,t)}(e),t=e,(nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,cv):e);var t}function hv(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(hv(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&iv.set(t,e)}).catch(()=>{}),lv.set(t,e),t}(e);if(ov.has(e))return ov.get(e);const t=dv(e);return t!==e&&(ov.set(e,t),lv.set(t,e)),t}const fv=e=>lv.get(e);function pv(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=hv(a);return r&&a.addEventListener("upgradeneeded",e=>{r(hv(a.result),e.oldVersion,e.newVersion,hv(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const mv=["get","getKey","getAll","getAllKeys","count"],gv=["put","add","delete","clear"],yv=new Map;function vv(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(yv.get(t))return yv.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=gv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mv.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return yv.set(t,s),s}cv=(e=>({...e,get:(t,n,r)=>vv(t,n)||e.get(t,n,r),has:(t,n)=>!!vv(t,n)||e.has(t,n)}))(cv);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const wv="@firebase/app",xv="0.10.13",kv=new tv("@firebase/app"),_v="@firebase/app-compat",Sv="@firebase/analytics-compat",Ev="@firebase/analytics",Tv="@firebase/app-check-compat",Cv="@firebase/app-check",Nv="@firebase/auth",Iv="@firebase/auth-compat",jv="@firebase/database",Pv="@firebase/data-connect",Av="@firebase/database-compat",Rv="@firebase/functions",Ov="@firebase/functions-compat",Lv="@firebase/installations",Dv="@firebase/installations-compat",Mv="@firebase/messaging",zv="@firebase/messaging-compat",Fv="@firebase/performance",Uv="@firebase/performance-compat",Vv="@firebase/remote-config",$v="@firebase/remote-config-compat",qv="@firebase/storage",Bv="@firebase/storage-compat",Hv="@firebase/firestore",Kv="@firebase/vertexai-preview",Wv="@firebase/firestore-compat",Qv="firebase",Gv="[DEFAULT]",Xv={[wv]:"fire-core",[_v]:"fire-core-compat",[Ev]:"fire-analytics",[Sv]:"fire-analytics-compat",[Cv]:"fire-app-check",[Tv]:"fire-app-check-compat",[Nv]:"fire-auth",[Iv]:"fire-auth-compat",[jv]:"fire-rtdb",[Pv]:"fire-data-connect",[Av]:"fire-rtdb-compat",[Rv]:"fire-fn",[Ov]:"fire-fn-compat",[Lv]:"fire-iid",[Dv]:"fire-iid-compat",[Mv]:"fire-fcm",[zv]:"fire-fcm-compat",[Fv]:"fire-perf",[Uv]:"fire-perf-compat",[Vv]:"fire-rc",[$v]:"fire-rc-compat",[qv]:"fire-gcs",[Bv]:"fire-gcs-compat",[Hv]:"fire-fst",[Wv]:"fire-fst-compat",[Kv]:"fire-vertex","fire-js":"fire-js",[Qv]:"fire-js-all"},Yv=new Map,Jv=new Map,Zv=new Map;function eb(e,t){try{e.container.addComponent(t)}catch(_D){kv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,_D)}}function tb(e){const t=e.name;if(Zv.has(t))return kv.debug(`There were multiple attempts to register component ${t}.`),!1;Zv.set(t,e);for(const n of Yv.values())eb(n,e);for(const n of Jv.values())eb(n,e);return!0}function nb(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rb(e){return void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=new Oy("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class sb{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ib.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="10.14.1";function ob(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Gv,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw ib.create("bad-app-name",{appName:String(i)});if(n||(n=Ey()),!n)throw ib.create("no-options");const s=Yv.get(i);if(s){if(Dy(n,s.options)&&Dy(r,s.config))return s;throw ib.create("duplicate-app",{appName:i})}const a=new Qy(i);for(const l of Zv.values())a.addComponent(l);const o=new sb(n,r,a);return Yv.set(i,o),o}function lb(e=Gv){const t=Yv.get(e);if(!t&&e===Gv&&Ey())return ob();if(!t)throw ib.create("no-app",{appName:e});return t}function cb(){return Array.from(Yv.values())}function ub(e,t,n){var r;let i=null!==(r=Xv[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void kv.warn(e.join(" "))}tb(new Hy(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebase-heartbeat-store";let hb=null;function fb(){return hb||(hb=pv("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(db)}catch(_D){}}}).catch(e=>{throw ib.create("idb-open",{originalErrorMessage:e.message})})),hb}async function pb(e,t){try{const n=(await fb()).transaction(db,"readwrite"),r=n.objectStore(db);await r.put(t,mb(e)),await n.done}catch(_D){if(_D instanceof Ry)kv.warn(_D.message);else{const t=ib.create("idb-set",{originalErrorMessage:null==_D?void 0:_D.message});kv.warn(t.message)}}}function mb(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vb(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yb();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(_D){kv.warn(_D)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=yb(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),bb(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bb(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=wy(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(_D){return kv.warn(_D),""}}}function yb(){return(new Date).toISOString().substring(0,10)}class vb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Py()&&Ay().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await fb()).transaction(db),n=await t.objectStore(db).get(mb(e));return await t.done,n}catch(_D){if(_D instanceof Ry)kv.warn(_D.message);else{const t=ib.create("idb-get",{originalErrorMessage:null==_D?void 0:_D.message});kv.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pb(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return pb(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function bb(e){return wy(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wb;wb="",tb(new Hy("platform-logger",e=>new bv(e),"PRIVATE")),tb(new Hy("heartbeat",e=>new gb(e),"PRIVATE")),ub(wv,xv,wb),ub(wv,xv,"esm2017"),ub("fire-js","");var xb,kb,_b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,kb=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},xb=r}).apply(void 0!==_b?_b:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Sb,Eb,Tb,Cb,Nb,Ib,jb,Pb,Ab="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ab&&Ab];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){i.setTimeout(()=>{throw e},0)}function S(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,N=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(P)}};var P=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){_(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function A(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,R);var D={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),z=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++z,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=q(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=Z(n),e&&e[M]?e.K(t,n,!!a(r)&&!!r.capture,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Y(e);if(l||(e[B]=l=new V(e)),n=l.add(t,n,r,o,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=Z(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])$(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?($(n,e),0==n.h&&(n.src=null,t[B]=null)):U(e)}}}function G(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Y(e){return(e=e[B])instanceof V?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){A.call(this),this.i=new V(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var i=t;x(t=new R(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ne(a,r,!0,t)&&i}if(i=ne(a=t.g=e,r,!0,t)&&i,i=ne(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(a=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&$(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ee,A),ee.prototype[M]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){A.call(this),this.h=e,this.g={}}d(ae,A);var oe=[];function le(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=i.JSON.stringify,ue=i.JSON.parse,de=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function he(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}he.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){R.call(this,"d")}function ye(){R.call(this,"c")}d(ge,R),d(ye,R);var ve={},be=null;function we(){return be=be||new ee}function xe(e){R.call(this,ve.La,e)}function ke(e){const t=we();te(t,new xe(t))}function _e(e,t){R.call(this,ve.STAT_EVENT,e),this.stat=t}function Se(e){const t=we();te(t,new _e(t,e))}function Ee(e,t){R.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ce(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",d(xe,R),ve.STAT_EVENT="statevent",d(_e,R),ve.Ma="timingevent",d(Ee,R),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ie,je={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ae(){}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}d(Ae,he),Ae.prototype.g=function(){return new XMLHttpRequest},Ae.prototype.i=function(){return{}},Ie=new Ae;var Le={},De={};function Me(e,t,n){e.L=1,e.v=ct(it(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),Ve(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(oe[0]=i.toString()),i=oe);for(var s=0;s<i.length;s++){var a=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Fe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ue(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Be(e){0==e.j.G||e.J||an(e.j,e)}function He(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ye(n.h,e)))if(!e.K&&Ye(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Qt(n)}tn(n),Se(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else ln(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=un(r,r.J?r.ia:null,r.W),a.K){Ze(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),Ve(o)),r.g=a}else en(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||ln(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ln(n,7):Wt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Re.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Bt(this.g)))){this.J||4!=h||7==t||ke(),qe(this);var n=this.g.Z();this.X=n;t:if(Fe(this)){var r=Bt(this.g);e="";var s=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),Be(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),He(this),Be(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ue(this,o),e==De){4==h&&(this.s=4,Se(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Se(15),Ne(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Ke(this,e)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),nn(d),d.M=!0,Se(11))}}else Ne(this.i,this.l,o,"[Invalid Chunked Response]"),He(this),Be(this)}else Ne(this.i,this.l,o,null),Ke(this,o);4==h&&He(this),this.o&&!this.J&&(4==h?an(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),He(this),Be(this)}}}catch(h){}},Re.prototype.cancel=function(){this.J=!0,He(this)},Re.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Se(17)),He(this),this.s=2,Be(this)):$e(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Qe.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),at(this,t[4]),this.l=dt(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(xt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,yt)),e.i=new bt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,vt)),e.join("")};var pt=/[#\/\?@]/g,mt=/[#\?:]/g,gt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function xt(e,t){wt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return wt(e),t=St(e,t),e.g.has(t)}function _t(e,t,n){xt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Tt(){this.g=new de}function Ct(e,t,n){const r=n||"";try{tt(e,function(e,n){let i=e;a(e)&&(i=ce(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(_D){throw t.push(r+"type="+encodeURIComponent("_badmap")),_D}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function jt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Lt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){wt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"==typeof e)kt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,kt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Nt,he),Nt.prototype.g=function(){return new It(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),d(It,ee),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,At(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):At(this),3==this.readyState&&jt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Lt,ee);var Dt=/^https?$/i,Mt=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),Vt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(nt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Dt.test(a?a.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ft(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(_D){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Bt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Gt(e),3==e.G){var t=e.U++,n=it(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Jt(e,n),(t=new Re(e,e.j,t)).L=2,t.v=ct(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}cn(e)}function Qt(e){e.g&&(nn(e),e.g.cancel(),e.g=null)}function Gt(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Ge(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||j(),N||(C(),N=!0),I.add(t,e),e.B=0}}function Yt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Re(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Zt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Me(n,r,t)}function Jt(e,t){e.H&&v(e.H,function(e,n){lt(t,n,e)}),e.l&&tt({},function(e,n){lt(t,n,e)})}function Zt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Ct(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function en(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||j(),N||(C(),N=!0),I.add(t,e),e.v=0}}function tn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),on(e,e.v)),e.v++,!0)}function nn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function rn(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(it(t)),n.m=null,n.P=!0,ze(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){sn(e),nn(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=we(),new Ee(r,n)),Xt(e)}else en(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(c(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&tn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ln(e,5);break;case 4:ln(e,10);break;case 3:ln(e,6);break;default:ln(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function ln(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ct(r),t?function(e,t){const n=new Ce;if(i.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),cn(e),Gt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function un(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),at(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new rt(null);r&&st(a,r),t&&(a.g=t),s&&at(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Jt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new Nt({eb:n})):new Lt(e.pa)).Ha(e.J),t}function hn(){}function fn(){}function pn(e,t){ee.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function mn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?fe(this.o):fe(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void zt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Mt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){zt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(ut){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(ut){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=un(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Re(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,i,t),lt(n=it(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Jt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Rt(s)))+"&"+t:this.m&&Ot(n,this.m,s)),Je(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Me(i,n,null)):Me(i,n,t),this.G=2}}else 3==this.G&&(e?Yt(this,e):0==this.i.length||Ge(this.h)||Yt(this))},e.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Qt(this),rn(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),tn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new pn(e,t)},d(pn,ee),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Wt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Xt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,pn.aa.N.call(this)},d(mn,ge),d(gn,ye),d(yn,hn),yn.prototype.ua=function(){te(this.g,"a")},yn.prototype.ta=function(e){te(this.g,new mn(e))},yn.prototype.sa=function(e){te(this.g,new gn)},yn.prototype.ra=function(){te(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Pb=function(){return new fn},jb=function(){return we()},Ib=ve,Nb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Cb=je,Pe.COMPLETE="complete",Tb=Pe,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Eb=pe,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Sb=Lt}).apply(void 0!==Ab?Ab:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Rb="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ob=class{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ob.UNAUTHENTICATED=new Ob(null),Ob.GOOGLE_CREDENTIALS=new Ob("google-credentials-uid"),Ob.FIRST_PARTY=new Ob("first-party-uid"),Ob.MOCK_USER=new Ob("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Lb="10.14.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new tv("@firebase/firestore");function Mb(){return Db.logLevel}function zb(e,...t){if(Db.logLevel<=Gy.DEBUG){const n=t.map(Vb);Db.debug(`Firestore (${Lb}): ${e}`,...n)}}function Fb(e,...t){if(Db.logLevel<=Gy.ERROR){const n=t.map(Vb);Db.error(`Firestore (${Lb}): ${e}`,...n)}}function Ub(e,...t){if(Db.logLevel<=Gy.WARN){const n=t.map(Vb);Db.warn(`Firestore (${Lb}): ${e}`,...n)}}function Vb(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(e="Unexpected state"){const t=`FIRESTORE (${Lb}) INTERNAL ASSERTION FAILED: `+e;throw Fb(t),new Error(t)}function qb(e,t){e||$b()}function Bb(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kb extends Ry{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ob.UNAUTHENTICATED))}shutdown(){}}class Xb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yb{constructor(e){this.t=e,this.currentUser=Ob.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qb(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wb;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wb,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{zb("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(zb("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wb)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(zb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qb("string"==typeof t.accessToken),new Qb(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qb(null===e||"string"==typeof e),new Ob(e)}}class Jb{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ob.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Zb{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Jb(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ob.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){qb(void 0===this.o);const n=e=>{null!=e.error&&zb("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,zb("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{zb("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):zb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(qb("string"==typeof e.token),this.R=e.token,new ew(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=nw(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function iw(e,t){return e<t?-1:e>t?1:0}function sw(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Kb(Hb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Kb(Hb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Kb(Hb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kb(Hb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return aw.fromMillis(Date.now())}static fromDate(e){return aw.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new aw(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?iw(this.nanoseconds,e.nanoseconds):iw(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ow(e)}static min(){return new ow(new aw(0,0))}static max(){return new ow(new aw(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t,n){void 0===t?t=0:t>e.length&&$b(),void 0===n?n=e.length-t:n>e.length-t&&$b(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lw?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cw extends lw{construct(e,t,n){return new cw(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Kb(Hb.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new cw(t)}static emptyPath(){return new cw([])}}const uw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dw extends lw{construct(e,t,n){return new dw(e,t,n)}static isValidIdentifier(e){return uw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dw.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dw(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Kb(Hb.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Kb(Hb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Kb(Hb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Kb(Hb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dw(t)}static emptyPath(){return new dw([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.path=e}static fromPath(e){return new hw(cw.fromString(e))}static fromName(e){return new hw(cw.fromString(e).popFirst(5))}static empty(){return new hw(cw.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cw.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cw.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hw(new cw(e.slice()))}}function fw(e){return new pw(e.readTime,e.key,-1)}class pw{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new pw(ow.min(),hw.empty(),-1)}static max(){return new pw(ow.max(),hw.empty(),-1)}}function mw(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=hw.comparator(e.documentKey,t.documentKey),0!==n?n:iw(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class gw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(e){if(e.code!==Hb.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;zb("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$b(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vw((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof vw?t:vw.resolve(t)}catch(t){return vw.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):vw.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):vw.reject(t)}static resolve(e){return new vw((t,n)=>{t(e)})}static reject(e){return new vw((t,n)=>{n(e)})}static waitFor(e){return new vw((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=vw.resolve(!1);for(const n of e)t=t.next(e=>e?vw.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new vw((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new vw((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function bw(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function xw(e){return null==e}function kw(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _w(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Sw(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ew(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ww.oe=-1;class Tw{constructor(e,t){this.comparator=e,this.root=t||Nw.EMPTY}insert(e,t){return new Tw(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nw.BLACK,null,null))}remove(e){return new Tw(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nw.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cw(this.root,e,this.comparator,!0)}}class Cw{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nw{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Nw.RED,this.left=null!=r?r:Nw.EMPTY,this.right=null!=i?i:Nw.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Nw(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nw.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Nw.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nw.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $b();if(this.right.isRed())throw $b();const e=this.left.check();if(e!==this.right.check())throw $b();return e+(this.isRed()?0:1)}}Nw.EMPTY=null,Nw.RED=!0,Nw.BLACK=!1,Nw.EMPTY=new class{constructor(){this.size=0}get key(){throw $b()}get value(){throw $b()}get color(){throw $b()}get left(){throw $b()}get right(){throw $b()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Nw(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Iw{constructor(e){this.comparator=e,this.data=new Tw(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jw(this.data.getIterator())}getIteratorFrom(e){return new jw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Iw))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Iw(this.comparator);return t.data=e,t}}class jw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e){this.fields=e,e.sort(dw.comparator)}static empty(){return new Pw([])}unionWith(e){let t=new Iw(dw.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Pw(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sw(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Aw("Invalid base64 string: "+t):t}}(e);return new Rw(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Rw(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return iw(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rw.EMPTY_BYTE_STRING=new Rw("");const Ow=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lw(e){if(qb(!!e),"string"==typeof e){let t=0;const n=Ow.exec(e);if(qb(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Dw(e.seconds),nanos:Dw(e.nanos)}}function Dw(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Mw(e){return"string"==typeof e?Rw.fromBase64String(e):Rw.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fw(e){const t=e.mapValue.fields.__previous_value__;return zw(t)?Fw(t):t}function Uw(e){const t=Lw(e.mapValue.fields.__local_write_time__.timestampValue);return new aw(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class $w{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $w("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $w&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw={};function Bw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zw(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}(e)?10:11:$b()}function Hw(e,t){if(e===t)return!0;const n=Bw(e);if(n!==Bw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Uw(e).isEqual(Uw(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Lw(e.timestampValue),r=Lw(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Mw(e.bytesValue).isEqual(Mw(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dw(e.geoPointValue.latitude)===Dw(t.geoPointValue.latitude)&&Dw(e.geoPointValue.longitude)===Dw(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dw(e.integerValue)===Dw(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Dw(e.doubleValue),r=Dw(t.doubleValue);return n===r?kw(n)===kw(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sw(e.arrayValue.values||[],t.arrayValue.values||[],Hw);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_w(n)!==_w(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hw(n[i],r[i])))return!1;return!0}(e,t);default:return $b()}var r}function Kw(e,t){return void 0!==(e.values||[]).find(e=>Hw(e,t))}function Ww(e,t){if(e===t)return 0;const n=Bw(e),r=Bw(t);if(n!==r)return iw(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return iw(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Dw(e.integerValue||e.doubleValue),r=Dw(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Qw(e.timestampValue,t.timestampValue);case 4:return Qw(Uw(e),Uw(t));case 5:return iw(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Mw(e),r=Mw(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=iw(n[i],r[i]);if(0!==e)return e}return iw(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=iw(Dw(e.latitude),Dw(t.latitude));return 0!==n?n:iw(Dw(e.longitude),Dw(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Gw(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=iw((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Gw(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===qw&&t===qw)return 0;if(e===qw)return 1;if(t===qw)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=iw(r[a],s[a]);if(0!==e)return e;const t=Ww(n[r[a]],i[s[a]]);if(0!==t)return t}return iw(r.length,s.length)}(e.mapValue,t.mapValue);default:throw $b()}}function Qw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return iw(e,t);const n=Lw(e),r=Lw(t),i=iw(n.seconds,r.seconds);return 0!==i?i:iw(n.nanos,r.nanos)}function Gw(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ww(n[i],r[i]);if(e)return e}return iw(n.length,r.length)}function Xw(e){return Yw(e)}function Yw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Lw(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Mw(e.bytesValue).toBase64():"referenceValue"in e?function(e){return hw.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yw(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Yw(e.fields[i])}`;return n+"}"}(e.mapValue):$b()}function Jw(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Zw(e){return!!e&&"integerValue"in e}function ex(e){return!!e&&"arrayValue"in e}function tx(e){return!!e&&"nullValue"in e}function nx(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rx(e){return!!e&&"mapValue"in e}function ix(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Sw(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ix(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ix(e.arrayValue.values[n]);return t}return Object.assign({},e)}class sx{constructor(e){this.value=e}static empty(){return new sx({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!rx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ix(t)}setAll(e){let t=dw.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ix(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());rx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hw(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];rx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Sw(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new sx(ix(this.value))}}function ax(e){const t=[];return Sw(e.fields,(e,n)=>{const r=new dw([e]);if(rx(n)){const e=ax(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Pw(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ox{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ox(e,0,ow.min(),ow.min(),ow.min(),sx.empty(),0)}static newFoundDocument(e,t,n,r){return new ox(e,1,t,ow.min(),n,r,0)}static newNoDocument(e,t){return new ox(e,2,t,ow.min(),ow.min(),sx.empty(),0)}static newUnknownDocument(e,t){return new ox(e,3,t,ow.min(),ow.min(),sx.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ow.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sx.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sx.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ow.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ox&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ox(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,t){this.position=e,this.inclusive=t}}function cx(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?hw.comparator(hw.fromName(a.referenceValue),n.key):Ww(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ux(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Hw(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t="asc"){this.field=e,this.dir=t}}function hx(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{}class px extends fx{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xx(e,t,n):"array-contains"===t?new Ex(e,n):"in"===t?new Tx(e,n):"not-in"===t?new Cx(e,n):"array-contains-any"===t?new Nx(e,n):new px(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new kx(e,n):new _x(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ww(t,this.value)):null!==t&&Bw(this.value)===Bw(t)&&this.matchesComparison(Ww(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $b()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mx extends fx{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new mx(e,t)}matches(e){return gx(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function gx(e){return"and"===e.op}function yx(e){return function(e){for(const t of e.filters)if(t instanceof mx)return!1;return!0}(e)&&gx(e)}function vx(e){if(e instanceof px)return e.field.canonicalString()+e.op.toString()+Xw(e.value);if(yx(e))return e.filters.map(e=>vx(e)).join(",");{const t=e.filters.map(e=>vx(e)).join(",");return`${e.op}(${t})`}}function bx(e,t){return e instanceof px?(n=e,(r=t)instanceof px&&n.op===r.op&&n.field.isEqual(r.field)&&Hw(n.value,r.value)):e instanceof mx?function(e,t){return t instanceof mx&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bx(n,t.filters[r]),!0)}(e,t):void $b();var n,r}function wx(e){return e instanceof px?`${(t=e).field.canonicalString()} ${t.op} ${Xw(t.value)}`:e instanceof mx?function(e){return e.op.toString()+" {"+e.getFilters().map(wx).join(" ,")+"}"}(e):"Filter";var t}class xx extends px{constructor(e,t,n){super(e,t,n),this.key=hw.fromName(n.referenceValue)}matches(e){const t=hw.comparator(e.key,this.key);return this.matchesComparison(t)}}class kx extends px{constructor(e,t){super(e,"in",t),this.keys=Sx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _x extends px{constructor(e,t){super(e,"not-in",t),this.keys=Sx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sx(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>hw.fromName(e.referenceValue))}class Ex extends px{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ex(t)&&Kw(t.arrayValue,this.value)}}class Tx extends px{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kw(this.value.arrayValue,t)}}class Cx extends px{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kw(this.value.arrayValue,t)}}class Nx extends px{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ex(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Kw(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function jx(e,t=null,n=[],r=[],i=null,s=null,a=null){return new Ix(e,t,n,r,i,s,a)}function Px(e){const t=Bb(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>vx(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),xw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Xw(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Xw(e)).join(",")),t.ue=e}return t.ue}function Ax(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hx(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bx(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ux(e.startAt,t.startAt)&&ux(e.endAt,t.endAt)}function Rx(e){return hw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Lx(e){return new Ox(e)}function Dx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mx(e){return null!==e.collectionGroup}function zx(e){const t=Bb(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Iw(dw.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new dx(r,n))}),e.has(dw.keyField().canonicalString())||t.ce.push(new dx(dw.keyField(),n))}return t.ce}function Fx(e){const t=Bb(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return jx(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new dx(e.field,t)});const n=e.endAt?new lx(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new lx(e.startAt.position,e.startAt.inclusive):null;return jx(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,zx(e))),t.le}function Ux(e,t){const n=e.filters.concat([t]);return new Ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vx(e,t,n){return new Ox(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $x(e,t){return Ax(Fx(e),Fx(t))&&e.limitType===t.limitType}function qx(e){return`${Px(Fx(e))}|lt:${e.limitType}`}function Bx(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>wx(e)).join(", ")}]`),xw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Xw(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Xw(e)).join(",")),`Target(${t})`}(Fx(e))}; limitType=${e.limitType})`}function Hx(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):hw.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zx(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=cx(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,zx(n),r)||n.endAt&&!function(e,t,n){const r=cx(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,zx(n),r)));var n,r}function Kx(e){return(t,n)=>{let r=!1;for(const i of zx(e)){const e=Wx(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Wx(e,t,n){const r=e.field.isKeyField()?hw.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ww(r,i):$b()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $b()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sw(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Ew(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Tw(hw.comparator);function Xx(){return Gx}const Yx=new Tw(hw.comparator);function Jx(...e){let t=Yx;for(const n of e)t=t.insert(n.key,n);return t}function Zx(e){let t=Yx;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ek(){return nk()}function tk(){return nk()}function nk(){return new Qx(e=>e.toString(),(e,t)=>e.isEqual(t))}const rk=new Tw(hw.comparator),ik=new Iw(hw.comparator);function sk(...e){let t=ik;for(const n of e)t=t.add(n);return t}const ak=new Iw(iw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ok(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kw(t)?"-0":t}}function lk(e){return{integerValue:""+e}}function ck(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!kw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?lk(t):ok(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this._=void 0}}function dk(e,t,n){return e instanceof pk?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&zw(t)&&(t=Fw(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof mk?gk(e,t):e instanceof yk?vk(e,t):function(e,t){const n=fk(e,t),r=wk(n)+wk(e.Pe);return Zw(n)&&Zw(e.Pe)?lk(r):ok(e.serializer,r)}(e,t)}function hk(e,t,n){return e instanceof mk?gk(e,t):e instanceof yk?vk(e,t):n}function fk(e,t){return e instanceof bk?Zw(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class pk extends uk{}class mk extends uk{constructor(e){super(),this.elements=e}}function gk(e,t){const n=xk(t);for(const r of e.elements)n.some(e=>Hw(e,r))||n.push(r);return{arrayValue:{values:n}}}class yk extends uk{constructor(e){super(),this.elements=e}}function vk(e,t){let n=xk(t);for(const r of e.elements)n=n.filter(e=>!Hw(e,r));return{arrayValue:{values:n}}}class bk extends uk{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function wk(e){return Dw(e.integerValue||e.doubleValue)}function xk(e){return ex(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t){this.field=e,this.transform=t}}class _k{constructor(e,t){this.version=e,this.transformResults=t}}class Sk{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sk}static exists(e){return new Sk(void 0,e)}static updateTime(e){return new Sk(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ek(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Tk{}function Ck(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Mk(e.key,Sk.none()):new Ak(e.key,e.data,Sk.none());{const n=e.data,r=sx.empty();let i=new Iw(dw.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Rk(e.key,r,new Pw(i.toArray()),Sk.none())}}function Nk(e,t,n){var r;e instanceof Ak?function(e,t,n){const r=e.value.clone(),i=Lk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rk?function(e,t,n){if(!Ek(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Lk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ok(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function Ik(e,t,n,r){return e instanceof Ak?function(e,t,n,r){if(!Ek(e.precondition,t))return n;const i=e.value.clone(),s=Dk(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rk?function(e,t,n,r){if(!Ek(e.precondition,t))return n;const i=Dk(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ok(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,Ek(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function jk(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=fk(r.transform,e||null);null!=i&&(null===n&&(n=sx.empty()),n.set(r.field,i))}return n||null}function Pk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&sw(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof mk&&r instanceof mk||n instanceof yk&&r instanceof yk?sw(n.elements,r.elements,Hw):n instanceof bk&&r instanceof bk?Hw(n.Pe,r.Pe):n instanceof pk&&r instanceof pk);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class Ak extends Tk{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rk extends Tk{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ok(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Lk(e,t,n){const r=new Map;qb(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,hk(a,o,n[i]))}return r}function Dk(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,dk(e,s,t))}return r}class Mk extends Tk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zk extends Tk{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Nk(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ik(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ik(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=tk();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Ck(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ow.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sk())}isEqual(e){return this.batchId===e.batchId&&sw(this.mutations,e.mutations,(e,t)=>Pk(e,t))&&sw(this.baseMutations,e.baseMutations,(e,t)=>Pk(e,t))}}class Uk{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){qb(e.mutations.length===n.length);let r=function(){return rk}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Uk(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qk,Bk;function Hk(e){if(void 0===e)return Fb("GRPC error has no .code"),Hb.UNKNOWN;switch(e){case qk.OK:return Hb.OK;case qk.CANCELLED:return Hb.CANCELLED;case qk.UNKNOWN:return Hb.UNKNOWN;case qk.DEADLINE_EXCEEDED:return Hb.DEADLINE_EXCEEDED;case qk.RESOURCE_EXHAUSTED:return Hb.RESOURCE_EXHAUSTED;case qk.INTERNAL:return Hb.INTERNAL;case qk.UNAVAILABLE:return Hb.UNAVAILABLE;case qk.UNAUTHENTICATED:return Hb.UNAUTHENTICATED;case qk.INVALID_ARGUMENT:return Hb.INVALID_ARGUMENT;case qk.NOT_FOUND:return Hb.NOT_FOUND;case qk.ALREADY_EXISTS:return Hb.ALREADY_EXISTS;case qk.PERMISSION_DENIED:return Hb.PERMISSION_DENIED;case qk.FAILED_PRECONDITION:return Hb.FAILED_PRECONDITION;case qk.ABORTED:return Hb.ABORTED;case qk.OUT_OF_RANGE:return Hb.OUT_OF_RANGE;case qk.UNIMPLEMENTED:return Hb.UNIMPLEMENTED;case qk.DATA_LOSS:return Hb.DATA_LOSS;default:return $b()}}(Bk=qk||(qk={}))[Bk.OK=0]="OK",Bk[Bk.CANCELLED=1]="CANCELLED",Bk[Bk.UNKNOWN=2]="UNKNOWN",Bk[Bk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bk[Bk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bk[Bk.NOT_FOUND=5]="NOT_FOUND",Bk[Bk.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bk[Bk.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bk[Bk.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bk[Bk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bk[Bk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bk[Bk.ABORTED=10]="ABORTED",Bk[Bk.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bk[Bk.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bk[Bk.INTERNAL=13]="INTERNAL",Bk[Bk.UNAVAILABLE=14]="UNAVAILABLE",Bk[Bk.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Kk=new xb([4294967295,4294967295],0);function Wk(e){const t=(new TextEncoder).encode(e),n=new kb;return n.update(t),new Uint8Array(n.digest())}function Qk(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new xb([n,r],0),new xb([i,s],0)]}class Gk{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Xk(`Invalid padding: ${t}`);if(n<0)throw new Xk(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Xk(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Xk(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=xb.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(xb.fromNumber(n)));return 1===r.compare(Kk)&&(r=new xb([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Wk(e),[n,r]=Qk(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Gk(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=Wk(e),[n,r]=Qk(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Xk extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Jk.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Yk(ow.min(),r,new Tw(iw),Xx(),sk())}}class Jk{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Jk(n,t,sk(),sk(),sk())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class e_{constructor(e,t){this.targetId=e,this.me=t}}class t_{constructor(e,t,n=Rw.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class n_{constructor(){this.fe=0,this.ge=s_(),this.pe=Rw.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=sk(),t=sk(),n=sk();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:$b()}}),new Jk(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=s_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qb(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class r_{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xx(),this.qe=i_(),this.Qe=new Tw(iw)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:$b()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Rx(i))if(0===n){const e=new hw(i.path);this.Ue(t,e,ox.newNoDocument(e,ow.min()))}else qb(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Mw(n).toUint8Array()}catch(o){if(o instanceof Aw)return Ub("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Gk(s,r,i)}catch(o){return Ub(o instanceof Xk?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Rx(i.target)){const t=new hw(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ox.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=sk();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Yk(e,t,this.Qe,this.ke,n);return this.ke=Xx(),this.qe=i_(),this.Qe=new Tw(iw),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new n_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Iw(iw),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||zb("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new n_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function i_(){return new Tw(hw.comparator)}function s_(){return new Tw(hw.comparator)}const a_=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),o_=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),l_=(()=>({and:"AND",or:"OR"}))();class c_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function u_(e,t){return e.useProto3Json||xw(t)?t:{value:t}}function d_(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function h_(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function f_(e,t){return d_(e,t.toTimestamp())}function p_(e){return qb(!!e),ow.fromTimestamp(function(e){const t=Lw(e);return new aw(t.seconds,t.nanos)}(e))}function m_(e,t){return g_(e,t).canonicalString()}function g_(e,t){const n=(r=e,new cw(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function y_(e){const t=cw.fromString(e);return qb(L_(t)),t}function v_(e,t){return m_(e.databaseId,t.path)}function b_(e,t){const n=y_(t);if(n.get(1)!==e.databaseId.projectId)throw new Kb(Hb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Kb(Hb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new hw(k_(n))}function w_(e,t){return m_(e.databaseId,t)}function x_(e){return new cw(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function k_(e){return qb(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function __(e,t,n){return{name:v_(e,t),fields:n.value.mapValue.fields}}function S_(e,t){return{documents:[w_(e,t.path)]}}function E_(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=w_(e,i);const s=function(e){if(0!==e.length)return R_(mx.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:P_((t=e).field),direction:N_(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=u_(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i};var l}function T_(e){let t=function(e){const t=y_(e);return 4===t.length?cw.emptyPath():k_(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qb(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=C_(e);return t instanceof mx&&yx(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>{return new dx(A_((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,xw(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new lx(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new lx(n,t)}(n.endAt)),function(e,t,n,r,i,s,a,o){return new Ox(e,t,n,r,i,s,a,o)}(t,i,a,s,o,"F",l,c)}function C_(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=A_(e.unaryFilter.field);return px.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=A_(e.unaryFilter.field);return px.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=A_(e.unaryFilter.field);return px.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=A_(e.unaryFilter.field);return px.create(i,"!=",{nullValue:"NULL_VALUE"});default:return $b()}}(e):void 0!==e.fieldFilter?(t=e,px.create(A_(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $b()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return mx.create(e.compositeFilter.filters.map(e=>C_(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return $b()}}(e.compositeFilter.op))}(e):$b();var t}function N_(e){return a_[e]}function I_(e){return o_[e]}function j_(e){return l_[e]}function P_(e){return{fieldPath:e.canonicalString()}}function A_(e){return dw.fromServerFormat(e.fieldPath)}function R_(e){return e instanceof px?function(e){if("=="===e.op){if(nx(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NAN"}};if(tx(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nx(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NOT_NAN"}};if(tx(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:P_(e.field),op:I_(e.op),value:e.value}}}(e):e instanceof mx?function(e){const t=e.getFilters().map(e=>R_(e));return 1===t.length?t[0]:{compositeFilter:{op:j_(e.op),filters:t}}}(e):$b()}function O_(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function L_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t,n,r,i=ow.min(),s=ow.min(),a=Rw.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new D_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new D_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new D_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new D_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.ct=e}}function z_(e){const t=T_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vx(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.un=new U_}addToCollectionParentIndex(e,t){return this.un.add(t),vw.resolve()}getCollectionParents(e,t){return vw.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return vw.resolve()}deleteFieldIndex(e,t){return vw.resolve()}deleteAllFieldIndexes(e){return vw.resolve()}createTargetIndexes(e,t){return vw.resolve()}getDocumentsMatchingTarget(e,t){return vw.resolve(null)}getIndexType(e,t){return vw.resolve(0)}getFieldIndexes(e,t){return vw.resolve([])}getNextCollectionGroupToUpdate(e){return vw.resolve(null)}getMinOffset(e,t){return vw.resolve(pw.min())}getMinOffsetFromCollectionGroup(e,t){return vw.resolve(pw.min())}updateCollectionGroup(e,t,n){return vw.resolve()}updateIndexEntries(e,t){return vw.resolve()}}class U_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Iw(cw.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Iw(cw.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new V_(0)}static kn(){return new V_(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.changes=new Qx(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ox.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?vw.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ik(n.mutation,e,Pw.empty(),aw.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,sk()).next(()=>t))}getLocalViewOfDocuments(e,t,n=sk()){const r=ek();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Jx();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ek();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,sk()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Xx();const s=nk(),a=nk();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Rk)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Ik(a.mutation,t,a.mutation.getFieldMask(),aw.now())):s.set(t.key,Pw.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new q_(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=nk();let r=new Tw((e,t)=>e-t),i=sk();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Pw.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||sk()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=tk();l.forEach(e=>{if(!i.has(e)){const r=Ck(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return vw.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return i=t,hw.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):vw.resolve(ek());let a=-1,o=i;return s.next(t=>vw.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?vw.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,sk())).next(e=>({batchId:a,changes:Zx(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new hw(t)).next(e=>{let t=Jx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Jx();return this.indexManager.getCollectionParents(e,i).next(a=>vw.forEach(a,a=>{const o=(l=t,c=a.child(i),new Ox(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ox.newInvalidDocument(r)))});let n=Jx();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Ik(s.mutation,r,Pw.empty(),aw.now()),Hx(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return vw.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(n=t).id,version:n.version,createTime:p_(n.createTime)}),vw.resolve();var n}getNamedQuery(e,t){return vw.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(n=t).name,query:z_(n.bundledQuery),readTime:p_(n.readTime)}),vw.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.overlays=new Tw(hw.comparator),this.Ir=new Map}getOverlay(e,t){return vw.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ek();return vw.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),vw.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),vw.resolve()}getOverlaysForCollection(e,t,n){const r=ek(),i=t.length+1,s=new hw(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return vw.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Tw((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ek(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ek(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return vw.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Vk(t,n));let i=this.Ir.get(t);void 0===i&&(i=sk(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.sessionToken=Rw.EMPTY_BYTE_STRING}getSessionToken(e){return vw.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,vw.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.Tr=new Iw(G_.Er),this.dr=new Iw(G_.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new G_(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new G_(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new hw(new cw([])),n=new G_(t,e),r=new G_(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new hw(new cw([])),n=new G_(t,e),r=new G_(t,e+1);let i=sk();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new G_(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class G_{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return hw.comparator(e.key,t.key)||iw(e.wr,t.wr)}static Ar(e,t){return iw(e.wr,t.wr)||hw.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Iw(G_.Er)}checkEmpty(e){return vw.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Fk(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new G_(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return vw.resolve(s)}lookupMutationBatch(e,t){return vw.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return vw.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vw.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return vw.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new G_(t,0),r=new G_(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),vw.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Iw(iw);return t.forEach(e=>{const t=new G_(e,0),r=new G_(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),vw.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;hw.isDocumentKey(i)||(i=i.child(""));const s=new G_(new hw(i),0);let a=new Iw(iw);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},s),vw.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){qb(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return vw.forEach(t.mutations,r=>{const i=new G_(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new G_(t,0),r=this.br.firstAfterOrEqual(n);return vw.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,vw.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.Mr=e,this.docs=new Tw(hw.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return vw.resolve(n?n.document.mutableCopy():ox.newInvalidDocument(t))}getEntries(e,t){let n=Xx();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ox.newInvalidDocument(e))}),vw.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Xx();const s=t.path,a=new hw(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||mw(fw(a),n)<=0||(r.has(a.key)||Hx(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return vw.resolve(i)}getAllFromCollectionGroup(e,t,n,r){$b()}Or(e,t){return vw.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new J_(this)}getSize(e){return vw.resolve(this.size)}}class J_ extends $_{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),vw.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.persistence=e,this.Nr=new Qx(e=>Px(e),Ax),this.lastRemoteSnapshotVersion=ow.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Q_,this.targetCount=0,this.kr=V_.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),vw.resolve()}getLastRemoteSnapshotVersion(e){return vw.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vw.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),vw.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),vw.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new V_(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,vw.resolve()}updateTargetData(e,t){return this.Kn(t),vw.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,vw.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),vw.waitFor(i).next(()=>r)}getTargetCount(e){return vw.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return vw.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),vw.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),vw.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),vw.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return vw.resolve(n)}containsKey(e,t){return vw.resolve(this.Br.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ww(0),this.Kr=!1,this.Kr=!0,this.$r=new W_,this.referenceDelegate=e(this),this.Ur=new Z_(this),this.indexManager=new F_,this.remoteDocumentCache=new Y_(e=>this.referenceDelegate.Wr(e)),this.serializer=new M_(t),this.Gr=new H_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new X_(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){zb("MemoryPersistence","Starting transaction:",e);const r=new tS(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return vw.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class tS extends gw{constructor(e){super(),this.currentSequenceNumber=e}}class nS{constructor(e){this.persistence=e,this.Jr=new Q_,this.Yr=null}static Zr(e){return new nS(e)}get Xr(){if(this.Yr)return this.Yr;throw $b()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),vw.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),vw.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),vw.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vw.forEach(this.Xr,n=>{const r=hw.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,ow.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return vw.or([()=>vw.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=sk(),r=sk();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new rS(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=jy()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Ny())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new iS;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Mb()<=Gy.DEBUG&&zb("QueryEngine","SDK will not create cache indexes for query:",Bx(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),vw.resolve()):(Mb()<=Gy.DEBUG&&zb("QueryEngine","Query:",Bx(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Mb()<=Gy.DEBUG&&zb("QueryEngine","The SDK decides to create cache indexes for query:",Bx(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fx(t))):vw.resolve())}Yi(e,t){if(Dx(t))return vw.resolve(null);let n=Fx(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Vx(t,null,"F"),n=Fx(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=sk(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,Vx(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return Dx(t)||r.isEqual(ow.min())?vw.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?vw.resolve(null):(Mb()<=Gy.DEBUG&&zb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bx(t)),this.rs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ow.fromTimestamp(1e9===r?new aw(n+1,0):new aw(n,r));return new pw(i,hw.empty(),t)}(r,-1)).next(e=>e))})}ts(e,t){let n=new Iw(Kx(e));return t.forEach((t,r)=>{Hx(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return Mb()<=Gy.DEBUG&&zb("QueryEngine","Using full collection scan to execute query:",Bx(t)),this.Ji.getDocumentsMatchingQuery(e,t,pw.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Tw(iw),this._s=new Qx(e=>Px(e),Ax),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}async function oS(e,t){const n=Bb(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=sk();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function lS(e){const t=Bb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function cS(e,t){const n=Bb(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);var u,d,h;null!==t.targetMismatches.get(o)?c=c.withResumeToken(Rw.EMPTY_BYTE_STRING,ow.min()).withLastLimboFreeSnapshotVersion(ow.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),d=c,h=s,(0===(u=l).resumeToken.approximateByteSize()||d.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&a.push(n.Ur.updateTargetData(e,c))});let o=Xx(),l=sk();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(function(e,t,n){let r=sk(),i=sk();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Xx();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ow.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):zb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ps:r,Is:i}})}(e,s,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(ow.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return vw.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=i,e))}function uS(e,t){const n=Bb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function dS(e,t,n){const r=Bb(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(a){if(!bw(a))throw a;zb("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function hS(e,t,n){const r=Bb(e);let i=ow.min(),s=sk();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Bb(e),i=r._s.get(n);return void 0!==i?vw.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Fx(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:ow.min(),n?s:sk())).next(e=>(function(e,t,n){let r=e.us.get(t)||ow.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Ts:s})))}class fS{constructor(){this.activeTargetIds=ak}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pS{constructor(){this.so=new fS,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{_o(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){zb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){zb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yS=null;function vS(){return null===yS?yS=268435456+Math.round(2147483648*Math.random()):yS++,"0x"+yS.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const bS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="WebChannelConnection";class kS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=vS(),a=this.xo(e,t.toUriEncodedString());zb("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then(t=>(zb("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw Ub("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lb,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=bS[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=vS();return new Promise((s,a)=>{const o=new Sb;o.setWithCredentials(!0),o.listenOnce(Tb.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Cb.NO_ERROR:const t=o.getResponseJson();zb(xS,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Cb.TIMEOUT:zb(xS,`RPC '${e}' ${i} timed out`),a(new Kb(Hb.DEADLINE_EXCEEDED,"Request time out"));break;case Cb.HTTP_ERROR:const n=o.getStatus();if(zb(xS,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Hb).indexOf(t)>=0?t:Hb.UNKNOWN}(t.status);a(new Kb(e,t.message))}else a(new Kb(Hb.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Kb(Hb.UNAVAILABLE,"Connection failed."));break;default:$b()}}finally{zb(xS,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);zb(xS,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=vS(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Pb(),a=jb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");zb(xS,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new wS({Io:t=>{h?zb(xS,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(zb(xS,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),zb(xS,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,Eb.EventType.OPEN,()=>{h||(zb(xS,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,Eb.EventType.CLOSE,()=>{h||(h=!0,zb(xS,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,Eb.EventType.ERROR,t=>{h||(h=!0,Ub(xS,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Kb(Hb.UNAVAILABLE,"The operation could not be completed")))}),p(u,Eb.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];qb(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){zb(xS,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=qk[e];if(void 0!==t)return Hk(t)}(t),i=a.message;void 0===n&&(n=Hb.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Kb(n,i)),u.close()}else zb(xS,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),p(a,Ib.STAT_EVENT,t=>{t.stat===Nb.PROXY?zb(xS,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Nb.NOPROXY&&zb(xS,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function _S(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(e){return new c_(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&zb("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ES(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Hb.RESOURCE_EXHAUSTED?(Fb(t.toString()),Fb("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Hb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Yo===t&&this.P_(e,n)},t=>{e(()=>{const e=new Kb(Hb.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return zb("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(zb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CS extends TS{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:$b(),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(qb(void 0===t||"string"==typeof t),Rw.fromBase64String(t||"")):(qb(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Rw.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?Hb.UNKNOWN:Hk(e.code);return new Kb(t,e.message||"")}(o);n=new t_(i,s,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=b_(e,r.document.name),s=p_(r.document.updateTime),a=r.document.createTime?p_(r.document.createTime):ow.min(),o=new sx({mapValue:{fields:r.document.fields}}),l=ox.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Zk(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=b_(e,r.document),s=r.readTime?p_(r.readTime):ow.min(),a=ox.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Zk([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=b_(e,r.document),s=r.removedTargetIds||[];n=new Zk([],s,i,null)}else{if(!("filter"in t))return $b();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new $k(r,i),a=e.targetId;n=new e_(a,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ow.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ow.min():t.readTime?p_(t.readTime):ow.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=x_(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Rx(r)?{documents:S_(e,r)}:{query:E_(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=h_(e,t.resumeToken);const r=u_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ow.min())>0){n.readTime=d_(e,t.snapshotVersion.toTimestamp());const r=u_(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $b()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=x_(this.serializer),t.removeTarget=e,this.a_(t)}}class NS extends TS{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return qb(!!e.streamToken),this.lastStreamToken=e.streamToken,qb(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){qb(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(qb(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?p_(e.updateTime):p_(t);return n.isEqual(ow.min())&&(n=p_(t)),new _k(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=p_(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=x_(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof Ak)n={update:__(e,t.key,t.value)};else if(t instanceof Mk)n={delete:v_(e,t.key)};else if(t instanceof Rk)n={update:__(e,t.key,t.data),updateMask:O_(t.fieldMask)};else{if(!(t instanceof zk))return $b();n={verify:v_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof pk)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mk)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yk)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bk)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw $b()}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:f_(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:$b())),n;var r,i}(this.serializer,e))};this.a_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Kb(Hb.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Mo(e,g_(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Hb.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kb(Hb.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,g_(t,n),r,s,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Hb.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kb(Hb.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class jS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fb(t),this.D_=!1):zb("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{US(this)&&(zb("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Bb(e);t.L_.add(4),await RS(t),t.q_.set("Unknown"),t.L_.delete(4),await AS(t)}(this))})}),this.q_=new jS(n,r)}}async function AS(e){if(US(e))for(const t of e.B_)await t(!0)}async function RS(e){for(const t of e.B_)await t(!1)}function OS(e,t){const n=Bb(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),FS(n)?zS(n):iE(n).r_()&&DS(n,t))}function LS(e,t){const n=Bb(e),r=iE(n);n.N_.delete(t),r.r_()&&MS(n,t),0===n.N_.size&&(r.r_()?r.o_():US(n)&&n.q_.set("Unknown"))}function DS(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ow.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}iE(e).A_(t)}function MS(e,t){e.Q_.xe(t),iE(e).R_(t)}function zS(e){e.Q_=new r_({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),iE(e).start(),e.q_.v_()}function FS(e){return US(e)&&!iE(e).n_()&&e.N_.size>0}function US(e){return 0===Bb(e).L_.size}function VS(e){e.Q_=void 0}async function $S(e){e.q_.set("Online")}async function qS(e){e.N_.forEach((t,n)=>{DS(e,t)})}async function BS(e,t){VS(e),FS(e)?(e.q_.M_(t),zS(e)):e.q_.set("Unknown")}async function HS(e,t,n){if(e.q_.set("Online"),t instanceof t_&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(r){zb("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await KS(e,r)}else if(t instanceof Zk?e.Q_.Ke(t):t instanceof e_?e.Q_.He(t):e.Q_.We(t),!n.isEqual(ow.min()))try{const t=await lS(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Rw.EMPTY_BYTE_STRING,r.snapshotVersion)),MS(e,t);const i=new D_(r.target,t,n,r.sequenceNumber);DS(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){zb("RemoteStore","Failed to raise snapshot:",i),await KS(e,i)}}async function KS(e,t,n){if(!bw(t))throw t;e.L_.add(1),await RS(e),e.q_.set("Offline"),n||(n=()=>lS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{zb("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await AS(e)})}function WS(e,t){return t().catch(n=>KS(e,n,t))}async function QS(e){const t=Bb(e),n=sE(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;GS(t);)try{const e=await uS(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,XS(t,e)}catch(i){await KS(t,i)}YS(t)&&JS(t)}function GS(e){return US(e)&&e.O_.length<10}function XS(e,t){e.O_.push(t);const n=sE(e);n.r_()&&n.V_&&n.m_(t.mutations)}function YS(e){return US(e)&&!sE(e).n_()&&e.O_.length>0}function JS(e){sE(e).start()}async function ZS(e){sE(e).p_()}async function eE(e){const t=sE(e);for(const n of e.O_)t.m_(n.mutations)}async function tE(e,t,n){const r=e.O_.shift(),i=Uk.from(r,t,n);await WS(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await QS(e)}async function nE(e,t){t&&sE(e).V_&&await async function(e,t){if(function(e){switch(e){default:return $b();case Hb.CANCELLED:case Hb.UNKNOWN:case Hb.DEADLINE_EXCEEDED:case Hb.RESOURCE_EXHAUSTED:case Hb.INTERNAL:case Hb.UNAVAILABLE:case Hb.UNAUTHENTICATED:return!1;case Hb.INVALID_ARGUMENT:case Hb.NOT_FOUND:case Hb.ALREADY_EXISTS:case Hb.PERMISSION_DENIED:case Hb.FAILED_PRECONDITION:case Hb.ABORTED:case Hb.OUT_OF_RANGE:case Hb.UNIMPLEMENTED:case Hb.DATA_LOSS:return!0}}(n=t.code)&&n!==Hb.ABORTED){const n=e.O_.shift();sE(e).s_(),await WS(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await QS(e)}var n}(e,t),YS(e)&&JS(e)}async function rE(e,t){const n=Bb(e);n.asyncQueue.verifyOperationInProgress(),zb("RemoteStore","RemoteStore received new credentials");const r=US(n);n.L_.add(3),await RS(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await AS(n)}function iE(e){return e.K_||(e.K_=function(e,t,n){const r=Bb(e);return r.w_(),new CS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:$S.bind(null,e),Ro:qS.bind(null,e),mo:BS.bind(null,e),d_:HS.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),FS(e)?zS(e):e.q_.set("Unknown")):(await e.K_.stop(),VS(e))})),e.K_}function sE(e){return e.U_||(e.U_=function(e,t,n){const r=Bb(e);return r.w_(),new NS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ZS.bind(null,e),mo:nE.bind(null,e),f_:eE.bind(null,e),g_:tE.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await QS(e)):(await e.U_.stop(),e.O_.length>0&&(zb("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class aE{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wb,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new aE(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kb(Hb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oE(e,t){if(Fb("AsyncQueue",`${t}: ${e}`),bw(e))return new Kb(Hb.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.comparator=e?(t,n)=>e(t,n)||hw.comparator(t.key,n.key):(e,t)=>hw.comparator(e.key,t.key),this.keyedMap=Jx(),this.sortedSet=new Tw(this.comparator)}static emptySet(e){return new lE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lE))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new lE;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.W_=new Tw(hw.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):$b():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class uE{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new uE(e,t,lE.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$x(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class hE{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Bb(e),r=n.queries;n.queries=fE(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Kb(Hb.ABORTED,"Firestore shutting down"))}}function fE(){return new Qx(e=>qx(e),$x)}async function pE(e,t){const n=Bb(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new dE,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const e=oE(a,`Initialization of query '${Bx(t.query)}' failed`);return void t.onError(e)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&vE(n)}async function mE(e,t){const n=Bb(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gE(e,t){const n=Bb(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&vE(n)}function yE(e,t,n){const r=Bb(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function vE(e){e.Y_.forEach(e=>{e.next()})}var bE,wE;(wE=bE||(bE={})).ea="default",wE.Cache="cache";class xE{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new uE(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=uE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bE.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.key=e}}class _E{constructor(e){this.key=e}}class SE{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=sk(),this.mutatedKeys=sk(),this.Aa=Kx(e),this.Ra=new lE(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new cE,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Hx(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $b()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new uE(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=sk(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new _E(e))}),this.da.forEach(n=>{e.has(n)||t.push(new kE(n))}),t}ba(e){this.Ta=e.Ts,this.da=sk();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return uE.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class EE{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class TE{constructor(e){this.key=e,this.va=!1}}class CE{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Qx(e=>qx(e),$x),this.Ma=new Map,this.xa=new Set,this.Oa=new Tw(hw.comparator),this.Na=new Map,this.La=new Q_,this.Ba={},this.ka=new Map,this.qa=V_.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function NE(e,t,n=!0){const r=GE(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await jE(r,t,n,!0),i}async function IE(e,t){const n=GE(e);await jE(n,t,!0,!1)}async function jE(e,t,n,r){const i=await function(e,t){const n=Bb(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,vw.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new D_(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}(e.localStore,Fx(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await async function(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await hS(e.localStore,t.query,!1).then(({documents:e})=>t.view.ma(e,i)));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return qE(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await hS(e.localStore,t,!0),a=new SE(t,s.Ts),o=a.ma(s.documents),l=Jk.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);qE(e,n,c.wa);const u=new EE(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&OS(e.remoteStore,i),o}async function PE(e,t,n){const r=Bb(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!$x(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&LS(r.remoteStore,i.targetId),VE(r,i.targetId)}).catch(yw)):(VE(r,i.targetId),await dS(r.localStore,i.targetId,!0))}async function AE(e,t){const n=Bb(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),LS(n.remoteStore,r.targetId))}async function RE(e,t,n){const r=function(e){const t=Bb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ME.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zE.bind(null,t),t}(e);try{const e=await function(e,t){const n=Bb(e),r=aw.now(),i=t.reduce((e,t)=>e.add(t.key),sk());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Xx(),l=sk();return n.cs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=jk(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Rk(e.key,t,ax(t.value.mapValue),Sk.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Zx(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Tw(iw)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await KE(r,e.changes),await QS(r.remoteStore)}catch(i){const e=oE(i,"Failed to persist write");n.reject(e)}}async function OE(e,t){const n=Bb(e);try{const e=await cS(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(qb(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?qb(r.va):e.removedDocuments.size>0&&(qb(r.va),r.va=!1))}),await KE(n,e,t)}catch(r){await yw(r)}}function LE(e,t,n){const r=Bb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Bb(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&vE(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function DE(e,t,n){const r=Bb(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new Tw(hw.comparator);e=e.insert(s,ox.newNoDocument(s,ow.min()));const n=sk().add(s),i=new Yk(ow.min(),new Map,new Tw(iw),e,n);await OE(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),HE(r)}else await dS(r.localStore,t,!1).then(()=>VE(r,t,n)).catch(yw)}async function ME(e,t){const n=Bb(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Bb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=vw.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);qb(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=sk();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);UE(n,r,null),FE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await KE(n,e)}catch(i){await yw(i)}}async function zE(e,t,n){const r=Bb(e);try{const e=await function(e,t){const n=Bb(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(qb(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);UE(r,t,n),FE(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await KE(r,e)}catch(i){await yw(i)}}function FE(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function UE(e,t,n){const r=Bb(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function VE(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||$E(e,t)})}function $E(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(LS(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),HE(e))}function qE(e,t,n){for(const r of n)r instanceof kE?(e.La.addReference(r.key,t),BE(e,r)):r instanceof _E?(zb("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||$E(e,r.key)):$b()}function BE(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(zb("SyncEngine","New document in limbo: "+n),e.xa.add(r),HE(e))}function HE(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new hw(cw.fromString(t)),r=e.qa.next();e.Na.set(r,new TE(n)),e.Oa=e.Oa.insert(n,r),OS(e.remoteStore,new D_(Fx(Lx(n.path)),r,"TargetPurposeLimboResolution",ww.oe))}}async function KE(e,t,n){const r=Bb(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=rS.Wi(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Bb(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>vw.forEach(t,t=>vw.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>vw.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!bw(r))throw r;zb("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function WE(e,t){const n=Bb(e);if(!n.currentUser.isEqual(t)){zb("SyncEngine","User change. New user:",t.toKey());const e=await oS(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).ka.forEach(e=>{e.forEach(e=>{e.reject(new Kb(Hb.CANCELLED,i))})}),r.ka.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await KE(n,e.hs)}var r,i}function QE(e,t){const n=Bb(e),r=n.Na.get(t);if(r&&r.va)return sk().add(r.key);{let e=sk();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function GE(e){const t=Bb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=OE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=QE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=DE.bind(null,t),t.Ca.d_=gE.bind(null,t.eventManager),t.Ca.$a=yE.bind(null,t.eventManager),t}class XE{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=SS(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return function(e,t,n,r){return new aS(e,t,n,r)}(this.persistence,new sS,e.initialUser,this.serializer)}Ga(e){return new eS(nS.Zr,this.serializer)}Wa(e){return new pS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}XE.provider={build:()=>new XE};class YE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>LE(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=WE.bind(null,this.syncEngine),await async function(e,t){const n=Bb(e);t?(n.L_.delete(2),await AS(n)):t||(n.L_.add(2),await RS(n),n.q_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hE}createDatastore(e){const t=SS(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new kS(r));var r;return function(e,t,n,r){return new IS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>LE(this.syncEngine,e,0),s=gS.D()?new gS:new mS,new PS(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new CE(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Bb(e);zb("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await RS(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}YE.provider={build:()=>new YE};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class JE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fb("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ob.UNAUTHENTICATED,this.clientId=rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{zb("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(zb("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wb;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=oE(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function eT(e,t){e.asyncQueue.verifyOperationInProgress(),zb("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await oS(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){zb("FirestoreClient","Using user provided OfflineComponentProvider");try{await eT(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===Hb.FAILED_PRECONDITION||n.code===Hb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;Ub("Error using user provided cache. Falling back to memory cache: "+i),await eT(e,new XE)}}else zb("FirestoreClient","Using default OfflineComponentProvider"),await eT(e,new XE);var n;return e._offlineComponents}(e);zb("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>rE(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>rE(t.remoteStore,n)),e._onlineComponents=t}async function nT(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(zb("FirestoreClient","Using user provided OnlineComponentProvider"),await tT(e,e._uninitializedComponentsProvider._online)):(zb("FirestoreClient","Using default OnlineComponentProvider"),await tT(e,new YE))),e._onlineComponents}async function rT(e){const t=await nT(e),n=t.eventManager;return n.onListen=NE.bind(null,t.syncEngine),n.onUnlisten=PE.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=IE.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=AE.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function iT(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const sT=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(e,t,n){if(!n)throw new Kb(Hb.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function oT(e){if(!hw.isDocumentKey(e))throw new Kb(Hb.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lT(e){if(hw.isDocumentKey(e))throw new Kb(Hb.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":$b()}function uT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Kb(Hb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cT(e);throw new Kb(Hb.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class dT{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Kb(Hb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Kb(Hb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Kb(Hb.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iT(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Kb(Hb.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Kb(Hb.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Kb(Hb.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class hT{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kb(Hb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Kb(Hb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Gb;switch(e.type){case"firstParty":return new Zb(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Kb(Hb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sT.get(e);t&&(zb("ComponentProvider","Removing Datastore"),sT.delete(e),t.terminate())}(this),Promise.resolve()}}function fT(e,t,n,r={}){var i;const s=(e=uT(e,hT))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Ub("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ob.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[wy(JSON.stringify({alg:"none",type:"JWT"})),wy(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Kb(Hb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ob(s)}e._authCredentials=new Xb(new Qb(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pT(this.firestore,e,this._query)}}class mT{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gT(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mT(this.firestore,e,this._key)}}class gT extends pT{constructor(e,t,n){super(e,t,Lx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mT(this.firestore,null,new hw(e))}withConverter(e){return new gT(this.firestore,e,this._path)}}function yT(e,t,...n){if(e=By(e),aT("collection","path",t),e instanceof hT){const r=cw.fromString(t,...n);return lT(r),new gT(e,null,r)}{if(!(e instanceof mT||e instanceof gT))throw new Kb(Hb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(cw.fromString(t,...n));return lT(r),new gT(e.firestore,null,r)}}function vT(e,t,...n){if(e=By(e),1===arguments.length&&(t=rw.newId()),aT("doc","path",t),e instanceof hT){const r=cw.fromString(t,...n);return oT(r),new mT(e,null,new hw(r))}{if(!(e instanceof mT||e instanceof gT))throw new Kb(Hb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(cw.fromString(t,...n));return oT(r),new mT(e.firestore,e instanceof gT?e.converter:null,new hw(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ES(this,"async_queue_retry"),this.Vu=()=>{const e=_S();e&&zb("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=_S();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=_S();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Wb;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(_D){if(!bw(_D))throw _D;zb("AsyncQueue","Operation failed with retryable error: "+_D)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;throw Fb("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=aE.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&$b()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function wT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class xT extends hT{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new bT,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function kT(e,t){const n="string"==typeof e?e:"(default)",r=nb("object"==typeof e?e:lb(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=Sy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&fT(r,...e)}return r}function _T(e){if(e._terminated)throw new Kb(Hb.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=(a=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=i,new Vw(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,iT(c.experimentalLongPollingOptions),c.useFetchStreams));var a,o,l,c;e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new ZE(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class ST{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ST(Rw.fromBase64String(e))}catch(t){throw new Kb(Hb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ST(Rw.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Kb(Hb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dw(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Kb(Hb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Kb(Hb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return iw(this._lat,e._lat)||iw(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=/^__.*__$/;class jT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Rk(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ak(e,this.data,t,this.fieldTransforms)}}class PT{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Rk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $b()}}class RT{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new RT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return XT(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(AT(this.Cu)&&IT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class OT{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||SS(e)}Qu(e,t,n,r=!1){return new RT({Cu:e,methodName:t,qu:n,path:dw.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LT(e){const t=e._freezeSettings(),n=SS(e._databaseId);return new OT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function DT(e,t,n,r,i,s={}){const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);KT("Data must be an object, but it was:",a,r);const o=BT(r,a);let l,c;if(s.merge)l=new Pw(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=WT(t,r,n);if(!a.contains(i))throw new Kb(Hb.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);YT(e,i)||e.push(i)}l=new Pw(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new jT(new sx(o),l,c)}class MT extends TT{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof MT}}function zT(e,t,n){return new RT({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class FT extends TT{_toFieldTransform(e){return new kk(e.path,new pk)}isEqual(e){return e instanceof FT}}class UT extends TT{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=zT(this,e,!0),n=this.Ku.map(e=>qT(e,t)),r=new mk(n);return new kk(e.path,r)}isEqual(e){return e instanceof UT&&Dy(this.Ku,e.Ku)}}class VT extends TT{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=zT(this,e,!0),n=this.Ku.map(e=>qT(e,t)),r=new yk(n);return new kk(e.path,r)}isEqual(e){return e instanceof VT&&Dy(this.Ku,e.Ku)}}class $T extends TT{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new bk(e.serializer,ck(e.serializer,this.$u));return new kk(e.path,t)}isEqual(e){return e instanceof $T&&this.$u===e.$u}}function qT(e,t){if(HT(e=By(e)))return KT("Unsupported field value:",t,e),BT(e,t);if(e instanceof TT)return function(e,t){if(!AT(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qT(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=By(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ck(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=aw.fromDate(e);return{timestampValue:d_(t.serializer,n)}}if(e instanceof aw){const n=new aw(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:d_(t.serializer,n)}}if(e instanceof CT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ST)return{bytesValue:h_(t.serializer,e._byteString)};if(e instanceof mT){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:m_(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof NT)return n=t,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw n.Bu("VectorValues must only contain numeric values.");return ok(n.serializer,e)})}}}}};var n;throw t.Bu(`Unsupported field value: ${cT(e)}`)}(e,t)}function BT(e,t){const n={};return Ew(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sw(e,(e,r)=>{const i=qT(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function HT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof aw||e instanceof CT||e instanceof ST||e instanceof mT||e instanceof TT||e instanceof NT)}function KT(e,t,n){if(!HT(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=cT(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}var r}function WT(e,t,n){if((t=By(t))instanceof ET)return t._internalPath;if("string"==typeof t)return GT(e,t);throw XT("Field path arguments must be of type string or ",e,!1,void 0,n)}const QT=new RegExp("[~\\*/\\[\\]]");function GT(e,t,n){if(t.search(QT)>=0)throw XT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ET(...t.split("."))._internalPath}catch(r){throw XT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function XT(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Kb(Hb.INVALID_ARGUMENT,o+e+l)}function YT(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mT(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ZT extends JT{data(){return super.data()}}function eC(e,t){return"string"==typeof t?GT(e,t):t instanceof ET?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Kb(Hb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nC{}class rC extends nC{}function iC(e,t,...n){let r=[];t instanceof nC&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof oC).length,n=e.filter(e=>e instanceof sC).length;if(t>1||t>0&&n>0)throw new Kb(Hb.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class sC extends rC{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new sC(e,t,n)}_apply(e){const t=this._parse(e);return pC(e._query,t),new pT(e.firestore,e.converter,Ux(e._query,t))}_parse(e){const t=LT(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Kb(Hb.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){fC(a,s);const t=[];for(const n of a)t.push(hC(r,e,n));o={arrayValue:{values:t}}}else o=hC(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||fC(a,s),o=function(e,t,n,r=!1){return qT(n,e.Qu(r?4:3,t))}(n,t,a,"in"===s||"not-in"===s);return px.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function aC(e,t,n){const r=t,i=eC("where",e);return sC._create(i,r,n)}class oC extends nC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oC(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:mx.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)pC(n,i),n=Ux(n,i)}(e._query,t),new pT(e.firestore,e.converter,Ux(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lC extends rC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lC(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Kb(Hb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Kb(Hb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dx(t,n)}(e._query,this._field,this._direction);return new pT(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ox(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function cC(e,t="asc"){const n=t,r=eC("orderBy",e);return lC._create(r,n)}class uC extends rC{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new uC(e,t,n)}_apply(e){return new pT(e.firestore,e.converter,Vx(e._query,this._limit,this._limitType))}}function dC(e){return function(e,t){if(t<=0)throw new Kb(Hb.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),uC._create("limit",e,"F")}function hC(e,t,n){if("string"==typeof(n=By(n))){if(""===n)throw new Kb(Hb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mx(t)&&-1!==n.indexOf("/"))throw new Kb(Hb.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(cw.fromString(n));if(!hw.isDocumentKey(r))throw new Kb(Hb.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jw(e,new hw(r))}if(n instanceof mT)return Jw(e,n._key);throw new Kb(Hb.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cT(n)}.`)}function fC(e,t){if(!Array.isArray(e)||0===e.length)throw new Kb(Hb.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function pC(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Kb(Hb.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Kb(Hb.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class mC{convertValue(e,t="none"){switch(Bw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dw(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $b()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Sw(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Dw(e.doubleValue));return new NT(i)}convertGeoPoint(e){return new CT(Dw(e.latitude),Dw(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fw(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Uw(e));default:return null}}convertTimestamp(e){const t=Lw(e);return new aw(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cw.fromString(e);qb(L_(n));const r=new $w(n.get(1),n.get(3)),i=new hw(n.popFirst(5));return r.isEqual(t)||Fb(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class yC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vC extends JT{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(eC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bC extends vC{data(e={}){return super.data(e)}}class wC{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new bC(this._firestore,this._userDataWriter,n.key,n,new yC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Kb(Hb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new bC(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yC(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new bC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:xC(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $b()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(e){e=uT(e,mT);const t=uT(e.firestore,xT);return function(e,t,n={}){const r=new Wb;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new JE({next:o=>{s.Za(),t.enqueueAndForget(()=>mE(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Kb(Hb.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Kb(Hb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new xE(Lx(n.path),s,{includeMetadataChanges:!0,_a:!0});return pE(e,a)}(await rT(e),e.asyncQueue,t,n,r)),r.promise}(_T(t),e._key).then(n=>PC(t,e,n))}class _C extends mC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ST(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mT(this.firestore,null,t)}}function SC(e){e=uT(e,pT);const t=uT(e.firestore,xT),n=_T(t),r=new _C(t);return tC(e._query),function(e,t,n={}){const r=new Wb;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new JE({next:n=>{s.Za(),t.enqueueAndForget(()=>mE(e,a)),n.fromCache&&"server"===r.source?i.reject(new Kb(Hb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new xE(n,s,{includeMetadataChanges:!0,_a:!0});return pE(e,a)}(await rT(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new wC(t,r,e,n))}function EC(e,t,n){e=uT(e,mT);const r=uT(e.firestore,xT),i=gC(e.converter,t,n);return jC(r,[DT(LT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Sk.none())])}function TC(e,t,n,...r){e=uT(e,mT);const i=uT(e.firestore,xT),s=LT(i);let a;return a="string"==typeof(t=By(t))||t instanceof ET?function(e,t,n,r,i,s){const a=e.Qu(1,t,n),o=[WT(t,r,n)],l=[i];if(s.length%2!=0)throw new Kb(Hb.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(WT(t,s[h])),l.push(s[h+1]);const c=[],u=sx.empty();for(let h=o.length-1;h>=0;--h)if(!YT(c,o[h])){const e=o[h];let t=l[h];t=By(t);const n=a.Nu(e);if(t instanceof MT)c.push(e);else{const r=qT(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Pw(c);return new PT(u,d,a.fieldTransforms)}(s,"updateDoc",e._key,t,n,r):function(e,t,n,r){const i=e.Qu(1,t,n);KT("Data must be an object, but it was:",i,r);const s=[],a=sx.empty();Sw(r,(e,r)=>{const o=GT(t,e,n);r=By(r);const l=i.Nu(o);if(r instanceof MT)s.push(o);else{const e=qT(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Pw(s);return new PT(a,o,i.fieldTransforms)}(s,"updateDoc",e._key,t),jC(i,[a.toMutation(e._key,Sk.exists(!0))])}function CC(e){return jC(uT(e.firestore,xT),[new Mk(e._key,Sk.none())])}function NC(e,t){const n=uT(e.firestore,xT),r=vT(e),i=gC(e.converter,t);return jC(n,[DT(LT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Sk.exists(!1))]).then(()=>r)}function IC(e,...t){var n,r,i;e=By(e);let s={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof t[a]||wT(t[a])||(s=t[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wT(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,c,u;if(e instanceof mT)c=uT(e.firestore,xT),u=Lx(e._key.path),l={next:n=>{t[a]&&t[a](PC(c,e,n))},error:t[a+1],complete:t[a+2]};else{const n=uT(e,pT);c=uT(n.firestore,xT),u=n._query;const r=new _C(c);l={next:e=>{t[a]&&t[a](new wC(c,r,n,e))},error:t[a+1],complete:t[a+2]},tC(e._query)}return function(e,t,n,r){const i=new JE(r),s=new xE(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>pE(await rT(e),s)),()=>{i.Za(),e.asyncQueue.enqueueAndForget(async()=>mE(await rT(e),s))}}(_T(c),u,o,l)}function jC(e,t){return function(e,t){const n=new Wb;return e.asyncQueue.enqueueAndForget(async()=>RE(await function(e){return nT(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(_T(e),t)}function PC(e,t,n){const r=n.docs.get(t._key),i=new _C(e);return new vC(e,i,t._key,r,new yC(n.hasPendingWrites,n.fromCache),t.converter)}function AC(){return new FT("serverTimestamp")}function RC(...e){return new UT("arrayUnion",e)}function OC(...e){return new VT("arrayRemove",e)}function LC(e){return new $T("increment",e)}!function(e,t=!0){Lb=ab,tb(new Hy("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new xT(new Yb(e.getProvider("auth-internal")),new tw(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Kb(Hb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $w(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),ub(Rb,"4.7.3",e),ub(Rb,"4.7.3","esm2017")}();function DC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function MC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
ub("firebase","10.14.1","app"),"function"==typeof SuppressedError&&SuppressedError;const zC=MC,FC=new Oy("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),UC=new tv("@firebase/auth");function VC(e,...t){UC.logLevel<=Gy.ERROR&&UC.error(`Auth (${ab}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(e,...t){throw KC(e,...t)}function qC(e,...t){return KC(e,...t)}function BC(e,t,n){const r=Object.assign(Object.assign({},zC()),{[t]:n});return new Oy("auth","Firebase",r).create(t,{appName:e.name})}function HC(e){return BC(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KC(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return FC.create(e,...t)}function WC(e,t,...n){if(!e)throw KC(t,...n)}function QC(e){const t="INTERNAL ASSERTION FAILED: "+e;throw VC(t),new Error(t)}function GC(e,t){e||QC(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function YC(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==YC()&&"https:"!==YC()&&!Iy()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ZC{constructor(e,t){this.shortDelay=e,this.longDelay=t,GC(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ny())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return JC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(e,t){GC(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void QC("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void QC("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void QC("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},rN=new ZC(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function sN(e,t,n,r,i={}){return aN(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=zy(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),tN.fetch()(lN(e,e.config.apiHost,n,a),l)})}async function aN(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},nN),t);try{const t=new uN(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw dN(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw dN(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw dN(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw dN(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw BC(e,o,a);$C(e,o)}}catch(_D){if(_D instanceof Ry)throw _D;$C(e,"network-request-failed",{message:String(_D)})}}async function oN(e,t,n,r,i={}){const s=await sN(e,t,n,r,i);return"mfaPendingCredential"in s&&$C(e,"multi-factor-auth-required",{_serverResponse:s}),s}function lN(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?eN(e.config,i):`${e.config.apiScheme}://${i}`}function cN(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(qC(this.auth,"network-request-failed")),rN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qC(e,t,r);return i.customData._tokenResponse=n,i}function hN(e){return void 0!==e&&void 0!==e.enterprise}class fN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cN(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function pN(e,t){return sN(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(_D){}}function gN(e){return 1e3*Number(e)}function yN(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return VC("JWT malformed, contained fewer than 3 sections"),null;try{const e=xy(n);return e?JSON.parse(e):(VC("Failed to decode base64 JWT payload"),null)}catch(_D){return VC("Caught error parsing JWT payload as JSON",null==_D?void 0:_D.toString()),null}}function vN(e){const t=yN(e);return WC(t,"internal-error"),WC(void 0!==t.exp,"internal-error"),WC(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(e,t,n=!1){if(n)return t;try{return await t}catch(_D){throw _D instanceof Ry&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(_D)&&e.auth.currentUser===e&&await e.auth.signOut(),_D}}class wN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(_D){return void("auth/network-request-failed"===(null==_D?void 0:_D.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mN(this.lastLoginAt),this.creationTime=mN(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(e){var t;const n=e.auth,r=await e.getIdToken(),i=await bN(e,pN(n,{idToken:r}));WC(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?_N(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==o?void 0:o.length)),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new xN(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function _N(e){return e.map(e=>{var{providerId:t}=e,n=DC(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class SN{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){WC(e.idToken,"internal-error"),WC(void 0!==e.idToken,"internal-error"),WC(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):vN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){WC(0!==e.length,"internal-error");const t=vN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(WC(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await aN(e,{},async()=>{const n=zy({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=lN(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tN.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new SN;return n&&(WC("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(WC("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(WC("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new SN,this.toJSON())}_performRefresh(){return QC("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(e,t){WC("string"==typeof e||void 0===e,"internal-error",{appName:t})}class TN{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=DC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xN(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bN(this,this.stsTokenManager.getToken(this.auth,e));return WC(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=By(e),r=await n.getIdToken(t),i=yN(r);WC(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mN(gN(i.auth_time)),issuedAtTime:mN(gN(i.iat)),expirationTime:mN(gN(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=By(e);await kN(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(WC(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new TN(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){WC(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await kN(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rb(this.auth.app))return Promise.reject(HC(this.auth));const e=await this.getIdToken();return await bN(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return sN(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:k}=t;WC(v&&k,e,"internal-error");const _=SN.fromJSON(this.name,k);WC("string"==typeof v,e,"internal-error"),EN(u,e.name),EN(d,e.name),WC("boolean"==typeof b,e,"internal-error"),WC("boolean"==typeof w,e,"internal-error"),EN(h,e.name),EN(f,e.name),EN(p,e.name),EN(m,e.name),EN(g,e.name),EN(y,e.name);const S=new TN({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:_,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new SN;r.updateFromServerResponse(t);const i=new TN({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await kN(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];WC(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?_N(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new SN;a.updateFromIdToken(n);const o=new TN({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new xN(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Map;function NN(e){GC(e instanceof Function,"Expected a class definition");let t=CN.get(e);return t?(GC(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,CN.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IN.type="NONE";const jN=IN;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(e,t,n){return`firebase:${e}:${t}:${n}`}class AN{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=PN(this.userKey,r.apiKey,i),this.fullPersistenceKey=PN("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?TN._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new AN(NN(jN),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||NN(jN);const s=PN(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=TN._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new AN(i,e,n)):new AN(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(MN(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ON(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(FN(t))return"Blackberry";if(UN(t))return"Webos";if(LN(t))return"Safari";if((t.includes("chrome/")||DN(t))&&!t.includes("edge/"))return"Chrome";if(zN(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ON(e=Ny()){return/firefox\//i.test(e)}function LN(e=Ny()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function DN(e=Ny()){return/crios\//i.test(e)}function MN(e=Ny()){return/iemobile/i.test(e)}function zN(e=Ny()){return/android/i.test(e)}function FN(e=Ny()){return/blackberry/i.test(e)}function UN(e=Ny()){return/webos/i.test(e)}function VN(e=Ny()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $N(){return function(){const e=Ny();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function qN(e=Ny()){return VN(e)||zN(e)||UN(e)||FN(e)||/windows phone/i.test(e)||MN(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(e,t=[]){let n;switch(e){case"Browser":n=RN(Ny());break;case"Worker":n=`${RN(Ny())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ab}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(_D){r(_D)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(_D){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==_D?void 0:_D.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GN(this),this.idTokenSubscription=new GN(this),this.beforeStateQueue=new HN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=NN(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await AN.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(_D){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await pN(this,{idToken:e}),n=await TN._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(rb(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(_D){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(_D))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return WC(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(_D){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kN(e)}catch(_D){if("auth/network-request-failed"!==(null==_D?void 0:_D.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rb(this.app))return Promise.reject(HC(this));const t=e?By(e):null;return t&&WC(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&WC(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rb(this.app)?Promise.reject(HC(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rb(this.app)?Promise.reject(HC(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(NN(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return sN(e,"GET","/v2/passwordPolicy",iN(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new KN(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oy("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return sN(e,"POST","/v2/accounts:revokeToken",iN(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&NN(e)||this._popupRedirectResolver;WC(t,this,"argument-error"),this.redirectPersistenceManager=await AN.create(this,[NN(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(WC(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return WC(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){UC.logLevel<=Gy.WARN&&UC.warn(`Auth (${ab}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function QN(e){return By(e)}class GN{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Vy(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return WC(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YN(e){return XN.loadJS(e)}class JN{constructor(e){this.type="recaptcha-enterprise",this.auth=QN(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return sN(e,"GET","/v2/recaptchaConfig",iN(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new fN(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function r(t,n,r){const i=window.grecaptcha;hN(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&hN(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=XN.recaptchaEnterpriseScript;0!==t.length&&(t+=n),YN(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function ZN(e,t,n,r=!1){const i=new JN(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function eI(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ZN(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){const i=await ZN(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(e,t,n){const r=QN(e);WC(r._canInitEmulator,r,"emulator-config-failed"),WC(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=nI(t),{host:s,port:a}=function(e){const t=nI(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:rI(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:rI(t)}}}(t),o=null===a?"":`:${a}`;r.config.emulator={url:`${i}//${s}${o}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function nI(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rI(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class iI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return QC("not implemented")}_getIdTokenResponse(e){return QC("not implemented")}_linkToIdToken(e,t){return QC("not implemented")}_getReauthenticationResolver(e){return QC("not implemented")}}async function sI(e,t){return sN(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(e,t){return oN(e,"POST","/v1/accounts:signInWithPassword",iN(e,t))}async function oI(e,t){return async function(e,t){return sN(e,"POST","/v1/accounts:sendOobCode",iN(e,t))}(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lI extends iI{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new lI(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new lI(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return eI(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",aI);case"emailLink":return async function(e,t){return oN(e,"POST","/v1/accounts:signInWithEmailLink",iN(e,t))}(e,{email:this._email,oobCode:this._password});default:$C(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eI(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sI);case"emailLink":return async function(e,t){return oN(e,"POST","/v1/accounts:signInWithEmailLink",iN(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:$C(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(e,t){return oN(e,"POST","/v1/accounts:signInWithIdp",iN(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends iI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$C("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=DC(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new uI(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return cI(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,cI(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cI(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zy(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){var t,n,r,i,s,a;const o=Fy(Uy(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);WC(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Fy(Uy(e)).link,n=t?Fy(Uy(t)).deep_link_id:null,r=Fy(Uy(e)).deep_link_id;return(r?Fy(Uy(r)).link:null)||r||n||t||e}(e);try{return new dI(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.providerId=hI.PROVIDER_ID}static credential(e,t){return lI._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=dI.parseLink(t);return WC(n,"argument-error"),lI._fromEmailAndCode(e,n.code,n.tenantId)}}hI.PROVIDER_ID="password",hI.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hI.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends fI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends pI{constructor(){super("facebook.com")}static credential(e){return uI._fromParams({providerId:mI.PROVIDER_ID,signInMethod:mI.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mI.credentialFromTaggedObject(e)}static credentialFromError(e){return mI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return mI.credential(e.oauthAccessToken)}catch(t){return null}}}mI.FACEBOOK_SIGN_IN_METHOD="facebook.com",mI.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gI extends pI{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uI._fromParams({providerId:gI.PROVIDER_ID,signInMethod:gI.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gI.credentialFromTaggedObject(e)}static credentialFromError(e){return gI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return gI.credential(t,n)}catch(r){return null}}}gI.GOOGLE_SIGN_IN_METHOD="google.com",gI.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yI extends pI{constructor(){super("github.com")}static credential(e){return uI._fromParams({providerId:yI.PROVIDER_ID,signInMethod:yI.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yI.credentialFromTaggedObject(e)}static credentialFromError(e){return yI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return yI.credential(e.oauthAccessToken)}catch(t){return null}}}yI.GITHUB_SIGN_IN_METHOD="github.com",yI.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vI extends pI{constructor(){super("twitter.com")}static credential(e,t){return uI._fromParams({providerId:vI.PROVIDER_ID,signInMethod:vI.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vI.credentialFromTaggedObject(e)}static credentialFromError(e){return vI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return vI.credential(t,n)}catch(r){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function bI(e,t){return oN(e,"POST","/v1/accounts:signUp",iN(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vI.TWITTER_SIGN_IN_METHOD="twitter.com",vI.PROVIDER_ID="twitter.com";class wI{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await TN._fromIdTokenResponse(e,n,r),s=xI(n);return new wI({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=xI(n);return new wI({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function xI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends Ry{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,kI.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new kI(e,t,n,r)}}function _I(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw kI._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function SI(e,t,n=!1){const{auth:r}=e;if(rb(r.app))return Promise.reject(HC(r));const i="reauthenticate";try{const s=await bN(e,_I(r,i,t,e),n);WC(s.idToken,r,"internal-error");const a=yN(s.idToken);WC(a,r,"internal-error");const{sub:o}=a;return WC(e.uid===o,r,"user-mismatch"),wI._forOperation(e,i,s)}catch(_D){throw"auth/user-not-found"===(null==_D?void 0:_D.code)&&$C(r,"user-mismatch"),_D}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(e,t,n=!1){if(rb(e.app))return Promise.reject(HC(e));const r="signIn",i=await _I(e,r,t),s=await wI._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function TI(e,t){return SI(By(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(e){const t=QN(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function NI(e,t,n){return rb(e.app)?Promise.reject(HC(e)):async function(e,t){return EI(QN(e),t)}(By(e),hI.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&CI(e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function II(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=By(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await bN(r,async function(e,t){return sN(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function jI(e,t){return async function(e,t,n){const{auth:r}=e,i=await e.getIdToken(),s={idToken:i,returnSecureToken:!0};n&&(s.password=n);const a=await bN(e,async function(e,t){return sN(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(a,!0)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(By(e),0,t)}const PI="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(PI,"1"),this.storage.removeItem(PI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends AI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);$N()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RI.type="LOCAL";const OI=RI;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends AI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LI.type="SESSION";const DI=LI;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class MI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new MI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zI(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */MI.receivers=[];class FI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=zI("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function VI(){return void 0!==UI().WorkerGlobalScope&&"function"==typeof UI().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $I="firebaseLocalStorageDb",qI="firebaseLocalStorage",BI="fbase_key";class HI{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function KI(e,t){return e.transaction([qI],t?"readwrite":"readonly").objectStore(qI)}function WI(){const e=indexedDB.open($I,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(qI,{keyPath:BI})}catch(_D){n(_D)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(qI)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase($I);return new HI(e).toPromise()}(),t(await WI()))})})}async function QI(e,t,n){const r=KI(e,!0).put({[BI]:t,value:n});return new HI(r).toPromise()}function GI(e,t){const n=KI(e,!0).delete(t);return new HI(n).toPromise()}class XI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await WI()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(_D){if(t++>3)throw _D;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=MI._getInstance(VI()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new FI(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await WI();return await QI(e,PI,"1"),await GI(e,PI),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>QI(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=KI(e,!1).get(t),r=await new HI(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=KI(e,!1).getAll();return new HI(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}XI.type="LOCAL";const YI=XI;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function JI(e,t){return t?NN(t):(WC(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ZC(3e4,6e4);class ZI extends iI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cI(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ej(e){return EI(e.auth,new ZI(e),e.bypassAuthState)}function tj(e){const{auth:t,user:n}=e;return WC(n,t,"internal-error"),SI(n,new ZI(e),e.bypassAuthState)}async function nj(e){const{auth:t,user:n}=e;return WC(n,t,"internal-error"),async function(e,t,n=!1){const r=await bN(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wI._forOperation(e,"link",r)}(n,new ZI(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(_D){this.reject(_D)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(_D){this.reject(_D)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ej;case"linkViaPopup":case"linkViaRedirect":return nj;case"reauthViaPopup":case"reauthViaRedirect":return tj;default:$C(this.auth,"internal-error")}}resolve(e){GC(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){GC(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new ZC(2e3,1e4);async function sj(e,t,n){if(rb(e.app))return Promise.reject(qC(e,"operation-not-supported-in-this-environment"));const r=QN(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$C(e,"argument-error"),BC(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,fI);const i=JI(r,n);return new aj(r,"signInViaPopup",t,i).executeNotNull()}class aj extends rj{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,aj.currentPopupAction&&aj.currentPopupAction.cancel(),aj.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return WC(e,this.auth,"internal-error"),e}async onExecution(){GC(1===this.filter.length,"Popup operations only handle one event");const e=zI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(qC(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(qC(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,aj.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qC(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ij.get())};e()}}aj.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const oj="pendingRedirect",lj=new Map;class cj extends rj{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=lj.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return PN(oj,e.config.apiKey,e.name)}(t),r=function(e){return NN(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(_D){e=()=>Promise.reject(_D)}lj.set(this.auth._key(),e)}return this.bypassAuthState||lj.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function uj(e,t){lj.set(e._key(),t)}async function dj(e,t,n=!1){if(rb(e.app))return Promise.reject(HC(e));const r=QN(e),i=JI(r,t),s=new cj(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pj(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!pj(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(qC(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fj(e))}saveEventToCache(e){this.cachedEventUids.add(fj(e)),this.lastProcessedEventTime=Date.now()}}function fj(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function pj({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gj=/^https?/;async function yj(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return sN(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(vj(r))return}catch(n){}$C(e,"unauthorized-domain")}function vj(e){const t=XC(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!gj.test(n))return!1;if(mj.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new ZC(3e4,6e4);function wj(){const e=UI().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function xj(e){return new Promise((t,n)=>{var r,i,s;function a(){wj(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{wj(),n(qC(e,"network-request-failed"))},timeout:bj.get()})}if(null===(i=null===(r=UI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=UI().gapi)||void 0===s?void 0:s.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return UI()[t]=()=>{gapi.load?a():n(qC(e,"network-request-failed"))},YN(`${XN.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw kj=null,e})}let kj=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _j=new ZC(5e3,15e3),Sj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ej=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tj(e){const t=e.config;WC(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?eN(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:ab},i=Ej.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${zy(r).slice(1)}`}async function Cj(e){const t=await function(e){return kj=kj||xj(e),kj}(e),n=UI().gapi;return WC(n,e,"internal-error"),t.open({where:document.body,url:Tj(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sj,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=qC(e,"network-request-failed"),s=UI().setTimeout(()=>{r(i)},_j.get());function a(){UI().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ij{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_D){}}}function jj(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Nj),{width:r.toString(),height:i.toString(),top:s,left:a}),c=Ny().toLowerCase();n&&(o=DN(c)?"_blank":n),ON(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Ny()){var t;return VN(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new Ij(null);const d=window.open(t||"",o,u);WC(d,e,"popup-blocked");try{d.focus()}catch(_D){}return new Ij(d)}const Pj="__/auth/handler",Aj="emulator/auth/handler",Rj=encodeURIComponent("fac");async function Oj(e,t,n,r,i,s){WC(e.config.authDomain,e,"auth-domain-config-required"),WC(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ab,eventId:i};if(t instanceof fI){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof pI){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Rj}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Pj}`;return eN(e,Aj)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${zy(o).slice(1)}${c}`}const Lj="webStorageSupport";const Dj=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DI,this._completeRedirectFn=dj,this._overrideRedirectResult=uj}async _openPopup(e,t,n,r){var i;GC(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return jj(e,await Oj(e,t,n,XC(),r),zI())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){UI().location.href=e}(await Oj(e,t,n,XC(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(GC(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Cj(e),n=new hj(e);return t.register("authEvent",t=>{WC(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lj,{type:Lj},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Lj];void 0!==i&&t(!!i),$C(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qN()||LN()||VN()}};var Mj="@firebase/auth",zj="1.7.9";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){WC(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Uj=Ty("authIdTokenMaxAge")||300;let Vj=null;function $j(e=lb()){const t=nb(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=nb(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Dy(n.getOptions(),null!=t?t:{}))return e;$C(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Dj,persistence:[YI,OI,DI]}),r=Ty("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Uj)return;const r=null==t?void 0:t.token;Vj!==r&&(Vj=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){By(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){By(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Sy("auth");return s&&tI(n,`http://${s}`),n}var qj;XN={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=qC("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},qj="Browser",tb(new Hy("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;WC(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:qj,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BN(qj)},l=new WN(n,r,i,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(NN);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),tb(new Hy("auth-internal",e=>{const t=QN(e.getProvider("auth").getImmediate());return new Fj(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ub(Mj,zj,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(qj)),ub(Mj,zj,"esm2017");const Bj="@firebase/installations",Hj="0.6.9",Kj=1e4,Wj=`w:${Hj}`,Qj="FIS_v2",Gj=36e5,Xj=new Oy("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Yj(e){return e instanceof Ry&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Zj(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function eP(e,t){const n=(await t.json()).error;return Xj.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function tP({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function nP(e,{refreshToken:t}){const n=tP(e);return n.append("Authorization",function(e){return`${Qj} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),n}async function rP(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function iP(e){return new Promise(t=>{setTimeout(t,e)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sP=/^[cdef][\w-]{21}$/;function aP(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return sP.test(t)?t:""}catch(e){return""}}function oP(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new Map;function cP(e,t){const n=oP(e);uP(n,t),function(e,t){const n=function(){!dP&&"BroadcastChannel"in self&&(dP=new BroadcastChannel("[Firebase] FID Change"),dP.onmessage=e=>{uP(e.data.key,e.data.fid)});return dP}();n&&n.postMessage({key:e,fid:t});0===lP.size&&dP&&(dP.close(),dP=null)}(n,t)}function uP(e,t){const n=lP.get(e);if(n)for(const r of n)r(t)}let dP=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const hP="firebase-installations-store";let fP=null;function pP(){return fP||(fP=pv("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(hP)}})),fP}async function mP(e,t){const n=oP(e),r=(await pP()).transaction(hP,"readwrite"),i=r.objectStore(hP),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||cP(e,t.fid),t}async function gP(e){const t=oP(e),n=(await pP()).transaction(hP,"readwrite");await n.objectStore(hP).delete(t),await n.done}async function yP(e,t){const n=oP(e),r=(await pP()).transaction(hP,"readwrite"),i=r.objectStore(hP),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||cP(e,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(e){let t;const n=await yP(e.appConfig,n=>{const r=function(e){const t=e||{fid:aP(),registrationStatus:0};return xP(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Xj.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Jj(e),i=tP(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={fid:n,authVersion:Qj,appId:e.appId,sdkVersion:Wj},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await rP(()=>fetch(r,o));if(l.ok){const e=await l.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Zj(e.authToken)}}throw await eP("Create Installation",l)}(e,t);return mP(e.appConfig,n)}catch(_D){throw Yj(_D)&&409===_D.customData.serverCode?await gP(e.appConfig):await mP(e.appConfig,{fid:t.fid,registrationStatus:0}),_D}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:bP(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function bP(e){let t=await wP(e.appConfig);for(;1===t.registrationStatus;)await iP(100),t=await wP(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await vP(e);return n||t}return t}function wP(e){return yP(e,e=>{if(!e)throw Xj.create("installation-not-found");return xP(e)})}function xP(e){return 1===(t=e).registrationStatus&&t.registrationTime+Kj<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function kP({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${Jj(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,n),i=nP(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={installation:{sdkVersion:Wj,appId:e.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await rP(()=>fetch(r,o));if(l.ok){return Zj(await l.json())}throw await eP("Generate Auth Token",l)}async function _P(e,t=!1){let n;const r=await yP(e.appConfig,r=>{if(!EP(r))throw Xj.create("not-registered");const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Gj}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await SP(e.appConfig);for(;1===n.authToken.requestStatus;)await iP(100),n=await SP(e.appConfig);const r=n.authToken;return 0===r.requestStatus?_P(e,t):r}(e,t),r;{if(!navigator.onLine)throw Xj.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await kP(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await mP(e.appConfig,r),n}catch(_D){if(!Yj(_D)||401!==_D.customData.serverCode&&404!==_D.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await mP(e.appConfig,n)}else await gP(e.appConfig);throw _D}}(e,t),t}});return n?await n:r.authToken}function SP(e){return yP(e,e=>{if(!EP(e))throw Xj.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Kj<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})}function EP(e){return void 0!==e&&2===e.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function TP(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await vP(e);t&&await t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n);return(await _P(n,t)).token}function CP(e){return Xj.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="installations",IP=e=>{const t=nb(e.getProvider("app").getImmediate(),NP).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await vP(t);return r?r.catch(console.error):_P(t).catch(console.error),n.fid}(t),getToken:e=>TP(t,e)}};tb(new Hy(NP,e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw CP("App Configuration");if(!e.name)throw CP("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw CP(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:nb(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),tb(new Hy("installations-internal",IP,"PRIVATE")),ub(Bj,Hj),ub(Bj,Hj,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jP="analytics",PP="https://www.googletagmanager.com/gtag/js",AP=new tv("@firebase/analytics"),RP=new Oy("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function OP(e){if(!e.startsWith(PP)){const t=RP.create("invalid-gtag-resource",{gtagURL:e});return AP.warn(t.message),""}return e}function LP(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function DP(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:OP}),r=document.createElement("script"),i=`${PP}?l=${e}&id=${t}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function MP(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await LP(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(_D){AP.error(_D)}}(e,t,n,r,i)}else if("config"===i){const[i,a]=s;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await LP(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(_D){AP.error(_D)}e("config",i,s)}(e,t,n,r,i,a)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(_D){AP.error(_D)}}}const zP=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function FP(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function UP(e,t=zP,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw RP.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw RP.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new $P;return setTimeout(async()=>{o.abort()},6e4),VP({appId:r,apiKey:i,measurementId:s},a,o,t)}async function VP(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=zP){var s;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(RP.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(r,t)}catch(_D){if(o)return AP.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==_D?void 0:_D.message}]`),{appId:a,measurementId:o};throw _D}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:FP(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw RP.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(a),t}catch(_D){const l=_D;if(!function(e){if(!(e instanceof Ry&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l)){if(i.deleteThrottleMetadata(a),o)return AP.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:a,measurementId:o};throw _D}const c=503===Number(null===(s=null==l?void 0:l.customData)||void 0===s?void 0:s.httpStatus)?qy(n,i.intervalMillis,30):qy(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,u),AP.debug(`Calling attemptFetch again in ${c} millis`),VP(e,u,r,i)}}class $P{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qP(e,t,n,r,i,s,a){var o;const l=UP(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&AP.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>AP.error(e)),t.push(l);const c=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!Py())return AP.warn(RP.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Ay()}catch(_D){return AP.warn(RP.create("indexeddb-unavailable",{errorInfo:null==_D?void 0:_D.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(PP)&&n.src.includes(e))return n;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(s)||DP(s,u.measurementId),i("js",new Date);const h=null!==(o=null==a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),u.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.app=e}_delete(){return delete HP[this.app.options.appId],Promise.resolve()}}let HP={},KP=[];const WP={};let QP,GP,XP="dataLayer",YP=!1;function JP(){const e=[];if(Iy()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=RP.create("invalid-analytics-context",{errorInfo:t});AP.warn(n.message)}}function ZP(e,t,n){JP();const r=e.options.appId;if(!r)throw RP.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw RP.create("no-api-key");AP.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=HP[r])throw RP.create("already-exists",{id:r});if(!YP){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(XP);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=MP(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(HP,KP,WP,XP,"gtag");GP=e,QP=t,YP=!0}HP[r]=qP(e,KP,WP,t,QP,XP,n);return new BP(e)}function eA(e,t,n,r){e=By(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(GP,HP[e.app.options.appId],t,n,r).catch(e=>AP.error(e))}const tA="@firebase/analytics",nA="0.10.8";tb(new Hy(jP,(e,{options:t})=>ZP(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),tb(new Hy("analytics-internal",function(e){try{const t=e.getProvider(jP).getImmediate();return{logEvent:(e,n,r)=>eA(t,e,n,r)}}catch(_D){throw RP.create("interop-component-reg-failed",{reason:_D})}},"PRIVATE")),ub(tA,nA),ub(tA,nA,"esm2017");const rA=0===cb().length?ob({apiKey:"AIzaSyB6bUM5UFLNcwPYDFPkdW2i6uy-QH7ldsA",authDomain:"quiz-app-85db6.firebaseapp.com",projectId:"quiz-app-85db6",storageBucket:"quiz-app-85db6.firebasestorage.app",messagingSenderId:"609646993082",appId:"1:609646993082:web:202a0d6d0ab5e0c6ac2c83",measurementId:"G-M7B6P9R97Y"}):lb(),iA=kT(rA);$j(rA),function(e=lb()){const t=nb(e=By(e),jP);t.isInitialized()?t.getImmediate():function(e,t={}){const n=nb(e,jP);if(n.isInitialized()){const e=n.getImmediate();if(Dy(t,n.getOptions()))return e;throw RP.create("already-initialized")}const r=n.initialize({options:t})}(e)}(rA);const sA="quizzes",aA=e=>{if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(e=>aA(e));const t={...e};return Object.keys(t).forEach(e=>{const n=t[e];n&&"object"==typeof n&&(n.toDate&&"function"==typeof n.toDate?t[e]=n.toDate().toISOString():n instanceof Date?t[e]=n.toISOString():Array.isArray(n)?t[e]=n.map(e=>aA(e)):t[e]=aA(n))}),t},oA=async e=>{try{const t=vT(iA,sA,e),n=await kC(t);if(!n.exists())throw new Error("Quiz not found");const r=n.data(),i=aA(r);return{id:n.id,...i}}catch(t){throw t}};function lA(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=lA(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function cA(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=lA(e))&&(r&&(r+=" "),r+=t);return r}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var uA=e=>"number"==typeof e&&!isNaN(e),dA=e=>"string"==typeof e,hA=e=>"function"==typeof e,fA=e=>dA(e)||hA(e)?e:null,pA=(e,t)=>!1===e||uA(e)&&e>0?e:t,mA=e=>$.isValidElement(e)||dA(e)||hA(e)||uA(e);function gA(e,t){return{content:yA(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function yA(e,t,n=!1){return $.isValidElement(e)&&!dA(e.type)?$.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):hA(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function vA({delay:e,isRunning:t,closeToast:n,type:r="default",hide:i,className:s,controlledProgress:a,progress:o,rtl:l,isIn:c,theme:u}){let d=i||a&&0===o,h={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};a&&(h.transform=`scaleX(${o})`);let f=cA("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":l}),p=hA(s)?s({rtl:l,type:r,defaultClassName:f}):cA(f,s),m={[a&&o>=1?"onTransitionEnd":"onAnimationEnd"]:a&&o<1?null:()=>{c&&n()}};return q.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":d},q.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${r}`}),q.createElement("div",{role:"progressbar","aria-hidden":d?"true":"false","aria-label":"notification timer",className:p,style:h,...m}))}var bA=1,wA=()=>""+bA++;function xA(e,t,n){let r=1,i=0,s=[],a=[],o=t,l=new Map,c=new Set,u=()=>{a=Array.from(l.values()),c.forEach(e=>e())},d=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},f=e=>{var t,r;let{toastId:i,updateId:s}=e.props,a=null==s;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(i,e),u(),n(gA(e,a?"added":"updated")),a&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:o,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach(n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))})},removeToast:h,toasts:l,clearQueue:()=>{i-=s.length,s=[]},buildToast:(t,a)=>{if((({containerId:t,toastId:n,updateId:r})=>{let i=t?t!==e:1!==e,s=l.has(n)&&null==r;return i||s})(a))return;let{toastId:c,updateId:d,data:p,staleId:m,delay:g}=a,y=null==d;y&&i++;let v={...o,style:o.toastStyle,key:r++,...Object.fromEntries(Object.entries(a).filter(([e,t])=>null!=t)),toastId:c,updateId:d,data:p,isIn:!1,className:fA(a.className||o.toastClassName),progressClassName:fA(a.progressClassName||o.progressClassName),autoClose:!a.isLoading&&pA(a.autoClose,o.autoClose),closeToast(e){l.get(c).removalReason=e,h(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(gA(e,"removed")),l.delete(c),i--,i<0&&(i=0),s.length>0)return void f(s.shift());u()}}};v.closeButton=o.closeButton,!1===a.closeButton||mA(a.closeButton)?v.closeButton=a.closeButton:!0===a.closeButton&&(v.closeButton=!mA(o.closeButton)||o.closeButton);let b={content:t,props:v,staleId:m};o.limit&&o.limit>0&&i>o.limit&&y?s.push(b):uA(g)?setTimeout(()=>{f(b)},g):f(b)},setProps(e){o=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>a}}var kA=new Map,_A=[],SA=new Set,EA=e=>SA.forEach(t=>t(e)),TA=()=>kA.size>0;function CA(e,t){var n;if(t)return!(null==(n=kA.get(t))||!n.isToastActive(e));let r=!1;return kA.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r}function NA(e){if(TA()){if(null==e||(e=>dA(e)||uA(e))(e))kA.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=kA.get(e.containerId);t?t.removeToast(e.id):kA.forEach(t=>{t.removeToast(e.id)})}}else _A=_A.filter(t=>null!=e&&t.options.toastId!==e)}function IA(e,t){mA(e)&&(TA()||_A.push({content:e,options:t}),kA.forEach(n=>{n.buildToast(e,t)}))}function jA(e,t){kA.forEach(n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)})}function PA(e){let t=e.containerId||1;return{subscribe(n){let r=xA(t,e,EA);kA.set(t,r);let i=r.observe(n);return _A.forEach(e=>IA(e.content,e.options)),_A=[],()=>{i(),kA.delete(t)}},setProps(e){var n;null==(n=kA.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=kA.get(t))?void 0:e.getSnapshot()}}}function AA(e){return e&&(dA(e.toastId)||uA(e.toastId))?e.toastId:wA()}function RA(e,t){return IA(e,t),t.toastId}function OA(e,t){return{...t,type:t&&t.type||e,toastId:AA(t)}}function LA(e){return(t,n)=>RA(t,OA(e,n))}function DA(e,t){return RA(e,OA("default",t))}function MA(e){let[t,n]=$.useState(!1),[r,i]=$.useState(!1),s=$.useRef(null),a=$.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=e;function h(){n(!0)}function f(){n(!1)}function p(n){let r=s.current;if(a.canDrag&&r){a.didMove=!0,t&&f(),"x"===e.draggableDirection?a.delta=n.clientX-a.start:a.delta=n.clientY-a.start,a.start!==n.clientX&&(a.canCloseOnClick=!1);let i="x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;r.style.transform=`translate3d(${i},0)`,r.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance))}}function m(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",m);let t=s.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return i(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=kA.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),$.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",h),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",f)}},[e.pauseOnFocusLoss]);let g={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",m);let n=s.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:i,right:a}=s.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=i&&t.clientX<=a&&t.clientY>=n&&t.clientY<=r?f():h()}};return o&&l&&(g.onMouseEnter=f,e.stacked||(g.onMouseLeave=h)),d&&(g.onClick=e=>{u&&u(e),a.canCloseOnClick&&c(!0)}),{playToast:h,pauseToast:f,isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:g}}DA.loading=(e,t)=>RA(e,OA("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),DA.promise=function(e,{pending:t,error:n,success:r},i){let s;t&&(s=dA(t)?DA.loading(t,i):DA.loading(t.render,{...i,...t}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(e,t,n)=>{if(null==t)return void DA.dismiss(s);let r={type:e,...a,...i,data:n},o=dA(t)?{render:t}:t;return s?DA.update(s,{...r,...o}):DA(o.render,{...r,...o}),n},l=hA(e)?e():e;return l.then(e=>o("success",r,e)).catch(e=>o("error",n,e)),l},DA.success=LA("success"),DA.info=LA("info"),DA.error=LA("error"),DA.warning=LA("warning"),DA.warn=DA.warning,DA.dark=(e,t)=>RA(e,OA("default",{theme:"dark",...t})),DA.dismiss=function(e){NA(e)},DA.clearWaitingQueue=(e={})=>{kA.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},DA.isActive=CA,DA.update=(e,t={})=>{let n=((e,{containerId:t})=>{var n;return null==(n=kA.get(t||1))?void 0:n.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,s={delay:100,...r,...t,toastId:t.toastId||e,updateId:wA()};s.toastId!==e&&(s.staleId=e);let a=s.render||i;delete s.render,RA(a,s)}},DA.done=e=>{DA.update(e,{progress:1})},DA.onChange=function(e){return SA.add(e),()=>{SA.delete(e)}},DA.play=e=>jA(!0,e),DA.pause=e=>jA(!1,e);var zA="undefined"!=typeof window?$.useLayoutEffect:$.useEffect,FA=({theme:e,type:t,isLoading:n,...r})=>q.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...r});var UA={info:function(e){return q.createElement(FA,{...e},q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return q.createElement(FA,{...e},q.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return q.createElement(FA,{...e},q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return q.createElement(FA,{...e},q.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return q.createElement("div",{className:"Toastify__spinner"})}};function VA({theme:e,type:t,isLoading:n,icon:r}){let i=null,s={theme:e,type:t};return!1===r||(hA(r)?i=r({...s,isLoading:n}):$.isValidElement(r)?i=$.cloneElement(r,s):n?i=UA.spinner():(e=>e in UA)(t)&&(i=UA[t](s))),i}var $A=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=MA(e),{closeButton:a,children:o,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:h,transition:f,position:p,className:m,style:g,progressClassName:y,updateId:v,role:b,progress:w,rtl:x,toastId:k,deleteToast:_,isIn:S,isLoading:E,closeOnClick:T,theme:C,ariaLabel:N}=e,I=cA("Toastify__toast",`Toastify__toast-theme--${C}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":T}),j=hA(m)?m({rtl:x,position:p,type:u,defaultClassName:I}):cA(I,m),P=VA(e),A=!!w||!l,R={closeToast:h,type:u,theme:C},O=null;return!1===a||(O=hA(a)?a(R):$.isValidElement(a)?$.cloneElement(a,R):function({closeToast:e,theme:t,ariaLabel:n="close"}){return q.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":n},q.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},q.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(R)),q.createElement(f,{isIn:S,done:_,position:p,preventExitTransition:n,nodeRef:r,playToast:s},q.createElement("div",{id:k,tabIndex:0,onClick:c,"data-in":S,className:j,...i,style:g,ref:r,...S&&{role:b,"aria-label":N}},null!=P&&q.createElement("div",{className:cA("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},P),yA(o,e,!t),O,!e.customProgressBar&&q.createElement(vA,{...v&&!A?{key:`p-${v}`}:{},rtl:x,theme:C,delay:l,isRunning:t,isIn:S,closeToast:h,hide:d,type:u,className:y,controlledProgress:A,progress:w||0})))},qA=function({enter:e,exit:t,appendPosition:n=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:s,position:a,preventExitTransition:o,done:l,nodeRef:c,isIn:u,playToast:d}){let h=n?`${e}--${a}`:e,f=n?`${t}--${a}`:t,p=$.useRef(0);return $.useLayoutEffect(()=>{let e=c.current,t=h.split(" "),n=r=>{r.target===c.current&&(d(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===p.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),$.useEffect(()=>{let e=c.current,t=()=>{e.removeEventListener("animationend",t),r?function(e,t,n=300){let{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,l,i):l()};u||(o?t():(p.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))},[u]),q.createElement(q.Fragment,null,s)}}(((e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}))("bounce",!0)),BA={position:"top-right",transition:qA,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code};function HA(e){let t={...BA,...e},n=e.stacked,[r,i]=$.useState(!0),s=$.useRef(null),{getToastToRender:a,isToastActive:o,count:l}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:i}=$.useRef(PA(e)).current;i(e);let s=null==(t=$.useSyncExternalStore(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!s)return[];let n=new Map;return e.newestOnTop&&s.reverse(),s.forEach(e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},isToastActive:CA,count:null==s?void 0:s.length}}(t),{className:c,style:u,rtl:d,containerId:h,hotKeys:f}=t;function p(e){let t=cA("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":d});return hA(c)?c({position:e,rtl:d,defaultClassName:t}):cA(t,fA(c))}function m(){n&&(i(!0),DA.play())}return zA(()=>{var e;if(n){let n=s.current.querySelectorAll('[data-in="true"]'),i=12,a=null==(e=t.position)?void 0:e.includes("top"),o=0,l=0;Array.from(n).reverse().forEach((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed=`${r}`),n.dataset.pos||(n.dataset.pos=a?"top":"bot");let s=o*(r?.2:1)+(r?0:i*t);n.style.setProperty("--y",`${a?s:-1*s}px`),n.style.setProperty("--g",`${i}`),n.style.setProperty("--s",""+(1-(r?l:0))),o+=n.offsetHeight,l+=.025})}},[r,l,n]),$.useEffect(()=>{function e(e){var t;let n=s.current;f(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),i(!1),DA.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(i(!0),DA.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f]),q.createElement("section",{ref:s,className:"Toastify",id:h,onMouseEnter:()=>{n&&(i(!1),DA.pause())},onMouseLeave:m,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a((e,t)=>{let r=t.length?{...u}:{...u,pointerEvents:"none"};return q.createElement("div",{tabIndex:-1,className:p(e),"data-stacked":n,style:r,key:`c-${e}`},t.map(({content:e,props:t})=>q.createElement($A,{...t,stacked:n,collapseAll:m,isIn:o(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}const KA="quizzes",WA="quizResults",QA=e=>{if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(e=>QA(e));const t={...e};return Object.keys(t).forEach(e=>{const n=t[e];n&&"object"==typeof n&&(n.toDate&&"function"==typeof n.toDate?t[e]=n.toDate().toISOString():n instanceof Date?t[e]=n.toISOString():Array.isArray(n)?t[e]=n.map(e=>QA(e)):t[e]=QA(n))}),t},GA=async(e,t)=>{try{const n=vT(iA,KA,e);await TC(n,{...t,updatedAt:new Date}),DA.success("Cập nhật quiz thành công!")}catch(n){throw DA.error("Không thể cập nhật quiz"),new Error("Không thể cập nhật quiz")}},XA=async e=>{try{const t=await kC(vT(iA,KA,e));if(t.exists()){const e=t.data(),n=QA(e);return{id:t.id,...n}}return null}catch(t){throw new Error("Không thể tải quiz")}};async function YA(e){try{const t=vT(iA,WA,e),n=await kC(t);if(n.exists()){const e=n.data(),t=QA(e);return{id:n.id,...t}}return null}catch(t){throw t}}const JA=Object.freeze(Object.defineProperty({__proto__:null,QUIZZES_COLLECTION:KA,QUIZ_RESULTS_COLLECTION:WA,getQuizById:XA,getQuizResultById:YA,getQuizResults:async e=>{try{const t=iC(yT(iA,WA),aC("quizId","==",e),cC("completedAt","desc")),n=await SC(t),r=[];return n.empty?[]:(n.forEach(e=>{const t=e.data(),n=QA(t),i={id:e.id,...n};r.push(i)}),r)}catch(t){throw new Error("Không thể tải kết quả quiz")}},submitQuizResult:async e=>{const t=["userId","quizId","score","correctAnswers","totalQuestions","answers","completedAt"].filter(t=>{const n=e[t];return"answers"===t?!Array.isArray(n):"completedAt"===t?!n:["score","correctAnswers","totalQuestions"].includes(t)?"number"!=typeof n||isNaN(n):!n});if(t.length>0)throw new Error(`Thiếu trường bắt buộc: ${t.join(", ")}`);if(e.score<0||e.score>100)throw new Error("Điểm số phải trong khoảng 0-100");if(e.correctAnswers>e.totalQuestions)throw new Error("Số câu đúng không thể lớn hơn tổng số câu");const n=e.answers.filter(e=>"boolean"!=typeof e.isCorrect);n.length;try{const t=await NC(yT(iA,WA),e);return DA.success("Nộp bài thành công!"),t.id}catch(r){throw DA.error("Không thể lưu kết quả quiz"),new Error("Không thể lưu kết quả quiz")}},updateQuiz:GA},Symbol.toStringTag,{value:"Module"})),ZA=Ag("quiz/fetchQuizzes",async(e,{rejectWithValue:t})=>{try{return(await(async(e,t)=>{try{let e=iC(yT(iA,sA),dC(t||10));const n=await SC(e);return{quizzes:n.docs.map(e=>({id:e.id,...aA(e.data())})),lastDoc:n.docs[n.docs.length-1]}}catch(n){throw n instanceof Error&&n.code,n}})(0,void 0)).quizzes}catch(n){return"CONNECTION_ERROR"===n.type?t("Không thể kết nối đến server. Vui lòng kiểm tra kết nối mạng của bạn."):"TIMEOUT_ERROR"===n.type?t("Server không phản hồi. Vui lòng thử lại sau."):t("Đã có lỗi xảy ra khi tải danh sách quiz. Vui lòng thử lại.")}}),eR=Ag("quiz/fetchQuizById",async e=>await oA(e)),tR=Ag("quiz/fetchUserQuizResults",async e=>{const t=await(async e=>{try{const t=iC(yT(iA,WA),aC("userId","==",e),cC("completedAt","desc")),n=await SC(t),r=[];return n.forEach(e=>{var t;const n=e.data();let i={id:e.id,...n,completedAt:(null==(t=n.completedAt)?void 0:t.toDate)?n.completedAt.toDate().toISOString():n.completedAt instanceof Date?n.completedAt.toISOString():"string"==typeof n.completedAt?n.completedAt:""};const s="number"==typeof i.correctAnswers,a="number"==typeof i.totalQuestions&&i.totalQuestions>0,o="number"==typeof i.score&&!isNaN(i.score);if((!s||!a)&&Array.isArray(i.answers)&&i.answers.length>0){const e=i.answers.filter(e=>e&&!0===e.isCorrect).length,t=i.answers.length;s||(i.correctAnswers=e),a||(i.totalQuestions=t),o&&0!==i.score||(i.score=i.totalQuestions>0?Math.round(i.correctAnswers/i.totalQuestions*100):0)}r.push(i)}),r}catch(t){throw new Error("Không thể tải kết quả quiz")}})(e);return t}),nR=Tg({name:"quiz",initialState:{quizzes:[],currentQuiz:null,userResults:[],loading:!1,isLoading:!1,error:null,connectionError:!1,filters:{category:"all",difficulty:void 0,searchTerm:""},currentQuestionIndex:0,userAnswers:{},timeLeft:0,quizStartTime:null,retryCount:0,lastError:null,isTimeWarning:!1,totalTime:0},reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},setQuizzes:(e,t)=>{e.quizzes=t.payload},addQuiz:(e,t)=>{e.quizzes.unshift(t.payload)},updateQuiz:(e,t)=>{const n=e.quizzes.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.quizzes[n]=t.payload)},removeQuiz:(e,t)=>{e.quizzes=e.quizzes.filter(e=>e.id!==t.payload)},setCurrentQuiz:(e,t)=>{e.currentQuiz=t.payload,t.payload?(e.currentQuestionIndex=0,e.userAnswers={},e.totalTime=60*t.payload.duration,e.timeLeft=e.totalTime,e.quizStartTime=Date.now(),e.isTimeWarning=!1):(e.currentQuestionIndex=0,e.userAnswers={},e.timeLeft=0,e.quizStartTime=null,e.totalTime=0,e.isTimeWarning=!1)},updateTimeLeft:e=>{if(e.quizStartTime&&e.totalTime>0){const t=Math.floor((Date.now()-e.quizStartTime)/1e3),n=Math.max(e.totalTime-t,0);e.timeLeft=n,e.isTimeWarning=n<=Math.ceil(.1*e.totalTime)}},decrementTime:e=>{e.timeLeft>0&&(e.timeLeft-=1,e.isTimeWarning=e.timeLeft<=Math.ceil(.1*e.totalTime))},setUserAnswer:(e,t)=>{e.userAnswers[t.payload.questionId]=t.payload.answerId},clearUserAnswers:e=>{e.userAnswers={}},setTimeLeft:(e,t)=>{e.timeLeft=t.payload},setUserResults:(e,t)=>{e.userResults=t.payload},addUserResult:(e,t)=>{e.userResults.unshift(t.payload)},setFilters:(e,t)=>{e.filters=t.payload},updateFilter:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={}},resetQuizState:e=>{e.currentQuiz=null,e.currentQuestionIndex=0,e.userAnswers={},e.timeLeft=0,e.quizStartTime=null,e.totalTime=0,e.isTimeWarning=!1}},extraReducers:e=>{e.addCase(ZA.pending,e=>{e.loading=!0,e.isLoading=!0,e.error=null}).addCase(ZA.fulfilled,(e,t)=>{e.loading=!1,e.isLoading=!1,e.quizzes=t.payload}).addCase(ZA.rejected,(e,t)=>{e.loading=!1,e.isLoading=!1,e.error=t.error.message||"Lỗi khi tải quiz"}).addCase(eR.pending,e=>{e.loading=!0,e.error=null}).addCase(eR.fulfilled,(e,t)=>{if(e.loading=!1,t.payload){e.currentQuiz=t.payload;e.quizzes.find(e=>e.id===t.payload.id)||e.quizzes.push(t.payload)}}).addCase(eR.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Lỗi khi tải quiz"}).addCase(tR.pending,e=>{e.loading=!0}).addCase(tR.fulfilled,(e,t)=>{e.loading=!1,e.userResults=t.payload}).addCase(tR.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Lỗi khi tải kết quả quiz"})}}),{setCurrentQuiz:rR,updateTimeLeft:iR}=nR.actions,sR=nR.reducer,aR=()=>e=>t=>{try{return e(t)}catch(n){return void DA.error("Đã xảy ra lỗi. Vui lòng tải lại trang.")}},oR=Sg({reducer:{auth:my,quiz:sR},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE","quiz/fetchQuizzes/fulfilled","quiz/fetchQuizById/fulfilled","multiplayer/setCurrentRoom","multiplayer/updatePlayerInRoom"],ignoredPaths:["quiz.quizzes","quiz.currentQuiz","quiz.userResults","multiplayer.currentRoom","multiplayer.currentPlayer"]},immutableCheck:{warnAfter:128},thunk:{extraArgument:{timeout:1e4}}}).concat(aR)}),lR=0===cb().length?ob({apiKey:"AIzaSyB6bUM5UFLNcwPYDFPkdW2i6uy-QH7ldsA",authDomain:"quiz-app-85db6.firebaseapp.com",projectId:"quiz-app-85db6",storageBucket:"quiz-app-85db6.appspot.com",messagingSenderId:"609646993082",appId:"1:609646993082:web:202a0d6d0ab5e0c6ac2c83",measurementId:"G-M7B6P9R97Y"}):lb(),cR=$j(lR);var uR,dR;(uR=cR,dR=OI,By(uR).setPersistence(dR)).catch(e=>{DA.error("Có lỗi xảy ra khi thiết lập xác thực. Vui lòng tải lại trang.")});const hR=kT(lR),fR=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},pR=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),mR=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var gR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=$.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>$.createElement("svg",{ref:l,...gR,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:pR("lucide",i),...!s&&!mR(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>$.createElement(e,t)),...Array.isArray(s)?s:[s]])),vR=(e,t)=>{const n=$.forwardRef(({className:n,...r},i)=>{return $.createElement(yR,{ref:i,iconNode:t,className:pR(`lucide-${s=fR(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var s});return n.displayName=fR(e),n},bR=vR("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),wR=vR("chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),xR=vR("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),kR=vR("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),_R=vR("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),SR=vR("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ER=vR("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),TR=vR("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),CR=vR("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),NR=vR("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),IR=vR("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),jR=vR("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),PR=vR("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),AR=vR("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),RR=vR("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),OR=vR("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),LR=({variant:e="light"})=>{const{i18n:t}=_d(),n=[{code:"vi",name:"Tiếng Việt",flag:"🇻🇳"},{code:"en",name:"English",flag:"🇺🇸"}],r=n.find(e=>e.code===t.language)||n[0],i=()=>{switch(e){case"dark":default:return"text-white";case"header":return"text-gray-700"}};return Y.jsxs("div",{className:"relative group",children:[Y.jsxs("button",{className:(()=>{switch(e){case"dark":return"flex items-center space-x-2 px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors border border-white/20 backdrop-blur-sm text-white";case"header":return"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border border-gray-300 text-gray-700";default:return"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-white shadow-md"}})(),children:[Y.jsx(ER,{className:`w-4 h-4 ${(()=>{switch(e){case"dark":default:return"text-white";case"header":return"text-gray-600"}})()}`}),Y.jsxs("span",{className:`${i()} text-sm font-medium hidden sm:inline`,children:[r.flag," ",r.name]}),Y.jsx("span",{className:`${i()} text-sm font-medium sm:hidden`,children:r.flag}),Y.jsx("svg",{className:`w-3 h-3 ${(()=>{switch(e){case"dark":return"text-white/70";case"header":return"text-gray-500";default:return"text-white/80"}})()} ml-1`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Y.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[160px] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[Y.jsx("div",{className:"px-3 py-2 border-b border-gray-200",children:Y.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Chọn ngôn ngữ"})}),n.map(e=>Y.jsxs("button",{onClick:()=>{return n=e.code,void t.changeLanguage(n);var n},className:"w-full px-4 py-3 text-left text-sm hover:bg-gray-50 transition-colors flex items-center space-x-3 "+(t.language===e.code?"text-blue-600 bg-blue-50 font-medium":"text-gray-700"),children:[Y.jsx("span",{className:"text-lg",children:e.flag}),Y.jsx("span",{className:"flex-1",children:e.name}),t.language===e.code&&Y.jsx("span",{className:"text-blue-600 font-bold",children:"✓"})]},e.code))]})]})},DR=()=>{const{t:e}=_d();return Y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:[Y.jsxs("nav",{className:"flex items-center justify-between p-4 sm:p-6",children:[Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center mr-2 sm:mr-3",children:Y.jsx("span",{className:"text-white text-lg sm:text-xl font-bold",children:"Q"})}),Y.jsx("span",{className:"text-white text-lg sm:text-xl font-bold",children:"Quiz Trivia"})]}),Y.jsx(LR,{variant:"dark"})]}),Y.jsx("div",{className:"flex items-center justify-center min-h-[80vh] px-4",children:Y.jsxs("div",{className:"text-center text-white max-w-4xl",children:[Y.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-blue-200 to-purple-200 bg-clip-text text-transparent leading-tight",children:e("landing.hero.title","Thử thách kiến thức của bạn")}),Y.jsx("p",{className:"text-lg sm:text-xl text-blue-100 mb-6 sm:mb-8 max-w-2xl mx-auto px-4 leading-relaxed",children:e("landing.hero.subtitle","Khám phá hàng ngàn quiz thú vị, thử thách bản thân và nâng cao kiến thức với Quiz Trivia - nền tảng quiz tương tác hàng đầu!")}),Y.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 justify-center mb-8 sm:mb-12 px-4",children:[Y.jsx(cf,{to:"/login",className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold text-base sm:text-lg transition-all duration-200 transform hover:scale-105 shadow-lg",children:e("landing.cta.primary","Bắt đầu ngay - Miễn phí!")}),Y.jsx(cf,{to:"/login",className:"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold text-base sm:text-lg transition-all duration-200",children:e("landing.cta.secondary","Đã có tài khoản?")})]}),Y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 mt-8 sm:mt-12 lg:mt-16 px-4",children:[Y.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6",children:[Y.jsx("div",{className:"text-3xl sm:text-4xl mb-3 sm:mb-4",children:"🎯"}),Y.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:e("landing.features.diversity.title","Đa dạng chủ đề")}),Y.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:e("landing.features.diversity.description","Khoa học, lịch sử, thể thao, giải trí và nhiều chủ đề hấp dẫn khác")})]}),Y.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6",children:[Y.jsx("div",{className:"text-3xl sm:text-4xl mb-3 sm:mb-4",children:"⏱️"}),Y.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:e("landing.features.realtime.title","Thời gian thực")}),Y.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:e("landing.features.realtime.description","Thử thách với timer đếm ngược và theo dõi tiến độ realtime")})]}),Y.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6 sm:col-span-2 lg:col-span-1",children:[Y.jsx("div",{className:"text-3xl sm:text-4xl mb-3 sm:mb-4",children:"🏆"}),Y.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:e("landing.features.ranking.title","Xếp hạng & Thành tích")}),Y.jsx("p",{className:"text-blue-100 text-sm sm:text-base",children:e("landing.features.ranking.description","Theo dõi điểm số, thống kê và so sánh với bạn bè")})]})]})]})}),Y.jsx("div",{className:"py-8 sm:py-12 lg:py-16 bg-white/5 backdrop-blur-sm",children:Y.jsx("div",{className:"max-w-6xl mx-auto px-4",children:Y.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 text-center text-white",children:[Y.jsxs("div",{children:[Y.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-300 mb-1 sm:mb-2",children:"1000+"}),Y.jsx("div",{className:"text-blue-100 text-xs sm:text-sm lg:text-base",children:e("landing.stats.quizzes","Quiz đa dạng")})]}),Y.jsxs("div",{children:[Y.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-purple-300 mb-1 sm:mb-2",children:"10K+"}),Y.jsx("div",{className:"text-blue-100 text-xs sm:text-sm lg:text-base",children:e("landing.stats.players","Người chơi")})]}),Y.jsxs("div",{children:[Y.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-indigo-300 mb-1 sm:mb-2",children:"50K+"}),Y.jsx("div",{className:"text-blue-100 text-xs sm:text-sm lg:text-base",children:e("landing.stats.plays","Lượt chơi")})]}),Y.jsxs("div",{children:[Y.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-cyan-300 mb-1 sm:mb-2",children:"24/7"}),Y.jsx("div",{className:"text-blue-100 text-xs sm:text-sm lg:text-base",children:e("landing.stats.support","Hỗ trợ")})]})]})})}),Y.jsx("footer",{className:"text-center text-blue-200 py-4 sm:py-6 lg:py-8 px-4",children:Y.jsxs("p",{children:["© 2025 Quiz Trivia. ",e("landing.footer.rights","Tất cả quyền được bảo lưu.")]})})]})},MR="quizReviews",zR={async createReview(e,t,n,r){try{const s={...e,userId:t,userName:n,userAvatar:r||null,createdAt:new Date,updatedAt:new Date,helpful:[],reported:[]},a=await NC(yT(hR,MR),s);try{await this.updateQuizReviewStats(e.quizId)}catch(i){}return a.id}catch(s){throw new Error(`Không thể tạo đánh giá: ${s instanceof Error?s.message:"Unknown error"}`)}},async getQuizReviewsSimple(e){try{const t=iC(yT(hR,MR),aC("quizId","==",e)),n=(await SC(t)).docs.map(e=>{var t,n;const r=e.data();return{id:e.id,...r,createdAt:(null==(t=r.createdAt)?void 0:t.toDate)?r.createdAt.toDate():new Date(r.createdAt)||new Date,updatedAt:(null==(n=r.updatedAt)?void 0:n.toDate)?r.updatedAt.toDate():new Date(r.updatedAt)||new Date}});return n.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),n}catch(t){throw t}},async getQuizReviews(e,t="newest",n=50){try{const r=iC(yT(hR,MR),aC("quizId","==",e),dC(n));let i=(await SC(r)).docs.map(e=>{var t,n;const r=e.data();return{id:e.id,...r,createdAt:(null==(t=r.createdAt)?void 0:t.toDate)?r.createdAt.toDate():new Date(r.createdAt)||new Date,updatedAt:(null==(n=r.updatedAt)?void 0:n.toDate)?r.updatedAt.toDate():new Date(r.updatedAt)||new Date}});switch(t){case"newest":i=i.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime());break;case"oldest":i=i.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime());break;case"helpful":i=i.sort((e,t)=>{var n,r;return((null==(n=t.helpful)?void 0:n.length)||0)-((null==(r=e.helpful)?void 0:r.length)||0)})}return i}catch(r){throw r}},async getQuizReviewStats(e){try{const t=iC(yT(hR,MR),aC("quizId","==",e)),n=(await SC(t)).docs.map(e=>e.data()),r=n.length;if(0===r)return{totalReviews:0,averageRating:0,ratingDistribution:{1:0,2:0,3:0,4:0,5:0}};const i=n.reduce((e,t)=>e+t.rating,0)/r,s={1:0,2:0,3:0,4:0,5:0};return n.forEach(e=>{s[e.rating]++}),{totalReviews:r,averageRating:Math.round(10*i)/10,ratingDistribution:s}}catch(t){throw t}},async updateReview(e,t){try{const n=vT(hR,MR,e);await TC(n,{...t,updatedAt:new Date});const r=await kC(n);r.exists()&&await this.updateQuizReviewStats(r.data().quizId)}catch(n){throw n}},async deleteReview(e){try{const t=vT(hR,MR,e),n=await kC(t);if(n.exists()){const e=n.data().quizId;await CC(t),await this.updateQuizReviewStats(e)}}catch(t){throw t}},async markReviewHelpful(e,t){try{const n=vT(hR,MR,e);await TC(n,{helpful:RC(t)})}catch(n){throw n}},async removeHelpfulMark(e,t){try{const n=vT(hR,MR,e);await TC(n,{helpful:OC(t)})}catch(n){throw n}},async reportReview(e,t){try{const n=vT(hR,MR,e);await TC(n,{reported:RC(t)})}catch(n){throw n}},async updateQuizReviewStats(e){try{const t=await this.getQuizReviewStats(e),n=vT(hR,"quizzes",e);await TC(n,{reviewStats:t,averageRating:t.averageRating,totalReviews:t.totalReviews})}catch(t){throw t}},async getUserReview(e,t){try{const n=iC(yT(hR,MR),aC("quizId","==",e),aC("userId","==",t)),r=await SC(n);if(r.empty)return null;const i=r.docs[0];return{id:i.id,...i.data(),createdAt:i.data().createdAt.toDate(),updatedAt:i.data().updatedAt.toDate()}}catch(n){throw n}}},FR=({quiz:e,viewMode:t="grid"})=>{const n=e=>{switch(e){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},r=e=>{if(e<60)return`${e}m`;const t=Math.floor(e/60),n=e%60;return n>0?`${t}h ${n}m`:`${t}h`},i=({rating:e,reviewCount:t,size:n="sm"})=>{const r="sm"===n?"w-4 h-4":"w-5 h-5",i="sm"===n?"text-sm":"text-base";return Y.jsxs("div",{className:`flex items-center gap-1 ${i}`,children:[Y.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(t=>Y.jsx(IR,{className:`${r} ${t<=Math.round(e)?"text-yellow-400 fill-current":"text-gray-300"}`},t))}),Y.jsx("span",{className:"text-gray-600 font-medium",children:e.toFixed(1)}),Y.jsxs("span",{className:"text-gray-500",children:["(",t,")"]})]})},s=Hf(e=>e.auth.user),[a,o]=$.useState(!1),[l,c]=$.useState(!1),[u,d]=$.useState(null);$.useEffect(()=>{(async()=>{try{const t=await zR.getQuizReviewStats(e.id);d(t)}catch(t){}})()},[e.id]),$.useEffect(()=>{if(!s)return;(async()=>{const t=vT(hR,"user_favorites",s.uid),n=await kC(t);if(n.exists()){const t=n.data();o(Array.isArray(t.quizIds)&&t.quizIds.includes(e.id))}else o(!1)})()},[s,e.id]);const h=async t=>{if(t.preventDefault(),!s)return;c(!0);const n=vT(hR,"user_favorites",s.uid);try{(await kC(n)).exists()?await TC(n,{quizIds:a?OC(e.id):RC(e.id)}):await EC(n,{quizIds:[e.id]}),o(!a),DA.success(a?"Đã bỏ yêu thích quiz!":"Đã thêm vào yêu thích!"),window.location.pathname.startsWith("/favorites")&&window.location.reload()}catch(r){DA.error("Lỗi khi cập nhật yêu thích!")}finally{c(!1)}};return"list"===t?Y.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:Y.jsxs("div",{className:"flex items-center gap-6",children:[Y.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0 bg-gradient-to-br from-blue-500 to-purple-600 relative",children:e.imageUrl?Y.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"}):Y.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-2xl font-bold",children:e.category.charAt(0).toUpperCase()})}),Y.jsxs("div",{className:"flex-1 min-w-0",children:[Y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[Y.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate pr-4",children:e.title}),Y.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n(e.difficulty)}`,children:e.difficulty.charAt(0).toUpperCase()+e.difficulty.slice(1)}),e.isCompleted&&Y.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded font-medium",children:"✓ Hoàn thành"})]})]}),Y.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-1",children:e.description}),Y.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500 mb-4",children:[Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.category]}),Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.questions.length," câu hỏi"]}),Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r(e.duration)]}),e.totalPlayers&&Y.jsxs("div",{className:"flex items-center",children:[Y.jsx(SR,{className:"w-4 h-4 mr-1"}),e.totalPlayers," lượt chơi"]}),u&&u.totalReviews>0&&Y.jsx(i,{rating:u.averageRating,reviewCount:u.totalReviews})]}),e.tags&&e.tags.length>0&&Y.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.tags.slice(0,4).map((e,t)=>Y.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:e},t)),e.tags.length>4&&Y.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",e.tags.length-4]})]})]}),Y.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[Y.jsx("button",{onClick:h,disabled:!s||l,className:"p-2 border rounded-lg transition-colors "+(a?"bg-yellow-100 border-yellow-400 text-yellow-600":"border-gray-300 text-gray-700 hover:bg-gray-50"),title:a?"Bỏ yêu thích":"Yêu thích quiz này",children:Y.jsx("svg",{className:"w-5 h-5",fill:a?"gold":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),Y.jsx(cf,{to:`/quiz/${e.id}/reviews`,className:"p-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",title:"Xem đánh giá",children:Y.jsx(SR,{className:"w-5 h-5"})}),Y.jsx(cf,{to:`/quiz/${e.id}/preview`,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-6 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",onClick:()=>{},children:e.isCompleted?"Chơi lại":"Xem chi tiết"})]})]})}):Y.jsxs("div",{className:"bg-white rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden border border-gray-100 hover:border-blue-300 group transform hover:scale-105 cursor-pointer flex flex-col h-full",children:[Y.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-700 overflow-hidden",children:[e.imageUrl?Y.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):Y.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/20 to-purple-600/20 backdrop-blur-3xl"}),Y.jsx("div",{className:"relative text-white text-6xl font-bold opacity-30 drop-shadow-lg",children:e.category.charAt(0).toUpperCase()}),Y.jsx("div",{className:"absolute bottom-4 left-4 text-white/90 font-semibold text-sm px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full border border-white/30",children:e.category})]}),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-black/20 to-transparent z-10"}),Y.jsxs("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2 z-20",children:[Y.jsx("span",{className:`px-3 py-1.5 rounded-2xl text-xs font-semibold backdrop-blur-sm shadow-lg ${n(e.difficulty)}`,children:"easy"===e.difficulty?"🟢 Dễ":"medium"===e.difficulty?"🟡 Trung bình":"🔴 Khó"}),e.isPublic&&Y.jsx("span",{className:"px-3 py-1.5 rounded-2xl text-xs font-semibold bg-green-500/80 text-white backdrop-blur-sm shadow-lg",children:"📢 Công khai"})]}),Y.jsx("div",{className:"absolute top-4 right-4 z-20",children:Y.jsx("button",{onClick:h,disabled:!s||l,className:"p-2.5 backdrop-blur-sm rounded-2xl shadow-lg transition-all duration-300 "+(a?"bg-yellow-400/90 border border-yellow-300 text-yellow-900":"bg-white/20 border border-white/30 text-white hover:bg-white/30"),title:a?"Bỏ yêu thích":"Yêu thích quiz này",children:Y.jsx("svg",{className:"w-5 h-5",fill:a?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),Y.jsxs("div",{className:"absolute bottom-4 left-4 right-4 z-20 flex items-center justify-between",children:[Y.jsx("div",{className:"flex items-center space-x-3",children:e.totalPlayers&&Y.jsxs("div",{className:"flex items-center text-white/90 text-sm bg-black/30 backdrop-blur-sm px-3 py-1.5 rounded-2xl",children:[Y.jsx(SR,{className:"w-4 h-4 mr-1.5"}),e.totalPlayers]})}),u&&u.totalReviews>0&&Y.jsxs("div",{className:"flex items-center text-white text-sm bg-black/30 backdrop-blur-sm px-3 py-1.5 rounded-2xl",children:[Y.jsx(IR,{className:"w-4 h-4 mr-1.5 fill-current text-yellow-400"}),u.averageRating.toFixed(1)]})]})]}),Y.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[Y.jsx("div",{className:"flex items-start justify-between mb-4",children:Y.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-blue-600 transition-colors line-clamp-2 flex-1",children:e.title})}),Y.jsx("p",{className:"text-gray-600 text-sm mb-6 line-clamp-2 leading-relaxed",children:e.description}),Y.jsxs("div",{className:"space-y-4 mb-6",children:[Y.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("svg",{className:"w-4 h-4 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),Y.jsx("span",{className:"font-medium",children:e.category})]}),Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("svg",{className:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Y.jsx("span",{className:"font-medium",children:r(e.duration)})]})]}),Y.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("svg",{className:"w-4 h-4 mr-2 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Y.jsxs("span",{className:"font-medium",children:[e.questions.length," câu hỏi"]})]}),u&&u.totalReviews>0&&Y.jsxs("div",{className:"flex items-center",children:[Y.jsx(IR,{className:"w-4 h-4 mr-1 text-yellow-500 fill-current"}),Y.jsxs("span",{className:"font-medium",children:[u.averageRating.toFixed(1)," (",u.totalReviews,")"]})]})]})]}),e.isCompleted&&Y.jsxs("div",{className:"flex items-center text-green-600 text-sm mb-4 bg-green-50 px-3 py-2 rounded-2xl border border-green-200",children:[Y.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),Y.jsxs("span",{className:"font-semibold",children:["Đã hoàn thành: ",e.score,"%"]})]}),e.tags&&e.tags.length>0&&Y.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.tags.slice(0,3).map((e,t)=>Y.jsxs("span",{className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs rounded-2xl font-medium transition-colors",children:["#",e]},t)),e.tags.length>3&&Y.jsxs("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-600 text-xs rounded-2xl font-medium",children:["+",e.tags.length-3," more"]})]}),Y.jsxs("div",{className:"flex gap-2 mt-auto pt-4 border-t border-gray-100",children:[Y.jsx(cf,{to:`/quiz/${e.id}`,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white py-3 px-4 rounded-2xl font-semibold text-center transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl text-sm",onClick:()=>{},children:e.isCompleted?"🔄 Chơi lại":"🚀 Bắt đầu"}),Y.jsx(cf,{to:"/multiplayer",state:{selectedQuiz:e},className:"px-3 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",title:"Chơi cùng bạn bè",children:Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.196-2.121M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.196-2.121M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),Y.jsx(cf,{to:`/quiz/${e.id}/reviews`,className:"px-3 py-3 border-2 border-gray-200 hover:border-blue-300 text-gray-700 hover:text-blue-600 rounded-2xl transition-all duration-300 hover:bg-blue-50",title:"Xem đánh giá",children:Y.jsx(SR,{className:"w-5 h-5"})})]})]})]})},UR=()=>Y.jsxs("div",{className:"bg-white rounded-xl shadow-lg animate-pulse h-96 flex flex-col",children:[Y.jsx("div",{className:"h-48 bg-gray-200 w-full"}),Y.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[Y.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3 mb-4"}),Y.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),Y.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),Y.jsxs("div",{className:"flex gap-2 mt-auto",children:[Y.jsx("div",{className:"h-10 w-24 bg-gray-200 rounded"}),Y.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded"})]})]})]}),VR=({variant:e="primary",size:t="md",loading:n=!1,icon:r,children:i,className:s="",disabled:a,...o})=>{const l=a||n;return Y.jsxs("button",{className:`\n        inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2\n        ${{primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500"}[e]}\n        ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t]}\n        ${l?"opacity-50 cursor-not-allowed":""}\n        ${s}\n      `,disabled:l,...o,children:[n&&Y.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!n&&r&&Y.jsx("span",{className:"mr-2",children:r}),i]})},$R=({timeFilter:e="week"})=>{const[t,n]=$.useState([]),[r,i]=$.useState(!0);$.useEffect(()=>{(async()=>{try{i(!0),n([])}catch(e){}finally{i(!1)}})()},[e]);const s=e=>{switch(e){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},a=e=>{switch(e){case"easy":return"Dễ";case"medium":return"Trung bình";case"hard":return"Khó";default:return e}};return r?Y.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[Y.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🏆 Quiz Phổ Biến"}),Y.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4,5].map(e=>Y.jsxs("div",{className:"flex items-center space-x-4",children:[Y.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),Y.jsxs("div",{className:"flex-1",children:[Y.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),Y.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},e))})]}):Y.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Y.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"🏆 Quiz Phổ Biến"}),Y.jsx("span",{className:"text-sm text-gray-500 capitalize",children:"week"===e?"Tuần này":"month"===e?"Tháng này":"Tất cả"})]}),0===t.length?Y.jsxs("div",{className:"text-center py-8 text-gray-500",children:[Y.jsx("div",{className:"text-4xl mb-2",children:"📊"}),Y.jsx("p",{children:"Chưa có dữ liệu quiz phổ biến"}),Y.jsx("p",{className:"text-sm",children:"Dữ liệu sẽ xuất hiện khi có nhiều người tham gia quiz hơn"})]}):Y.jsx("div",{className:"space-y-4",children:t.map((e,t)=>Y.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg hover:bg-gray-50 transition-colors",children:[Y.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm "+(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:t+1}),Y.jsxs("div",{className:"flex-1 min-w-0",children:[Y.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[Y.jsx("h4",{className:"font-medium text-gray-900 truncate",children:e.title}),Y.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s(e.difficulty)}`,children:a(e.difficulty)})]}),Y.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.description}),Y.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[Y.jsxs("div",{className:"flex items-center space-x-1",children:[Y.jsx(OR,{className:"w-3 h-3"}),Y.jsxs("span",{children:[e.totalPlayers," người chơi"]})]}),Y.jsxs("div",{className:"flex items-center space-x-1",children:[Y.jsx(AR,{className:"w-3 h-3"}),Y.jsxs("span",{children:[e.attempts," lượt chơi"]})]}),Y.jsxs("div",{className:"flex items-center space-x-1",children:[Y.jsx(jR,{className:"w-3 h-3"}),Y.jsxs("span",{children:[e.averageScore.toFixed(1),"% điểm TB"]})]}),Y.jsxs("div",{className:"flex items-center space-x-1",children:[Y.jsx(kR,{className:"w-3 h-3"}),Y.jsxs("span",{children:[e.duration,"p"]})]})]})]})]},e.id))})]})},qR=()=>{var e;const t=qp(),{user:n}=Hf(e=>e.auth),{quizzes:r,loading:i}=Hf(e=>e.quiz),[s,a]=$.useState({totalQuizzes:0,totalUsers:0,completedQuizzes:0,totalCreators:0}),[o,l]=$.useState([]),[c,u]=$.useState(!0);$.useEffect(()=>{0===r.length&&t(ZA({user:n})),d()},[t,n,r.length]);const d=async()=>{try{u(!0);const[e,t]=await Promise.all([SC(yT(hR,"quizzes")),SC(yT(hR,"users"))]),n=t.docs.map(e=>e.data()).filter(e=>!1!==e.isActive&&!0!==e.isDeleted),r=n.filter(e=>"creator"===e.role||"admin"===e.role),i=0;a({totalQuizzes:e.size,totalUsers:n.length,completedQuizzes:i,totalCreators:r.length})}catch(e){}finally{u(!1)}};return $.useEffect(()=>{if(r.length>0){const e=r.filter(e=>e.isPublic).sort((e,t)=>(t.attempts||0)-(e.attempts||0)).slice(0,6);l(e)}},[r]),i?Y.jsx("div",{className:"flex items-center justify-center min-h-96",children:Array.from({length:4}).map((e,t)=>Y.jsx("div",{className:"animate-pulse bg-white rounded-xl shadow-lg h-40 w-80 m-4"},t))}):Y.jsxs("div",{className:"space-y-8",children:[Y.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 rounded-3xl p-8 lg:p-12 text-white shadow-2xl relative overflow-hidden",children:[Y.jsx("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-3xl"}),Y.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),Y.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24"}),Y.jsxs("div",{className:"relative max-w-5xl",children:[Y.jsxs("div",{className:"flex items-center mb-6",children:[Y.jsx("div",{className:"w-16 h-16 lg:w-20 lg:h-20 bg-white/20 backdrop-blur-sm rounded-3xl flex items-center justify-center ring-4 ring-white/30 shadow-2xl mr-6",children:Y.jsx("span",{className:"text-3xl lg:text-4xl",children:"🎯"})}),Y.jsxs("div",{children:[Y.jsxs("h1",{className:"text-3xl lg:text-5xl font-bold mb-2 drop-shadow-lg",children:["Chào mừng trở lại, ",(null==(e=null==n?void 0:n.displayName)?void 0:e.split(" ")[0])||"Quiz Master","!"]}),Y.jsx("p",{className:"text-blue-100 text-lg lg:text-xl",children:"Sẵn sàng thử thách kiến thức của bạn chưa?"})]})]}),Y.jsx("p",{className:"text-xl lg:text-2xl text-blue-100 mb-8 leading-relaxed",children:"Khám phá hàng nghìn quiz thú vị, thử thách bản thân và leo lên bảng xếp hạng! 🚀"}),Y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 lg:gap-6",children:[Y.jsx(cf,{to:"/quizzes",children:Y.jsxs(VR,{className:"w-full sm:w-auto bg-white text-blue-600 hover:bg-blue-50 font-bold px-8 py-4 text-lg rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[Y.jsx("span",{className:"mr-2",children:"📚"}),"Khám phá Quiz"]})}),Y.jsx(cf,{to:"/creator",children:Y.jsxs(VR,{className:"w-full sm:w-auto border-2 border-white text-white hover:bg-white hover:text-blue-600 font-bold px-8 py-4 text-lg rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105",children:[Y.jsx("span",{className:"mr-2",children:"✨"}),"Tạo Quiz mới"]})})]})]})]}),Y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[Y.jsx("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-blue-200",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-gray-600 text-sm font-medium mb-2",children:"Tổng số Quiz"}),Y.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c?"...":s.totalQuizzes}),Y.jsx("p",{className:"text-xs text-green-600 font-medium mt-1",children:"📈 Dữ liệu thực tế"})]}),Y.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})}),Y.jsx("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-green-200",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-gray-600 text-sm font-medium mb-2",children:"Người dùng"}),Y.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c?"...":s.totalUsers}),Y.jsx("p",{className:"text-xs text-green-600 font-medium mt-1",children:"👥 Đã đăng ký"})]}),Y.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]})}),Y.jsx("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-purple-200",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-gray-600 text-sm font-medium mb-2",children:"Quiz hoàn thành"}),Y.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c?"...":s.completedQuizzes}),Y.jsx("p",{className:"text-xs text-purple-600 font-medium mt-1",children:"✅ Chờ cập nhật"})]}),Y.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),Y.jsx("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-yellow-200",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-gray-600 text-sm font-medium mb-2",children:"Người tạo"}),Y.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c?"...":s.totalCreators}),Y.jsx("p",{className:"text-xs text-yellow-600 font-medium mt-1",children:"✨ Creator + Admin"})]}),Y.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]})})]}),o.length>0&&Y.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mr-4 shadow-lg",children:Y.jsx("span",{className:"text-2xl",children:"🔥"})}),Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Quiz Trending"}),Y.jsx("p",{className:"text-gray-600",children:"Những quiz được yêu thích nhất"})]})]}),Y.jsxs(cf,{to:"/quizzes",className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-2xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-300 flex items-center shadow-lg hover:shadow-xl transform hover:scale-105",children:[Y.jsx("span",{children:"Xem tất cả"}),Y.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),o.length>0?Y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 lg:gap-8",children:o.map(e=>Y.jsx("div",{className:"transform hover:scale-105 transition-all duration-300",children:Y.jsx(FR,{quiz:e})},e.id))}):Y.jsxs("div",{className:"text-center py-12",children:[Y.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:Y.jsx("span",{className:"text-4xl",children:"📝"})}),Y.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Chưa có quiz trending"}),Y.jsx("p",{className:"text-gray-600 mb-6",children:"Hãy bắt đầu tạo quiz đầu tiên của bạn!"}),Y.jsx(cf,{to:"/creator",children:Y.jsx(VR,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-300",children:"Tạo Quiz ngay"})})]})]}),Y.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[Y.jsxs("div",{className:"flex items-center mb-8",children:[Y.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mr-4 shadow-lg",children:Y.jsx("span",{className:"text-2xl",children:"⚡"})}),Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Hành động nhanh"}),Y.jsx("p",{className:"text-gray-600",children:"Những thao tác thường dùng để bắt đầu"})]})]}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Y.jsxs(cf,{to:"/creator",className:"group bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 rounded-2xl p-8 transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-blue-200",children:[Y.jsx("div",{className:"text-blue-600 mb-6 group-hover:scale-110 transition-transform duration-300",children:Y.jsx("svg",{className:"w-14 h-14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),Y.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Tạo Quiz mới"}),Y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Thiết kế và chia sẻ quiz của riêng bạn với mọi người"}),Y.jsxs("div",{className:"mt-4 text-blue-600 font-semibold group-hover:translate-x-1 transition-transform duration-300 flex items-center",children:["Bắt đầu tạo ",Y.jsx("span",{className:"ml-2",children:"→"})]})]}),Y.jsxs(cf,{to:"/quizzes?filter=random",className:"group bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 rounded-2xl p-8 transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-green-200",children:[Y.jsx("div",{className:"text-green-600 mb-6 group-hover:scale-110 transition-transform duration-300",children:Y.jsx("svg",{className:"w-14 h-14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),Y.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Quiz ngẫu nhiên"}),Y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Nhảy vào một quiz bất kỳ và thử thách kiến thức của bạn"}),Y.jsxs("div",{className:"mt-4 text-green-600 font-semibold group-hover:translate-x-1 transition-transform duration-300 flex items-center",children:["Chơi ngay ",Y.jsx("span",{className:"ml-2",children:"→"})]})]}),Y.jsxs(cf,{to:"/profile",className:"group bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 rounded-2xl p-8 transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-purple-200",children:[Y.jsx("div",{className:"text-purple-600 mb-6 group-hover:scale-110 transition-transform duration-300",children:Y.jsx("svg",{className:"w-14 h-14",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),Y.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Xem tiến độ"}),Y.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Kiểm tra thành tích và lịch sử làm quiz của bạn"}),Y.jsxs("div",{className:"mt-4 text-purple-600 font-semibold group-hover:translate-x-1 transition-transform duration-300 flex items-center",children:["Xem chi tiết ",Y.jsx("span",{className:"ml-2",children:"→"})]})]})]})]}),Y.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[Y.jsxs("div",{className:"flex items-center mb-8",children:[Y.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mr-4 shadow-lg",children:Y.jsx("span",{className:"text-2xl",children:"🏆"})}),Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Quiz phổ biến"}),Y.jsx("p",{className:"text-gray-600",children:"Những quiz được yêu thích nhất tuần này"})]})]}),Y.jsx($R,{})]})]})};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */class BR{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const HR={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},KR=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},WR=async(e,t,n={})=>{const r=await fetch(HR.origin+e,{method:"POST",headers:n,body:t}),i=await r.text(),s=new BR(r.status,i);if(r.ok)return s;throw s},QR=(e,t,n)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!=typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},GR=e=>e.webdriver||!e.languages||0===e.languages.length,XR=()=>new BR(451,"Unavailable For Headless Browser"),YR=(e,t)=>{if((e=>{var t;return!(null==(t=e.list)?void 0:t.length)||!e.watchVariable})(e))return!1;((e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"})(e.list,e.watchVariable);const n=(r=t,i=e.watchVariable,r instanceof FormData?r.get(i):r[i]);var r,i;return"string"==typeof n&&e.list.includes(n)},JR=()=>new BR(403,"Forbidden"),ZR=async(e,t,n)=>{if(!t.throttle||!n)return!1;((e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const r=t.id||e,i=await(async(e,t,n)=>{const r=Number(await n.get(e)||0);return t-Date.now()+r})(r,t.throttle,n);return i>0||(await n.set(r,Date.now().toString()),!1)},eO=()=>new BR(429,"Too Many Requests"),tO=(e,t="https://api.emailjs.com")=>{if(!e)return;const n=KR(e);HR.publicKey=n.publicKey,HR.blockHeadless=n.blockHeadless,HR.storageProvider=n.storageProvider,HR.blockList=n.blockList,HR.limitRate=n.limitRate,HR.origin=n.origin||t},nO=async(e,t,n,r)=>{const i=KR(r),s=i.publicKey||HR.publicKey,a=i.blockHeadless||HR.blockHeadless,o=i.storageProvider||HR.storageProvider,l={...HR.blockList,...i.blockList},c={...HR.limitRate,...i.limitRate};if(a&&GR(navigator))return Promise.reject(XR());if(QR(s,e,t),(e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(n),n&&YR(l,n))return Promise.reject(JR());if(await ZR(location.pathname,c,o))return Promise.reject(eO());const u={lib_version:"4.4.1",user_id:s,service_id:e,template_id:t,template_params:n};return WR("/api/v1.0/email/send",JSON.stringify(u),{"Content-type":"application/json"})},rO="service_z0wmuk1",iO="template_quiz_otp",sO="EsTsdBR5D5grAFCfF",aO=class e{constructor(){tO(sO)}static getInstance(){return e.instance||(e.instance=new e),e.instance}async sendOTPEmail(e,t){try{if(!e||""===e.trim())throw new Error("email.required");const n={to_email:e.trim(),to_name:e.split("@")[0],user_email:e.trim(),otp_code:t,app_name:"Quiz Trivia App",from_name:"Quiz Trivia Team",message:`Mã xác thực của bạn là: ${t}. Mã này có hiệu lực trong 10 phút.`,reply_to:"noreply@quiztrivia.com"},r=await nO(rO,iO,n,sO);if(200===r.status)return{success:!0,messageKey:"email.otpSent",params:{email:e}};throw new Error(`EmailJS error: ${r.text}`)}catch(n){if(n.text){if(n.text.includes("recipients address is empty"))return{success:!1,messageKey:"email.errors.configurationError"};if(n.text.includes("template")||n.text.includes("Template"))return{success:!1,messageKey:"email.errors.templateError",params:{templateId:iO}};if(n.text.includes("service")||n.text.includes("Service"))return{success:!1,messageKey:"email.errors.serviceError",params:{serviceId:rO}};if(n.text.includes("public key")||n.text.includes("Public Key"))return{success:!1,messageKey:"email.errors.keyError"}}return{success:!1,messageKey:"email.errors.sendFailed",params:{error:n.text||n.message||"Unknown error"}}}}};t(aO,"instance");const oO=aO.getInstance(),lO=async e=>{try{const t=iC(yT(hR,"otp_verifications"),aC("email","==",e.toLowerCase().trim())),n=(await SC(t)).docs.map(e=>CC(e.ref));await Promise.all(n)}catch(t){}},cO=async e=>{try{const t=Math.floor(1e5+9e5*Math.random()).toString();return await(async(e,t)=>{try{await lO(e);const n={email:e.toLowerCase().trim(),code:t,expiresAt:new Date(Date.now()+6e5),isVerified:!1,createdAt:new Date,attempts:0,maxAttempts:3};return(await NC(yT(hR,"otp_verifications"),n)).id}catch(n){throw new Error("Failed to store OTP verification")}})(e,t),await(async(e,t)=>{try{const r=await oO.sendOTPEmail(e,t);if(r.success){try{await NC(yT(hR,"email_queue"),{to:e,template:"otp_verification",data:{code:t,expiresIn:"10 phút"},createdAt:AC(),status:"sent_via_emailjs",method:"emailjs"})}catch(n){}return!0}throw new Error(r.messageKey||"Failed to send email via EmailJS")}catch(r){throw new Error(r.message||"Không thể gửi email. Vui lòng kiểm tra kết nối internet.")}})(e,t),{success:!0,message:`Mã xác thực đã được gửi đến ${e}. Vui lòng kiểm tra hộp thư và nhập mã 6 số.`}}catch(t){return t.message.includes("internet")||t.message.includes("network")?{success:!1,message:"Không thể kết nối internet. Vui lòng kiểm tra kết nối mạng và thử lại."}:{success:!1,message:t.message||"Có lỗi xảy ra khi gửi mã xác thực. Vui lòng thử lại sau."}}},uO=({email:e,onVerificationSuccess:t,onCancel:n})=>{const[r,i]=$.useState(["","","","","",""]),[s,a]=$.useState(!1),[o,l]=$.useState(!1),[c,u]=$.useState(60),[d,h]=$.useState(!1),f=$.useRef([]);$.useEffect(()=>{if(c>0&&!d){const e=setInterval(()=>{u(e=>e-1)},1e3);return()=>clearInterval(e)}0===c&&h(!0)},[c,d]);const p=async()=>{var n;const s=r.join("");if(6===s.length){a(!0);try{const r=await(async(e,t)=>{try{const n=iC(yT(hR,"otp_verifications"),aC("email","==",e.toLowerCase().trim()),aC("isVerified","==",!1)),r=await SC(n);if(r.empty)return{success:!1,message:"Không tìm thấy mã OTP hoặc mã đã hết hạn"};const i=r.docs[0],s=i.data(),a=s.expiresAt instanceof Date?s.expiresAt:s.expiresAt.toDate();return new Date>a?(await CC(i.ref),{success:!1,message:"Mã OTP đã hết hạn. Vui lòng yêu cầu mã mới"}):s.attempts>=s.maxAttempts?(await CC(i.ref),{success:!1,message:"Đã vượt quá số lần thử. Vui lòng yêu cầu mã mới"}):s.code===t.trim()?(await CC(i.ref),{success:!0,message:"Xác thực thành công!"}):(await TC(i.ref,{attempts:s.attempts+1}),{success:!1,message:`Mã OTP không đúng. Còn lại ${s.maxAttempts-(s.attempts+1)} lần thử`})}catch(n){return{success:!1,message:"Có lỗi xảy ra khi xác thực mã OTP"}}})(e,s);r.success?(DA.success(r.message),t()):(DA.error(r.message),i(["","","","","",""]),null==(n=f.current[0])||n.focus())}catch(o){DA.error("Có lỗi xảy ra khi xác thực")}finally{a(!1)}}else DA.error("Vui lòng nhập đầy đủ 6 số")};return $.useEffect(()=>{6!==r.join("").length||s||p()},[r]),Y.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8",children:[Y.jsxs("div",{className:"text-center mb-8",children:[Y.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Y.jsx(CR,{className:"w-8 h-8 text-blue-600"})}),Y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Xác thực email"}),Y.jsx("p",{className:"text-gray-600",children:"Chúng tôi đã gửi mã xác thực 6 số đến"}),Y.jsx("p",{className:"font-semibold text-blue-600",children:e})]}),Y.jsxs("div",{className:"mb-6",children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Nhập mã xác thực"}),Y.jsx("div",{className:"flex gap-3 justify-center",onPaste:e=>{var t;e.preventDefault();const n=e.clipboardData.getData("text").slice(0,6);if(!/^\d+$/.test(n))return;const r=n.split("").concat(["","","","","",""]).slice(0,6);i(r);const s=r.findIndex(e=>!e),a=-1===s?5:Math.min(s,5);null==(t=f.current[a])||t.focus()},children:r.map((e,t)=>Y.jsx("input",{ref:e=>f.current[t]=e,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:1,value:e,onChange:e=>((e,t)=>{var n;if(t.length>1)return;if(!/^\d*$/.test(t))return;const s=[...r];s[e]=t,i(s),t&&e<5&&(null==(n=f.current[e+1])||n.focus())})(t,e.target.value),onKeyDown:e=>((e,t)=>{var n;"Backspace"===t.key&&!r[e]&&e>0&&(null==(n=f.current[e-1])||n.focus())})(t,e),className:"w-12 h-12 text-center text-xl font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all",disabled:s},t))})]}),Y.jsx("div",{className:"text-center mb-6",children:d?Y.jsxs("button",{onClick:async()=>{var t;l(!0);try{const n=await cO(e);n.success?(DA.success(n.message),u(60),h(!1),i(["","","","","",""]),null==(t=f.current[0])||t.focus()):DA.error(n.message)}catch(n){DA.error("Không thể gửi lại mã xác thực")}finally{l(!1)}},disabled:o,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium mx-auto disabled:opacity-50",children:[Y.jsx(NR,{className:"w-4 h-4 "+(o?"animate-spin":"")}),"Gửi lại mã xác thực"]}):Y.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[Y.jsx(PR,{className:"w-4 h-4"}),Y.jsxs("span",{children:["Gửi lại mã sau ",c,"s"]})]})}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsx("button",{onClick:p,disabled:s||6!==r.join("").length,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 font-medium",children:s?Y.jsxs(Y.Fragment,{children:[Y.jsx(NR,{className:"w-4 h-4 animate-spin"}),"Đang xác thực..."]}):Y.jsxs(Y.Fragment,{children:[Y.jsx(xR,{className:"w-4 h-4"}),"Xác thực"]})}),Y.jsx("button",{onClick:n,className:"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Quay lại"})]}),Y.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:[Y.jsx("p",{children:"Không nhận được mã?"}),Y.jsx("p",{children:'Kiểm tra thư mục spam hoặc nhấn "Gửi lại mã xác thực"'})]})]})},dO=({onBack:e})=>{const[t,n]=$.useState(""),[r,i]=$.useState(!1),[s,a]=$.useState("email"),[o,l]=$.useState(""),[c,u]=$.useState("");return Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:Y.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[Y.jsxs("div",{className:"flex items-center mb-6",children:[Y.jsx("button",{onClick:e,className:"mr-3 p-2 text-gray-400 hover:text-gray-600 transition-colors",children:Y.jsx(bR,{className:"w-5 h-5"})}),Y.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Quên mật khẩu"})]}),"email"===s&&Y.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t){i(!0);try{const e=Math.floor(1e5+9e5*Math.random()).toString();u(e),await oO.sendOTPEmail(t,e),DA.success("Mã OTP đã được gửi đến email của bạn!"),a("otp")}catch(n){DA.error("Không thể gửi mã OTP. Vui lòng thử lại.")}finally{i(!1)}}else DA.error("Vui lòng nhập email")},className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(CR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Y.jsx("input",{type:"email",value:t,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nhập email của bạn",disabled:r})]}),Y.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Chúng tôi sẽ gửi mã OTP đến email này để xác thực danh tính."})]}),Y.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 px-4 rounded-lg font-medium transition-colors "+(r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white"),children:r?"Đang gửi...":"Gửi mã OTP"})]}),"otp"===s&&Y.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o?o===c?(DA.success("Xác thực thành công!"),a("reset")):DA.error("Mã OTP không đúng"):DA.error("Vui lòng nhập mã OTP")},className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mã OTP"}),Y.jsx("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-2xl tracking-widest",placeholder:"000000",maxLength:6,disabled:r}),Y.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Nhập mã OTP 6 số đã được gửi đến email: ",Y.jsx("strong",{children:t})]})]}),Y.jsxs("div",{className:"flex space-x-3",children:[Y.jsx("button",{type:"button",onClick:()=>a("email"),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Quay lại"}),Y.jsx("button",{type:"submit",disabled:r,className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors "+(r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white"),children:r?"Đang xác thực...":"Xác thực"})]})]}),"reset"===s&&Y.jsxs("form",{onSubmit:async n=>{n.preventDefault(),i(!0);try{await async function(e,t){const n=QN(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};await eI(n,r,"getOobCode",oI)}(cR,t),DA.success("Email đặt lại mật khẩu đã được gửi! Hãy kiểm tra hộp thư của bạn."),e()}catch(r){"auth/user-not-found"===r.code?DA.error("Không tìm thấy tài khoản với email này"):DA.error("Có lỗi xảy ra. Vui lòng thử lại.")}finally{i(!1)}},className:"space-y-4",children:[Y.jsxs("div",{className:"text-center mb-4",children:[Y.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:Y.jsx(CR,{className:"w-8 h-8 text-green-600"})}),Y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Xác thực thành công!"}),Y.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Chúng tôi sẽ gửi link đặt lại mật khẩu đến email của bạn."})]}),Y.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 px-4 rounded-lg font-medium transition-colors "+(r?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white"),children:r?"Đang gửi email...":"Gửi email đặt lại mật khẩu"}),Y.jsx("button",{type:"button",onClick:e,className:"w-full py-2 px-4 text-gray-600 hover:text-gray-800 transition-colors",children:"Quay lại đăng nhập"})]})]})})},hO=()=>{const e=_h(),{t:t}=_d(),[n,r]=$.useState(!0),[i,s]=$.useState(!1),[a,o]=$.useState(!1),[l,c]=$.useState(!1),[u,d]=$.useState(!1),[h,f]=$.useState(!1),[p,m]=$.useState(null),[g,y]=$.useState({email:"",password:"",confirmPassword:"",displayName:"",acceptTerms:!1}),v=e=>{const{name:t,value:n,type:r,checked:i}=e.target;y(e=>({...e,[t]:"checkbox"===r?i:n}))},b=()=>{if(!g.email.trim())return DA.error(t("auth.validation.emailRequired","Vui lòng nhập email")),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email.trim()))return DA.error(t("auth.validation.emailInvalid","Email không đúng định dạng")),!1;if(!g.password)return DA.error(t("auth.validation.passwordRequired","Vui lòng nhập mật khẩu")),!1;if(!n){if(!g.displayName.trim())return DA.error(t("auth.validation.displayNameRequired","Vui lòng nhập tên hiển thị")),!1;if(g.password!==g.confirmPassword)return DA.error(t("auth.validation.passwordMismatch","Mật khẩu xác nhận không khớp")),!1;if(g.password.length<6)return DA.error(t("auth.validation.passwordTooShort","Mật khẩu phải có ít nhất 6 ký tự")),!1;if(!g.acceptTerms)return DA.error(t("auth.validation.termsRequired","Vui lòng đồng ý với điều khoản sử dụng")),!1}return!0},w=async(e,t={})=>{if(!e)return;const n=vT(hR,"users",e.uid);(await kC(n)).exists()||await EC(n,{uid:e.uid,email:e.email,role:"user",createdAt:new Date,isActive:!0,emailVerified:e.emailVerified,needsRoleSelection:!0,...t})},x=async()=>{if(p){s(!0);try{const n=await async function(e,t,n){if(rb(e.app))return Promise.reject(HC(e));const r=QN(e),i=eI(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bI),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&CI(e),t}),a=await wI._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(cR,p.email,p.password);await w(n.user,{displayName:p.displayName,emailVerified:!0,verificationMethod:"otp"}),DA.success(t("auth.registerSuccess","Đăng ký thành công! Chào mừng bạn đến với Quiz App!")),y({email:"",password:"",confirmPassword:"",displayName:"",acceptTerms:!1}),m(null),d(!1),e("/role-selection")}catch(n){switch(n.code){case"auth/email-already-in-use":DA.error(t("auth.errors.emailAlreadyInUse","Email này đã được sử dụng"));break;case"auth/weak-password":DA.error(t("auth.errors.weakPassword","Mật khẩu quá yếu"));break;case"auth/invalid-email":DA.error(t("auth.errors.invalidEmail","Email không hợp lệ"));break;default:DA.error(t("auth.errors.registerError","Lỗi tạo tài khoản: {{message}}",{message:n.message||t("common.tryAgain","Vui lòng thử lại")}))}d(!1),m(null)}finally{s(!1)}}else DA.error(t("auth.errors.registrationDataNotFound","Không tìm thấy thông tin đăng ký"))},k=()=>{d(!1),m(null),DA.info(t("auth.registrationCancelled","Đã hủy quá trình đăng ký"))};return h?Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:Y.jsx(dO,{onBack:()=>f(!1)})}):u&&p?Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:Y.jsx(uO,{email:p.email,onVerificationSuccess:x,onCancel:k})}):Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:Y.jsx("div",{className:"max-w-md w-full space-y-8",children:Y.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[Y.jsxs("div",{className:"text-center mb-8",children:[Y.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:n?t("auth.login","Đăng nhập"):t("auth.register","Đăng ký")}),Y.jsx("p",{className:"mt-2 text-sm text-gray-600",children:n?t("auth.welcomeBack","Chào mừng trở lại!"):t("auth.createNewAccount","Tạo tài khoản mới")})]}),Y.jsxs("form",{className:"space-y-6",onSubmit:e=>e.preventDefault(),children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("auth.email","Email")}),Y.jsxs("div",{className:"relative",children:[Y.jsx(CR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Y.jsx("input",{type:"email",name:"email",value:g.email,onChange:v,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("auth.emailPlaceholder","Nhập email của bạn"),required:!0})]})]}),!n&&Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("auth.displayName","Tên hiển thị")}),Y.jsxs("div",{className:"relative",children:[Y.jsx(RR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Y.jsx("input",{type:"text",name:"displayName",value:g.displayName,onChange:v,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("auth.displayNamePlaceholder","Nhập tên hiển thị"),required:!n})]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("auth.password","Mật khẩu")}),Y.jsxs("div",{className:"relative",children:[Y.jsx(TR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Y.jsx("input",{type:a?"text":"password",name:"password",value:g.password,onChange:v,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("auth.passwordPlaceholder","Nhập mật khẩu"),required:!0}),Y.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?Y.jsx(_R,{className:"w-5 h-5"}):Y.jsx(SR,{className:"w-5 h-5"})})]})]}),!n&&Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("auth.confirmPassword","Xác nhận mật khẩu")}),Y.jsxs("div",{className:"relative",children:[Y.jsx(TR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Y.jsx("input",{type:l?"text":"password",name:"confirmPassword",value:g.confirmPassword,onChange:v,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:t("auth.confirmPasswordPlaceholder","Xác nhận mật khẩu"),required:!n}),Y.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?Y.jsx(_R,{className:"w-5 h-5"}):Y.jsx(SR,{className:"w-5 h-5"})})]})]}),!n&&Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("input",{type:"checkbox",name:"acceptTerms",checked:g.acceptTerms,onChange:v,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",required:!n}),Y.jsxs("label",{className:"ml-2 text-sm text-gray-600",children:[t("auth.agreeToTerms","Tôi đồng ý với")," ",Y.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-500",children:t("auth.termsOfService","điều khoản sử dụng")})]})]}),Y.jsx("button",{type:"button",onClick:n?async()=>{if(b()){s(!0);try{const n=await NI(cR,g.email.trim().toLowerCase(),g.password),r=vT(hR,"users",n.user.uid),i=await kC(r);let s="/dashboard";if(i.exists()){i.data().role;s="/dashboard",await EC(r,{lastLoginAt:new Date,emailVerified:n.user.emailVerified},{merge:!0})}DA.success(t("auth.loginSuccess","Đăng nhập thành công!")),e(s)}catch(n){switch(n.code){case"auth/user-not-found":DA.error(t("auth.errors.userNotFound","Email không tồn tại"));break;case"auth/wrong-password":DA.error(t("auth.errors.wrongPassword","Mật khẩu không đúng"));break;case"auth/invalid-credential":DA.error(t("auth.errors.invalidCredential","Email hoặc mật khẩu không đúng"));break;case"auth/invalid-email":DA.error(t("auth.errors.invalidEmail","Email không hợp lệ"));break;case"auth/user-disabled":DA.error(t("auth.errors.userDisabled","Tài khoản đã bị vô hiệu hóa"));break;case"auth/too-many-requests":DA.error(t("auth.errors.tooManyRequests","Quá nhiều lần thử. Vui lòng thử lại sau"));break;default:DA.error(t("auth.errors.loginError","Lỗi đăng nhập: {{message}}",{message:n.message||"Vui lòng thử lại"}))}}finally{s(!1)}}}:async()=>{if(b()){s(!0);try{const e=await cO(g.email.trim());e.success?(m({email:g.email.trim(),password:g.password,displayName:g.displayName.trim()}),d(!0),DA.success(e.message)):DA.error(e.message)}catch(e){DA.error(t("auth.errors.otpSendError","Có lỗi xảy ra khi gửi mã xác thực: {{message}}",{message:e.message||t("common.tryAgain","Vui lòng thử lại")}))}finally{s(!1)}}},disabled:i,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:i?t("common.loading","Đang xử lý..."):n?t("auth.login","Đăng nhập"):t("auth.register","Đăng ký")}),n&&Y.jsx("div",{className:"text-center",children:Y.jsx("button",{type:"button",onClick:()=>f(!0),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:t("auth.forgotPassword","Quên mật khẩu?")})}),Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{className:"absolute inset-0 flex items-center",children:Y.jsx("div",{className:"w-full border-t border-gray-300"})}),Y.jsx("div",{className:"relative flex justify-center text-sm",children:Y.jsx("span",{className:"px-2 bg-white text-gray-500",children:t("common.or","Hoặc")})})]}),Y.jsxs("button",{type:"button",onClick:async()=>{s(!0);try{const n=new gI,r=await sj(cR,n);await w(r.user,{displayName:r.user.displayName,photoURL:r.user.photoURL,provider:"google",emailVerified:!0}),DA.success(t("auth.googleLoginSuccess","Đăng nhập Google thành công!")),e("/")}catch(n){DA.error(t("auth.errors.googleLoginError","Lỗi đăng nhập Google: {{message}}",{message:n.message||t("common.tryAgain","Vui lòng thử lại")}))}finally{s(!1)}},disabled:i,className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2",children:[Y.jsx(wR,{className:"w-5 h-5"}),t("auth.loginWithGoogle","Đăng nhập với Google")]}),Y.jsx("div",{className:"text-center",children:Y.jsx("button",{type:"button",onClick:()=>{r(!n),y({email:"",password:"",confirmPassword:"",displayName:"",acceptTerms:!1})},className:"text-blue-600 hover:text-blue-500 font-medium",children:n?t("auth.noAccount","Chưa có tài khoản? Đăng ký ngay"):t("auth.hasAccount","Đã có tài khoản? Đăng nhập")})})]})]})})})},fO=({children:e})=>{const{user:t}=Hf(e=>e.auth),n=wh(),{t:r}=_d();if(["/login","/register"].includes(n.pathname))return Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{className:"absolute top-4 right-4 z-10",children:Y.jsx(LR,{variant:"light"})}),e]});const i=["/","/landing","/home"];if(!t&&!i.includes(n.pathname))return Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{className:"absolute top-4 right-4 z-10",children:Y.jsx(LR,{variant:"light"})}),e]});if(!t&&i.includes(n.pathname))return Y.jsx("div",{children:e});return Y.jsxs("div",{className:"min-h-screen bg-gray-100",children:[Y.jsx("header",{className:"bg-white shadow-sm",children:Y.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsx("h1",{className:"text-xl font-bold text-blue-600",children:"Quiz App"}),Y.jsxs("div",{className:"flex items-center space-x-4",children:[Y.jsxs("nav",{className:"flex space-x-4",children:[Y.jsx(cf,{to:"/dashboard",className:"text-gray-700 hover:text-blue-600",children:r("nav.dashboard","Dashboard")}),Y.jsx(cf,{to:"/quizzes",className:"text-gray-700 hover:text-blue-600",children:r("nav.quizzes","Quiz")}),Y.jsx(cf,{to:"/favorites",className:"text-gray-700 hover:text-yellow-500",children:r("nav.favorites","Favorites")}),Y.jsx(cf,{to:"/leaderboard",className:"text-gray-700 hover:text-green-600",children:r("nav.leaderboard","Leaderboard")}),"creator"===(null==t?void 0:t.role)||"admin"===(null==t?void 0:t.role)?Y.jsx(cf,{to:"/creator",className:"text-gray-700 hover:text-blue-600",children:r("nav.creator","Creator")}):null,"admin"===(null==t?void 0:t.role)?Y.jsx(cf,{to:"/admin",className:"text-gray-700 hover:text-blue-600",children:r("nav.admin","Admin")}):null,Y.jsx(cf,{to:"/profile",className:"text-gray-700 hover:text-blue-600",children:r("nav.profile","Profile")}),Y.jsx("button",{onClick:async()=>{try{await function(e){return By(e).signOut()}(cR)}catch(e){}},className:"text-red-600 hover:text-red-800",children:r("auth.logout","Logout")})]}),Y.jsx(LR,{variant:"header"})]})]})})}),Y.jsx("main",{className:"max-w-7xl mx-auto px-4 py-6",children:e})]})},pO=()=>Y.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:Y.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[Y.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"404"}),Y.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Trang không tồn tại"}),Y.jsx("p",{className:"text-gray-600 mb-6",children:"Rất tiếc, trang bạn đang tìm kiếm không tồn tại hoặc đã bị di chuyển."}),Y.jsx(cf,{to:"/",className:"inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Quay về trang chủ"})]})});class mO extends $.Component{constructor(){super(...arguments),t(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var n,r,i;(null==(n=e.message)?void 0:n.includes("suspended"))||(null==(r=e.message)?void 0:r.includes("Suspense"))||(null==(i=e.message)?void 0:i.includes("lazy"))||this.setState({hasError:!0,error:e,errorInfo:t})}render(){var e;return this.state.hasError?Y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4 py-8",children:Y.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[Y.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Y.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-2.694-.833-3.464 0L3.349 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),Y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Đã xảy ra lỗi"}),Y.jsx("p",{className:"text-gray-600 mb-6",children:(null==(e=this.state.error)?void 0:e.message)||"Ứng dụng gặp sự cố không mong muốn."}),Y.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200",children:"Tải lại trang"}),!1]})}):this.props.children}}const gO=({user:e,onRoleSelected:t})=>{const[n,r]=$.useState(null),[i,s]=$.useState(!1),a=qp();return Y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:Y.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 shadow-2xl",children:[Y.jsxs("div",{className:"text-center mb-6",children:[Y.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:Y.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),Y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Chọn vai trò của bạn"}),Y.jsx("p",{className:"text-gray-600",children:"Hãy chọn vai trò phù hợp để bắt đầu sử dụng Quiz Trivia"})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsx("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 "+("user"===n?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>r("user"),children:Y.jsxs("div",{className:"flex items-start space-x-3",children:[Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:Y.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})})}),Y.jsxs("div",{className:"flex-1",children:[Y.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"User (Người dùng)"}),Y.jsx("p",{className:"text-sm text-gray-600",children:"Tham gia làm quiz, xem kết quả và theo dõi tiến độ học tập của bạn"}),Y.jsxs("ul",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[Y.jsx("li",{children:"• Làm các quiz có sẵn"}),Y.jsx("li",{children:"• Xem lịch sử kết quả"}),Y.jsx("li",{children:"• Theo dõi tiến độ học tập"})]})]})]})}),Y.jsx("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 "+("creator"===n?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>r("creator"),children:Y.jsxs("div",{className:"flex items-start space-x-3",children:[Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:Y.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})}),Y.jsxs("div",{className:"flex-1",children:[Y.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:"Creator (Người tạo)"}),Y.jsx("p",{className:"text-sm text-gray-600",children:"Tạo quiz cho cộng đồng, bao gồm tất cả quyền của User"}),Y.jsxs("ul",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[Y.jsx("li",{children:"• Tất cả quyền của User"}),Y.jsx("li",{children:"• Tạo quiz mới"}),Y.jsx("li",{children:"• Quản lý quiz đã tạo"}),Y.jsx("li",{children:"• Quiz cần admin phê duyệt"})]})]})]})})]}),Y.jsx("div",{className:"mt-6 flex space-x-3",children:Y.jsx("button",{onClick:()=>n&&(async n=>{s(!0);try{const r=vT(hR,"users",e.uid);await EC(r,{role:n,roleSelectedAt:new Date,needsRoleSelection:!1,status:"active",email:e.email,displayName:e.displayName,updatedAt:new Date},{merge:!0}),a(py(n)),localStorage.setItem(`user_role_${e.uid}`,n),DA.success(`Chào mừng bạn với vai trò ${"user"===n?"Người dùng":"Người tạo"}!`),t(n)}catch(r){a(py(n)),localStorage.setItem(`user_role_${e.uid}`,n),DA.success(`Chào mừng bạn với vai trò ${"user"===n?"Người dùng":"Người tạo"}!`),t(n),DA.info("Vai trò đã được chọn. Dữ liệu sẽ được đồng bộ khi kết nối ổn định.")}finally{s(!1)}})(n),disabled:!n||i,className:"flex-1 py-3 px-4 rounded-lg font-semibold transition-all duration-200 "+(n&&!i?"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:i?Y.jsxs("div",{className:"flex items-center justify-center",children:[Y.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Đang thiết lập vai trò..."]}):"Xác nhận vai trò"})}),Y.jsx("div",{className:"mt-4 text-center",children:Y.jsx("p",{className:"text-xs text-gray-500",children:"Bạn có thể thay đổi vai trò sau trong phần cài đặt tài khoản"})})]})})},yO=({message:e,fullScreen:t=!0})=>{const{t:n}=_d(),r=e||n("common.loading","Đang tải...");return t?Y.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600 mb-4"}),Y.jsx("div",{className:"text-xl font-semibold text-gray-700",children:r})]})}):Y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4",children:Array.from({length:6}).map((e,t)=>Y.jsx("div",{className:"animate-pulse bg-white rounded-xl shadow-lg h-64"},t))})},vO=({children:e,requiredRole:t})=>{const{user:n,isLoading:r}=Hf(e=>e.auth);if(r)return Y.jsx(yO,{message:"Đang xác thực..."});if(!n)return Y.jsx(Lh,{to:"/login",replace:!0});if(t){if(!((Array.isArray(t)?t:[t]).includes(n.role)||"admin"===n.role))return Y.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:Y.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.962-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),Y.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Không có quyền truy cập"}),Y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Bạn cần có vai trò Creator hoặc Admin để truy cập trang này."}),Y.jsx("div",{className:"mt-6",children:Y.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Quay lại"})})]})})}return Y.jsx(Y.Fragment,{children:e})},bO=()=>{const e=Hf(e=>e.auth.user),t=qp();return $.useEffect(()=>{if(!(null==e?void 0:e.uid))return;let n,r=!1;const i=async()=>{try{const n=(await kC(vT(hR,"users",e.uid))).data();n&&!1===n.isActive&&(r||(t(hy()),DA.error("Tài khoản của bạn đã bị khoá. Vui lòng liên hệ quản trị viên."),cR.currentUser&&await cR.signOut()))}catch(n){}};return i(),n=setInterval(i,5e3),()=>{r=!0,clearInterval(n)}},[null==e?void 0:e.uid,t]),null},wO=({children:e})=>{const{user:t,isAuthenticated:n}=Hf(e=>e.auth);return n&&t?"admin"!==t.role?Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-red-900 flex items-center justify-center px-4",children:Y.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center",children:[Y.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:Y.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-2.694-.833-3.464 0L3.349 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),Y.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Truy cập bị từ chối"}),Y.jsx("p",{className:"text-gray-600 mb-6",children:"Bạn không có quyền truy cập vào khu vực admin. Chỉ quản trị viên mới có thể truy cập."}),Y.jsx("button",{onClick:()=>window.history.back(),className:"bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors duration-200",children:"Quay lại"})]})}):Y.jsx(Y.Fragment,{children:e}):Y.jsx(Lh,{to:"/login",replace:!0})},xO=()=>{const[e,t]=$.useState(null),[n,r]=$.useState(!0),[i,s]=$.useState(null),{user:a}=Hf(e=>e.auth);if($.useEffect(()=>{(async()=>{if(a)try{r(!0);const e=iC(yT(hR,"system_notifications"),aC("isActive","==",!0),cC("createdAt","desc"),dC(1)),n=await SC(e);if(n.empty)return t(null),void r(!1);let i=null;n.forEach(e=>{const t=e.data();t.id=e.id,"all"!==t.targetRole&&t.targetRole&&t.targetRole!==a.role||(i=t)}),t(i)}catch(e){s("Error loading notifications")}finally{r(!1)}else r(!1)})().catch(console.error)},[a]),n||!e)return null;if(i)return null;return Y.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 p-4 border-l-4 ${(()=>{switch(e.type){case"info":return"bg-blue-100 border-blue-500 text-blue-800";case"warning":return"bg-yellow-100 border-yellow-500 text-yellow-800";case"success":return"bg-green-100 border-green-500 text-green-800";case"error":return"bg-red-100 border-red-500 text-red-800";default:return"bg-gray-100 border-gray-500 text-gray-800"}})()} w-full shadow-md`,children:Y.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between items-center",children:[Y.jsx("p",{className:"font-medium",children:e.message}),Y.jsx("button",{onClick:()=>t(null),className:`ml-4 font-bold text-xl ${(()=>{switch(null==e?void 0:e.type){case"info":return"text-blue-800 hover:text-blue-600";case"warning":return"text-yellow-800 hover:text-yellow-600";case"success":return"text-green-800 hover:text-green-600";case"error":return"text-red-800 hover:text-red-600";default:return"text-gray-800 hover:text-gray-600"}})()} hover:scale-110 transition-transform`,"aria-label":"Đóng thông báo",children:"×"})]})})},kO=()=>{const{isAuthenticated:e,user:t}=Hf(e=>e.auth);return e&&t?(t.role,Y.jsx(Lh,{to:"/dashboard",replace:!0})):Y.jsx(DR,{})},_O=q.lazy(()=>od(()=>import("./Dashboard-D4Fg1EC0.js"),[])),SO=q.lazy(()=>od(()=>import("./QuizList-B4TdZJd5.js"),[])),EO=q.lazy(()=>od(()=>import("./QuizPage-3iaE2J4b.js"),[])),TO=q.lazy(()=>od(()=>import("./QuizPreviewPage-BjiCzDAD.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),CO=q.lazy(()=>od(()=>import("./QuizReviewsPage-C9UYMSXJ.js"),__vite__mapDeps([7,1,2,3,8,4,9]))),NO=q.lazy(()=>od(()=>import("./RealQuizListPage-CLtW1A-R.js"),__vite__mapDeps([10,11,4]))),IO=q.lazy(()=>od(()=>import("./index-BCTL4rga.js"),[])),jO=q.lazy(()=>od(()=>import("./Profile-D0fd3ETu.js"),__vite__mapDeps([12,13,14,15,16,8,17]))),PO=q.lazy(()=>od(()=>import("./FavoritesPage-yEhIHb6x.js"),__vite__mapDeps([18,19]))),AO=q.lazy(()=>od(()=>import("./LeaderboardPage-CvuFPev_.js"),[])),RO=q.lazy(()=>od(()=>import("./CreateQuizPage-BkTFzS9-.js"),__vite__mapDeps([20,5,21,22,23]))),OO=q.lazy(()=>od(()=>import("./EditQuizPageAdvanced-CcVQcVLB.js"),__vite__mapDeps([24,16,25,2,13,26,27,28,5,4,29,21]))),LO=q.lazy(()=>od(()=>import("./Creator-CbjrS4pR.js"),__vite__mapDeps([30,20,5,21,22,23,31,27,15,4,32,26,3,28]))),DO=q.lazy(()=>od(()=>import("./MyQuizzesPage-B1MjgLp5.js"),__vite__mapDeps([31,27,15,4,32,26,3,28,22]))),MO=q.lazy(()=>od(()=>import("./Admin-D9dWVymH.js"),__vite__mapDeps([33,34]))),zO=q.lazy(()=>od(()=>import("./AdminQuizManagement-DYWVknQH.js"),__vite__mapDeps([35,5,17,9,25,2,28,15,13,26]))),FO=q.lazy(()=>od(()=>import("./AdminUserManagement-C-98yCNM.js"),__vite__mapDeps([36,34]))),UO=q.lazy(()=>od(()=>import("./StatsDashboard-B-hdyFOt.js"),__vite__mapDeps([37,38,11,5,39,32,4]))),VO=q.lazy(()=>od(()=>import("./CategoryManagement-Cu6737RB.js"),__vite__mapDeps([40,2,27,5,9,15,32,26,29]))),$O=q.lazy(()=>od(()=>import("./AdminStats-CfO548EH.js"),__vite__mapDeps([38,11,5,39,32,4]))),qO=q.lazy(()=>od(()=>import("./MultiplayerPage-Bjgqvd5J.js"),__vite__mapDeps([41,14,6,4,28,2,3,39]))),BO=q.lazy(()=>od(()=>import("./AdminUtilities-Bs4UNwFg.js"),[])),HO=({children:e})=>{const t=qp();return $.useEffect(()=>{const e=setTimeout(()=>{t(fy())},5e3),n=function(e,t,n,r){return By(e).onAuthStateChanged(t,n,r)}(cR,async n=>{if(clearTimeout(e),n)try{const e=vT(hR,"users",n.uid),i=await kC(e);let s="user",a=null;if(i.exists()){if(a=i.data(),a.isDeleted||!1===a.isActive)return await cR.signOut(),t(hy()),void t(fy());s=a.role||"user",!n.emailVerified&&n.email}else if("admin123@gmail.com"===n.email){s="admin";try{await EC(e,{email:n.email,displayName:n.displayName||"Admin",role:"admin",createdAt:AC(),isActive:!0,emailVerified:!0})}catch(r){}}else if("admin123@gmail.com"===n.email)try{await EC(e,{email:n.email,displayName:n.displayName||"Admin",role:"admin",createdAt:AC(),isActive:!0}),s="admin"}catch(r){}else s=void 0;const o={uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,emailVerified:n.emailVerified,role:s,needsRoleSelection:(null==a?void 0:a.needsRoleSelection)||!s&&"admin"!==s,createdAt:(null==a?void 0:a.createdAt)?a.createdAt.toDate?a.createdAt.toDate().toISOString():a.createdAt instanceof Date?a.createdAt.toISOString():a.createdAt:(new Date).toISOString()};t(dy(o)),setTimeout(()=>{t(dy(o))},100)}catch(i){const e="admin123@gmail.com"===n.email?"admin":"user",r={uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,emailVerified:n.emailVerified,role:e,createdAt:(new Date).toISOString()};t(dy(r)),setTimeout(()=>{t(dy(r))},100)}else t(hy());t(fy())});return()=>{clearTimeout(e),n()}},[t]),Y.jsx(Y.Fragment,{children:e})},KO=()=>{const{t:e}=_d();return Y.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[Y.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Y.jsx("span",{className:"ml-3 text-lg font-medium text-gray-700",children:e("common.loading","Đang tải...")})]})},WO=()=>{const{t:e}=_d(),{user:t,isLoading:n,authChecked:r,isAuthenticated:i,needsRoleSelection:s}=Hf(e=>e.auth);if(n||!r)return Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),Y.jsx("div",{className:"text-xl font-semibold text-gray-700",children:e("common.loadingData","Đang tải dữ liệu...")}),Y.jsx("div",{className:"text-sm text-gray-500 mt-2",children:e("common.pleaseWait","Vui lòng đợi một chút")}),n&&Y.jsx("div",{className:"text-xs text-gray-400 mt-1",children:e("common.checkingAuth","Đang kiểm tra xác thực...")})]})});if(i&&t&&s){const e=e=>{setTimeout(()=>{"creator"===e?window.location.href="/creator":"user"===e&&(window.location.href="/dashboard")},1500)};return Y.jsx(gO,{user:t,onRoleSelected:e})}return Y.jsx("div",{children:Y.jsxs(zh,{children:[Y.jsx(Dh,{path:"/landing",element:Y.jsx(DR,{})}),Y.jsx(Dh,{path:"/home",element:Y.jsx(qR,{})}),Y.jsx(Dh,{path:"/login",element:i?Y.jsx(Lh,{to:"/dashboard",replace:!0}):Y.jsx(hO,{})}),Y.jsx(Dh,{path:"/dashboard",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(_O,{})})})}),Y.jsx(Dh,{path:"/profile",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(jO,{})})})}),Y.jsx(Dh,{path:"/quizzes",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(SO,{})})})}),Y.jsx(Dh,{path:"/quiz/:id",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(EO,{})})})}),Y.jsx(Dh,{path:"/quiz/:id/preview",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(TO,{})})})}),Y.jsx(Dh,{path:"/quiz/:id/reviews",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(CO,{})})})}),Y.jsx(Dh,{path:"/real-quizzes",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(NO,{})})})}),Y.jsx(Dh,{path:"/quiz/:id/edit",element:Y.jsx(vO,{requiredRole:"admin",children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(OO,{})})})}),Y.jsx(Dh,{path:"/quiz-result/:resultId",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(IO,{})})})}),Y.jsx(Dh,{path:"/create-quiz",element:Y.jsx(vO,{requiredRole:["admin","creator"],children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(RO,{})})})}),Y.jsx(Dh,{path:"/creator",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(LO,{})})})}),Y.jsx(Dh,{path:"/my-quizzes",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(DO,{})})})}),Y.jsx(Dh,{path:"/admin",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(MO,{})})})}),Y.jsx(Dh,{path:"/admin/dashboard",element:Y.jsx(Lh,{to:"/admin/quiz-management",replace:!0})}),Y.jsx(Dh,{path:"/admin/quiz-management",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(zO,{})})})}),Y.jsx(Dh,{path:"/admin/users",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(FO,{})})})}),Y.jsx(Dh,{path:"/admin/roles",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(FO,{})})})}),Y.jsx(Dh,{path:"/admin/quiz-stats",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(UO,{})})})}),Y.jsx(Dh,{path:"/admin/categories",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(VO,{})})})}),Y.jsx(Dh,{path:"/admin/stats-test",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx($O,{})})})}),Y.jsx(Dh,{path:"/admin/utilities",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(BO,{})})})}),Y.jsx(Dh,{path:"/admin/edit-quiz/:id",element:Y.jsx(wO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(OO,{})})})}),Y.jsx(Dh,{path:"/real-quizzes",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(NO,{})})})}),Y.jsx(Dh,{path:"/role-selection",element:Y.jsx(vO,{children:t&&Y.jsx(gO,{user:t,onRoleSelected:e=>{"creator"===e?window.location.href="/creator":"user"===e&&(window.location.href="/dashboard")}})})}),Y.jsx(Dh,{path:"/favorites",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(PO,{})})})}),Y.jsx(Dh,{path:"/leaderboard",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(AO,{})})})}),Y.jsx(Dh,{path:"/multiplayer",element:Y.jsx(vO,{children:Y.jsx($.Suspense,{fallback:Y.jsx(KO,{}),children:Y.jsx(qO,{})})})}),Y.jsx(Dh,{path:"/",element:Y.jsx(kO,{})}),Y.jsx(Dh,{path:"*",element:Y.jsx(pO,{})})]})})};function QO(){return Y.jsx(of,{children:Y.jsx(Fp,{store:oR,children:Y.jsx(HO,{children:Y.jsx(mO,{children:Y.jsxs("div",{className:"app-container",children:[Y.jsx(xO,{}),Y.jsxs(fO,{children:[Y.jsx(bO,{}),Y.jsx(WO,{}),Y.jsx(HA,{position:"top-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,"aria-label":"notification"})]})]})})})})})}const GO=e=>"string"==typeof e,XO=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},YO=e=>null==e?"":""+e,JO=/###/g,ZO=e=>e&&e.indexOf("###")>-1?e.replace(JO,"."):e,eL=e=>!e||GO(e),tL=(e,t,n)=>{const r=GO(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(eL(e))return{};const t=ZO(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return eL(e)?{}:{obj:e,k:ZO(r[i])}},nL=(e,t,n)=>{const{obj:r,k:i}=tL(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let s=t[t.length-1],a=t.slice(0,t.length-1),o=tL(e,a,Object);for(;void 0===o.obj&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=tL(e,a,Object),(null==o?void 0:o.obj)&&void 0!==o.obj[`${o.k}.${s}`]&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=n},rL=(e,t)=>{const{obj:n,k:r}=tL(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},iL=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?GO(e[r])||e[r]instanceof String||GO(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):iL(e[r],t[r],n):e[r]=t[r]);return e},sL=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var aL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const oL=e=>GO(e)?e.replace(/[&<>"'\/]/g,e=>aL[e]):e;const lL=[" ",",","?","!",";"],cL=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),uL=(e,t,n=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(n);let i=e;for(let s=0;s<r.length;){if(!i||"object"!=typeof i)return;let e,t="";for(let a=s;a<r.length;++a)if(a!==s&&(t+=n),t+=r[a],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&a<r.length-1)continue;s+=a-s+1;break}i=e}return i},dL=e=>null==e?void 0:e.replace("_","-"),hL={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;null==(r=null==(n=null==console?void 0:console[e])?void 0:n.apply)||r.call(n,console,t)}};class fL{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||hL,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(GO(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new fL(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new fL(this.logger,e)}}var pL=new fL;class mL{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let i=0;i<r;i++)n.apply(n,[e,...t])})}}}class gL extends mL{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){var i,s;const a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],n&&(Array.isArray(n)?l.push(...n):GO(n)&&a?l.push(...n.split(a)):l.push(n)));const c=rL(this.data,l);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=l[0],t=l[1],n=l.slice(2).join(".")),!c&&o&&GO(n)?uL(null==(s=null==(i=this.data)?void 0:i[e])?void 0:s[t],n,a):c}addResource(e,t,n,r,i={silent:!1}){const s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),nL(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(const i in n)(GO(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i,s={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let o=rL(this.data,a)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?iL(o,n,i):o={...o,...n},nL(this.data,a,o),s.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var yL={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(e=>{var s;t=(null==(s=this.processors[e])?void 0:s.process(t,n,r,i))??t}),t}};const vL={},bL=e=>!GO(e)&&"boolean"!=typeof e&&"number"!=typeof e;class wL extends mL{constructor(e,t={}){super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=pL.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(null==e)return!1;const r=this.resolve(e,n);return void 0!==(null==r?void 0:r.res)}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const r=lL.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const i=cL.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let s=!i.test(e);if(!s){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(s=!0)}return s})(e,n,r));if(s&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:GO(i)?[i]:i};const s=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(s[0])>-1)&&(i=s.shift()),e=s.join(r)}return{key:e,namespaces:GO(i)?[i]:i}}translate(e,t,n){let r="object"==typeof t?{...t}:t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof options&&(r={...r}),r||(r={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:a,namespaces:o}=this.extractFromKey(e[e.length-1],r),l=o[o.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==u?void 0:u.toLowerCase()))return d?i?{res:`${l}${c}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:a;const h=this.resolve(e,r);let f=null==h?void 0:h.res;const p=(null==h?void 0:h.usedKey)||a,m=(null==h?void 0:h.exactUsedKey)||a,g=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=void 0!==r.count&&!GO(r.count),b=wL.hasDefaultValue(r),w=v?this.pluralResolver.getSuffix(u,r.count,r):"",x=r.ordinal&&v?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",k=v&&!r.ordinal&&0===r.count,_=k&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${w}`]||r[`defaultValue${x}`]||r.defaultValue;let S=f;y&&!f&&b&&(S=_);const E=bL(S),T=Object.prototype.toString.apply(S);if(!(y&&S&&E&&["[object Number]","[object Function]","[object RegExp]"].indexOf(T)<0)||GO(g)&&Array.isArray(S))if(y&&GO(g)&&Array.isArray(f))f=f.join(g),f&&(f=this.extendTranslation(f,e,r,n));else{let t=!1,i=!1;!this.isValidLookup(f)&&b&&(t=!0,f=_),this.isValidLookup(f)||(i=!0,f=a);const o=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:f,d=b&&_!==f&&this.options.updateMissing;if(i||t||d){if(this.logger.log(d?"updateKey":"missingKey",u,l,a,d?_:f),s){const e=this.resolve(a,{...r,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const n=(e,t,n)=>{var i;const s=b&&n!==f?n:o;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,s,d,r):(null==(i=this.backendConnector)?void 0:i.saveMissing)&&this.backendConnector.saveMissing(e,l,t,s,d,r),this.emit("missingKey",e,l,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);k&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],a+t,r[`defaultValue${t}`]||_)})}):n(e,a,_))}f=this.extendTranslation(f,e,r,h,n),i&&f===a&&this.options.appendNamespaceToMissingKey&&(f=`${l}${c}${a}`),(i||t)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${a}`:a,t?f:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,S,{...r,ns:o}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(h.res=e,h.usedParams=this.getUsedParamsDetails(r),h):e}if(s){const e=Array.isArray(S),t=e?[]:{},n=e?m:p;for(const i in S)if(Object.prototype.hasOwnProperty.call(S,i)){const e=`${n}${s}${i}`;t[i]=b&&!f?this.translate(e,{...r,defaultValue:bL(_)?_[i]:void 0,joinArrays:!1,ns:o}):this.translate(e,{...r,joinArrays:!1,ns:o}),t[i]===e&&(t[i]=S[i])}f=t}}return i?(h.res=f,h.usedParams=this.getUsedParamsDetails(r),h):f}extendTranslation(e,t,n,r,i){var s,a;if(null==(s=this.i18nFormat)?void 0:s.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const s=GO(e)&&(void 0!==(null==(a=null==n?void 0:n.interpolation)?void 0:a.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(s){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let l=n.replace&&!GO(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),s){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(...e)=>(null==i?void 0:i[0])!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=GO(o)?[o]:o;return null!=e&&(null==l?void 0:l.length)&&!1!==n.applyPostProcessor&&(e=yL.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,r,i,s,a;return GO(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;const o=this.extractFromKey(e,t),l=o.key;r=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!GO(t.count),d=u&&!t.ordinal&&0===t.count,h=void 0!==t.context&&(GO(t.context)||"number"==typeof t.context)&&""!==t.context,f=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var o,c;this.isValidLookup(n)||(a=e,vL[`${f[0]}-${e}`]||!(null==(o=this.utils)?void 0:o.hasLoadedNamespace)||(null==(c=this.utils)?void 0:c.hasLoadedNamespace(a))||(vL[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${f.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(r=>{var a;if(this.isValidLookup(n))return;s=r;const o=[l];if(null==(a=this.i18nFormat)?void 0:a.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));const n=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(o.push(l+e),t.ordinal&&0===e.indexOf(i)&&o.push(l+e.replace(i,this.options.pluralSeparator)),d&&o.push(l+n)),h){const r=`${l}${this.options.contextSeparator}${t.context}`;o.push(r),u&&(o.push(r+e),t.ordinal&&0===e.indexOf(i)&&o.push(r+e.replace(i,this.options.pluralSeparator)),d&&o.push(r+n))}}let c;for(;c=o.pop();)this.isValidLookup(n)||(i=c,n=this.getResource(r,e,c,t))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,r={}){var i;return(null==(i=this.i18nFormat)?void 0:i.getResource)?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!GO(e.replace);let r=n?e.replace:e;if(n&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class xL{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=pL.create("languageUtils")}getScriptPartFromCode(e){if(!(e=dL(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=dL(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(GO(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(_D){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),GO(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return GO(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):GO(e)&&i(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))}),r}}const kL={zero:0,one:1,two:2,few:3,many:4,other:5},_L={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class SL{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=pL.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=dL("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(n,{type:r})}catch(a){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),_L;if(!e.match(/-|_/))return _L;const n=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(n,t)}return this.pluralRulesCache[i]=s,s}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),(null==n?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((e,t)=>kL[e]-kL[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const EL=(e,t,n,r=".",i=!0)=>{let s=((e,t,n)=>{const r=rL(e,n);return void 0!==r?r:rL(t,n)})(e,t,n);return!s&&i&&GO(n)&&(s=uL(e,n,r),void 0===s&&(s=uL(t,n,r))),s},TL=e=>e.replace(/\$/g,"$$$$");class CL{constructor(e={}){var t;this.logger=pL.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:f,nestingSuffixEscaped:p,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:oL,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?sL(i):s||"{{",this.suffix=a?sL(a):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?sL(d):h||sL("$t("),this.nestingSuffix=f?sL(f):p||sL(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,r){var i;let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const i=EL(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),s=i.shift().trim(),a=i.join(this.formatSeparator).trim();return this.format(EL(t,l,s,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,{...r,...t,interpolationkey:s})};this.resetRegExp();const u=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=void 0!==(null==(i=null==r?void 0:r.interpolation)?void 0:i.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>TL(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?TL(this.escape(e)):TL(e)}].forEach(t=>{for(o=0;s=t.regex.exec(e);){const n=s[1].trim();if(a=c(n),void 0===a)if("function"==typeof u){const t=u(e,s,r);a=GO(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))a="";else{if(d){a=s[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=""}else GO(a)||this.useRawValueToEscape||(a=YO(a));const i=t.safeValue(a);if(e=e.replace(s[0],i),d?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,i,s;const a=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let i=`{${r[1]}`;e=r[0],i=this.interpolate(i,s);const a=i.match(/'/g),o=i.match(/"/g);(((null==a?void 0:a.length)??0)%2==0&&!o||o.length%2!=0)&&(i=i.replace(/'/g,'"'));try{s=JSON.parse(i),t&&(s={...t,...s})}catch(_D){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,_D),`${e}${n}${i}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let o=[];s={...n},s=s.replace&&!GO(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(o=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),i=t(a.call(this,r[1].trim(),s),s),i&&r[0]===e&&!GO(i))return i;GO(i)||(i=YO(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),o.length&&(i=o.reduce((e,t)=>this.format(e,t,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const NL=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const a=r+JSON.stringify(s);let o=t[a];return o||(o=e(dL(r),i),t[a]=o),o(n)}},IL=e=>(t,n,r)=>e(dL(n),r)(t);class jL{constructor(e={}){this.logger=pL.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?NL:IL;this.formats={number:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:n((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:n((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:n((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=NL(t)}format(e,t,n,r={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}const s=i.reduce((e,t)=>{var i;const{formatName:s,formatOptions:a}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();n[s]||(n[s]=i),"false"===i&&(n[s]=!1),"true"===i&&(n[s]=!0),isNaN(i)||(n[s]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[s]){let t=e;try{const o=(null==(i=null==r?void 0:r.formatParams)?void 0:i[r.interpolationkey])||{},l=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[s](e,l,{...a,...r,...o})}catch(o){this.logger.warn(o)}return t}return this.logger.warn(`there was no format function for ${s}`),e},e);return s}}class PL extends mL{constructor(e,t,n,r={}){var i,s;super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=pL.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null==(s=null==(i=this.backend)?void 0:i.init)||s.call(i,n,r.backend,r)}queueLoad(e,t,n,r){const i={},s={},a={},o={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const a=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===s[a]&&(s[a]=!0):(this.state[a]=1,r=!1,void 0===s[a]&&(s[a]=!0),void 0===i[a]&&(i[a]=!0),void 0===o[t]&&(o[t]=!0)))}),r||(a[e]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const r=e.split("|"),i=r[0],s=r[1];t&&this.emit("failedLoading",i,s,t),!t&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:i}=tL(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===a[e][t]&&(a[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,i=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:s});this.readingCalls++;const a=(a,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&o&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*i,s)},i):s(a,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,a);try{const n=o(e,t);n&&"function"==typeof n.then?n.then(e=>a(null,e)).catch(a):a(null,n)}catch(l){a(l)}}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();GO(e)&&(e=this.languageUtils.toResolveHierarchy(e)),GO(t)&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(n,s)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&s&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,s),this.loaded(e,n,s)})}saveMissing(e,t,n,r,i,s={},a=()=>{}){var o,l,c,u,d;if(!(null==(l=null==(o=this.services)?void 0:o.utils)?void 0:l.hasLoadedNamespace)||(null==(u=null==(c=this.services)?void 0:c.utils)?void 0:u.hasLoadedNamespace(t))){if(null!=n&&""!==n){if(null==(d=this.backend)?void 0:d.create){const o={...s,isUpdate:i},l=this.backend.create.bind(this.backend);if(l.length<6)try{let i;i=5===l.length?l(e,t,n,r,o):l(e,t,n,r),i&&"function"==typeof i.then?i.then(e=>a(null,e)).catch(a):a(null,i)}catch(h){a(h)}else l(e,t,n,r,a,o)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const AL=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),GO(e[1])&&(t.defaultValue=e[1]),GO(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),RL=e=>{var t,n;return GO(e.ns)&&(e.ns=[e.ns]),GO(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),GO(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(n=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},OL=()=>{};class LL extends mL{constructor(e={},t){var n;if(super(),this.options=RL(e),this.services={},this.logger=pL,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(GO(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=AL();this.options={...n,...this.options,...RL(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?pL.init(r(this.modules.logger),this.options):pL.init(null,this.options),e=this.modules.formatter?this.modules.formatter:jL;const t=new xL(this.options);this.store=new gL(this.options.resources,this.options);const i=this.services;i.logger=pL,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new SL(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(i.formatter=r(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new CL(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new PL(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new wL(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=OL),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const i=XO(),s=()=>{const e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),i}loadResources(e,t=OL){var n,r;let i=t;const s=GO(e)?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==s?void 0:s.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return i();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(s)t(s);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e))}null==(r=null==(n=this.options.preload)?void 0:n.forEach)||r.call(n,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),i(e)})}else i(null)}reloadResources(e,t,n){const r=XO();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=OL),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&yL.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=XO();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,s)=>{s?this.isLanguageChangingTo===e&&(r(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},s=t=>{var n,s;e||t||!this.services.languageDetector||(t=[]);const a=GO(t)?t:t&&t[0],o=this.store.hasLanguageSomeTranslations(a)?a:this.services.languageUtils.getBestMatchFromCodes(GO(t)?[t]:t);o&&(this.language||r(o),this.translator.language||this.translator.changeLanguage(o),null==(s=null==(n=this.services.languageDetector)?void 0:n.cacheUserLanguage)||s.call(n,o)),this.loadResources(o,e=>{i(e,o)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e):s(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const r=(e,t,...i)=>{let s;s="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(i)):{...t},s.lng=s.lng||r.lng,s.lngs=s.lngs||r.lngs,s.ns=s.ns||r.ns,""!==s.keyPrefix&&(s.keyPrefix=s.keyPrefix||n||r.keyPrefix);const a=this.options.keySeparator||".";let o;return o=s.keyPrefix&&Array.isArray(e)?e.map(e=>`${s.keyPrefix}${a}${e}`):s.keyPrefix?`${s.keyPrefix}${a}${e}`:e,this.t(o,s)};return GO(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(n,e)||r&&!s(i,e)))}loadNamespaces(e,t){const n=XO();return this.options.ns?(GO(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=XO();GO(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){var t,n;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(_D){}const r=(null==(n=this.services)?void 0:n.languageUtils)||new xL(AL());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new LL(e,t)}cloneInstance(e={},t=OL){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new LL(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));if(["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]={...e[t][r]},n),e[t]),e),{});i.store=new gL(e,r),i.services.resourceStore=i.store}return i.translator=new wL(i.services,r),i.translator.on("*",(e,...t)=>{i.emit(e,...t)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const DL=LL.createInstance();DL.createInstance=LL.createInstance,DL.createInstance,DL.dir,DL.init,DL.loadResources,DL.reloadResources,DL.use,DL.changeLanguage,DL.getFixedT,DL.t,DL.exists,DL.setDefaultNamespace,DL.hasLoadedNamespace,DL.loadNamespaces,DL.loadLanguages;const{slice:ML,forEach:zL}=[];const FL=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,UL={create(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let r=`${e}=${encodeURIComponent(t)}`;if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!FL.test(n.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${n.domain}`}if(n.path){if(!FL.test(n.path))throw new TypeError("option path is invalid");r+=`; Path=${n.path}`}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(r+="; Partitioned"),r}(e,t,i)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var VL={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return UL.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=t;n&&"undefined"!=typeof document&&UL.create(n,e,r,i,s)}},$L={name:"querystring",lookup(e){var t;let n,{lookupQuerystring:r}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&(null==(t=window.location.hash)?void 0:t.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const i=e.substring(1).split("&");for(let t=0;t<i.length;t++){const e=i[t].indexOf("=");if(e>0){i[t].substring(0,e)===r&&(n=i[t].substring(e+1))}}}return n}},qL={name:"hash",lookup(e){var t;let n,{lookupHash:r,lookupFromHashIndex:i}=e;if("undefined"!=typeof window){const{hash:e}=window.location;if(e&&e.length>2){const s=e.substring(1);if(r){const e=s.split("&");for(let t=0;t<e.length;t++){const i=e[t].indexOf("=");if(i>0){e[t].substring(0,i)===r&&(n=e[t].substring(i+1))}}}if(n)return n;if(!n&&i>-1){const n=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(n))return;return null==(t=n["number"==typeof i?i:0])?void 0:t.replace("/","")}}}return n}};let BL=null;const HL=()=>{if(null!==BL)return BL;try{if(BL="undefined"!=typeof window&&null!==window.localStorage,!BL)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(_D){BL=!1}return BL};var KL={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&HL())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&HL()&&window.localStorage.setItem(n,e)}};let WL=null;const QL=()=>{if(null!==WL)return WL;try{if(WL="undefined"!=typeof window&&null!==window.sessionStorage,!WL)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(_D){WL=!1}return WL};var GL={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&QL())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&QL()&&window.sessionStorage.setItem(n,e)}},XL={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let i=0;i<e.length;i++)t.push(e[i]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},YL={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const r=n||("undefined"!=typeof document?document.documentElement:null);return r&&"function"==typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},JL={name:"path",lookup(e){var t;let{lookupFromPathIndex:n}=e;if("undefined"==typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null==(t=r["number"==typeof n?n:0])?void 0:t.replace("/","")}},ZL={name:"subdomain",lookup(e){var t,n;let{lookupFromSubdomainIndex:r}=e;const i="number"==typeof r?r+1:1,s="undefined"!=typeof window&&(null==(n=null==(t=window.location)?void 0:t.hostname)?void 0:n.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[i]}};let eD=!1;try{document.cookie,eD=!0}catch(_D){}const tD=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];eD||tD.splice(1,1);class nD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return zL.call(ML.call(arguments,1),t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])}),e}(t,this.options||{},{order:tD,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(VL),this.addDetector($L),this.addDetector(KL),this.addDetector(GL),this.addDetector(XL),this.addDetector(YL),this.addDetector(JL),this.addDetector(ZL),this.addDetector(qL)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"==typeof n&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}function rD(e){return(rD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iD(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":rD(XMLHttpRequest))}function sD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sD(Object(n),!0).forEach(function(t){oD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oD(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=lD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=lD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lD(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lD(e){return(lD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}nD.type="languageDetector";var cD,uD,dD="function"==typeof fetch?fetch:void 0;if("undefined"!=typeof globalThis&&globalThis.fetch?dD=globalThis.fetch:"undefined"!=typeof window&&window.fetch&&(dD=window.fetch),iD()&&("undefined"!=typeof globalThis&&globalThis.XMLHttpRequest?cD=globalThis.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(cD=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof globalThis&&globalThis.ActiveXObject?uD=globalThis.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(uD=window.ActiveXObject)),"function"!=typeof dD&&(dD=void 0),!dD&&!cD&&!uD)try{od(()=>import("./browser-ponyfill-DpXvjSIt.js").then(e=>e.b),[]).then(function(e){dD=e.default}).catch(function(){})}catch(_D){}var hD=function(e,t){if(t&&"object"===lD(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},fD=function(e,t,n,r){var i=function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then(function(t){n(null,{status:e.status,data:t})}).catch(n)};if(r){var s=r(e,t);if(s instanceof Promise)return void s.then(i).catch(n)}"function"==typeof fetch?fetch(e,t).then(i).catch(n):dD(e,t).then(i).catch(n)},pD=!1,mD=function(e,t,n,r){return"function"==typeof n&&(r=n,n=void 0),r=r||function(){},dD&&0!==t.indexOf("file:")?function(e,t,n,r){e.queryStringParams&&(t=hD(t,e.queryStringParams));var i=aD({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"==typeof window&&"undefined"!=typeof globalThis&&void 0!==globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(globalThis.process.version,"; ").concat(globalThis.process.platform," ").concat(globalThis.process.arch,")")),n&&(i["Content-Type"]="application/json");var s="function"==typeof e.requestOptions?e.requestOptions(n):e.requestOptions,a=aD({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:i},pD?{}:s),o="function"==typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{fD(t,a,r,o)}catch(_D){if(!s||0===Object.keys(s).length||!_D.message||_D.message.indexOf("not implemented")<0)return r(_D);try{Object.keys(s).forEach(function(e){delete a[e]}),fD(t,a,r,o),pD=!0}catch(l){r(l)}}}(e,t,n,r):iD()||"function"==typeof ActiveXObject?function(e,t,n,r){n&&"object"===lD(n)&&(n=hD("",n).slice(1)),e.queryStringParams&&(t=hD(t,e.queryStringParams));try{var i=cD?new cD:new uD("MSXML2.XMLHTTP.3.0");i.open(n?"POST":"GET",t,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var s=e.customHeaders;if(s="function"==typeof s?s():s)for(var a in s)i.setRequestHeader(a,s[a]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(_D){console}}(e,t,n,r):void r(new Error("No fetch and no xhr implementation found!"))};function gD(e){return(gD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yD(Object(n),!0).forEach(function(t){wD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bD(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xD(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wD(e,t,n){return(t=xD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xD(e){var t=function(e,t){if("object"!=gD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=gD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==gD(t)?t:t+""}var kD=bD(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)},[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=vD(vD(vD({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return wD({},t,n||"")},parseLoadPayload:function(e,t){},request:mD,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),n),this.allOptions=r,this.services&&this.options.reloadInterval){var i=setInterval(function(){return t.reload()},this.options.reloadInterval);"object"===gD(i)&&"function"==typeof i.unref&&i.unref()}}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,r,i){var s,a=this,o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath(e,n)),(o=function(e){return!!e&&"function"==typeof e.then}(s=o)?s:Promise.resolve(s)).then(function(s){if(!s)return i(null,{});var o=a.services.interpolator.interpolate(s,{lng:e.join("+"),ns:n.join("+")});a.loadUrl(o,i,t,r)})}},{key:"loadUrl",value:function(e,t,n,r){var i=this,s="string"==typeof n?[n]:n,a="string"==typeof r?[r]:r,o=this.options.parseLoadPayload(s,a);this.options.request(this.options,e,o,function(s,a){if(a&&(a.status>=500&&a.status<600||!a.status))return t("failed loading "+e+"; status code: "+a.status,!0);if(a&&a.status>=400&&a.status<500)return t("failed loading "+e+"; status code: "+a.status,!1);if(!a&&s&&s.message){var o=s.message.toLowerCase();if(["failed","fetch","network","load"].find(function(e){return o.indexOf(e)>-1}))return t("failed loading "+e+": "+s.message,!0)}if(s)return t(s,!1);var l,c;try{l="string"==typeof a.data?i.options.parse(a.data,n,r):a.data}catch(_D){c="failed parsing "+e+" to json"}if(c)return t(c,!1);t(null,l)})}},{key:"create",value:function(e,t,n,r,i){var s=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var a=this.options.parsePayload(t,n,r),o=0,l=[],c=[];e.forEach(function(n){var r=s.options.addPath;"function"==typeof s.options.addPath&&(r=s.options.addPath(n,t));var u=s.services.interpolator.interpolate(r,{lng:n,ns:t});s.options.request(s.options,u,a,function(t,n){o+=1,l.push(t),c.push(n),o===e.length&&"function"==typeof i&&i(l,c)})})}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,r=t.languageUtils,i=t.logger,s=n.language;if(!s||"cimode"!==s.toLowerCase()){var a=[],o=function(e){r.toResolveHierarchy(e).forEach(function(e){a.indexOf(e)<0&&a.push(e)})};o(s),this.allOptions.preload&&this.allOptions.preload.forEach(function(e){return o(e)}),a.forEach(function(t){e.allOptions.ns.forEach(function(e){n.read(t,e,"read",null,null,function(r,s){r&&i.warn("loading namespace ".concat(e," for language ").concat(t," failed"),r),!r&&s&&i.log("loaded namespace ".concat(e," for language ").concat(t),s),n.loaded("".concat(t,"|").concat(e),r,s)})})})}}}]);kD.type="backend";DL.use(kD).use(nD).use(bd).init({resources:{vi:{translation:{common:{loading:"Đang tải...",save:"Lưu",cancel:"Hủy",delete:"Xóa",edit:"Chỉnh sửa",create:"Tạo mới",update:"Cập nhật",search:"Tìm kiếm",filter:"Lọc",sort:"Sắp xếp",yes:"Có",no:"Không",ok:"Đồng ý",back:"Quay lại",next:"Tiếp theo",previous:"Trước đó",close:"Đóng",open:"Mở",view:"Xem",download:"Tải xuống",upload:"Tải lên",or:"Hoặc",loadingData:"Đang tải dữ liệu...",pleaseWait:"Vui lòng đợi một chút",checkingAuth:"Đang kiểm tra xác thực...",minutes:"phút",seconds:"giây",players:"người chơi",room:"phòng",join:"Tham gia",leave:"Rời khỏi",ready:"Sẵn sàng",waiting:"Đang chờ",start:"Bắt đầu",finish:"Kết thúc",complete:"Hoàn thành",continue:"Tiếp tục",processing:"Đang xử lý...",noData:"Không có dữ liệu",tryAgain:"Vui lòng thử lại",retry:"Thử lại",refresh:"Làm mới",success:"Thành công",error:"Lỗi",warning:"Cảnh báo",info:"Thông tin"},nav:{home:"Trang chủ",dashboard:"Bảng điều khiển",quizzes:"Quiz",multiplayer:"Chơi cùng",favorites:"Yêu thích",leaderboard:"Bảng xếp hạng",profile:"Hồ sơ",creator:"Creator",admin:"Quản trị",login:"Đăng nhập",logout:"Đăng xuất",register:"Đăng ký",settings:"Cài đặt"},multiplayer:{title:"Chơi cùng bạn bè",subtitle:"Tham gia phòng và thi đấu với người khác",createRoom:"Tạo phòng mới",joinRoom:"Tham gia phòng",roomCode:"Mã phòng",roomName:"Tên phòng",maxPlayers:"Số người tối đa",timeLimit:"Thời gian mỗi câu",privacy:"Quyền riêng tư",public:"Công khai",private:"Riêng tư",password:"Mật khẩu",enterPassword:"Nhập mật khẩu",roomSettings:"Cài đặt phòng",gameSettings:"Cài đặt game",showAnswers:"Hiển thị đáp án",allowLateJoin:"Cho phép vào muộn",autoStart:"Tự động bắt đầu",lobby:{title:"Phòng chờ",waitingForHost:"Đang chờ chủ phòng bắt đầu",playersReady:"{{ready}}/{{total}} người sẵn sàng",startGame:"Bắt đầu game",kickPlayer:"Kick người chơi",leaveRoom:"Rời phòng",copyCode:"Sao chép mã phòng",shareCode:"Chia sẻ mã phòng"},game:{title:"Game đang diễn ra",question:"Câu hỏi {{current}}/{{total}}",timeLeft:"Còn lại {{time}}s",submitting:"Đang gửi câu trả lời...",waitingForOthers:"Đang chờ người khác...",results:"Kết quả câu hỏi",leaderboard:"Bảng xếp hạng",gameOver:"Game kết thúc",finalResults:"Kết quả cuối cùng"},chat:{title:"Chat",placeholder:"Nhập tin nhắn...",send:"Gửi",system:"Hệ thống",playerJoined:"{{name}} đã tham gia",playerLeft:"{{name}} đã rời khỏi",playerKicked:"{{name}} đã bị kick",gameStarted:"Game đã bắt đầu",gameEnded:"Game đã kết thúc"},errors:{roomNotFound:"Không tìm thấy phòng",roomFull:"Phòng đã đầy",wrongPassword:"Mật khẩu không đúng",gameInProgress:"Game đang diễn ra",connectionLost:"Mất kết nối",reconnecting:"Đang kết nối lại...",failedToJoin:"Không thể tham gia phòng",failedToCreate:"Không thể tạo phòng"},success:{roomCreated:"Tạo phòng thành công",joinedRoom:"Tham gia phòng thành công",leftRoom:"Đã rời khỏi phòng",kickedPlayer:"Đã kick người chơi",gameStarted:"Game đã bắt đầu"}},landing:{hero:{title:"Thử thách kiến thức của bạn",subtitle:"Khám phá hàng ngàn quiz thú vị, thử thách bản thân và nâng cao kiến thức với Quiz Trivia - nền tảng quiz tương tác hàng đầu!"},cta:{primary:"Bắt đầu ngay - Miễn phí!",secondary:"Đã có tài khoản?"},features:{diversity:{title:"Đa dạng chủ đề",description:"Khoa học, lịch sử, thể thao, giải trí và nhiều chủ đề hấp dẫn khác"},realtime:{title:"Thời gian thực",description:"Thử thách với timer đếm ngược và theo dõi tiến độ realtime"},ranking:{title:"Xếp hạng & Thành tích",description:"Theo dõi điểm số, thống kê và so sánh với bạn bè"}},stats:{quizzes:"Quiz đa dạng",players:"Người chơi",plays:"Lượt chơi",support:"Hỗ trợ"},footer:{rights:"Tất cả quyền được bảo lưu."}},quiz:{enterAnswer:"Nhập câu trả lời của bạn...",exploreQuizzes:"Khám phá Quiz",exploreDescription:"Tìm hiểu kiến thức mới qua các quiz thú vị",untitled:"Quiz không tên"},auth:{login:"Đăng nhập",register:"Đăng ký",logout:"Đăng xuất",email:"Email",password:"Mật khẩu",confirmPassword:"Xác nhận mật khẩu",displayName:"Tên hiển thị",emailPlaceholder:"Nhập email của bạn",passwordPlaceholder:"Nhập mật khẩu",displayNamePlaceholder:"Nhập tên hiển thị",welcomeBack:"Chào mừng trở lại!",createNewAccount:"Tạo tài khoản mới",loginSuccess:"Đăng nhập thành công!",registerSuccess:"Đăng ký thành công!",forgotPassword:"Quên mật khẩu?",rememberMe:"Ghi nhớ đăng nhập",loginWithGoogle:"Đăng nhập với Google",registerWithGoogle:"Đăng ký với Google",agreeToTerms:"Tôi đồng ý với các điều khoản và điều kiện",alreadyHaveAccount:"Đã có tài khoản?",dontHaveAccount:"Chưa có tài khoản?",validation:{emailRequired:"Vui lòng nhập email",emailInvalid:"Email không đúng định dạng",passwordRequired:"Vui lòng nhập mật khẩu",displayNameRequired:"Vui lòng nhập tên hiển thị",passwordMismatch:"Mật khẩu xác nhận không khớp",passwordTooShort:"Mật khẩu phải có ít nhất 6 ký tự",termsRequired:"Vui lòng đồng ý với điều khoản sử dụng"},errors:{userNotFound:"Email không tồn tại",wrongPassword:"Mật khẩu không đúng",invalidCredential:"Email hoặc mật khẩu không đúng",invalidEmail:"Email không hợp lệ",userDisabled:"Tài khoản đã bị vô hiệu hóa",tooManyRequests:"Quá nhiều lần thử. Vui lòng thử lại sau",loginError:"Lỗi đăng nhập: {{message}}",otpSendError:"Có lỗi xảy ra khi gửi mã xác thực: {{message}}",registrationDataNotFound:"Không tìm thấy thông tin đăng ký",emailAlreadyInUse:"Email này đã được sử dụng",weakPassword:"Mật khẩu quá yếu",registerError:"Lỗi tạo tài khoản: {{message}}",googleLoginError:"Lỗi đăng nhập Google: {{message}}"},googleLoginSuccess:"Đăng nhập Google thành công!",registrationCancelled:"Đã hủy quá trình đăng ký",confirmPasswordPlaceholder:"Xác nhận mật khẩu",termsOfService:"điều khoản sử dụng",noAccount:"Chưa có tài khoản? Đăng ký ngay",hasAccount:"Đã có tài khoản? Đăng nhập",loginRequired:"Cần đăng nhập"},creator:{loginMessage:"Bạn cần đăng nhập để truy cập trang Creator",roleRequired:"Bạn cần có vai trò Creator hoặc Admin để truy cập trang này"},createQuiz:{loginRequired:"Bạn cần đăng nhập để tạo quiz",info:{basicInfo:"Thông tin cơ bản",fillInfo:"Điền thông tin cơ bản về quiz của bạn",titleLabel:"Tiêu đề Quiz",titlePlaceholder:"Nhập tiêu đề quiz...",descriptionLabel:"Mô tả",descriptionPlaceholder:"Mô tả chi tiết về quiz..."}},messages:{unauthorized:"Không có quyền truy cập",serverError:"Không thể kết nối đến server. Vui lòng thử lại sau.",retrying:"Đang thử kết nối lại..."},errors:{firestoreConnection:"Không thể kết nối Firestore"},leaderboard:{searchPlayers:"🔍 Tìm kiếm người chơi...",collapse:"Thu gọn",viewMore:"Xem thêm {{count}} người"},dashboard:{welcome:"Xin chào, {{name}}!",takeQuizzes:"Thử thách kiến thức với các bài quiz đa dạng",favoriteQuizzes:"Các quiz bạn đã lưu để làm sau",viewRanking:"Xem thứ hạng và thành tích của bạn",editProfile:"Xem và chỉnh sửa thông tin cá nhân",createQuizzes:"Tạo các bài quiz của riêng bạn",adminPanel:"Quản lý người dùng và hệ thống"}}},en:{translation:{common:{loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",create:"Create",update:"Update",search:"Search",filter:"Filter",sort:"Sort",yes:"Yes",no:"No",ok:"OK",back:"Back",next:"Next",previous:"Previous",close:"Close",open:"Open",view:"View",download:"Download",upload:"Upload",or:"Or",loadingData:"Loading data...",pleaseWait:"Please wait",checkingAuth:"Checking authentication...",minutes:"minutes",seconds:"seconds",players:"players",room:"room",join:"Join",leave:"Leave",ready:"Ready",waiting:"Waiting",start:"Start",finish:"Finish",complete:"Complete",continue:"Continue",processing:"Processing...",noData:"No data",tryAgain:"Please try again",retry:"Retry",refresh:"Refresh",success:"Success",error:"Error",warning:"Warning",info:"Info"},nav:{home:"Home",dashboard:"Dashboard",quizzes:"Quizzes",multiplayer:"Multiplayer",favorites:"Favorites",leaderboard:"Leaderboard",profile:"Profile",creator:"Creator",admin:"Admin",login:"Login",logout:"Logout",register:"Register",settings:"Settings"},multiplayer:{title:"Play with Friends",subtitle:"Join rooms and compete with others",createRoom:"Create New Room",joinRoom:"Join Room",roomCode:"Room Code",roomName:"Room Name",maxPlayers:"Max Players",timeLimit:"Time per Question",privacy:"Privacy",public:"Public",private:"Private",password:"Password",enterPassword:"Enter Password",roomSettings:"Room Settings",gameSettings:"Game Settings",showAnswers:"Show Answers",allowLateJoin:"Allow Late Join",autoStart:"Auto Start",lobby:{title:"Game Lobby",waitingForHost:"Waiting for host to start",playersReady:"{{ready}}/{{total}} ready",startGame:"Start Game",kickPlayer:"Kick Player",leaveRoom:"Leave Room",copyCode:"Copy Room Code",shareCode:"Share Room Code"},game:{title:"Game in Progress",question:"Question {{current}}/{{total}}",timeLeft:"{{time}}s left",submitting:"Submitting answer...",waitingForOthers:"Waiting for others...",results:"Question Results",leaderboard:"Leaderboard",gameOver:"Game Over",finalResults:"Final Results"},chat:{title:"Chat",placeholder:"Type a message...",send:"Send",system:"System",playerJoined:"{{name}} joined",playerLeft:"{{name}} left",playerKicked:"{{name}} was kicked",gameStarted:"Game started",gameEnded:"Game ended"},errors:{roomNotFound:"Room not found",roomFull:"Room is full",wrongPassword:"Wrong password",gameInProgress:"Game in progress",connectionLost:"Connection lost",reconnecting:"Reconnecting...",failedToJoin:"Failed to join room",failedToCreate:"Failed to create room"},success:{roomCreated:"Room created successfully",joinedRoom:"Joined room successfully",leftRoom:"Left room",kickedPlayer:"Player kicked",gameStarted:"Game started"}},landing:{hero:{title:"Challenge Your Knowledge",subtitle:"Discover thousands of exciting quizzes, challenge yourself and enhance your knowledge with Quiz Trivia - the leading interactive quiz platform!"},cta:{primary:"Get Started - Free!",secondary:"Already have an account?"},features:{diversity:{title:"Diverse Topics",description:"Science, history, sports, entertainment and many other exciting topics"},realtime:{title:"Real-time",description:"Challenge with countdown timer and realtime progress tracking"},ranking:{title:"Ranking & Achievements",description:"Track scores, statistics and compare with friends"}},stats:{quizzes:"Diverse Quizzes",players:"Players",plays:"Plays",support:"Support"},footer:{rights:"All rights reserved."}},quiz:{enterAnswer:"Enter your answer...",exploreQuizzes:"Explore Quizzes",exploreDescription:"Learn new knowledge through interesting quizzes",untitled:"Untitled Quiz"},auth:{login:"Login",register:"Register",logout:"Logout",email:"Email",password:"Password",confirmPassword:"Confirm Password",displayName:"Display Name",emailPlaceholder:"Enter your email",passwordPlaceholder:"Enter your password",displayNamePlaceholder:"Enter your display name",welcomeBack:"Welcome back!",createNewAccount:"Create new account",loginSuccess:"Login successful!",registerSuccess:"Registration successful!",forgotPassword:"Forgot password?",rememberMe:"Remember me",loginWithGoogle:"Login with Google",registerWithGoogle:"Register with Google",agreeToTerms:"I agree to the terms and conditions",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",validation:{emailRequired:"Please enter email",emailInvalid:"Email format is invalid",passwordRequired:"Please enter password",displayNameRequired:"Please enter display name",passwordMismatch:"Password confirmation does not match",passwordTooShort:"Password must be at least 6 characters",termsRequired:"Please agree to the terms of service"},errors:{userNotFound:"Email not found",wrongPassword:"Wrong password",invalidCredential:"Invalid email or password",invalidEmail:"Invalid email",userDisabled:"Account has been disabled",tooManyRequests:"Too many attempts. Please try again later",loginError:"Login error: {{message}}",otpSendError:"Error sending verification code: {{message}}",registrationDataNotFound:"Registration data not found",emailAlreadyInUse:"This email is already in use",weakPassword:"Password is too weak",registerError:"Registration error: {{message}}",googleLoginError:"Google login error: {{message}}"},googleLoginSuccess:"Google login successful!",registrationCancelled:"Registration cancelled",confirmPasswordPlaceholder:"Confirm password",termsOfService:"terms of service",noAccount:"Don't have an account? Sign up now",hasAccount:"Already have an account? Sign in",loginRequired:"Login required"},creator:{loginMessage:"You need to login to access Creator page",roleRequired:"You need Creator or Admin role to access this page"},createQuiz:{loginRequired:"You need to login to create quiz",info:{basicInfo:"Basic Information",fillInfo:"Fill in basic information about your quiz",titleLabel:"Quiz Title",titlePlaceholder:"Enter quiz title...",descriptionLabel:"Description",descriptionPlaceholder:"Detailed description about the quiz..."}},messages:{unauthorized:"Unauthorized access",serverError:"Cannot connect to server. Please try again later.",retrying:"Retrying connection..."},errors:{firestoreConnection:"Cannot connect to Firestore"},leaderboard:{searchPlayers:"🔍 Search players...",collapse:"Collapse",viewMore:"View {{count}} more players"},dashboard:{welcome:"Hello, {{name}}!",takeQuizzes:"Challenge your knowledge with diverse quizzes",favoriteQuizzes:"Quizzes you've saved for later",viewRanking:"View your ranking and achievements",editProfile:"View and edit your personal information",createQuizzes:"Create your own quizzes",adminPanel:"Manage users and system"}}}},lng:"vi",fallbackLng:"vi",detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"i18nextLng",caches:["localStorage"]},interpolation:{escapeValue:!1},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/{{lng}}/{{ns}}.json"},load:"languageOnly",preload:["vi","en"],debug:!1}),rd(document.getElementById("root")).render(Y.jsx($.StrictMode,{children:Y.jsx(Fp,{store:oR,children:Y.jsx(QO,{})})}));export{VR as $,bR as A,jR as B,xR as C,tR as D,SR as E,XA as F,cR as G,II as H,hI as I,TI as J,jI as K,cf as L,FR as M,r as N,OR as O,iA as P,UR as Q,q as R,IR as S,AR as T,RR as U,GA as V,LC as W,EC as X,rR as Y,iR as Z,od as _,_d as a,YA as a0,oA as a1,TR as a2,IC as a3,wh as a4,Lp as a5,cA as a6,Of as a7,Tg as a8,_m as a9,id as aa,cy as ab,bg as ac,Sg as ad,Zm as ae,Fp as af,n as ag,JA as ah,zR as b,NR as c,vR as d,qp as e,ZA as f,vT as g,hR as h,kC as i,Y as j,_h as k,yT as l,SC as m,kR as n,NC as o,TC as p,iC as q,$ as r,AC as s,cC as t,Hf as u,CC as v,aC as w,dC as x,DA as y,Sh as z};
