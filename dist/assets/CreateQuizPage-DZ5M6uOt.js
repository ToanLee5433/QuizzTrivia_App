const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Be-kBz05.js","assets/_commonjs-dynamic-modules-TDtrdbi3.js","assets/index-CmSLUdb8.js","assets/index-CF88gCND.js","assets/index-B5c4m5bM.css"])))=>i.map(i=>d[i]);
var Gn=Object.defineProperty;var zn=(e,t,r)=>t in e?Gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mt=(e,t,r)=>zn(e,typeof t!="symbol"?t+"":t,r);import{e as we,j as n,B as Kn,S as Wn,C as Hn,r as u,R as W,Y as Ue,v as Z,y as L,_ as Ze,Z as Nt,E as Vn,u as Jn,$ as Xn,V as qn,h as Yn,a0 as Ht}from"./index-CF88gCND.js";import{F as xt,T as Vt,C as Zn}from"./tag-CBHs_W2v.js";import{L as Jt}from"./loader-circle-CXpD9nYr.js";import{C as bt}from"./circle-check-big-BPzJMT1X.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],tr=we("bot",er);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],rr=we("brain",nr);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],ar=we("cpu",sr);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],or=we("eye-off",ir);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],cr=we("globe",lr);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ur=we("shield",dr);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gr=we("zap",hr),Xt={title:"",description:"",category:"programming",difficulty:"easy",duration:15,imageUrl:"",questions:[],tags:[],allowRetake:!1},pr=[{value:"programming",label:"Láº­p trÃ¬nh"},{value:"math",label:"ToÃ¡n há»c"},{value:"science",label:"Khoa há»c"},{value:"history",label:"Lá»‹ch sá»­"},{value:"language",label:"NgÃ´n ngá»¯"},{value:"general",label:"Tá»•ng há»£p"}],fr=[{value:"easy",label:"Dá»…"},{value:"medium",label:"Trung bÃ¬nh"},{value:"hard",label:"KhÃ³"}],et=["ThÃ´ng tin Quiz","CÃ¢u há»i","Xem láº¡i & Xuáº¥t báº£n"];function ie(){return Math.random().toString(36).substr(2,9)}const mr=({quiz:e,setQuiz:t})=>{var r;return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto",children:n.jsx(Kn,{className:"w-8 h-8 text-white"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"ThÃ´ng tin cÆ¡ báº£n"}),n.jsx("p",{className:"text-gray-600",children:"Äiá»n thÃ´ng tin Ä‘á»ƒ táº¡o quiz cá»§a báº¡n"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[n.jsx(xt,{className:"w-4 h-4"}),"TiÃªu Ä‘á» quiz *"]}),n.jsx("input",{className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg",placeholder:"Nháº­p tiÃªu Ä‘á» thu hÃºt cho quiz cá»§a báº¡n...",value:e.title,onChange:s=>t(a=>({...a,title:s.target.value}))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[n.jsx(xt,{className:"w-4 h-4"}),"MÃ´ táº£ quiz *"]}),n.jsx("textarea",{className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",placeholder:"MÃ´ táº£ ngáº¯n gá»n vá» ná»™i dung quiz...",rows:4,value:e.description,onChange:s=>t(a=>({...a,description:s.target.value}))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[n.jsx(Vt,{className:"w-4 h-4"}),"Danh má»¥c *"]}),n.jsxs("select",{className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:e.category,onChange:s=>t(a=>({...a,category:s.target.value})),children:[n.jsx("option",{value:"",children:"Chá»n danh má»¥c"}),pr.map(s=>n.jsx("option",{value:s.value,children:s.label},s.value))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[n.jsx(Wn,{className:"w-4 h-4"}),"Äá»™ khÃ³ *"]}),n.jsxs("select",{className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",value:e.difficulty,onChange:s=>t(a=>({...a,difficulty:s.target.value})),children:[n.jsx("option",{value:"",children:"Chá»n Ä‘á»™ khÃ³"}),fr.map(s=>n.jsx("option",{value:s.value,children:s.label},s.value))]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[n.jsx(Hn,{className:"w-4 h-4"}),"Thá»i gian (phÃºt) *"]}),n.jsx("input",{type:"number",className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",min:5,max:120,value:e.duration,onChange:s=>t(a=>({...a,duration:parseInt(s.target.value)||15})),placeholder:"15"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Tá»« 5 Ä‘áº¿n 120 phÃºt"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[n.jsx(Vt,{className:"w-4 h-4"}),"Tags (tÃ¹y chá»n)"]}),n.jsx("input",{className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Nháº­p tags, cÃ¡ch nhau báº±ng dáº¥u pháº©y...",value:((r=e.tags)==null?void 0:r.join(", "))||"",onChange:s=>t(a=>({...a,tags:s.target.value.split(",").map(i=>i.trim()).filter(i=>i)}))}),n.jsx("p",{className:"text-sm text-gray-500",children:"VÃ­ dá»¥: javascript, react, frontend"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[n.jsx(xt,{className:"w-4 h-4"}),"HÃ¬nh áº£nh minh há»a (tÃ¹y chá»n)"]}),n.jsx("input",{className:"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Nháº­p URL hÃ¬nh áº£nh...",value:e.imageUrl||"",onChange:s=>t(a=>({...a,imageUrl:s.target.value}))})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-200",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"ðŸ“‹ Xem trÆ°á»›c thÃ´ng tin quiz"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"TiÃªu Ä‘á»:"})," ",e.title||"ChÆ°a cÃ³ tiÃªu Ä‘á»"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"MÃ´ táº£:"})," ",e.description||"ChÆ°a cÃ³ mÃ´ táº£"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Danh má»¥c:"})," ",e.category||"ChÆ°a chá»n"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Äá»™ khÃ³:"})," ",e.difficulty||"ChÆ°a chá»n"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Thá»i gian:"})," ",e.duration," phÃºt"]}),e.tags&&e.tags.length>0&&n.jsxs("p",{children:[n.jsx("strong",{children:"Tags:"})," ",e.tags.join(", ")]}),e.imageUrl&&n.jsxs("div",{className:"mt-3",children:[n.jsx("p",{children:n.jsx("strong",{children:"HÃ¬nh áº£nh:"})}),n.jsx("img",{src:e.imageUrl,alt:"Preview",className:"mt-2 w-32 h-20 object-cover rounded-lg"})]})]})]})]})};function xr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const ct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Re(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Rt(e){return"nodeType"in e}function H(e){var t,r;return e?Re(e)?e:Rt(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function It(e){const{Document:t}=H(e);return e instanceof t}function He(e){return Re(e)?!1:e instanceof H(e).HTMLElement}function hn(e){return e instanceof H(e).SVGElement}function Ie(e){return e?Re(e)?e.document:Rt(e)?It(e)?e:He(e)||hn(e)?e.ownerDocument:document:document:document}const oe=ct?u.useLayoutEffect:u.useEffect;function Et(e){const t=u.useRef(e);return oe(()=>{t.current=e}),u.useCallback(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function br(){const e=u.useRef(null),t=u.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),r=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Ge(e,t){t===void 0&&(t=[e]);const r=u.useRef(e);return oe(()=>{r.current!==e&&(r.current=e)},t),r}function Ve(e,t){const r=u.useRef();return u.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...t])}function at(e){const t=Et(e),r=u.useRef(null),s=u.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,s]}function Ct(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let vt={};function Je(e,t){return u.useMemo(()=>{if(t)return t;const r=vt[e]==null?0:vt[e]+1;return vt[e]=r,e+"-"+r},[e,t])}function gn(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,c)=>{const d=Object.entries(c);for(const[l,p]of d){const f=i[l];f!=null&&(i[l]=f+e*p)}return i},{...t})}}const Te=gn(1),ze=gn(-1);function vr(e){return"clientX"in e&&"clientY"in e}function Mt(e){if(!e)return!1;const{KeyboardEvent:t}=H(e.target);return t&&e instanceof t}function yr(e){if(!e)return!1;const{TouchEvent:t}=H(e.target);return t&&e instanceof t}function St(e){if(yr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return vr(e)?{x:e.clientX,y:e.clientY}:null}const Ke=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Ke.Translate.toString(e),Ke.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),qt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function wr(e){return e.matches(qt)?e:e.querySelector(qt)}const jr={display:"none"};function Nr(e){let{id:t,value:r}=e;return W.createElement("div",{id:t,style:jr},r)}function Cr(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return W.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},r)}function Sr(){const[e,t]=u.useState("");return{announce:u.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const pn=u.createContext(null);function kr(e){const t=u.useContext(pn);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Ar(){const[e]=u.useState(()=>new Set),t=u.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[u.useCallback(s=>{let{type:a,event:i}=s;e.forEach(c=>{var d;return(d=c[a])==null?void 0:d.call(c,i)})},[e]),t]}const Dr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Tr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Rr(e){let{announcements:t=Tr,container:r,hiddenTextDescribedById:s,screenReaderInstructions:a=Dr}=e;const{announce:i,announcement:c}=Sr(),d=Je("DndLiveRegion"),[l,p]=u.useState(!1);if(u.useEffect(()=>{p(!0)},[]),kr(u.useMemo(()=>({onDragStart(o){let{active:h}=o;i(t.onDragStart({active:h}))},onDragMove(o){let{active:h,over:g}=o;t.onDragMove&&i(t.onDragMove({active:h,over:g}))},onDragOver(o){let{active:h,over:g}=o;i(t.onDragOver({active:h,over:g}))},onDragEnd(o){let{active:h,over:g}=o;i(t.onDragEnd({active:h,over:g}))},onDragCancel(o){let{active:h,over:g}=o;i(t.onDragCancel({active:h,over:g}))}}),[i,t])),!l)return null;const f=W.createElement(W.Fragment,null,W.createElement(Nr,{id:s,value:a.draggable}),W.createElement(Cr,{id:d,announcement:c}));return r?Ue.createPortal(f,r):f}var F;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function it(){}function Yt(e,t){return u.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Ir(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return u.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const te=Object.freeze({x:0,y:0});function fn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mn(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return r-s}function Er(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function Zt(e){let{left:t,top:r,height:s,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+s},{x:t+a,y:r+s}]}function xn(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function en(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const Mr=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=en(t,t.left,t.top),i=[];for(const c of s){const{id:d}=c,l=r.get(d);if(l){const p=fn(en(l),a);i.push({id:d,data:{droppableContainer:c,value:p}})}}return i.sort(mn)},Or=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=Zt(t),i=[];for(const c of s){const{id:d}=c,l=r.get(d);if(l){const p=Zt(l),f=a.reduce((h,g,y)=>h+fn(p[y],g),0),o=Number((f/4).toFixed(4));i.push({id:d,data:{droppableContainer:c,value:o}})}}return i.sort(mn)};function Lr(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),c=a-s,d=i-r;if(s<a&&r<i){const l=t.width*t.height,p=e.width*e.height,f=c*d,o=f/(l+p-f);return Number(o.toFixed(4))}return 0}const Pr=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=[];for(const i of s){const{id:c}=i,d=r.get(c);if(d){const l=Lr(d,t);l>0&&a.push({id:c,data:{droppableContainer:i,value:l}})}}return a.sort(Er)};function $r(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function bn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:te}function Br(e){return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return a.reduce((c,d)=>({...c,top:c.top+e*d.y,bottom:c.bottom+e*d.y,left:c.left+e*d.x,right:c.right+e*d.x}),{...r})}}const Ur=Br(1);function Fr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function _r(e,t,r){const s=Fr(t);if(!s)return e;const{scaleX:a,scaleY:i,x:c,y:d}=s,l=e.left-c-(1-a)*parseFloat(r),p=e.top-d-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),f=a?e.width/a:e.width,o=i?e.height/i:e.height;return{width:f,height:o,top:p,right:l+f,bottom:p+o,left:l}}const Qr={ignoreTransform:!1};function Ee(e,t){t===void 0&&(t=Qr);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:f}=H(e).getComputedStyle(e);p&&(r=_r(r,p,f))}const{top:s,left:a,width:i,height:c,bottom:d,right:l}=r;return{top:s,left:a,width:i,height:c,bottom:d,right:l}}function tn(e){return Ee(e,{ignoreTransform:!0})}function Gr(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function zr(e,t){return t===void 0&&(t=H(e).getComputedStyle(e)),t.position==="fixed"}function Kr(e,t){t===void 0&&(t=H(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function dt(e,t){const r=[];function s(a){if(t!=null&&r.length>=t||!a)return r;if(It(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!He(a)||hn(a)||r.includes(a))return r;const i=H(e).getComputedStyle(a);return a!==e&&Kr(a,i)&&r.push(a),zr(a,i)?r:s(a.parentNode)}return e?s(e):r}function vn(e){const[t]=dt(e,1);return t??null}function yt(e){return!ct||!e?null:Re(e)?e:Rt(e)?It(e)||e===Ie(e).scrollingElement?window:He(e)?e:null:null}function yn(e){return Re(e)?e.scrollX:e.scrollLeft}function wn(e){return Re(e)?e.scrollY:e.scrollTop}function kt(e){return{x:yn(e),y:wn(e)}}var _;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(_||(_={}));function jn(e){return!ct||!e?!1:e===document.scrollingElement}function Nn(e){const t={x:0,y:0},r=jn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,c=e.scrollTop>=s.y,d=e.scrollLeft>=s.x;return{isTop:a,isLeft:i,isBottom:c,isRight:d,maxScroll:s,minScroll:t}}const Wr={x:.2,y:.2};function Hr(e,t,r,s,a){let{top:i,left:c,right:d,bottom:l}=r;s===void 0&&(s=10),a===void 0&&(a=Wr);const{isTop:p,isBottom:f,isLeft:o,isRight:h}=Nn(e),g={x:0,y:0},y={x:0,y:0},m={height:t.height*a.y,width:t.width*a.x};return!p&&i<=t.top+m.height?(g.y=_.Backward,y.y=s*Math.abs((t.top+m.height-i)/m.height)):!f&&l>=t.bottom-m.height&&(g.y=_.Forward,y.y=s*Math.abs((t.bottom-m.height-l)/m.height)),!h&&d>=t.right-m.width?(g.x=_.Forward,y.x=s*Math.abs((t.right-m.width-d)/m.width)):!o&&c<=t.left+m.width&&(g.x=_.Backward,y.x=s*Math.abs((t.left+m.width-c)/m.width)),{direction:g,speed:y}}function Vr(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:c}=window;return{top:0,left:0,right:i,bottom:c,width:i,height:c}}const{top:t,left:r,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Cn(e){return e.reduce((t,r)=>Te(t,kt(r)),te)}function Jr(e){return e.reduce((t,r)=>t+yn(r),0)}function Xr(e){return e.reduce((t,r)=>t+wn(r),0)}function qr(e,t){if(t===void 0&&(t=Ee),!e)return;const{top:r,left:s,bottom:a,right:i}=t(e);vn(e)&&(a<=0||i<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Yr=[["x",["left","right"],Jr],["y",["top","bottom"],Xr]];class Ot{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=dt(r),a=Cn(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,c,d]of Yr)for(const l of c)Object.defineProperty(this,l,{get:()=>{const p=d(s),f=a[i]-p;return this.rect[l]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Fe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=t}add(t,r,s){var a;(a=this.target)==null||a.addEventListener(t,r,s),this.listeners.push([t,r,s])}}function Zr(e){const{EventTarget:t}=H(e);return e instanceof t?e:Ie(e)}function wt(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t?s>t.y:!1}var ee;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ee||(ee={}));function nn(e){e.preventDefault()}function es(e){e.stopPropagation()}var E;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(E||(E={}));const Sn={start:[E.Space,E.Enter],cancel:[E.Esc],end:[E.Space,E.Enter,E.Tab]},ts=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case E.Right:return{...r,x:r.x+25};case E.Left:return{...r,x:r.x-25};case E.Down:return{...r,y:r.y+25};case E.Up:return{...r,y:r.y-25}}};class Lt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Fe(Ie(r)),this.windowListeners=new Fe(H(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,s=t.node.current;s&&qr(s),r(te)}handleKeyDown(t){if(Mt(t)){const{active:r,context:s,options:a}=this.props,{keyboardCodes:i=Sn,coordinateGetter:c=ts,scrollBehavior:d="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:p}=s.current,f=p?{x:p.left,y:p.top}:te;this.referenceCoordinates||(this.referenceCoordinates=f);const o=c(t,{active:r,context:s.current,currentCoordinates:f});if(o){const h=ze(o,f),g={x:0,y:0},{scrollableAncestors:y}=s.current;for(const m of y){const b=t.code,{isTop:j,isRight:N,isLeft:S,isBottom:T,maxScroll:k,minScroll:R}=Nn(m),A=Vr(m),D={x:Math.min(b===E.Right?A.right-A.width/2:A.right,Math.max(b===E.Right?A.left:A.left+A.width/2,o.x)),y:Math.min(b===E.Down?A.bottom-A.height/2:A.bottom,Math.max(b===E.Down?A.top:A.top+A.height/2,o.y))},x=b===E.Right&&!N||b===E.Left&&!S,I=b===E.Down&&!T||b===E.Up&&!j;if(x&&D.x!==o.x){const O=m.scrollLeft+h.x,w=b===E.Right&&O<=k.x||b===E.Left&&O>=R.x;if(w&&!h.y){m.scrollTo({left:O,behavior:d});return}w?g.x=m.scrollLeft-O:g.x=b===E.Right?m.scrollLeft-k.x:m.scrollLeft-R.x,g.x&&m.scrollBy({left:-g.x,behavior:d});break}else if(I&&D.y!==o.y){const O=m.scrollTop+h.y,w=b===E.Down&&O<=k.y||b===E.Up&&O>=R.y;if(w&&!h.x){m.scrollTo({top:O,behavior:d});return}w?g.y=m.scrollTop-O:g.y=b===E.Down?m.scrollTop-k.y:m.scrollTop-R.y,g.y&&m.scrollBy({top:-g.y,behavior:d});break}}this.handleMove(t,Te(ze(o,this.referenceCoordinates),g))}}}handleMove(t,r){const{onMove:s}=this.props;t.preventDefault(),s(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Lt.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=Sn,onActivation:a}=t,{active:i}=r;const{code:c}=e.nativeEvent;if(s.start.includes(c)){const d=i.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function rn(e){return!!(e&&"distance"in e)}function sn(e){return!!(e&&"delay"in e)}class Pt{constructor(t,r,s){var a;s===void 0&&(s=Zr(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:c}=i;this.props=t,this.events=r,this.document=Ie(c),this.documentListeners=new Fe(this.document),this.listeners=new Fe(s),this.windowListeners=new Fe(H(c)),this.initialCoordinates=(a=St(i))!=null?a:te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.DragStart,nn),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),this.windowListeners.add(ee.ContextMenu,nn),this.documentListeners.add(ee.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sn(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(rn(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(ee.Click,es,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ee.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:s,initialCoordinates:a,props:i}=this,{onMove:c,options:{activationConstraint:d}}=i;if(!a)return;const l=(r=St(t))!=null?r:te,p=ze(a,l);if(!s&&d){if(rn(d)){if(d.tolerance!=null&&wt(p,d.tolerance))return this.handleCancel();if(wt(p,d.distance))return this.handleStart()}if(sn(d)&&wt(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}t.cancelable&&t.preventDefault(),c(l)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===E.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ns={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class $t extends Pt{constructor(t){const{event:r}=t,s=Ie(r.target);super(t,ns,s)}}$t.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!r.isPrimary||r.button!==0?!1:(s==null||s({event:r}),!0)}}];const rs={move:{name:"mousemove"},end:{name:"mouseup"}};var At;(function(e){e[e.RightClick=2]="RightClick"})(At||(At={}));class ss extends Pt{constructor(t){super(t,rs,Ie(t.event.target))}}ss.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button===At.RightClick?!1:(s==null||s({event:r}),!0)}}];const jt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class as extends Pt{constructor(t){super(t,jt)}static setup(){return window.addEventListener(jt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(jt.move.name,t)};function t(){}}}as.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:a}=r;return a.length>1?!1:(s==null||s({event:r}),!0)}}];var _e;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_e||(_e={}));var ot;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ot||(ot={}));function is(e){let{acceleration:t,activator:r=_e.Pointer,canScroll:s,draggingRect:a,enabled:i,interval:c=5,order:d=ot.TreeOrder,pointerCoordinates:l,scrollableAncestors:p,scrollableAncestorRects:f,delta:o,threshold:h}=e;const g=ls({delta:o,disabled:!i}),[y,m]=br(),b=u.useRef({x:0,y:0}),j=u.useRef({x:0,y:0}),N=u.useMemo(()=>{switch(r){case _e.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case _e.DraggableRect:return a}},[r,a,l]),S=u.useRef(null),T=u.useCallback(()=>{const R=S.current;if(!R)return;const A=b.current.x*j.current.x,D=b.current.y*j.current.y;R.scrollBy(A,D)},[]),k=u.useMemo(()=>d===ot.TreeOrder?[...p].reverse():p,[d,p]);u.useEffect(()=>{if(!i||!p.length||!N){m();return}for(const R of k){if((s==null?void 0:s(R))===!1)continue;const A=p.indexOf(R),D=f[A];if(!D)continue;const{direction:x,speed:I}=Hr(R,D,N,t,h);for(const O of["x","y"])g[O][x[O]]||(I[O]=0,x[O]=0);if(I.x>0||I.y>0){m(),S.current=R,y(T,c),b.current=I,j.current=x;return}}b.current={x:0,y:0},j.current={x:0,y:0},m()},[t,T,s,m,i,c,JSON.stringify(N),JSON.stringify(g),y,p,k,f,JSON.stringify(h)])}const os={x:{[_.Backward]:!1,[_.Forward]:!1},y:{[_.Backward]:!1,[_.Forward]:!1}};function ls(e){let{delta:t,disabled:r}=e;const s=Ct(t);return Ve(a=>{if(r||!s||!a)return os;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[_.Backward]:a.x[_.Backward]||i.x===-1,[_.Forward]:a.x[_.Forward]||i.x===1},y:{[_.Backward]:a.y[_.Backward]||i.y===-1,[_.Forward]:a.y[_.Forward]||i.y===1}}},[r,t,s])}function cs(e,t){const r=t!=null?e.get(t):void 0,s=r?r.node.current:null;return Ve(a=>{var i;return t==null?null:(i=s??a)!=null?i:null},[s,t])}function ds(e,t){return u.useMemo(()=>e.reduce((r,s)=>{const{sensor:a}=s,i=a.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,s)}));return[...r,...i]},[]),[e,t])}var We;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(We||(We={}));var Dt;(function(e){e.Optimized="optimized"})(Dt||(Dt={}));const an=new Map;function us(e,t){let{dragging:r,dependencies:s,config:a}=t;const[i,c]=u.useState(null),{frequency:d,measure:l,strategy:p}=a,f=u.useRef(e),o=b(),h=Ge(o),g=u.useCallback(function(j){j===void 0&&(j=[]),!h.current&&c(N=>N===null?j:N.concat(j.filter(S=>!N.includes(S))))},[h]),y=u.useRef(null),m=Ve(j=>{if(o&&!r)return an;if(!j||j===an||f.current!==e||i!=null){const N=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){N.set(S.id,S.rect.current);continue}const T=S.node.current,k=T?new Ot(l(T),T):null;S.rect.current=k,k&&N.set(S.id,k)}return N}return j},[e,i,r,o,l]);return u.useEffect(()=>{f.current=e},[e]),u.useEffect(()=>{o||g()},[r,o]),u.useEffect(()=>{i&&i.length>0&&c(null)},[JSON.stringify(i)]),u.useEffect(()=>{o||typeof d!="number"||y.current!==null||(y.current=setTimeout(()=>{g(),y.current=null},d))},[d,o,g,...s]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:i!=null};function b(){switch(p){case We.Always:return!1;case We.BeforeDragging:return r;default:return!r}}}function kn(e,t){return Ve(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function hs(e,t){return kn(e,t)}function gs(e){let{callback:t,disabled:r}=e;const s=Et(t),a=u.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,r]);return u.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function ut(e){let{callback:t,disabled:r}=e;const s=Et(t),a=u.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[r]);return u.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function ps(e){return new Ot(Ee(e),e)}function on(e,t,r){t===void 0&&(t=ps);const[s,a]=u.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=l??r)!=null?p:null}const f=t(e);return JSON.stringify(l)===JSON.stringify(f)?l:f})}const c=gs({callback(l){if(e)for(const p of l){const{type:f,target:o}=p;if(f==="childList"&&o instanceof HTMLElement&&o.contains(e)){i();break}}}}),d=ut({callback:i});return oe(()=>{i(),e?(d==null||d.observe(e),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(d==null||d.disconnect(),c==null||c.disconnect())},[e]),s}function fs(e){const t=kn(e);return bn(e,t)}const ln=[];function ms(e){const t=u.useRef(e),r=Ve(s=>e?s&&s!==ln&&e&&t.current&&e.parentNode===t.current.parentNode?s:dt(e):ln,[e]);return u.useEffect(()=>{t.current=e},[e]),r}function xs(e){const[t,r]=u.useState(null),s=u.useRef(e),a=u.useCallback(i=>{const c=yt(i.target);c&&r(d=>d?(d.set(c,kt(c)),new Map(d)):null)},[]);return u.useEffect(()=>{const i=s.current;if(e!==i){c(i);const d=e.map(l=>{const p=yt(l);return p?(p.addEventListener("scroll",a,{passive:!0}),[p,kt(p)]):null}).filter(l=>l!=null);r(d.length?new Map(d):null),s.current=e}return()=>{c(e),c(i)};function c(d){d.forEach(l=>{const p=yt(l);p==null||p.removeEventListener("scroll",a)})}},[a,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,c)=>Te(i,c),te):Cn(e):te,[e,t])}function cn(e,t){t===void 0&&(t=[]);const r=u.useRef(null);return u.useEffect(()=>{r.current=null},t),u.useEffect(()=>{const s=e!==te;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?ze(e,r.current):te}function bs(e){u.useEffect(()=>{if(!ct)return;const t=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function vs(e,t){return u.useMemo(()=>e.reduce((r,s)=>{let{eventName:a,handler:i}=s;return r[a]=c=>{i(c,t)},r},{}),[e,t])}function An(e){return u.useMemo(()=>e?Gr(e):null,[e])}const dn=[];function ys(e,t){t===void 0&&(t=Ee);const[r]=e,s=An(r?H(r):null),[a,i]=u.useState(dn);function c(){i(()=>e.length?e.map(l=>jn(l)?s:new Ot(t(l),l)):dn)}const d=ut({callback:c});return oe(()=>{d==null||d.disconnect(),c(),e.forEach(l=>d==null?void 0:d.observe(l))},[e]),a}function ws(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return He(t)?t:e}function js(e){let{measure:t}=e;const[r,s]=u.useState(null),a=u.useCallback(p=>{for(const{target:f}of p)if(He(f)){s(o=>{const h=t(f);return o?{...o,width:h.width,height:h.height}:h});break}},[t]),i=ut({callback:a}),c=u.useCallback(p=>{const f=ws(p);i==null||i.disconnect(),f&&(i==null||i.observe(f)),s(f?t(f):null)},[t,i]),[d,l]=at(c);return u.useMemo(()=>({nodeRef:d,rect:r,setRef:l}),[r,d,l])}const Ns=[{sensor:$t,options:{}},{sensor:Lt,options:{}}],Cs={current:{}},st={draggable:{measure:tn},droppable:{measure:tn,strategy:We.WhileDragging,frequency:Dt.Optimized},dragOverlay:{measure:Ee}};class Qe extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,s;return(r=(s=this.get(t))==null?void 0:s.node.current)!=null?r:void 0}}const Ss={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Qe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:it},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:st,measureDroppableContainers:it,windowRect:null,measuringScheduled:!1},ks={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:it,draggableNodes:new Map,over:null,measureDroppableContainers:it},ht=u.createContext(ks),Dn=u.createContext(Ss);function As(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Qe}}}function Ds(e,t){switch(t.type){case F.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case F.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case F.DragEnd:case F.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case F.RegisterDroppable:{const{element:r}=t,{id:s}=r,a=new Qe(e.droppable.containers);return a.set(s,r),{...e,droppable:{...e.droppable,containers:a}}}case F.SetDroppableDisabled:{const{id:r,key:s,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||s!==i.key)return e;const c=new Qe(e.droppable.containers);return c.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:c}}}case F.UnregisterDroppable:{const{id:r,key:s}=t,a=e.droppable.containers.get(r);if(!a||s!==a.key)return e;const i=new Qe(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Ts(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:a}=u.useContext(ht),i=Ct(s),c=Ct(r==null?void 0:r.id);return u.useEffect(()=>{if(!t&&!s&&i&&c!=null){if(!Mt(i)||document.activeElement===i.target)return;const d=a.get(c);if(!d)return;const{activatorNode:l,node:p}=d;if(!l.current&&!p.current)return;requestAnimationFrame(()=>{for(const f of[l.current,p.current]){if(!f)continue;const o=wr(f);if(o){o.focus();break}}})}},[s,t,a,c,i]),null}function Rs(e,t){let{transform:r,...s}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...s}),r):r}function Is(e){return u.useMemo(()=>({draggable:{...st.draggable,...e==null?void 0:e.draggable},droppable:{...st.droppable,...e==null?void 0:e.droppable},dragOverlay:{...st.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Es(e){let{activeNode:t,measure:r,initialRect:s,config:a=!0}=e;const i=u.useRef(!1),{x:c,y:d}=typeof a=="boolean"?{x:a,y:a}:a;oe(()=>{if(!c&&!d||!t){i.current=!1;return}if(i.current||!s)return;const p=t==null?void 0:t.node.current;if(!p||p.isConnected===!1)return;const f=r(p),o=bn(f,s);if(c||(o.x=0),d||(o.y=0),i.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){const h=vn(p);h&&h.scrollBy({top:o.y,left:o.x})}},[t,c,d,s,r])}const Tn=u.createContext({...te,scaleX:1,scaleY:1});var be;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(be||(be={}));const Ms=u.memo(function(t){var r,s,a,i;let{id:c,accessibility:d,autoScroll:l=!0,children:p,sensors:f=Ns,collisionDetection:o=Pr,measuring:h,modifiers:g,...y}=t;const m=u.useReducer(Ds,void 0,As),[b,j]=m,[N,S]=Ar(),[T,k]=u.useState(be.Uninitialized),R=T===be.Initialized,{draggable:{active:A,nodes:D,translate:x},droppable:{containers:I}}=b,O=A!=null?D.get(A):null,w=u.useRef({initial:null,translated:null}),v=u.useMemo(()=>{var K;return A!=null?{id:A,data:(K=O==null?void 0:O.data)!=null?K:Cs,rect:w}:null},[A,O]),C=u.useRef(null),[B,$]=u.useState(null),[M,Q]=u.useState(null),U=Ge(y,Object.values(y)),ne=Je("DndDescribedBy",c),je=u.useMemo(()=>I.getEnabled(),[I]),z=Is(h),{droppableRects:le,measureDroppableContainers:ve,measuringScheduled:Me}=us(je,{dragging:R,dependencies:[x.x,x.y],config:z.droppable}),q=cs(D,A),Xe=u.useMemo(()=>M?St(M):null,[M]),he=Qn(),ce=hs(q,z.draggable.measure);Es({activeNode:A!=null?D.get(A):null,config:he.layoutShiftCompensation,initialRect:ce,measure:z.draggable.measure});const P=on(q,z.draggable.measure,ce),Oe=on(q?q.parentElement:null),re=u.useRef({activatorEvent:null,active:null,activeNode:q,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ne=I.getNodeFor((r=re.current.over)==null?void 0:r.id),de=js({measure:z.dragOverlay.measure}),Ce=(s=de.nodeRef.current)!=null?s:q,Se=R?(a=de.rect)!=null?a:P:null,Ut=!!(de.nodeRef.current&&de.rect),Ft=fs(Ut?null:P),gt=An(Ce?H(Ce):null),ge=ms(R?Ne??q:null),qe=ys(ge),Ye=Rs(g,{transform:{x:x.x-Ft.x,y:x.y-Ft.y,scaleX:1,scaleY:1},activatorEvent:M,active:v,activeNodeRect:P,containerNodeRect:Oe,draggingNodeRect:Se,over:re.current.over,overlayNodeRect:de.rect,scrollableAncestors:ge,scrollableAncestorRects:qe,windowRect:gt}),_t=Xe?Te(Xe,x):null,Qt=xs(ge),Ln=cn(Qt),Pn=cn(Qt,[P]),ke=Te(Ye,Ln),Ae=Se?Ur(Se,Ye):null,Le=v&&Ae?o({active:v,collisionRect:Ae,droppableRects:le,droppableContainers:je,pointerCoordinates:_t}):null,Gt=xn(Le,"id"),[pe,zt]=u.useState(null),$n=Ut?Ye:Te(Ye,Pn),Bn=$r($n,(i=pe==null?void 0:pe.rect)!=null?i:null,P),pt=u.useRef(null),Kt=u.useCallback((K,V)=>{let{sensor:J,options:fe}=V;if(C.current==null)return;const Y=D.get(C.current);if(!Y)return;const X=K.nativeEvent,se=new J({active:C.current,activeNode:Y,event:X,options:fe,context:re,onAbort(G){if(!D.get(G))return;const{onDragAbort:ae}=U.current,ue={id:G};ae==null||ae(ue),N({type:"onDragAbort",event:ue})},onPending(G,me,ae,ue){if(!D.get(G))return;const{onDragPending:$e}=U.current,xe={id:G,constraint:me,initialCoordinates:ae,offset:ue};$e==null||$e(xe),N({type:"onDragPending",event:xe})},onStart(G){const me=C.current;if(me==null)return;const ae=D.get(me);if(!ae)return;const{onDragStart:ue}=U.current,Pe={activatorEvent:X,active:{id:me,data:ae.data,rect:w}};Ue.unstable_batchedUpdates(()=>{ue==null||ue(Pe),k(be.Initializing),j({type:F.DragStart,initialCoordinates:G,active:me}),N({type:"onDragStart",event:Pe}),$(pt.current),Q(X)})},onMove(G){j({type:F.DragMove,coordinates:G})},onEnd:De(F.DragEnd),onCancel:De(F.DragCancel)});pt.current=se;function De(G){return async function(){const{active:ae,collisions:ue,over:Pe,scrollAdjustedTranslate:$e}=re.current;let xe=null;if(ae&&$e){const{cancelDrop:Be}=U.current;xe={activatorEvent:X,active:ae,collisions:ue,delta:$e,over:Pe},G===F.DragEnd&&typeof Be=="function"&&await Promise.resolve(Be(xe))&&(G=F.DragCancel)}C.current=null,Ue.unstable_batchedUpdates(()=>{j({type:G}),k(be.Uninitialized),zt(null),$(null),Q(null),pt.current=null;const Be=G===F.DragEnd?"onDragEnd":"onDragCancel";if(xe){const ft=U.current[Be];ft==null||ft(xe),N({type:Be,event:xe})}})}}},[D]),Un=u.useCallback((K,V)=>(J,fe)=>{const Y=J.nativeEvent,X=D.get(fe);if(C.current!==null||!X||Y.dndKit||Y.defaultPrevented)return;const se={active:X};K(J,V.options,se)===!0&&(Y.dndKit={capturedBy:V.sensor},C.current=fe,Kt(J,V))},[D,Kt]),Wt=ds(f,Un);bs(f),oe(()=>{P&&T===be.Initializing&&k(be.Initialized)},[P,T]),u.useEffect(()=>{const{onDragMove:K}=U.current,{active:V,activatorEvent:J,collisions:fe,over:Y}=re.current;if(!V||!J)return;const X={active:V,activatorEvent:J,collisions:fe,delta:{x:ke.x,y:ke.y},over:Y};Ue.unstable_batchedUpdates(()=>{K==null||K(X),N({type:"onDragMove",event:X})})},[ke.x,ke.y]),u.useEffect(()=>{const{active:K,activatorEvent:V,collisions:J,droppableContainers:fe,scrollAdjustedTranslate:Y}=re.current;if(!K||C.current==null||!V||!Y)return;const{onDragOver:X}=U.current,se=fe.get(Gt),De=se&&se.rect.current?{id:se.id,rect:se.rect.current,data:se.data,disabled:se.disabled}:null,G={active:K,activatorEvent:V,collisions:J,delta:{x:Y.x,y:Y.y},over:De};Ue.unstable_batchedUpdates(()=>{zt(De),X==null||X(G),N({type:"onDragOver",event:G})})},[Gt]),oe(()=>{re.current={activatorEvent:M,active:v,activeNode:q,collisionRect:Ae,collisions:Le,droppableRects:le,draggableNodes:D,draggingNode:Ce,draggingNodeRect:Se,droppableContainers:I,over:pe,scrollableAncestors:ge,scrollAdjustedTranslate:ke},w.current={initial:Se,translated:Ae}},[v,q,Le,Ae,D,Ce,Se,le,I,pe,ge,ke]),is({...he,delta:x,draggingRect:Ae,pointerCoordinates:_t,scrollableAncestors:ge,scrollableAncestorRects:qe});const Fn=u.useMemo(()=>({active:v,activeNode:q,activeNodeRect:P,activatorEvent:M,collisions:Le,containerNodeRect:Oe,dragOverlay:de,draggableNodes:D,droppableContainers:I,droppableRects:le,over:pe,measureDroppableContainers:ve,scrollableAncestors:ge,scrollableAncestorRects:qe,measuringConfiguration:z,measuringScheduled:Me,windowRect:gt}),[v,q,P,M,Le,Oe,de,D,I,le,pe,ve,ge,qe,z,Me,gt]),_n=u.useMemo(()=>({activatorEvent:M,activators:Wt,active:v,activeNodeRect:P,ariaDescribedById:{draggable:ne},dispatch:j,draggableNodes:D,over:pe,measureDroppableContainers:ve}),[M,Wt,v,P,j,ne,D,pe,ve]);return W.createElement(pn.Provider,{value:S},W.createElement(ht.Provider,{value:_n},W.createElement(Dn.Provider,{value:Fn},W.createElement(Tn.Provider,{value:Bn},p)),W.createElement(Ts,{disabled:(d==null?void 0:d.restoreFocus)===!1})),W.createElement(Rr,{...d,hiddenTextDescribedById:ne}));function Qn(){const K=(B==null?void 0:B.autoScrollEnabled)===!1,V=typeof l=="object"?l.enabled===!1:l===!1,J=R&&!K&&!V;return typeof l=="object"?{...l,enabled:J}:{enabled:J}}}),Os=u.createContext(null),un="button",Ls="Draggable";function Ps(e){let{id:t,data:r,disabled:s=!1,attributes:a}=e;const i=Je(Ls),{activators:c,activatorEvent:d,active:l,activeNodeRect:p,ariaDescribedById:f,draggableNodes:o,over:h}=u.useContext(ht),{role:g=un,roleDescription:y="draggable",tabIndex:m=0}=a??{},b=(l==null?void 0:l.id)===t,j=u.useContext(b?Tn:Os),[N,S]=at(),[T,k]=at(),R=vs(c,t),A=Ge(r);oe(()=>(o.set(t,{id:t,key:i,node:N,activatorNode:T,data:A}),()=>{const x=o.get(t);x&&x.key===i&&o.delete(t)}),[o,t]);const D=u.useMemo(()=>({role:g,tabIndex:m,"aria-disabled":s,"aria-pressed":b&&g===un?!0:void 0,"aria-roledescription":y,"aria-describedby":f.draggable}),[s,g,m,b,y,f.draggable]);return{active:l,activatorEvent:d,activeNodeRect:p,attributes:D,isDragging:b,listeners:s?void 0:R,node:N,over:h,setNodeRef:S,setActivatorNodeRef:k,transform:j}}function $s(){return u.useContext(Dn)}const Bs="Droppable",Us={timeout:25};function Fs(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:a}=e;const i=Je(Bs),{active:c,dispatch:d,over:l,measureDroppableContainers:p}=u.useContext(ht),f=u.useRef({disabled:r}),o=u.useRef(!1),h=u.useRef(null),g=u.useRef(null),{disabled:y,updateMeasurementsFor:m,timeout:b}={...Us,...a},j=Ge(m??s),N=u.useCallback(()=>{if(!o.current){o.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{p(Array.isArray(j.current)?j.current:[j.current]),g.current=null},b)},[b]),S=ut({callback:N,disabled:y||!c}),T=u.useCallback((D,x)=>{S&&(x&&(S.unobserve(x),o.current=!1),D&&S.observe(D))},[S]),[k,R]=at(T),A=Ge(t);return u.useEffect(()=>{!S||!k.current||(S.disconnect(),o.current=!1,S.observe(k.current))},[k,S]),u.useEffect(()=>(d({type:F.RegisterDroppable,element:{id:s,key:i,disabled:r,node:k,rect:h,data:A}}),()=>d({type:F.UnregisterDroppable,key:i,id:s})),[s]),u.useEffect(()=>{r!==f.current.disabled&&(d({type:F.SetDroppableDisabled,id:s,key:i,disabled:r}),f.current.disabled=r)},[s,i,r,d]),{active:c,rect:h,isOver:(l==null?void 0:l.id)===s,node:k,over:l,setNodeRef:R}}function Bt(e,t,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(t,1)[0]),s}function _s(e,t){return e.reduce((r,s,a)=>{const i=t.get(s);return i&&(r[a]=i),r},Array(e.length))}function tt(e){return e!==null&&e>=0}function Qs(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Gs(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Rn=e=>{let{rects:t,activeIndex:r,overIndex:s,index:a}=e;const i=Bt(t,s,r),c=t[a],d=i[a];return!d||!c?null:{x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height}},nt={scaleX:1,scaleY:1},zs=e=>{var t;let{activeIndex:r,activeNodeRect:s,index:a,rects:i,overIndex:c}=e;const d=(t=i[r])!=null?t:s;if(!d)return null;if(a===r){const p=i[c];return p?{x:0,y:r<c?p.top+p.height-(d.top+d.height):p.top-d.top,...nt}:null}const l=Ks(i,a,r);return a>r&&a<=c?{x:0,y:-d.height-l,...nt}:a<r&&a>=c?{x:0,y:d.height+l,...nt}:{x:0,y:0,...nt}};function Ks(e,t,r){const s=e[t],a=e[t-1],i=e[t+1];return s?r<t?a?s.top-(a.top+a.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const In="Sortable",En=W.createContext({activeIndex:-1,containerId:In,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Rn,disabled:{draggable:!1,droppable:!1}});function Ws(e){let{children:t,id:r,items:s,strategy:a=Rn,disabled:i=!1}=e;const{active:c,dragOverlay:d,droppableRects:l,over:p,measureDroppableContainers:f}=$s(),o=Je(In,r),h=d.rect!==null,g=u.useMemo(()=>s.map(R=>typeof R=="object"&&"id"in R?R.id:R),[s]),y=c!=null,m=c?g.indexOf(c.id):-1,b=p?g.indexOf(p.id):-1,j=u.useRef(g),N=!Qs(g,j.current),S=b!==-1&&m===-1||N,T=Gs(i);oe(()=>{N&&y&&f(g)},[N,g,y,f]),u.useEffect(()=>{j.current=g},[g]);const k=u.useMemo(()=>({activeIndex:m,containerId:o,disabled:T,disableTransforms:S,items:g,overIndex:b,useDragOverlay:h,sortedRects:_s(g,l),strategy:a}),[m,o,T.draggable,T.droppable,S,g,b,l,h,a]);return W.createElement(En.Provider,{value:k},t)}const Hs=e=>{let{id:t,items:r,activeIndex:s,overIndex:a}=e;return Bt(r,s,a).indexOf(t)},Vs=e=>{let{containerId:t,isSorting:r,wasDragging:s,index:a,items:i,newIndex:c,previousItems:d,previousContainerId:l,transition:p}=e;return!p||!s||d!==i&&a===c?!1:r?!0:c!==a&&t===l},Js={duration:200,easing:"ease"},Mn="transform",Xs=Ke.Transition.toString({property:Mn,duration:0,easing:"linear"}),qs={roleDescription:"sortable"};function Ys(e){let{disabled:t,index:r,node:s,rect:a}=e;const[i,c]=u.useState(null),d=u.useRef(r);return oe(()=>{if(!t&&r!==d.current&&s.current){const l=a.current;if(l){const p=Ee(s.current,{ignoreTransform:!0}),f={x:l.left-p.left,y:l.top-p.top,scaleX:l.width/p.width,scaleY:l.height/p.height};(f.x||f.y)&&c(f)}}r!==d.current&&(d.current=r)},[t,r,s,a]),u.useEffect(()=>{i&&c(null)},[i]),i}function Zs(e){let{animateLayoutChanges:t=Vs,attributes:r,disabled:s,data:a,getNewIndex:i=Hs,id:c,strategy:d,resizeObserverConfig:l,transition:p=Js}=e;const{items:f,containerId:o,activeIndex:h,disabled:g,disableTransforms:y,sortedRects:m,overIndex:b,useDragOverlay:j,strategy:N}=u.useContext(En),S=ea(s,g),T=f.indexOf(c),k=u.useMemo(()=>({sortable:{containerId:o,index:T,items:f},...a}),[o,a,T,f]),R=u.useMemo(()=>f.slice(f.indexOf(c)),[f,c]),{rect:A,node:D,isOver:x,setNodeRef:I}=Fs({id:c,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...l}}),{active:O,activatorEvent:w,activeNodeRect:v,attributes:C,setNodeRef:B,listeners:$,isDragging:M,over:Q,setActivatorNodeRef:U,transform:ne}=Ps({id:c,data:k,attributes:{...qs,...r},disabled:S.draggable}),je=xr(I,B),z=!!O,le=z&&!y&&tt(h)&&tt(b),ve=!j&&M,Me=ve&&le?ne:null,Xe=le?Me??(d??N)({rects:m,activeNodeRect:v,activeIndex:h,overIndex:b,index:T}):null,he=tt(h)&&tt(b)?i({id:c,items:f,activeIndex:h,overIndex:b}):T,ce=O==null?void 0:O.id,P=u.useRef({activeId:ce,items:f,newIndex:he,containerId:o}),Oe=f!==P.current.items,re=t({active:O,containerId:o,isDragging:M,isSorting:z,id:c,index:T,items:f,newIndex:P.current.newIndex,previousItems:P.current.items,previousContainerId:P.current.containerId,transition:p,wasDragging:P.current.activeId!=null}),Ne=Ys({disabled:!re,index:T,node:D,rect:A});return u.useEffect(()=>{z&&P.current.newIndex!==he&&(P.current.newIndex=he),o!==P.current.containerId&&(P.current.containerId=o),f!==P.current.items&&(P.current.items=f)},[z,he,o,f]),u.useEffect(()=>{if(ce===P.current.activeId)return;if(ce!=null&&P.current.activeId==null){P.current.activeId=ce;return}const Ce=setTimeout(()=>{P.current.activeId=ce},50);return()=>clearTimeout(Ce)},[ce]),{active:O,activeIndex:h,attributes:C,data:k,rect:A,index:T,newIndex:he,items:f,isOver:x,isSorting:z,isDragging:M,listeners:$,node:D,overIndex:b,over:Q,setNodeRef:je,setActivatorNodeRef:U,setDroppableNodeRef:I,setDraggableNodeRef:B,transform:Ne??Xe,transition:de()};function de(){if(Ne||Oe&&P.current.newIndex===T)return Xs;if(!(ve&&!Mt(w)||!p)&&(z||re))return Ke.Transition.toString({...p,property:Mn})}}function ea(e,t){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}function lt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const ta=[E.Down,E.Right,E.Up,E.Left],na=(e,t)=>{let{context:{active:r,collisionRect:s,droppableRects:a,droppableContainers:i,over:c,scrollableAncestors:d}}=t;if(ta.includes(e.code)){if(e.preventDefault(),!r||!s)return;const l=[];i.getEnabled().forEach(o=>{if(!o||o!=null&&o.disabled)return;const h=a.get(o.id);if(h)switch(e.code){case E.Down:s.top<h.top&&l.push(o);break;case E.Up:s.top>h.top&&l.push(o);break;case E.Left:s.left>h.left&&l.push(o);break;case E.Right:s.left<h.left&&l.push(o);break}});const p=Or({collisionRect:s,droppableRects:a,droppableContainers:l});let f=xn(p,"id");if(f===(c==null?void 0:c.id)&&p.length>1&&(f=p[1].id),f!=null){const o=i.get(r.id),h=i.get(f),g=h?a.get(h.id):null,y=h==null?void 0:h.node.current;if(y&&g&&o&&h){const b=dt(y).some((R,A)=>d[A]!==R),j=On(o,h),N=ra(o,h),S=b||!j?{x:0,y:0}:{x:N?s.width-g.width:0,y:N?s.height-g.height:0},T={x:g.left,y:g.top};return S.x&&S.y?T:ze(T,S)}}}};function On(e,t){return!lt(e)||!lt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function ra(e,t){return!lt(e)||!lt(t)||!On(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const sa=({question:e,onChange:t,onDelete:r})=>{const s=o=>{let h=[],g={...e,type:o};switch(o){case"multiple":h=Array.from({length:4},(y,m)=>({id:ie(),text:"",isCorrect:m===0}));break;case"boolean":h=[{id:ie(),text:"ÄÃºng",isCorrect:!0},{id:ie(),text:"Sai",isCorrect:!1}];break;case"short_answer":h=[],g.correctAnswer="",g.acceptedAnswers=[];break;case"image":h=Array.from({length:4},(y,m)=>({id:ie(),text:`áº¢nh ${m+1}`,isCorrect:m===0,imageUrl:""}));break}t({...g,answers:h})},a=(o,h,g)=>{const y=e.answers.map((m,b)=>b===o?{...m,[h]:g}:m);t({...e,answers:y})},i=()=>{if(e.type==="multiple"||e.type==="image"){const o={id:ie(),text:e.type==="image"?`áº¢nh ${e.answers.length+1}`:"",isCorrect:!1,...e.type==="image"&&{imageUrl:""}};t({...e,answers:[...e.answers,o]})}},c=o=>{e.type!=="boolean"&&((e.type==="multiple"||e.type==="image")&&e.answers.length<=2||t({...e,answers:e.answers.filter((h,g)=>g!==o)}))},d=o=>{e.type==="boolean"?t({...e,answers:e.answers.map((h,g)=>({...h,isCorrect:g===0?o===0:o===1}))}):t({...e,answers:e.answers.map((h,g)=>({...h,isCorrect:g===o}))})},l=o=>{const h=[o,o.toLowerCase(),o.toUpperCase(),o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()].filter((g,y,m)=>m.indexOf(g)===y&&g.trim()!=="");t({...e,correctAnswer:o,acceptedAnswers:h})},p=()=>{const o=prompt("Nháº­p tá»« Ä‘á»“ng nghÄ©a hoáº·c cÃ¡ch viáº¿t khÃ¡c:");o&&o.trim()&&t({...e,acceptedAnswers:[...e.acceptedAnswers||[],o.trim()]})},f=o=>{var h;t({...e,acceptedAnswers:((h=e.acceptedAnswers)==null?void 0:h.filter((g,y)=>y!==o))||[]})};return n.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-gray-50",children:[n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsx("input",{className:"flex-1 border p-2 rounded",placeholder:"Ná»™i dung cÃ¢u há»i",value:e.text,onChange:o=>t({...e,text:o.target.value})}),n.jsxs("select",{className:"border p-2 rounded min-w-[120px]",value:e.type,onChange:o=>s(o.target.value),children:[n.jsx("option",{value:"multiple",children:"Tráº¯c nghiá»‡m"}),n.jsx("option",{value:"boolean",children:"ÄÃºng/Sai"}),n.jsx("option",{value:"short_answer",children:"Äiá»n tá»«"}),n.jsx("option",{value:"image",children:"Chá»n áº£nh"})]}),n.jsx("input",{type:"number",className:"w-20 border p-2 rounded",min:1,max:100,value:e.points,onChange:o=>t({...e,points:parseInt(o.target.value)||1}),placeholder:"Äiá»ƒm"}),n.jsx(Z,{variant:"outline",onClick:r,className:"text-red-600 border-red-300",children:"XÃ³a"})]}),e.type==="multiple"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h4",{className:"font-medium text-gray-700",children:"ÄÃ¡p Ã¡n tráº¯c nghiá»‡m"}),n.jsx(Z,{onClick:i,variant:"outline",size:"sm",children:"+ ThÃªm Ä‘Ã¡p Ã¡n"})]}),e.answers.map((o,h)=>n.jsxs("div",{className:"flex gap-2 items-center bg-white p-2 rounded border",children:[n.jsx("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:String.fromCharCode(65+h)}),n.jsx("input",{className:"flex-1 border p-2 rounded",placeholder:`ÄÃ¡p Ã¡n ${String.fromCharCode(65+h)}`,value:o.text,onChange:g=>a(h,"text",g.target.value)}),n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"radio",name:`correct-${e.id}`,checked:o.isCorrect,onChange:()=>d(h)}),n.jsx("span",{className:"text-sm",children:"ÄÃºng"})]}),e.answers.length>2&&n.jsx(Z,{variant:"outline",onClick:()=>c(h),className:"text-red-600 border-red-300 px-2",children:"X"})]},o.id))]}),e.type==="boolean"&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium text-gray-700",children:"CÃ¢u há»i ÄÃºng/Sai"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng cho cÃ¢u há»i nÃ y:"}),n.jsx("div",{className:"space-y-2",children:e.answers.map((o,h)=>n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"radio",name:`boolean-${e.id}`,checked:o.isCorrect,onChange:()=>d(h),className:"w-4 h-4"}),n.jsxs("span",{className:`font-medium ${o.text==="ÄÃºng"?"text-green-600":"text-red-600"}`,children:[o.text==="ÄÃºng"?"âœ“":"âœ—"," ",o.text]})]},o.id))})]})]}),e.type==="short_answer"&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium text-gray-700",children:"CÃ¢u há»i Ä‘iá»n tá»«"}),n.jsxs("div",{className:"bg-white p-3 rounded border space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"ÄÃ¡p Ã¡n chÃ­nh xÃ¡c:"}),n.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Nháº­p Ä‘Ã¡p Ã¡n chÃ­nh xÃ¡c...",value:e.correctAnswer||"",onChange:o=>l(o.target.value)})]}),e.acceptedAnswers&&e.acceptedAnswers.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"CÃ¡c cÃ¡ch viáº¿t Ä‘Æ°á»£c cháº¥p nháº­n:"}),n.jsx("div",{className:"space-y-1",children:e.acceptedAnswers.map((o,h)=>n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx("span",{className:"flex-1 bg-gray-50 p-2 rounded text-sm",children:o}),n.jsx(Z,{variant:"outline",onClick:()=>f(h),className:"text-red-600 border-red-300 px-2 text-xs",children:"X"})]},h))})]}),n.jsx(Z,{onClick:p,variant:"outline",size:"sm",children:"+ ThÃªm cÃ¡ch viáº¿t khÃ¡c"})]})]}),e.type==="image"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h4",{className:"font-medium text-gray-700",children:"Chá»n áº£nh Ä‘Ã¡p Ã¡n"}),n.jsx(Z,{onClick:i,variant:"outline",size:"sm",children:"+ ThÃªm áº£nh"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.answers.map((o,h)=>n.jsxs("div",{className:"bg-white p-3 rounded border space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:String.fromCharCode(65+h)}),e.answers.length>2&&n.jsx(Z,{variant:"outline",onClick:()=>c(h),className:"text-red-600 border-red-300 px-2 text-xs",children:"X"})]}),n.jsx("input",{className:"w-full border p-2 rounded text-sm",placeholder:"MÃ´ táº£ áº£nh (tÃ¹y chá»n)",value:o.text,onChange:g=>a(h,"text",g.target.value)}),n.jsx("input",{className:"w-full border p-2 rounded text-sm",placeholder:"URL áº£nh",value:o.imageUrl||"",onChange:g=>a(h,"imageUrl",g.target.value)}),o.imageUrl&&n.jsx("div",{className:"relative",children:n.jsx("img",{src:o.imageUrl,alt:o.text,className:"w-full h-20 object-cover rounded border",onError:g=>{g.target.style.display="none"}})}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",name:`correct-${e.id}`,checked:o.isCorrect,onChange:()=>d(h)}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"ÄÃ¡p Ã¡n Ä‘Ãºng"})]})]},o.id))})]}),n.jsx("div",{className:"mt-4",children:n.jsx("textarea",{className:"w-full border p-2 rounded",placeholder:"Giáº£i thÃ­ch Ä‘Ã¡p Ã¡n (tÃ¹y chá»n)",rows:2,value:e.explanation||"",onChange:o=>t({...e,explanation:o.target.value})})})]})},aa=({id:e,index:t,question:r,onUpdate:s,onDelete:a,moveQuestion:i,totalQuestions:c})=>{const{attributes:d,listeners:l,setNodeRef:p,transform:f,transition:o,isDragging:h}=Zs({id:e}),g={transform:Ke.Transform.toString(f),transition:o};return n.jsxs("div",{ref:p,style:g,className:`relative ${h?"opacity-50":""}`,children:[n.jsxs("div",{className:"absolute -left-16 top-4 flex flex-col gap-1",children:[n.jsx("div",{...d,...l,className:"p-2 cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 bg-gray-100 rounded hover:bg-gray-200 transition-colors",title:"KÃ©o Ä‘á»ƒ sáº¯p xáº¿p",children:"â‹®â‹®"}),n.jsx("button",{type:"button",onClick:()=>i(t,t-1),disabled:t===0,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",title:"Di chuyá»ƒn lÃªn",children:"â¬†ï¸"}),n.jsx("button",{type:"button",onClick:()=>i(t,t+1),disabled:t===c-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",title:"Di chuyá»ƒn xuá»‘ng",children:"â¬‡ï¸"})]}),n.jsx(sa,{question:r,onChange:s,onDelete:a})]})},ia=({onQuestionsImported:e})=>{const[t,r]=u.useState(!1),[s,a]=u.useState(!1),i=async(f,o)=>{var g;const h=(g=f.target.files)==null?void 0:g[0];if(h){a(!0);try{if(!(o==="csv"?["text/csv","application/csv"]:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]).some(b=>h.type.includes(b)||h.name.toLowerCase().endsWith(o==="csv"?".csv":".xlsx"))){L.error(`Vui lÃ²ng chá»n file ${o.toUpperCase()} há»£p lá»‡`),a(!1);return}const m=await c(h,o);if(m.length===0){L.error("KhÃ´ng tÃ¬m tháº¥y cÃ¢u há»i há»£p lá»‡ trong file"),a(!1);return}e(m),L.success(`ÄÃ£ import thÃ nh cÃ´ng ${m.length} cÃ¢u há»i!`),r(!1)}catch(y){console.error("Error parsing file:",y),L.error("CÃ³ lá»—i xáº£y ra khi Ä‘á»c file. Vui lÃ²ng kiá»ƒm tra Ä‘á»‹nh dáº¡ng file.")}finally{a(!1),f.target.value=""}}},c=async(f,o)=>{const h=await f.text();return d(h)},d=f=>{const o=f.split(`
`).filter(g=>g.trim()),h=[];for(let g=1;g<o.length;g++){const y=o[g].trim();if(!y)continue;const m=l(y);if(m.length<6){console.warn(`Skipping line ${g+1}: insufficient columns`);continue}const[b,j,N,S,T,k,R="",A="10"]=m;if(!b||!j||!N||!k){console.warn(`Skipping line ${g+1}: missing required fields`);continue}const D=[{id:"a",text:j,isCorrect:k.toLowerCase()==="a"},{id:"b",text:N,isCorrect:k.toLowerCase()==="b"},{id:"c",text:S||"",isCorrect:k.toLowerCase()==="c"},{id:"d",text:T||"",isCorrect:k.toLowerCase()==="d"}].filter(I=>I.text),x={id:`imported-${Date.now()}-${g}`,text:b,type:"multiple",answers:D,explanation:R||void 0,points:parseInt(A)||10};h.push(x)}return h},l=f=>{const o=[];let h="",g=!1;for(let y=0;y<f.length;y++){const m=f[y];m==='"'?g=!g:m===","&&!g?(o.push(h.trim()),h=""):h+=m}return o.push(h.trim()),o.map(y=>y.replace(/^"(.*)"$/,"$1"))},p=f=>{const g=[["CÃ¢u há»i","ÄÃ¡p Ã¡n A","ÄÃ¡p Ã¡n B","ÄÃ¡p Ã¡n C","ÄÃ¡p Ã¡n D","ÄÃ¡p Ã¡n Ä‘Ãºng (A/B/C/D)","Giáº£i thÃ­ch (tÃ¹y chá»n)","Äiá»ƒm (máº·c Ä‘á»‹nh 10)"],["JavaScript lÃ  ngÃ´n ngá»¯ gÃ¬?","NgÃ´n ngá»¯ láº­p trÃ¬nh","NgÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u","Há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u","Há»‡ Ä‘iá»u hÃ nh","A","JavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n","10"]].map(b=>b.map(j=>`"${j}"`).join(",")).join(`
`),y=new Blob([g],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(y),m.download=`quiz_template.${f==="csv"?"csv":"xlsx"}`,m.click(),URL.revokeObjectURL(m.href)};return n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium flex items-center space-x-2",children:[n.jsx("span",{children:"ðŸ“"}),n.jsx("span",{children:"Táº£i File"})]}),t&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"ðŸ“ Táº£i file cÃ¢u há»i"}),n.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ðŸ“‹ Äá»‹nh dáº¡ng file:"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[n.jsx("li",{children:"â€¢ Cá»™t 1: CÃ¢u há»i"}),n.jsx("li",{children:"â€¢ Cá»™t 2-5: ÄÃ¡p Ã¡n A, B, C, D"}),n.jsx("li",{children:"â€¢ Cá»™t 6: ÄÃ¡p Ã¡n Ä‘Ãºng (A/B/C/D)"}),n.jsx("li",{children:"â€¢ Cá»™t 7: Giáº£i thÃ­ch (tÃ¹y chá»n)"}),n.jsx("li",{children:"â€¢ Cá»™t 8: Äiá»ƒm (máº·c Ä‘á»‹nh 10)"})]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>p("csv"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"ðŸ“„ Táº£i máº«u CSV"}),n.jsx("button",{onClick:()=>p("excel"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm",children:"ðŸ“Š Táº£i máº«u Excel"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“„ Chá»n file CSV:"}),n.jsx("input",{type:"file",accept:".csv",onChange:f=>i(f,"csv"),disabled:s,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“Š Chá»n file Excel:"}),n.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:f=>i(f,"excel"),disabled:s,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),s&&n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-2 text-blue-600",children:"Äang xá»­ lÃ½ file..."})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:["ðŸ’¡ ",n.jsx("strong",{children:"Máº¹o:"})," Sá»­ dá»¥ng template Ä‘á»ƒ Ä‘áº£m báº£o Ä‘á»‹nh dáº¡ng Ä‘Ãºng. File cÃ³ thá»ƒ chá»©a nhiá»u cÃ¢u há»i, má»—i cÃ¢u há»i trÃªn má»™t dÃ²ng."]})})]})]})})]})},oa=({onQuestionsImported:e})=>{const[t,r]=u.useState(!1),[s,a]=u.useState(!1),[i,c]=u.useState(""),[d,l]=u.useState("upload"),[p,f]=u.useState({provider:"openai",apiKey:"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",model:"gpt-3.5-turbo"}),[o,h]=u.useState([]),[g,y]=u.useState(""),m={images:[".jpg",".jpeg",".png",".gif",".bmp",".webp"],documents:[".pdf",".doc",".docx",".txt",".rtf"],spreadsheets:[".csv",".xlsx",".xls"]},b=async w=>{var C;const v=(C=w.target.files)==null?void 0:C[0];if(v){a(!0),l("upload");try{const B=v.name.toLowerCase();if(!Object.values(m).flat().some(Q=>B.endsWith(Q))){L.error("Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£"),a(!1);return}L.info(`Äang xá»­ lÃ½ file: ${v.name}...`);const M=await j(v);if(!M.success){L.error(M.error||"KhÃ´ng thá»ƒ Ä‘á»c file"),a(!1);return}c(M.extractedText),L.success(`ÄÃ£ trÃ­ch xuáº¥t ${M.extractedText.length} kÃ½ tá»± tá»« file!`),l("preview")}catch(B){console.error("Error processing file:",B),L.error("CÃ³ lá»—i xáº£y ra khi xá»­ lÃ½ file");const $=v.name.toLowerCase();let M="";m.images.some(Q=>$.endsWith(Q))?M=`
Ná»™i dung máº«u tá»« áº£nh: ${v.name}

JavaScript cÆ¡ báº£n:
- Biáº¿n (variables): let, const, var
- HÃ m (functions): function declaration, arrow functions
- VÃ²ng láº·p (loops): for, while, forEach
- Äiá»u kiá»‡n (conditions): if, else, switch
- Máº£ng (arrays): [], push(), pop(), map(), filter()

React fundamentals:
- Components: functional, class components
- Props: passing data between components
- State: useState hook, setState
- Events: onClick, onChange, onSubmit
- Lifecycle: useEffect hook

Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ná»™i dung nÃ y Ä‘á»ƒ test tÃ­nh nÄƒng AI.
        `.trim():M=`
Ná»™i dung máº«u tá»« file: ${v.name}

Web Development Topics:
- HTML: structure, elements, attributes
- CSS: styling, layout, responsive design
- JavaScript: programming logic, DOM manipulation
- Frameworks: React, Vue, Angular
- Backend: Node.js, Express, databases

Báº¡n cÃ³ thá»ƒ chá»‰nh sá»­a ná»™i dung nÃ y vÃ  sá»­ dá»¥ng AI Ä‘á»ƒ táº¡o cÃ¢u há»i.
        `.trim(),c(M),l("preview"),L.warning("ÄÃ£ táº¡o ná»™i dung máº«u Ä‘á»ƒ báº¡n cÃ³ thá»ƒ test AI")}finally{a(!1),w.target.value=""}}},j=async w=>{const v=w.name.toLowerCase();try{return m.images.some(C=>v.endsWith(C))?await N(w):v.endsWith(".pdf")?await S(w):v.endsWith(".doc")||v.endsWith(".docx")?await T(w):v.endsWith(".txt")||v.endsWith(".rtf")?await k(w):m.spreadsheets.some(C=>v.endsWith(C))?await R(w):{extractedText:"",questions:[],success:!1,error:"Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£"}}catch(C){return{extractedText:"",questions:[],success:!1,error:`Lá»—i xá»­ lÃ½ file: ${C instanceof Error?C.message:"Unknown error"}`}}},N=async w=>{try{const{createWorker:v}=await Ze(async()=>{const{createWorker:U}=await import("./index-Be-kBz05.js").then(ne=>ne.i);return{createWorker:U}},__vite__mapDeps([0,1]));console.log("Starting OCR for image:",w.name);const C=await v("eng+vie",1,{logger:U=>console.log("OCR Progress:",U)}),B=URL.createObjectURL(w);console.log("Processing image with OCR...");const{data:{text:$,confidence:M}}=await C.recognize(B);return console.log("OCR Result:",{textLength:$.length,confidence:Math.round(M),preview:$.substring(0,100)+"..."}),URL.revokeObjectURL(B),await C.terminate(),!$||$.trim().length===0?{extractedText:"",questions:[],success:!1,error:"KhÃ´ng thá»ƒ trÃ­ch xuáº¥t text tá»« áº£nh. Vui lÃ²ng thá»­ áº£nh khÃ¡c cÃ³ text rÃµ rÃ ng hÆ¡n."}:{extractedText:$.replace(/\s+/g," ").replace(/\n+/g,`
`).trim(),questions:[],success:!0}}catch(v){console.error("OCR Error:",v);const C=`
Ná»™i dung máº«u Ä‘Æ°á»£c trÃ­ch xuáº¥t tá»« áº£nh (OCR Ä‘ang gáº·p váº¥n Ä‘á»).

ÄÃ¢y lÃ  text máº«u Ä‘á»ƒ test chá»©c nÄƒng AI:
- JavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n
- React lÃ  library Ä‘á»ƒ xÃ¢y dá»±ng UI
- Node.js cho phÃ©p cháº¡y JavaScript trÃªn server
- HTML lÃ  ngÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u
- CSS dÃ¹ng Ä‘á»ƒ táº¡o kiá»ƒu cho trang web

Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ná»™i dung nÃ y Ä‘á»ƒ test tÃ­nh nÄƒng táº¡o cÃ¢u há»i vá»›i AI.
      `.trim();return console.log("Using fallback mock text due to OCR error"),{extractedText:C,questions:[],success:!0}}},S=async w=>{try{console.log("Processing PDF file:",w.name);try{const v=await Ze(()=>import("./pdf-C5dZGtaJ.js"),[]);v.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const C=await w.arrayBuffer(),B=await v.getDocument({data:C}).promise;let $="";const M=B.numPages;console.log(`PDF has ${M} pages`);for(let Q=1;Q<=Math.min(M,10);Q++){const je=(await(await B.getPage(Q)).getTextContent()).items.map(z=>z.str).join(" ");$+=`

--- Trang ${Q} ---
${je}`}if($.trim().length===0)throw new Error("No text found in PDF");return{extractedText:$.trim(),questions:[],success:!0}}catch(v){return console.log("Real PDF processing failed, using fallback:",v),{extractedText:`
Ná»™i dung Ä‘Æ°á»£c trÃ­ch xuáº¥t tá»« file PDF: ${w.name}

ChÆ°Æ¡ng 1: Giá»›i thiá»‡u vá» Láº­p trÃ¬nh Web
JavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o tÃ­nh tÆ°Æ¡ng tÃ¡c cho trang web.
HTML (HyperText Markup Language) lÃ  ngÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u cÆ¡ báº£n Ä‘á»ƒ xÃ¢y dá»±ng cáº¥u trÃºc trang web.
CSS (Cascading Style Sheets) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thiáº¿t káº¿ vÃ  táº¡o kiá»ƒu cho cÃ¡c pháº§n tá»­ HTML.

ChÆ°Æ¡ng 2: Framework vÃ  Library
React lÃ  má»™t JavaScript library Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi Facebook Ä‘á»ƒ xÃ¢y dá»±ng giao diá»‡n ngÆ°á»i dÃ¹ng.
Node.js cho phÃ©p cháº¡y JavaScript trÃªn phÃ­a server, má»Ÿ rá»™ng kháº£ nÄƒng cá»§a JavaScript.
Express.js lÃ  framework web cho Node.js, giÃºp xÃ¢y dá»±ng API vÃ  web application dá»… dÃ ng.

ChÆ°Æ¡ng 3: Database vÃ  Backend
MongoDB lÃ  database NoSQL phá»• biáº¿n, lÆ°u trá»¯ dá»¯ liá»‡u dÆ°á»›i dáº¡ng document.
MySQL lÃ  há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ (RDBMS) mÃ£ nguá»“n má»Ÿ.
API (Application Programming Interface) lÃ  cÃ¡ch Ä‘á»ƒ cÃ¡c á»©ng dá»¥ng giao tiáº¿p vá»›i nhau.

Káº¿t luáº­n:
Láº­p trÃ¬nh web hiá»‡n Ä‘áº¡i yÃªu cáº§u kiáº¿n thá»©c vá» nhiá»u cÃ´ng nghá»‡ khÃ¡c nhau.
        `.trim(),questions:[],success:!0}}}catch(v){return console.error("PDF processing error:",v),{extractedText:"",questions:[],success:!1,error:`Lá»—i Ä‘á»c PDF: ${v instanceof Error?v.message:"Unknown error"}`}}},T=async w=>{try{if(console.log("Processing Word document:",w.name),w.name.toLowerCase().endsWith(".docx"))try{const C=await Ze(()=>import("./index-CmSLUdb8.js").then(M=>M.i),__vite__mapDeps([2,3,4,1])),B=await w.arrayBuffer(),$=await C.extractRawText({arrayBuffer:B});if($.value&&$.value.trim().length>0)return{extractedText:$.value.trim(),questions:[],success:!0}}catch(C){console.log("Mammoth processing failed, using fallback:",C)}return{extractedText:`
Ná»™i dung Ä‘Æ°á»£c trÃ­ch xuáº¥t tá»« file Word: ${w.name}

BÃ i há»c 1: HTML CÆ¡ báº£n
HTML (HyperText Markup Language) lÃ  ngÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u siÃªu vÄƒn báº£n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o cáº¥u trÃºc cho trang web.
CÃ¡c tháº» HTML cÆ¡ báº£n: <html>, <head>, <body>, <div>, <p>, <h1>, <a>, <img>
HTML5 bá»• sung nhiá»u tháº» semantic nhÆ° <header>, <nav>, <section>, <article>, <footer>

BÃ i há»c 2: CSS Styling
CSS (Cascading Style Sheets) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o kiá»ƒu vÃ  bá»‘ cá»¥c cho cÃ¡c pháº§n tá»­ HTML.
CSS Selector: element, class, id, attribute, pseudo-class
CSS Properties: color, background, margin, padding, border, font, display, position

BÃ i há»c 3: JavaScript Interactivity
JavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thÃªm tÃ­nh tÆ°Æ¡ng tÃ¡c cho trang web.
JavaScript cÆ¡ báº£n: variables, functions, events, DOM manipulation
ES6+ features: arrow functions, let/const, template literals, destructuring, modules

BÃ i há»c 4: Responsive Design
Responsive design Ä‘áº£m báº£o trang web hoáº¡t Ä‘á»™ng tá»‘t trÃªn má»i thiáº¿t bá»‹.
Media queries trong CSS Ä‘á»ƒ táº¡o breakpoints cho cÃ¡c kÃ­ch thÆ°á»›c mÃ n hÃ¬nh khÃ¡c nhau.
Mobile-first approach: thiáº¿t káº¿ cho mobile trÆ°á»›c, sau Ä‘Ã³ má»Ÿ rá»™ng cho desktop.

Thá»±c hÃ nh:
- Táº¡o má»™t trang web Ä‘Æ¡n giáº£n vá»›i HTML
- Ãp dá»¥ng CSS Ä‘á»ƒ táº¡o kiá»ƒu
- ThÃªm JavaScript Ä‘á»ƒ táº¡o tÃ­nh tÆ°Æ¡ng tÃ¡c
- Kiá»ƒm tra responsive trÃªn cÃ¡c thiáº¿t bá»‹ khÃ¡c nhau
      `.trim(),questions:[],success:!0}}catch(v){return console.error("Word processing error:",v),{extractedText:"",questions:[],success:!1,error:`Lá»—i Ä‘á»c Word: ${v instanceof Error?v.message:"Unknown error"}`}}},k=async w=>{try{return{extractedText:await w.text(),questions:[],success:!0}}catch(v){return{extractedText:"",questions:[],success:!1,error:`Lá»—i Ä‘á»c text file: ${v instanceof Error?v.message:"Unknown error"}`}}},R=async w=>{try{return{extractedText:await w.text(),questions:[],success:!0}}catch(v){return{extractedText:"",questions:[],success:!1,error:`Lá»—i Ä‘á»c spreadsheet: ${v instanceof Error?v.message:"Unknown error"}`}}},A=async()=>{if(!i.trim()){L.error("KhÃ´ng cÃ³ ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i");return}a(!0),l("generate");try{console.log("ðŸ¤– Starting AI question generation process..."),console.log("Extracted text length:",i.length),console.log("AI Config:",p),L.info("Äang káº¿t ná»‘i vá»›i AI service...");const w=await D(i,g);if(!w||w.length===0)throw new Error("AI service khÃ´ng tráº£ vá» cÃ¢u há»i nÃ o");h(w),l("review"),L.success(`âœ… AI Ä‘Ã£ táº¡o ${w.length} cÃ¢u há»i thÃ nh cÃ´ng!`)}catch(w){console.error("AI generation error:",w);const v=w instanceof Error?w.message:"Unknown error";L.error(`âŒ Lá»—i táº¡o cÃ¢u há»i: ${v}`),l("preview")}finally{a(!1)}},D=async(w,v)=>{try{console.log("ðŸ¤– Starting AI question generation..."),console.log("AI Config:",p),console.log("Content length:",w.length);const{AIService:C}=await Ze(async()=>{const{AIService:U}=await import("./aiService-DzP1BO8D.js");return{AIService:U}},[]),B={content:w,customPrompt:v,numQuestions:5,difficulty:"mixed",language:"vi"};console.log("Calling AI Service with options:",B);const $=C.validateConfig(p);if(!$.valid)throw new Error(`AI Config invalid: ${$.error}`);const M=await C.generateQuestions(p,B);if(console.log("âœ… AI Service returned questions:",M.length),!M||M.length===0)throw new Error("AI service returned no questions");const Q=M.map((U,ne)=>({id:U.id||`ai-${Date.now()}-${ne}`,text:U.text,type:"multiple",answers:U.answers||[],explanation:U.explanation||"",points:U.points||10}));return console.log("âœ… Successfully converted questions:",Q.length),Q}catch(C){if(console.error("âŒ AI Service Error:",C),L.error(`Lá»—i AI: ${C instanceof Error?C.message:"Unknown error"}`),confirm(`AI generation failed: ${C instanceof Error?C.message:"Unknown error"}

Do you want to use sample questions instead?`)){console.log("ðŸ”„ User chose to use fallback mock questions");const $=[{id:`ai-${Date.now()}-1`,text:"JavaScript Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi cÃ´ng ty nÃ o?",type:"multiple",answers:[{id:"a",text:"Netscape",isCorrect:!0},{id:"b",text:"Microsoft",isCorrect:!1},{id:"c",text:"Google",isCorrect:!1},{id:"d",text:"Apple",isCorrect:!1}],explanation:"JavaScript Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi Brendan Eich táº¡i Netscape vÃ o nÄƒm 1995.",points:10},{id:`ai-${Date.now()}-2`,text:"React lÃ  gÃ¬?",type:"multiple",answers:[{id:"a",text:"Framework",isCorrect:!1},{id:"b",text:"Library",isCorrect:!0},{id:"c",text:"Language",isCorrect:!1},{id:"d",text:"Database",isCorrect:!1}],explanation:"React lÃ  má»™t JavaScript library Ä‘á»ƒ xÃ¢y dá»±ng user interface.",points:10}];return L.warning("Äang sá»­ dá»¥ng cÃ¢u há»i máº«u thay vÃ¬ AI"),$}else throw C}},x=()=>{o.length>0&&(e(o),L.success(`ÄÃ£ import ${o.length} cÃ¢u há»i!`),r(!1),I())},I=()=>{l("upload"),c(""),h([]),y("")},O=()=>{switch(d){case"upload":return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ðŸ“ CÃ¡c Ä‘á»‹nh dáº¡ng file Ä‘Æ°á»£c há»— trá»£:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{className:"text-blue-700",children:"ðŸ–¼ï¸ HÃ¬nh áº£nh (OCR):"}),n.jsx("div",{className:"text-blue-600",children:".jpg, .png, .gif, .bmp, .webp"})]}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-blue-700",children:"ðŸ“„ TÃ i liá»‡u:"}),n.jsx("div",{className:"text-blue-600",children:".pdf, .doc, .docx, .txt, .rtf"})]}),n.jsxs("div",{children:[n.jsx("strong",{className:"text-blue-700",children:"ðŸ“Š Báº£ng tÃ­nh:"}),n.jsx("div",{className:"text-blue-600",children:".csv, .xlsx, .xls"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“¤ Chá»n file Ä‘á»ƒ táº£i lÃªn:"}),n.jsx("input",{type:"file",accept:Object.values(m).flat().join(","),onChange:b,disabled:s,className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 focus:border-blue-500 transition-colors"})]})]});case"preview":return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"âœ… Ná»™i dung Ä‘Ã£ trÃ­ch xuáº¥t:"})}),n.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg p-4 bg-gray-50",children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:i})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:"ðŸ¤– Cáº¥u hÃ¬nh AI Ä‘á»ƒ táº¡o cÃ¢u há»i:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider AI:"}),n.jsxs("select",{value:p.provider,onChange:w=>f(v=>({...v,provider:w.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"openai",children:"OpenAI (GPT)"}),n.jsx("option",{value:"claude",children:"Anthropic (Claude)"}),n.jsx("option",{value:"gemini",children:"Google (Gemini)"}),n.jsx("option",{value:"local",children:"Local AI Model"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model:"}),n.jsxs("select",{value:p.model,onChange:w=>f(v=>({...v,model:w.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[p.provider==="openai"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),n.jsx("option",{value:"gpt-4",children:"GPT-4"}),n.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"})]}),p.provider==="claude"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"claude-3-sonnet",children:"Claude 3 Sonnet"}),n.jsx("option",{value:"claude-3-opus",children:"Claude 3 Opus"})]}),p.provider==="gemini"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"gemini-pro",children:"Gemini Pro"}),n.jsx("option",{value:"gemini-pro-vision",children:"Gemini Pro Vision"})]})]})]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-green-600",children:"ðŸ”‘"}),n.jsx("span",{className:"text-green-800 font-medium",children:"API Key Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn"})]}),n.jsx("div",{className:"text-green-600 text-sm mt-1",children:"Sáºµn sÃ ng sá»­ dá»¥ng AI Ä‘á»ƒ táº¡o cÃ¢u há»i!"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prompt tÃ¹y chá»‰nh (tÃ¹y chá»n):"}),n.jsx("textarea",{value:g,onChange:w=>y(w.target.value),placeholder:"HÆ°á»›ng dáº«n cá»¥ thá»ƒ cho AI vá» cÃ¡ch táº¡o cÃ¢u há»i...",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>l("upload"),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"â† Quay láº¡i"}),n.jsx("button",{onClick:async()=>{var w;console.log("ðŸ§ª Debug: Testing AI connection...");try{const v=await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${p.apiKey}`,"Content-Type":"application/json"}});if(v.ok)L.success("âœ… API key hoáº¡t Ä‘á»™ng!"),console.log("âœ… API key is valid");else{const C=await v.json();L.error(`âŒ API key lá»—i: ${(w=C.error)==null?void 0:w.message}`),console.error("âŒ API key error:",C)}}catch(v){L.error(`âŒ Network error: ${v instanceof Error?v.message:"Unknown"}`),console.error("âŒ Network error:",v)}},className:"px-4 py-2 border border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50",children:"ðŸ§ª Test API"}),n.jsx("button",{onClick:A,disabled:s,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:"ðŸ¤– Táº¡o cÃ¢u há»i vá»›i AI"})]})]});case"generate":return n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"ðŸ¤– AI Ä‘ang táº¡o cÃ¢u há»i..."}),n.jsx("p",{className:"text-gray-600",children:"QuÃ¡ trÃ¬nh nÃ y cÃ³ thá»ƒ máº¥t vÃ i phÃºt"})]});case"review":return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("h4",{className:"font-semibold text-green-800 mb-2",children:["âœ¨ AI Ä‘Ã£ táº¡o ",o.length," cÃ¢u há»i:"]})}),n.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:o.map((w,v)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("h5",{className:"font-semibold text-gray-900 mb-2",children:["CÃ¢u ",v+1,": ",w.text]}),n.jsx("div",{className:"space-y-1 mb-2",children:w.answers.map((C,B)=>n.jsxs("div",{className:`text-sm p-2 rounded ${C.isCorrect?"bg-green-100 text-green-700":"bg-gray-100"}`,children:[String.fromCharCode(65+B),". ",C.text,C.isCorrect&&" âœ“"]},C.id))}),w.explanation&&n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("strong",{children:"Giáº£i thÃ­ch:"})," ",w.explanation]})]},w.id))}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:()=>l("preview"),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"â† Táº¡o láº¡i"}),n.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"âœ… Import cÃ¢u há»i"})]})]});default:return null}};return n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium flex items-center space-x-2",children:[n.jsx("span",{children:"ðŸš€"}),n.jsx("span",{children:"AI Upload"})]}),t&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"ðŸš€ AI-Powered File Upload"}),n.jsx("button",{onClick:()=>{r(!1),I()},className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),n.jsx("div",{className:"flex items-center justify-between mb-8",children:["upload","preview","generate","review"].map((w,v)=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${["upload","preview","generate","review"].indexOf(d)>=v?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:v+1}),v<3&&n.jsx("div",{className:`w-16 h-0.5 mx-2 ${["upload","preview","generate","review"].indexOf(d)>v?"bg-blue-500":"bg-gray-200"}`})]},w))}),O(),s&&d!=="generate"&&n.jsxs("div",{className:"mt-4 flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),n.jsx("span",{className:"ml-2 text-blue-600",children:"Äang xá»­ lÃ½..."})]})]})})]})},ye=class ye{constructor(){mt(this,"providers",[{name:"OpenAI GPT",id:"openai",description:"GPT-4 vÃ  GPT-3.5 tá»« OpenAI - Cháº¥t lÆ°á»£ng cao, Ä‘a dáº¡ng cÃ¢u há»i",models:["gpt-4","gpt-4-turbo","gpt-3.5-turbo"],requiresApiKey:!0,free:!1},{name:"Claude (Anthropic)",id:"claude",description:"Claude 3 tá»« Anthropic - TÆ° duy logic tá»‘t, an toÃ n",models:["claude-3-opus","claude-3-sonnet","claude-3-haiku"],requiresApiKey:!0,free:!1},{name:"Google Gemini",id:"gemini",description:"Gemini Pro tá»« Google - Hiá»ƒu ngá»¯ cáº£nh tá»‘t, miá»…n phÃ­ háº¡n cháº¿",models:["gemini-pro","gemini-pro-vision"],requiresApiKey:!0,free:!0},{name:"Ollama (Local)",id:"ollama",description:"Cháº¡y local vá»›i Llama, Mistral, CodeLlama - HoÃ n toÃ n miá»…n phÃ­",models:["llama2","mistral","codellama","phi","neural-chat"],requiresApiKey:!1,free:!0}])}static getInstance(){return ye.instance||(ye.instance=new ye),ye.instance}getDefaultConfig(t){switch(t){case"openai":return{model:"gpt-3.5-turbo",temperature:.7,maxQuestions:10};case"claude":return{model:"claude-3-sonnet",temperature:.6,maxQuestions:10};case"gemini":return{model:"gemini-pro",temperature:.8,maxQuestions:8};case"ollama":return{model:"llama2",temperature:.7,maxQuestions:6};default:return{}}}generateSystemPrompt(t){const{difficulty:r,questionTypes:s,language:a,maxQuestions:i}=t,c={easy:"dá»… (há»c sinh trung há»c cÆ¡ sá»Ÿ)",medium:"trung bÃ¬nh (há»c sinh trung há»c phá»• thÃ´ng)",hard:"khÃ³ (sinh viÃªn Ä‘áº¡i há»c)",mixed:"Ä‘a dáº¡ng tá»« dá»… Ä‘áº¿n khÃ³"},d={multiple:"tráº¯c nghiá»‡m nhiá»u lá»±a chá»n (4 Ä‘Ã¡p Ã¡n, 1 Ä‘Ãºng)",boolean:"Ä‘Ãºng/sai",short_answer:"tráº£ lá»i ngáº¯n"},l=s.map(f=>d[f]).join(", "),p=a==="vi"?"tiáº¿ng Viá»‡t":"English";return`Báº¡n lÃ  má»™t chuyÃªn gia táº¡o cÃ¢u há»i tráº¯c nghiá»‡m chuyÃªn nghiá»‡p. 

NHIá»†M Vá»¤: Táº¡o ${i} cÃ¢u há»i cháº¥t lÆ°á»£ng cao tá»« ná»™i dung Ä‘Æ°á»£c cung cáº¥p.

YÃŠU Cáº¦U:
- Äá»™ khÃ³: ${c[r]}
- Loáº¡i cÃ¢u há»i: ${l}
- NgÃ´n ngá»¯: ${p}
- CÃ¢u há»i pháº£i chÃ­nh xÃ¡c, rÃµ rÃ ng vÃ  cÃ³ giÃ¡ trá»‹ giÃ¡o dá»¥c
- ÄÃ¡p Ã¡n pháº£i chÃ­nh xÃ¡c 100%
- TrÃ¡nh cÃ¢u há»i quÃ¡ dá»… hoáº·c mÆ¡ há»“

FORMAT TRáº¢I Lá»œI (JSON):
{
  "questions": [
    {
      "id": "unique_id",
      "text": "Ná»™i dung cÃ¢u há»i",
      "type": "multiple|boolean|short_answer",
      "answers": [
        {"id": "ans1", "text": "ÄÃ¡p Ã¡n A", "isCorrect": true},
        {"id": "ans2", "text": "ÄÃ¡p Ã¡n B", "isCorrect": false},
        {"id": "ans3", "text": "ÄÃ¡p Ã¡n C", "isCorrect": false},
        {"id": "ans4", "text": "ÄÃ¡p Ã¡n D", "isCorrect": false}
      ],
      "points": 1,
      "explanation": "Giáº£i thÃ­ch táº¡i sao Ä‘Ã¡p Ã¡n nÃ y Ä‘Ãºng"
    }
  ]
}

CHá»ˆ TRáº¢ Vá»€ JSON, KHÃ”NG THÃŠM TEXT KHÃC.`}async generateQuestions(t){const{content:r,config:s,customPrompt:a}=t;try{switch(s.provider){case"openai":return await this.generateWithOpenAI(r,s,a);case"claude":return await this.generateWithClaude(r,s,a);case"gemini":return await this.generateWithGemini(r,s,a);case"ollama":return await this.generateWithOllama(r,s,a);default:throw new Error(`Unsupported AI provider: ${s.provider}`)}}catch(i){return console.error("Error generating questions:",i),{questions:[],error:i instanceof Error?i.message:"Unknown error occurred"}}}async generateWithOpenAI(t,r,s){if(!r.apiKey)throw new Error("OpenAI API key is required");const a=s||this.generateSystemPrompt(r),i=`Ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:

${t}`,c=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},body:JSON.stringify({model:r.model,messages:[{role:"system",content:a},{role:"user",content:i}],temperature:r.temperature,max_tokens:4e3})});if(!c.ok){const p=await c.text();throw new Error(`OpenAI API error: ${p}`)}const d=await c.json(),l=JSON.parse(d.choices[0].message.content);return{questions:this.formatQuestions(l.questions),usage:d.usage}}async generateWithGemini(t,r,s){if(!r.apiKey)throw new Error("Gemini API key is required");const a=`${s||this.generateSystemPrompt(r)}

Ná»™i dung: ${t}`,i=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${r.model}:generateContent?key=${r.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:a}]}],generationConfig:{temperature:r.temperature,maxOutputTokens:4e3}})});if(!i.ok){const l=await i.text();throw new Error(`Gemini API error: ${l}`)}const c=await i.json(),d=JSON.parse(c.candidates[0].content.parts[0].text);return{questions:this.formatQuestions(d.questions)}}async generateWithClaude(t,r,s){if(!r.apiKey)throw new Error("Claude API key is required");const a=s||this.generateSystemPrompt(r),i=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:r.model,max_tokens:4e3,temperature:r.temperature,system:a,messages:[{role:"user",content:`Ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:

${t}`}]})});if(!i.ok){const l=await i.text();throw new Error(`Claude API error: ${l}`)}const c=await i.json(),d=JSON.parse(c.content[0].text);return{questions:this.formatQuestions(d.questions),usage:c.usage}}async generateWithOllama(t,r,s){const a=`${s||this.generateSystemPrompt(r)}

Ná»™i dung: ${t}`;try{const i=await fetch("http://localhost:11434/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:r.model,prompt:a,stream:!1,options:{temperature:r.temperature,num_predict:4e3}})});if(!i.ok)throw new Error(`Ollama not running or model not available. Please install Ollama and pull the ${r.model} model.`);const c=await i.json(),d=JSON.parse(c.response);return{questions:this.formatQuestions(d.questions)}}catch(i){throw new Error(`Ollama error: ${i instanceof Error?i.message:"Unknown error"}. Make sure Ollama is running on localhost:11434`)}}formatQuestions(t){return t.map(r=>({id:r.id||`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:r.text||"",type:r.type||"multiple",answers:r.answers||[],points:r.points||1,correctAnswer:r.correctAnswer||"",acceptedAnswers:r.acceptedAnswers||[],explanation:r.explanation||""}))}async testConnection(t){try{const r={content:"Vietnam is a country in Southeast Asia.",config:{...t,maxQuestions:1,questionTypes:["multiple"]}},s=await this.generateQuestions(r);return s.error?{success:!1,message:s.error}:{success:!0,message:`Connected successfully! Generated ${s.questions.length} test question.`}}catch(r){return{success:!1,message:r instanceof Error?r.message:"Connection failed"}}}getProvider(t){return this.providers.find(r=>r.id===t)}createDefaultConfig(t){var s;const r=this.getDefaultConfig(t);return{provider:t,apiKey:"",model:r.model||((s=this.providers.find(a=>a.id===t))==null?void 0:s.models[0])||"",temperature:r.temperature||.7,maxQuestions:r.maxQuestions||10,difficulty:"medium",questionTypes:["multiple"],language:"vi",...r}}};mt(ye,"instance");let Tt=ye;const rt=Tt.getInstance(),la=({content:e,onQuestionsGenerated:t,isOpen:r,onClose:s})=>{const[a,i]=u.useState("provider"),[c,d]=u.useState(null),[l,p]=u.useState(null),[f,o]=u.useState(!1),[h,g]=u.useState([]),[y,m]=u.useState(!1),[b,j]=u.useState(!1),[N,S]=u.useState(null),T=rt.providers;u.useEffect(()=>{if(c){const x=rt.createDefaultConfig(c.id);p(x)}},[c]);const k=x=>{d(x),i("config"),S(null)},R=async()=>{if(!l)return;j(!0);const x=await rt.testConnection(l);S(x),j(!1),x.success?L.success("Káº¿t ná»‘i AI thÃ nh cÃ´ng!"):L.error(`Lá»—i káº¿t ná»‘i: ${x.message}`)},A=async()=>{if(l){o(!0);try{const x=await rt.generateQuestions({content:e,config:l});if(x.error){L.error(`Lá»—i táº¡o cÃ¢u há»i: ${x.error}`);return}g(x.questions),i("review"),L.success(`ÄÃ£ táº¡o ${x.questions.length} cÃ¢u há»i!`)}catch(x){L.error("CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i"),console.error(x)}finally{o(!1)}}},D=()=>{t(h),s(),L.success("ÄÃ£ thÃªm cÃ¢u há»i vÃ o quiz!")};return r?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-lg",children:n.jsx(tr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold",children:"AI Question Generator"}),n.jsx("p",{className:"text-blue-100",children:"Táº¡o cÃ¢u há»i thÃ´ng minh vá»›i AI"})]})]}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:"âœ•"})]}),n.jsx("div",{className:"flex items-center space-x-4 mt-4",children:["provider","config","generate","review"].map((x,I)=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${a===x?"bg-white text-purple-600":["provider","config","generate","review"].indexOf(a)>I?"bg-green-400 text-white":"bg-white bg-opacity-30 text-white"}`,children:["provider","config","generate","review"].indexOf(a)>I?"âœ“":I+1}),I<3&&n.jsx("div",{className:"w-8 h-1 bg-white bg-opacity-30 mx-2"})]},x))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a==="provider"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Chá»n AI Provider"}),n.jsx("p",{className:"text-gray-600",children:"Lá»±a chá»n nhÃ  cung cáº¥p AI phÃ¹ há»£p vá»›i nhu cáº§u cá»§a báº¡n"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:T.map(x=>n.jsx("div",{onClick:()=>k(x),className:"border-2 border-gray-200 rounded-xl p-6 cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all group",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${x.id==="openai"?"bg-green-100 text-green-600":x.id==="claude"?"bg-orange-100 text-orange-600":x.id==="gemini"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:x.id==="openai"?n.jsx(rr,{className:"w-5 h-5"}):x.id==="claude"?n.jsx(ur,{className:"w-5 h-5"}):x.id==="gemini"?n.jsx(cr,{className:"w-5 h-5"}):n.jsx(ar,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900",children:x.name}),x.free&&n.jsx("span",{className:"inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Miá»…n phÃ­"})]})]}),n.jsx("p",{className:"text-gray-600 text-sm",children:x.description}),n.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[x.models.slice(0,2).map(I=>n.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded",children:I},I)),x.models.length>2&&n.jsxs("span",{className:"text-gray-500 text-xs",children:["+",x.models.length-2," more"]})]})]}),n.jsx(Nt,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-500 transition-colors"})]})},x.id))})]}),a==="config"&&l&&c&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cáº¥u hÃ¬nh AI"}),n.jsx("p",{className:"text-gray-600",children:"TÃ¹y chá»‰nh cÃ¡ch AI táº¡o cÃ¢u há»i cho báº¡n"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-gray-900 border-b pb-2",children:"API Configuration"}),c.requiresApiKey&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:y?"text":"password",value:l.apiKey||"",onChange:x=>p({...l,apiKey:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nháº­p API key..."}),n.jsx("button",{type:"button",onClick:()=>m(!y),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:y?n.jsx(or,{className:"w-4 h-4"}):n.jsx(Vn,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),n.jsx("select",{value:l.model,onChange:x=>p({...l,model:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:c.models.map(x=>n.jsx("option",{value:x,children:x},x))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Temperature: ",l.temperature]}),n.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:l.temperature,onChange:x=>p({...l,temperature:parseFloat(x.target.value)}),className:"w-full"}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[n.jsx("span",{children:"Conservative"}),n.jsx("span",{children:"Creative"})]})]}),n.jsxs("button",{onClick:R,disabled:b||c.requiresApiKey&&!l.apiKey,className:"w-full flex items-center justify-center space-x-2 py-2 px-4 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[b?n.jsx(Jt,{className:"w-4 h-4 animate-spin"}):n.jsx(gr,{className:"w-4 h-4"}),n.jsx("span",{children:b?"Testing...":"Test Connection"})]}),N&&n.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg ${N.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[N.success?n.jsx(bt,{className:"w-4 h-4"}):n.jsx(Zn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:N.message})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-semibold text-gray-900 border-b pb-2",children:"Question Settings"}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Sá»‘ cÃ¢u há»i: ",l.maxQuestions]}),n.jsx("input",{type:"range",min:"1",max:"20",value:l.maxQuestions,onChange:x=>p({...l,maxQuestions:parseInt(x.target.value)}),className:"w-full"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Äá»™ khÃ³"}),n.jsxs("select",{value:l.difficulty,onChange:x=>p({...l,difficulty:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"easy",children:"Dá»…"}),n.jsx("option",{value:"medium",children:"Trung bÃ¬nh"}),n.jsx("option",{value:"hard",children:"KhÃ³"}),n.jsx("option",{value:"mixed",children:"Äa dáº¡ng"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loáº¡i cÃ¢u há»i"}),n.jsx("div",{className:"space-y-2",children:[{id:"multiple",label:"Tráº¯c nghiá»‡m nhiá»u lá»±a chá»n"},{id:"boolean",label:"ÄÃºng/Sai"},{id:"short_answer",label:"Tráº£ lá»i ngáº¯n"}].map(x=>n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:l.questionTypes.includes(x.id),onChange:I=>{I.target.checked?p({...l,questionTypes:[...l.questionTypes,x.id]}):p({...l,questionTypes:l.questionTypes.filter(O=>O!==x.id)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"text-sm",children:x.label})]},x.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NgÃ´n ngá»¯"}),n.jsxs("select",{value:l.language,onChange:x=>p({...l,language:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"vi",children:"Tiáº¿ng Viá»‡t"}),n.jsx("option",{value:"en",children:"English"})]})]})]})]}),n.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[n.jsx("button",{onClick:()=>i("provider"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Quay láº¡i"}),n.jsx("button",{onClick:()=>i("generate"),disabled:c.requiresApiKey&&!l.apiKey,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Tiáº¿p tá»¥c"})]})]}),a==="generate"&&n.jsxs("div",{className:"text-center space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Táº¡o cÃ¢u há»i vá»›i AI"}),n.jsx("p",{className:"text-gray-600",children:"Sáºµn sÃ ng táº¡o cÃ¢u há»i tá»« ná»™i dung cá»§a báº¡n"})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-40 overflow-y-auto",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Ná»™i dung nguá»“n:"}),n.jsxs("p",{className:"text-sm text-gray-600",children:[e.substring(0,500),"..."]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Cáº¥u hÃ¬nh Ä‘Ã£ chá»n:"}),n.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[n.jsxs("p",{children:["â€¢ Provider: ",c==null?void 0:c.name]}),n.jsxs("p",{children:["â€¢ Model: ",l==null?void 0:l.model]}),n.jsxs("p",{children:["â€¢ Sá»‘ cÃ¢u há»i: ",l==null?void 0:l.maxQuestions]}),n.jsxs("p",{children:["â€¢ Äá»™ khÃ³: ",l==null?void 0:l.difficulty]}),n.jsxs("p",{children:["â€¢ Loáº¡i: ",l==null?void 0:l.questionTypes.join(", ")]})]})]}),f?n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsx(Jt,{className:"w-12 h-12 animate-spin text-blue-600"}),n.jsx("p",{className:"text-gray-600",children:"AI Ä‘ang táº¡o cÃ¢u há»i cho báº¡n..."})]}):n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{onClick:()=>i("config"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Quay láº¡i"}),n.jsxs("button",{onClick:A,className:"px-8 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 flex items-center space-x-2",children:[n.jsx(Nt,{className:"w-4 h-4"}),n.jsx("span",{children:"Táº¡o cÃ¢u há»i"})]})]})]}),a==="review"&&h.length>0&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review cÃ¢u há»i Ä‘Ã£ táº¡o"}),n.jsx("p",{className:"text-gray-600",children:"Kiá»ƒm tra vÃ  chá»‰nh sá»­a trÆ°á»›c khi thÃªm vÃ o quiz"})]}),n.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:h.map((x,I)=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("h4",{className:"font-medium text-gray-900",children:["CÃ¢u ",I+1]}),n.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:x.type})]}),n.jsx("p",{className:"text-gray-700 mb-3",children:x.text}),x.answers&&n.jsx("div",{className:"space-y-1",children:x.answers.map((O,w)=>n.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded ${O.isCorrect?"bg-green-50 border border-green-200":"bg-gray-50"}`,children:[n.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+w),"."]}),n.jsx("span",{children:O.text}),O.isCorrect&&n.jsx(bt,{className:"w-4 h-4 text-green-600"})]},O.id))})]},x.id))}),n.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[n.jsx("button",{onClick:()=>i("generate"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Táº¡o láº¡i"}),n.jsxs("button",{onClick:D,className:"px-8 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[n.jsx(bt,{className:"w-4 h-4"}),n.jsxs("span",{children:["ThÃªm vÃ o Quiz (",h.length," cÃ¢u)"]})]})]})]})]})]})}):null},ca=({quiz:e,setQuiz:t,addQuestion:r,updateQuestion:s,deleteQuestion:a,moveQuestion:i})=>{const[c,d]=u.useState(!1),l=Ir(Yt($t),Yt(Lt,{coordinateGetter:na})),p=h=>{const{active:g,over:y}=h;if(g.id!==(y==null?void 0:y.id)){const m=e.questions.findIndex((j,N)=>N.toString()===g.id),b=e.questions.findIndex((j,N)=>N.toString()===(y==null?void 0:y.id));t(j=>({...j,questions:Bt(j.questions,m,b)}))}},f=h=>{t(g=>({...g,questions:[...g.questions,...h]}))},o=h=>{t(g=>({...g,questions:[...g.questions,...h]})),d(!1)};return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold",children:"Danh sÃ¡ch cÃ¢u há»i"}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs(Z,{onClick:()=>d(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white flex items-center space-x-2",children:[n.jsx(Nt,{className:"w-4 h-4"}),n.jsx("span",{children:"Táº¡o báº±ng AI"})]}),n.jsx(ia,{onQuestionsImported:f}),n.jsx(oa,{onQuestionsImported:f}),n.jsx(Z,{onClick:r,children:"+ ThÃªm cÃ¢u há»i"})]})]}),e.questions.length===0&&n.jsx("div",{className:"text-gray-500",children:"ChÆ°a cÃ³ cÃ¢u há»i nÃ o."}),n.jsx(Ms,{sensors:l,collisionDetection:Mr,onDragEnd:p,children:n.jsx(Ws,{items:e.questions.map((h,g)=>g.toString()),strategy:zs,children:n.jsx("div",{className:"space-y-4",children:e.questions.map((h,g)=>n.jsx(aa,{id:g.toString(),index:g,question:h,onUpdate:y=>s(g,y),onDelete:()=>a(g),moveQuestion:i,totalQuestions:e.questions.length},h.id))})})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-auto m-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Táº¡o cÃ¢u há»i báº±ng AI"}),n.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"Ã—"})]}),n.jsx("div",{className:"p-6",children:n.jsx(la,{content:`${e.title} - ${e.description}`,onQuestionsGenerated:o,isOpen:c,onClose:()=>d(!1)})})]})})]})},da=({quiz:e})=>{const t=e.questions.reduce((r,s)=>r+s.points,0);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"ThÃ´ng tin Quiz"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"TiÃªu Ä‘á»:"})," ",e.title]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Danh má»¥c:"})," ",e.category]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Äá»™ khÃ³:"})," ",e.difficulty]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Thá»i gian:"})," ",e.duration," phÃºt"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Sá»‘ cÃ¢u há»i:"})," ",e.questions.length]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Tá»•ng Ä‘iá»ƒm:"})," ",t]})]}),e.description&&n.jsxs("div",{className:"mt-2",children:[n.jsx("strong",{children:"MÃ´ táº£:"})," ",e.description]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:"Danh sÃ¡ch cÃ¢u há»i"}),e.questions.map((r,s)=>n.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("h4",{className:"font-medium",children:["CÃ¢u ",s+1,": ",r.text]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[r.type," â€¢ ",r.points," Ä‘iá»ƒm"]})]}),r.type==="short_answer"?n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("strong",{children:"ÄÃ¡p Ã¡n:"})," ",r.correctAnswer,r.acceptedAnswers&&r.acceptedAnswers.length>1&&n.jsxs("div",{children:[n.jsx("strong",{children:"CÃ¡c cÃ¡ch viáº¿t khÃ¡c:"})," ",r.acceptedAnswers.slice(1).join(", ")]})]}):n.jsx("div",{className:"space-y-1",children:r.answers.map((a,i)=>n.jsxs("div",{className:`text-sm p-2 rounded ${a.isCorrect?"bg-green-100 text-green-700":"bg-gray-100"}`,children:[String.fromCharCode(65+i),". ",a.text,a.isCorrect&&" âœ“",r.type==="image"&&a.imageUrl&&n.jsx("img",{src:a.imageUrl,alt:a.text,className:"w-16 h-16 object-cover rounded ml-2 inline-block"})]},a.id))}),r.explanation&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("strong",{children:"Giáº£i thÃ­ch:"})," ",r.explanation]})]},r.id))]})]})},ma=()=>{const{user:e}=Jn(m=>m.auth),[t,r]=u.useState(Xt),[s,a]=u.useState(0),[i,c]=u.useState(!1),d=()=>{r(m=>({...m,questions:[...m.questions,{id:ie(),text:"",type:"multiple",answers:[{id:ie(),text:"",isCorrect:!0},{id:ie(),text:"",isCorrect:!1},{id:ie(),text:"",isCorrect:!1},{id:ie(),text:"",isCorrect:!1}],points:1,correctAnswer:"",acceptedAnswers:[]}]}))},l=(m,b)=>{r(j=>({...j,questions:j.questions.map((N,S)=>S===m?b:N)}))},p=m=>{r(b=>({...b,questions:b.questions.filter((j,N)=>N!==m)}))},f=(m,b)=>{b<0||b>=t.questions.length||r(j=>{const N=[...j.questions],[S]=N.splice(m,1);return N.splice(b,0,S),{...j,questions:N}})},o=m=>{switch(m){case 0:return!!(t.title&&t.description&&t.category&&t.difficulty);case 1:return t.questions.length>0&&t.questions.every(b=>{if(!b.text)return!1;switch(b.type){case"short_answer":return!!b.correctAnswer;case"boolean":case"multiple":case"image":return b.answers.some(j=>j.isCorrect)&&b.answers.every(j=>j.text);default:return!1}});case 2:return!0;default:return!1}},h=async()=>{if(!e){L.error("Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ táº¡o quiz");return}if(!o(1)){L.error("Vui lÃ²ng hoÃ n thÃ nh táº¥t cáº£ thÃ´ng tin quiz");return}c(!0);try{await Xn(qn(Yn,"quizzes"),{...t,createdBy:e.uid,createdAt:Ht(),updatedAt:Ht(),isPublished:!0,tags:[],status:"pending"}),L.success("Táº¡o quiz thÃ nh cÃ´ng! Quiz Ä‘ang chá» admin duyá»‡t."),r(Xt),a(0)}catch(m){console.error("Error creating quiz:",m),L.error("CÃ³ lá»—i xáº£y ra khi táº¡o quiz")}finally{c(!1)}},g=()=>{o(s)?a(m=>Math.min(m+1,et.length-1)):L.error("Vui lÃ²ng hoÃ n thÃ nh thÃ´ng tin trÆ°á»›c khi tiáº¿p tá»¥c")},y=()=>{a(m=>Math.max(m-1,0))};return n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Táº¡o Quiz Má»›i"}),n.jsx("div",{className:"flex items-center justify-between mb-6",children:et.map((m,b)=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${b<=s?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:b+1}),n.jsx("span",{className:`ml-2 text-sm ${b<=s?"text-blue-600 font-medium":"text-gray-500"}`,children:m}),b<et.length-1&&n.jsx("div",{className:`w-16 h-0.5 mx-4 ${b<s?"bg-blue-500":"bg-gray-200"}`})]},b))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s===0&&n.jsx(mr,{quiz:t,setQuiz:r}),s===1&&n.jsx(ca,{quiz:t,setQuiz:r,addQuestion:d,updateQuestion:l,deleteQuestion:p,moveQuestion:f}),s===2&&n.jsx(da,{quiz:t}),n.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[n.jsx(Z,{onClick:y,disabled:s===0,variant:"outline",children:"â† Quay láº¡i"}),n.jsx("div",{className:"flex gap-3",children:s===et.length-1?n.jsx(Z,{onClick:h,disabled:i||!o(s),loading:i,className:"bg-green-600 hover:bg-green-700",children:"ðŸš€ Xuáº¥t báº£n Quiz"}):n.jsx(Z,{onClick:g,disabled:!o(s),children:"Tiáº¿p tá»¥c â†’"})})]})]})]})})};export{ma as default};
