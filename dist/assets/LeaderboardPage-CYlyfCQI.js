import{R as v,r as x,u as he,j as e,A as T,q as E,k as U,a4 as ge,D as I,C as pe}from"./index-CUTuLMUt.js";var ee={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y=v.createContext&&v.createContext(ee),fe=["attr","size","title"];function be(t,l){if(t==null)return{};var a=ye(t,l),i,m;if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(t);for(m=0;m<g.length;m++)i=g[m],!(l.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(a[i]=t[i])}return a}function ye(t,l){if(t==null)return{};var a={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(l.indexOf(i)>=0)continue;a[i]=t[i]}return a}function L(){return L=Object.assign?Object.assign.bind():function(t){for(var l=1;l<arguments.length;l++){var a=arguments[l];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},L.apply(this,arguments)}function Z(t,l){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);l&&(i=i.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,i)}return a}function P(t){for(var l=1;l<arguments.length;l++){var a=arguments[l]!=null?arguments[l]:{};l%2?Z(Object(a),!0).forEach(function(i){ve(t,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))})}return t}function ve(t,l,a){return l=je(l),l in t?Object.defineProperty(t,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[l]=a,t}function je(t){var l=Ne(t,"string");return typeof l=="symbol"?l:l+""}function Ne(t,l){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var i=a.call(t,l);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(t)}function te(t){return t&&t.map((l,a)=>v.createElement(l.tag,P({key:a},l.attr),te(l.child)))}function b(t){return l=>v.createElement(we,L({attr:P({},t.attr)},l),te(t.child))}function we(t){var l=a=>{var{attr:i,size:m,title:g}=t,o=be(t,fe),A=m||a.size||"1em",d;return a.className&&(d=a.className),t.className&&(d=(d?d+" ":"")+t.className),v.createElement("svg",L({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,i,o,{className:d,style:P(P({color:t.color||a.color},a.style),t.style),height:A,width:A,xmlns:"http://www.w3.org/2000/svg"}),g&&v.createElement("title",null,g),t.children)};return Y!==void 0?v.createElement(Y.Consumer,null,a=>l(a)):l(ee)}function ze(t){return b({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M97.12 362.63c-8.69-8.69-4.16-6.24-25.12-11.85-9.51-2.55-17.87-7.45-25.43-13.32L1.2 448.7c-4.39 10.77 3.81 22.47 15.43 22.03l52.69-2.01L105.56 507c8 8.44 22.04 5.81 26.43-4.96l52.05-127.62c-10.84 6.04-22.87 9.58-35.31 9.58-19.5 0-37.82-7.59-51.61-21.37zM382.8 448.7l-45.37-111.24c-7.56 5.88-15.92 10.77-25.43 13.32-21.07 5.64-16.45 3.18-25.12 11.85-13.79 13.78-32.12 21.37-51.62 21.37-12.44 0-24.47-3.55-35.31-9.58L252 502.04c4.39 10.77 18.44 13.4 26.43 4.96l36.25-38.28 52.69 2.01c11.62.44 19.82-11.27 15.43-22.03zM263 340c15.28-15.55 17.03-14.21 38.79-20.14 13.89-3.79 24.75-14.84 28.47-28.98 7.48-28.4 5.54-24.97 25.95-45.75 10.17-10.35 14.14-25.44 10.42-39.58-7.47-28.38-7.48-24.42 0-52.83 3.72-14.14-.25-29.23-10.42-39.58-20.41-20.78-18.47-17.36-25.95-45.75-3.72-14.14-14.58-25.19-28.47-28.98-27.88-7.61-24.52-5.62-44.95-26.41-10.17-10.35-25-14.4-38.89-10.61-27.87 7.6-23.98 7.61-51.9 0-13.89-3.79-28.72.25-38.89 10.61-20.41 20.78-17.05 18.8-44.94 26.41-13.89 3.79-24.75 14.84-28.47 28.98-7.47 28.39-5.54 24.97-25.95 45.75-10.17 10.35-14.15 25.44-10.42 39.58 7.47 28.36 7.48 24.4 0 52.82-3.72 14.14.25 29.23 10.42 39.59 20.41 20.78 18.47 17.35 25.95 45.75 3.72 14.14 14.58 25.19 28.47 28.98C104.6 325.96 106.27 325 121 340c13.23 13.47 33.84 15.88 49.74 5.82a39.676 39.676 0 0 1 42.53 0c15.89 10.06 36.5 7.65 49.73-5.82zM97.66 175.96c0-53.03 42.24-96.02 94.34-96.02s94.34 42.99 94.34 96.02-42.24 96.02-94.34 96.02-94.34-42.99-94.34-96.02z"},child:[]}]})(t)}function H(t){return b({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 448H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h416c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm64-320c-26.5 0-48 21.5-48 48 0 7.1 1.6 13.7 4.4 19.8L476 239.2c-15.4 9.2-35.3 4-44.2-11.6L350.3 85C361 76.2 368 63 368 48c0-26.5-21.5-48-48-48s-48 21.5-48 48c0 15 7 28.2 17.7 37l-81.5 142.6c-8.9 15.6-28.9 20.8-44.2 11.6l-72.3-43.4c2.7-6 4.4-12.7 4.4-19.8 0-26.5-21.5-48-48-48S0 149.5 0 176s21.5 48 48 48c2.6 0 5.2-.4 7.7-.8L128 416h384l72.3-192.8c2.5.4 5.1.8 7.7.8 26.5 0 48-21.5 48-48s-21.5-48-48-48z"},child:[]}]})(t)}function Ae(t){return b({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(t)}function Se(t){return b({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(t)}function Ce(t){return b({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(t)}function Oe(t){return b({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(t)}function F(t){return b({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(t)}function Me(t){return b({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}const Pe=()=>{var q;const[t,l]=x.useState([]),[a,i]=x.useState([]),[m,g]=x.useState(!0),[o,A]=x.useState(null),{user:d}=he(s=>s.auth),[se,ae]=x.useState("all"),[Q,re]=x.useState(""),[S,le]=x.useState(null),[C,ce]=x.useState(!1),[D,ie]=x.useState(!1);x.useEffect(()=>{(async()=>{g(!0);try{console.log("🏆 Fetching leaderboard data...");const n=T(E(U,"quizResults"),ge("completedAt","desc")),_=await I(n),de=T(E(U,"quizzes"),pe("isPublished","==",!0)),$=await I(de),me=T(E(U,"users")),V=await I(me);console.log("📊 Found:",{results:_.size,quizzes:$.size,users:V.size});const k=new Map;V.forEach(r=>{var u;const c=r.data();k.set(r.id,{id:r.id,displayName:c.displayName||((u=c.email)==null?void 0:u.split("@")[0])||"Anonymous",email:c.email,...c})});const R=new Map;$.forEach(r=>{const c=r.data();R.set(r.id,{id:r.id,title:c.title||"Untitled Quiz",description:c.description||"",category:c.category||"general",difficulty:c.difficulty||"medium",createdBy:c.createdBy,isPublished:c.isPublished,...c})});const y=new Map,j=new Map;let X=0,O=0,W=0;const G=new Date;G.setHours(0,0,0,0),_.forEach(r=>{var M,J;const c=r.data(),u=((J=(M=c.completedAt)==null?void 0:M.toDate)==null?void 0:J.call(M))||new Date(c.completedAt),N=c.userId;if(!y.has(N)){const h=k.get(N)||{};y.set(N,{userId:N,displayName:h.displayName||c.userName||"Anonymous",email:h.email||c.userEmail,totalScore:0,totalAttempts:0,averageScore:0,perfectScores:0,recentActivity:u.toLocaleDateString("vi-VN"),badge:"beginner"})}const w=y.get(N);w.totalAttempts++,w.totalScore+=c.score||0,c.score===100&&(w.perfectScores++,W++),u>new Date(w.recentActivity)&&(w.recentActivity=u.toLocaleDateString("vi-VN"));const z=c.quizId;if(!j.has(z)){const h=R.get(z)||{};j.set(z,{id:z,title:h.title||"Unknown Quiz",description:h.description||"",category:h.category||"general",difficulty:h.difficulty||"medium",totalAttempts:0,averageScore:0,totalCompletions:0,createdBy:h.createdBy,isPublished:h.isPublished,recentActivity:u.toLocaleDateString("vi-VN")})}const f=j.get(z);f.totalAttempts++,f.totalCompletions++,f.averageScore=(f.averageScore*(f.totalAttempts-1)+(c.score||0))/f.totalAttempts,u>new Date(f.recentActivity)&&(f.recentActivity=u.toLocaleDateString("vi-VN")),X+=c.score||0,O++}),y.forEach(r=>{r.averageScore=r.totalAttempts>0?r.totalScore/r.totalAttempts:0,r.averageScore>=90&&r.totalAttempts>=10?r.badge="legendary":r.averageScore>=80&&r.totalAttempts>=5?r.badge="expert":r.averageScore>=70&&r.totalAttempts>=3?r.badge="advanced":r.totalAttempts>=2?r.badge="intermediate":r.badge="beginner"});const K=Array.from(y.values()).sort((r,c)=>r.totalAttempts!==c.totalAttempts?c.totalAttempts-r.totalAttempts:Math.abs(r.averageScore-c.averageScore)>1?c.averageScore-r.averageScore:c.perfectScores-r.perfectScores).map((r,c)=>({...r,rank:c+1})),xe=Array.from(j.values()).sort((r,c)=>c.totalAttempts-r.totalAttempts);if(l(K),i(xe),d){const r=K.findIndex(c=>c.userId===d.uid);le(r>=0?r+1:null)}const ue=Array.from(y.values()).filter(r=>new Date(r.recentActivity)>=G).length;A({totalUsers:y.size,totalQuizzes:j.size,totalAttempts:O,averageScore:O>0?Math.round(X/O*10)/10:0,activeToday:ue,perfectScoresCount:W}),console.log("✅ Leaderboard data processed successfully")}catch(n){console.error("❌ Error fetching leaderboard data:",n)}finally{g(!1)}})()},[d]);const p=t.filter(s=>{const n=Q.toLowerCase();return s.displayName&&s.displayName.toLowerCase().includes(n)||s.email&&s.email.toLowerCase().includes(n)||s.userId&&s.userId.toLowerCase().includes(n)}),B=s=>{switch(s){case"legendary":return e.jsx(H,{className:"w-5 h-5 text-yellow-500"});case"expert":return e.jsx(F,{className:"w-5 h-5 text-purple-500"});case"advanced":return e.jsx(Ce,{className:"w-5 h-5 text-blue-500"});case"intermediate":return e.jsx(ze,{className:"w-5 h-5 text-green-500"});default:return e.jsx(Oe,{className:"w-5 h-5 text-gray-500"})}},ne=s=>{switch(s){case"legendary":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"expert":return"bg-purple-100 text-purple-800 border-purple-300";case"advanced":return"bg-blue-100 text-blue-800 border-blue-300";case"intermediate":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},oe=s=>{switch(s){case"easy":return"bg-green-100 text-green-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-8 text-center flex items-center justify-center gap-3",children:[e.jsx(F,{className:"text-yellow-500"}),"Bảng Xếp Hạng",e.jsx(F,{className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("label",{className:"font-medium text-gray-700",children:"Thời gian:"}),e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 bg-white",value:se,onChange:s=>ae(s.target.value),children:[e.jsx("option",{value:"all",children:"Tất cả thời gian"}),e.jsx("option",{value:"week",children:"Tuần này"}),e.jsx("option",{value:"month",children:"Tháng này"})]})]}),e.jsx("input",{className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-80 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"🔍 Tìm kiếm người chơi...",value:Q,onChange:s=>re(s.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-4 text-center shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.totalUsers)||"--"}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Người chơi"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-4 text-center shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.totalQuizzes)||"--"}),e.jsx("div",{className:"text-green-100 text-sm",children:"Quiz"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-xl p-4 text-center shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.totalAttempts)||"--"}),e.jsx("div",{className:"text-yellow-100 text-sm",children:"Lượt chơi"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-4 text-center shadow-lg",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(o==null?void 0:o.averageScore)||"--","%"]}),e.jsx("div",{className:"text-purple-100 text-sm",children:"Điểm TB"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-4 text-center shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.activeToday)||"--"}),e.jsx("div",{className:"text-red-100 text-sm",children:"Hoạt động hôm nay"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white rounded-xl p-4 text-center shadow-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.perfectScoresCount)||"--"}),e.jsx("div",{className:"text-indigo-100 text-sm",children:"Điểm tuyệt đối"})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center flex items-center justify-center gap-2",children:[e.jsx(H,{className:"text-yellow-500"}),"Top Người Chơi Xuất Sắc"]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:m?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,n)=>e.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},n))}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Me,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Chưa có dữ liệu"}),e.jsx("p",{className:"text-gray-500",children:"Hãy tham gia quiz để xuất hiện trên bảng xếp hạng!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-center items-end gap-6 mb-6",children:p.slice(0,3).map((s,n)=>e.jsxs("div",{className:`text-center ${n===0?"order-2":n===1?"order-1":"order-3"}`,children:[e.jsxs("div",{className:`relative mb-4 ${n===0?"transform scale-110":""}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold text-white mx-auto ${n===0?"bg-gradient-to-br from-yellow-400 to-yellow-600":n===1?"bg-gradient-to-br from-gray-400 to-gray-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:s.displayName.charAt(0).toUpperCase()}),e.jsx("div",{className:"absolute -top-3 -right-2",children:B(s.badge)}),n===0&&e.jsx(H,{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-2xl text-yellow-500"})]}),e.jsx("div",{className:"font-bold text-gray-900 truncate max-w-24",children:s.displayName}),e.jsxs("div",{className:`text-sm font-semibold ${n===0?"text-yellow-600":n===1?"text-gray-600":"text-orange-600"}`,children:["🎯 ",s.totalAttempts," quiz"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(s.averageScore),"% điểm TB"]}),e.jsxs("div",{className:`mt-2 px-2 py-1 rounded-full text-xs font-bold ${n===0?"bg-yellow-100 text-yellow-800":n===1?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:["#",n+1]})]},s.userId))}),p.length>=4&&e.jsx("div",{className:"flex justify-center gap-4",children:p.slice(3,5).map((s,n)=>e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 flex items-center gap-3 min-w-64",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:s.displayName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:["#",n+4," ",s.displayName,B(s.badge)]}),e.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:["🎯 ",s.totalAttempts," quiz • ",Math.round(s.averageScore),"% TB"]})]})]},s.userId))})]}),e.jsx("div",{className:"space-y-2",children:(C?p.slice(5):p.slice(5,20)).map((s,n)=>e.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-lg transition-colors ${S===n+6?"bg-blue-50 border-2 border-blue-200":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("span",{className:"font-bold text-lg text-blue-600 w-8",children:["#",n+6]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:s.displayName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[s.displayName,e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${ne(s.badge)}`,children:s.badge})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["🎯 ",s.totalAttempts," quiz • ",s.perfectScores," điểm 100 • Hoạt động: ",s.recentActivity]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-lg text-blue-600",children:["🎯 ",s.totalAttempts]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[Math.round(s.averageScore),"% TB"]})]}),e.jsx("div",{className:"text-gray-400",children:B(s.badge)})]},s.userId))}),p.length>20&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:()=>ce(!C),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:C?"Thu gọn":`Xem thêm ${p.length-20} người`})}),d&&S&&S>20&&!C&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold text-blue-700",children:["#",S]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:((q=d.displayName)==null?void 0:q.charAt(0).toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-blue-900",children:"Vị trí của bạn"}),e.jsx("div",{className:"text-sm text-blue-700",children:d.displayName||d.email})]})]})})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-center flex items-center gap-2",children:[e.jsx(Ae,{className:"text-red-500"}),"Quiz Phổ Biến Nhất"]}),a.length>12&&e.jsx("button",{onClick:()=>ie(!D),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold",children:D?"Thu gọn":`Xem tất cả (${a.length})`})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?Array.from({length:6}).map((s,n)=>e.jsx("div",{className:"animate-pulse bg-white rounded-xl shadow-lg h-32"},n)):a.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(Se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Chưa có quiz nào"}),e.jsx("p",{className:"text-gray-500",children:"Hãy tạo quiz đầu tiên để xuất hiện ở đây!"})]}):(D?a:a.slice(0,12)).map((s,n)=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow border-l-4 border-blue-500",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:s.description})]}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded-full",children:["#",n+1]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${oe(s.difficulty)}`,children:s.difficulty==="easy"?"Dễ":s.difficulty==="hard"?"Khó":"Trung bình"}),e.jsx("span",{className:"text-gray-500 text-sm capitalize",children:s.category})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Lượt chơi:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:s.totalAttempts})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Điểm TB:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[Math.round(s.averageScore),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Hoạt động:"}),e.jsx("span",{className:"text-gray-500 text-xs",children:s.recentActivity})]})]})]},s.id))})]})]})})};export{Pe as default};
