import{R as e,a as t,r as a,u as r,j as s,q as l,l as i,h as c,t as n,m as d,w as o}from"./index-BcvsJ6SD.js";var m={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x=e.createContext&&e.createContext(m),u=["attr","size","title"];function h(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},g.apply(this,arguments)}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach(function(t){f(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function f(e,t,a){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(t){return t&&t.map((t,a)=>e.createElement(t.tag,p({key:a},t.attr),v(t.child)))}function y(t){return a=>e.createElement(j,g({attr:p({},t.attr)},a),v(t.child))}function j(t){var a=a=>{var r,{attr:s,size:l,title:i}=t,c=h(t,u),n=l||a.size||"1em";return a.className&&(r=a.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,c,{className:r,style:p(p({color:t.color||a.color},a.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),i&&e.createElement("title",null,i),t.children)};return void 0!==x?e.createElement(x.Consumer,null,e=>a(e)):a(m)}function N(e){return y({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M97.12 362.63c-8.69-8.69-4.16-6.24-25.12-11.85-9.51-2.55-17.87-7.45-25.43-13.32L1.2 448.7c-4.39 10.77 3.81 22.47 15.43 22.03l52.69-2.01L105.56 507c8 8.44 22.04 5.81 26.43-4.96l52.05-127.62c-10.84 6.04-22.87 9.58-35.31 9.58-19.5 0-37.82-7.59-51.61-21.37zM382.8 448.7l-45.37-111.24c-7.56 5.88-15.92 10.77-25.43 13.32-21.07 5.64-16.45 3.18-25.12 11.85-13.79 13.78-32.12 21.37-51.62 21.37-12.44 0-24.47-3.55-35.31-9.58L252 502.04c4.39 10.77 18.44 13.4 26.43 4.96l36.25-38.28 52.69 2.01c11.62.44 19.82-11.27 15.43-22.03zM263 340c15.28-15.55 17.03-14.21 38.79-20.14 13.89-3.79 24.75-14.84 28.47-28.98 7.48-28.4 5.54-24.97 25.95-45.75 10.17-10.35 14.14-25.44 10.42-39.58-7.47-28.38-7.48-24.42 0-52.83 3.72-14.14-.25-29.23-10.42-39.58-20.41-20.78-18.47-17.36-25.95-45.75-3.72-14.14-14.58-25.19-28.47-28.98-27.88-7.61-24.52-5.62-44.95-26.41-10.17-10.35-25-14.4-38.89-10.61-27.87 7.6-23.98 7.61-51.9 0-13.89-3.79-28.72.25-38.89 10.61-20.41 20.78-17.05 18.8-44.94 26.41-13.89 3.79-24.75 14.84-28.47 28.98-7.47 28.39-5.54 24.97-25.95 45.75-10.17 10.35-14.15 25.44-10.42 39.58 7.47 28.36 7.48 24.4 0 52.82-3.72 14.14.25 29.23 10.42 39.59 20.41 20.78 18.47 17.35 25.95 45.75 3.72 14.14 14.58 25.19 28.47 28.98C104.6 325.96 106.27 325 121 340c13.23 13.47 33.84 15.88 49.74 5.82a39.676 39.676 0 0 1 42.53 0c15.89 10.06 36.5 7.65 49.73-5.82zM97.66 175.96c0-53.03 42.24-96.02 94.34-96.02s94.34 42.99 94.34 96.02-42.24 96.02-94.34 96.02-94.34-42.99-94.34-96.02z"},child:[]}]})(e)}function w(e){return y({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 448H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h416c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm64-320c-26.5 0-48 21.5-48 48 0 7.1 1.6 13.7 4.4 19.8L476 239.2c-15.4 9.2-35.3 4-44.2-11.6L350.3 85C361 76.2 368 63 368 48c0-26.5-21.5-48-48-48s-48 21.5-48 48c0 15 7 28.2 17.7 37l-81.5 142.6c-8.9 15.6-28.9 20.8-44.2 11.6l-72.3-43.4c2.7-6 4.4-12.7 4.4-19.8 0-26.5-21.5-48-48-48S0 149.5 0 176s21.5 48 48 48c2.6 0 5.2-.4 7.7-.8L128 416h384l72.3-192.8c2.5.4 5.1.8 7.7.8 26.5 0 48-21.5 48-48s-21.5-48-48-48z"},child:[]}]})(e)}function z(e){return y({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(e)}function S(e){return y({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(e)}function A(e){return y({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function C(e){return y({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function O(e){return y({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(e)}function M(e){return y({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(e)}const P=()=>{var e;const{t:m}=t(),[x,u]=a.useState([]),[h,g]=a.useState([]),[b,p]=a.useState(!0),[f,v]=a.useState(null),{user:y}=r(e=>e.auth),[j,P]=a.useState("all"),[L,T]=a.useState(""),[B,D]=a.useState(null),[H,E]=a.useState(!1),[q,k]=a.useState(!1);a.useEffect(()=>{(async()=>{p(!0);try{const e=l(i(c,"quizResults"),n("completedAt","desc")),t=await d(e),a=l(i(c,"quizzes"),o("isPublished","==",!0)),r=await d(a),s=l(i(c,"users")),m=await d(s),x=new Map;m.forEach(e=>{var t;const a=e.data();x.set(e.id,{id:e.id,displayName:a.displayName||(null==(t=a.email)?void 0:t.split("@")[0])||"Anonymous",email:a.email,...a})});const h=new Map;r.forEach(e=>{const t=e.data();h.set(e.id,{id:e.id,title:t.title||"Untitled Quiz",description:t.description||"",category:t.category||"general",difficulty:t.difficulty||"medium",createdBy:t.createdBy,isPublished:t.isPublished,...t})});const b=new Map,p=new Map;let f=0,j=0,N=0;const w=new Date;w.setHours(0,0,0,0),t.forEach(e=>{var t,a;const r=e.data(),s=(null==(a=null==(t=r.completedAt)?void 0:t.toDate)?void 0:a.call(t))||new Date(r.completedAt),l=r.userId;if(!b.has(l)){const e=x.get(l)||{};b.set(l,{userId:l,displayName:e.displayName||r.userName||"Anonymous",email:e.email||r.userEmail,totalScore:0,totalAttempts:0,averageScore:0,perfectScores:0,recentActivity:s.toLocaleDateString("vi-VN"),badge:"beginner"})}const i=b.get(l);i.totalAttempts++,i.totalScore+=r.score||0,100===r.score&&(i.perfectScores++,N++),s>new Date(i.recentActivity)&&(i.recentActivity=s.toLocaleDateString("vi-VN"));const c=r.quizId;if(!p.has(c)){const e=h.get(c)||{};p.set(c,{id:c,title:e.title||"Unknown Quiz",description:e.description||"",category:e.category||"general",difficulty:e.difficulty||"medium",totalAttempts:0,averageScore:0,totalCompletions:0,createdBy:e.createdBy,isPublished:e.isPublished,recentActivity:s.toLocaleDateString("vi-VN")})}const n=p.get(c);n.totalAttempts++,n.totalCompletions++,n.averageScore=(n.averageScore*(n.totalAttempts-1)+(r.score||0))/n.totalAttempts,s>new Date(n.recentActivity)&&(n.recentActivity=s.toLocaleDateString("vi-VN")),f+=r.score||0,j++}),b.forEach(e=>{e.averageScore=e.totalAttempts>0?e.totalScore/e.totalAttempts:0,e.averageScore>=90&&e.totalAttempts>=10?e.badge="legendary":e.averageScore>=80&&e.totalAttempts>=5?e.badge="expert":e.averageScore>=70&&e.totalAttempts>=3?e.badge="advanced":e.totalAttempts>=2?e.badge="intermediate":e.badge="beginner"});const z=Array.from(b.values()).sort((e,t)=>e.totalAttempts!==t.totalAttempts?t.totalAttempts-e.totalAttempts:Math.abs(e.averageScore-t.averageScore)>1?t.averageScore-e.averageScore:t.perfectScores-e.perfectScores).map((e,t)=>({...e,rank:t+1})),S=Array.from(p.values()).sort((e,t)=>t.totalAttempts-e.totalAttempts);if(u(z),g(S),y){const e=z.findIndex(e=>e.userId===y.uid);D(e>=0?e+1:null)}const A=Array.from(b.values()).filter(e=>new Date(e.recentActivity)>=w).length;v({totalUsers:b.size,totalQuizzes:p.size,totalAttempts:j,averageScore:j>0?Math.round(f/j*10)/10:0,activeToday:A,perfectScoresCount:N})}catch(e){}finally{p(!1)}})()},[y]);const I=x.filter(e=>{const t=L.toLowerCase();return e.displayName&&e.displayName.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)||e.userId&&e.userId.toLowerCase().includes(t)}),Q=e=>{switch(e){case"legendary":return s.jsx(w,{className:"w-5 h-5 text-yellow-500"});case"expert":return s.jsx(O,{className:"w-5 h-5 text-purple-500"});case"advanced":return s.jsx(A,{className:"w-5 h-5 text-blue-500"});case"intermediate":return s.jsx(N,{className:"w-5 h-5 text-green-500"});default:return s.jsx(C,{className:"w-5 h-5 text-gray-500"})}},U=e=>{switch(e){case"legendary":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"expert":return"bg-purple-100 text-purple-800 border-purple-300";case"advanced":return"bg-blue-100 text-blue-800 border-blue-300";case"intermediate":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},V=e=>{switch(e){case"easy":return"bg-green-100 text-green-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[s.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-8 text-center flex items-center justify-center gap-3",children:[s.jsx(O,{className:"text-yellow-500"}),m("leaderboard.title","Bảng Xếp Hạng"),s.jsx(O,{className:"text-yellow-500"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:[s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("label",{className:"font-medium text-gray-700",children:[m("leaderboard.time","Thời gian"),":"]}),s.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 bg-white",value:j,onChange:e=>P(e.target.value),children:[s.jsx("option",{value:"all",children:m("leaderboard.filters.allTime","Tất cả thời gian")}),s.jsx("option",{value:"week",children:m("leaderboard.filters.thisWeek","Tuần này")}),s.jsx("option",{value:"month",children:m("leaderboard.filters.thisMonth","Tháng này")})]})]}),s.jsx("input",{className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-80 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:m("leaderboard.searchPlayers","🔍 Tìm kiếm người chơi..."),value:L,onChange:e=>T(e.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-4 text-center shadow-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.totalUsers)||"--"}),s.jsx("div",{className:"text-blue-100 text-sm",children:m("leaderboard.players","Người chơi")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-4 text-center shadow-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.totalQuizzes)||"--"}),s.jsx("div",{className:"text-green-100 text-sm",children:m("nav.quizzes","Quiz")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-xl p-4 text-center shadow-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.totalAttempts)||"--"}),s.jsx("div",{className:"text-yellow-100 text-sm",children:m("leaderboard.plays","Lượt chơi")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-4 text-center shadow-lg",children:[s.jsxs("div",{className:"text-2xl font-bold",children:[(null==f?void 0:f.averageScore)||"--","%"]}),s.jsx("div",{className:"text-purple-100 text-sm",children:m("leaderboard.avgScore","Điểm TB")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-4 text-center shadow-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.activeToday)||"--"}),s.jsx("div",{className:"text-red-100 text-sm",children:m("leaderboard.activeToday","Hoạt động hôm nay")})]}),s.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white rounded-xl p-4 text-center shadow-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:(null==f?void 0:f.perfectScoresCount)||"--"}),s.jsx("div",{className:"text-indigo-100 text-sm",children:m("leaderboard.perfectScores","Điểm tuyệt đối")})]})]}),s.jsxs("div",{className:"mb-10",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center flex items-center justify-center gap-2",children:[s.jsx(w,{className:"text-yellow-500"}),m("leaderboard.topPlayers","Top Người Chơi Xuất Sắc")]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:b?s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>s.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},t))}):0===I.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(M,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:m("leaderboard.noData","Chưa có dữ liệu")}),s.jsx("p",{className:"text-gray-500",children:m("leaderboard.playToAppear","Hãy tham gia quiz để xuất hiện trên bảng xếp hạng!")})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex justify-center items-end gap-6 mb-6",children:I.slice(0,3).map((e,t)=>s.jsxs("div",{className:"text-center "+(0===t?"order-2":1===t?"order-1":"order-3"),children:[s.jsxs("div",{className:"relative mb-4 "+(0===t?"transform scale-110":""),children:[s.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold text-white mx-auto "+(0===t?"bg-gradient-to-br from-yellow-400 to-yellow-600":1===t?"bg-gradient-to-br from-gray-400 to-gray-600":"bg-gradient-to-br from-orange-400 to-orange-600"),children:e.displayName.charAt(0).toUpperCase()}),s.jsx("div",{className:"absolute -top-3 -right-2",children:Q(e.badge)}),0===t&&s.jsx(w,{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-2xl text-yellow-500"})]}),s.jsx("div",{className:"font-bold text-gray-900 truncate max-w-24",children:e.displayName}),s.jsxs("div",{className:"text-sm font-semibold "+(0===t?"text-yellow-600":1===t?"text-gray-600":"text-orange-600"),children:["🎯 ",e.totalAttempts," ",m("nav.quizzes","quiz")]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(e.averageScore),"% ",m("leaderboard.avgShort","TB")]}),s.jsxs("div",{className:"mt-2 px-2 py-1 rounded-full text-xs font-bold "+(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"),children:["#",t+1]})]},e.userId))}),I.length>=4&&s.jsx("div",{className:"flex justify-center gap-4",children:I.slice(3,5).map((e,t)=>s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 flex items-center gap-3 min-w-64",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:e.displayName.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:["#",t+4," ",e.displayName,Q(e.badge)]}),s.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:["🎯 ",e.totalAttempts," ",m("nav.quizzes","quiz")," • ",Math.round(e.averageScore),"% ",m("leaderboard.avgShort","TB")]})]})]},e.userId))})]}),s.jsx("div",{className:"space-y-2",children:(H?I.slice(5):I.slice(5,20)).map((e,t)=>s.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg transition-colors "+(B===t+6?"bg-blue-50 border-2 border-blue-200":"hover:bg-gray-50"),children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsxs("span",{className:"font-bold text-lg text-blue-600 w-8",children:["#",t+6]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:e.displayName.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.displayName,s.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${U(e.badge)}`,children:e.badge})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["🎯 ",e.totalAttempts," ",m("nav.quizzes","quiz")," • ",e.perfectScores," ",m("leaderboard.perfect100","điểm 100")," • ",m("leaderboard.activity","Hoạt động"),": ",e.recentActivity]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-lg text-blue-600",children:["🎯 ",e.totalAttempts]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[Math.round(e.averageScore),"% TB"]})]}),s.jsx("div",{className:"text-gray-400",children:Q(e.badge)})]},e.userId))}),I.length>20&&s.jsx("div",{className:"text-center mt-6",children:s.jsx("button",{onClick:()=>E(!H),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:H?m("leaderboard.collapse","Thu gọn"):m("leaderboard.viewAllCount","Xem tất cả ({{count}})",{count:I.length-20})})}),y&&B&&B>20&&!H&&s.jsx("div",{className:"mt-6 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"font-bold text-blue-700",children:["#",B]}),s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:(null==(e=y.displayName)?void 0:e.charAt(0).toUpperCase())||"U"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-blue-900",children:m("leaderboard.yourPosition","Vị trí của bạn")}),s.jsx("div",{className:"text-sm text-blue-700",children:y.displayName||y.email})]})]})})]})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-center flex items-center gap-2",children:[s.jsx(z,{className:"text-red-500"}),m("leaderboard.topQuizzes","Quiz Phổ Biến Nhất")]}),h.length>12&&s.jsx("button",{onClick:()=>k(!q),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold",children:q?m("leaderboard.collapse","Thu gọn"):m("leaderboard.viewAllCount","Xem tất cả ({{count}})",{count:h.length})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b?Array.from({length:6}).map((e,t)=>s.jsx("div",{className:"animate-pulse bg-white rounded-xl shadow-lg h-32"},t)):0===h.length?s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:m("leaderboard.noQuizzes","Chưa có quiz nào")}),s.jsx("p",{className:"text-gray-500",children:m("leaderboard.createFirstQuiz","Hãy tạo quiz đầu tiên để xuất hiện ở đây!")})]}):(q?h:h.slice(0,12)).map((e,t)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2",children:e.title}),s.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:e.description})]}),s.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded-full",children:["#",t+1]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V(e.difficulty)}`,children:"easy"===e.difficulty?m("difficulty.easy","Dễ"):"hard"===e.difficulty?m("difficulty.hard","Khó"):m("difficulty.medium","Trung bình")}),s.jsx("span",{className:"text-gray-500 text-sm capitalize",children:e.category})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-gray-600 text-sm",children:[m("leaderboard.plays","Lượt chơi"),":"]}),s.jsx("span",{className:"font-semibold text-blue-600",children:e.totalAttempts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-gray-600 text-sm",children:[m("leaderboard.avgScore","Điểm TB"),":"]}),s.jsxs("span",{className:"font-semibold text-green-600",children:[Math.round(e.averageScore),"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-gray-600 text-sm",children:[m("leaderboard.activity","Hoạt động"),":"]}),s.jsx("span",{className:"text-gray-500 text-xs",children:e.recentActivity})]})]})]},e.id))})]})]})})};export{P as default};
