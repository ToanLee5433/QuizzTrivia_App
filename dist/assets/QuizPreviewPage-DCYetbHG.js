import{v as y,b as v,d as w,u as z,r as c,j as e,L as d,z as o,H as u,O as q,S,E as k,n as L,i as T,k as D,t as R}from"./index-CUTuLMUt.js";import{Q}from"./QuickReviewSection-u80bxDqr.js";import"./ReviewForm-CUyZab1E.js";import"./send-C6orf-r8.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],$=y("play",E),F=()=>{var h;const{id:l}=v(),r=w(),g=z(t=>t.auth.user),[s,j]=c.useState(null),[p,f]=c.useState(!0),[i,N]=c.useState(null);if(c.useEffect(()=>{(async()=>{if(l)try{const a=await L(T(D,"quizzes",l));if(a.exists()){const b={id:a.id,...a.data()};j(b);try{const n=await R.getQuizReviewStats(l);N(n)}catch(n){console.error("Error fetching review stats:",n)}}else r("/quizzes")}catch(a){console.error("Error fetching quiz:",a),r("/quizzes")}finally{f(!1)}})()},[l,r]),p)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Đang tải quiz..."})]})});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Quiz không tồn tại"}),e.jsx(d,{to:"/quizzes",className:"text-blue-600 hover:underline",children:"Về danh sách quiz"})]})});const x=t=>{switch(t){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=t=>{switch(t){case"easy":return"Dễ";case"medium":return"Trung bình";case"hard":return"Khó";default:return t}};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white mb-8",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:s.title}),e.jsx("p",{className:"text-blue-100 text-lg mb-6",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-5 h-5"}),e.jsxs("span",{children:[s.questions.length," câu hỏi"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:s.timeLimit?`${s.timeLimit/60} phút`:"Không giới hạn"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${x(s.difficulty)}`,children:m(s.difficulty)})]})]}),i&&i.totalReviews>0&&e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(t=>e.jsx(S,{className:`w-5 h-5 ${t<=Math.round(i.averageRating)?"text-yellow-400 fill-current":"text-gray-300"}`},t))}),e.jsx("span",{className:"font-semibold",children:i.averageRating.toFixed(1)}),e.jsxs("span",{className:"text-blue-200",children:["(",i.totalReviews," đánh giá)"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs(d,{to:`/quiz/${s.id}`,className:"inline-flex items-center px-6 py-3 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition-colors shadow-md",children:[e.jsx($,{className:"w-5 h-5 mr-2"}),"Bắt đầu Quiz"]}),e.jsxs(d,{to:`/quiz/${s.id}/reviews`,className:"inline-flex items-center px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-400 transition-colors border border-blue-400",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Xem đánh giá"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Thông tin chi tiết"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(o,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Số câu hỏi"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.questions.length})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(u,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"Thời gian"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:s.timeLimit?`${s.timeLimit/60}'`:"∞"})]})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Chủ đề"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((t,a)=>e.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:["#",t]},a))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Dạng câu hỏi"}),e.jsxs("div",{className:"space-y-3",children:[s.questions.slice(0,3).map((t,a)=>e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-600 text-white text-sm font-semibold rounded-full",children:a+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800 font-medium",children:t.text}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Loại: ",t.type==="multiple"?"Trắc nghiệm":t.type==="boolean"?"Đúng/Sai":"Tự luận"]}),e.jsxs("span",{children:["Điểm: ",t.points]})]})]})]})},t.id)),s.questions.length>3&&e.jsxs("p",{className:"text-center text-gray-600 py-4",children:["... và ",s.questions.length-3," câu hỏi khác"]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Thống kê"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Danh mục"}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.category})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Độ khó"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${x(s.difficulty)}`,children:m(s.difficulty)})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Đánh giá"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[i.averageRating.toFixed(1),"/5 ⭐"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lượt đánh giá"}),e.jsx("span",{className:"font-semibold text-gray-900",children:i.totalReviews})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Tác giả"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:((h=s.createdBy)==null?void 0:h.charAt(0).toUpperCase())||"A"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Tác giả"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.createdAt&&new Date(s.createdAt.seconds*1e3).toLocaleDateString("vi-VN")})]})]})]})]})]}),g&&e.jsx(Q,{quizId:s.id,quizTitle:s.title})]})})};export{F as default};
