const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CUTuLMUt.js","assets/index-B_cN7TH7.css"])))=>i.map(i=>d[i]);
import{b as M,d as z,w as A,u as C,r as c,a9 as E,aa as T,ab as $,j as e}from"./index-CUTuLMUt.js";import{q as Q}from"./quizStatsService-BEYZWmAJ.js";const I=()=>{const{id:s}=M(),n=z(),t=A(),{quizzes:l,currentQuiz:a,loading:d,error:h}=C(r=>r.quiz),u=C(r=>r.auth.user),[j,y]=c.useState(null);return c.useEffect(()=>{if(console.log("🔍 QuizPage: Looking for quiz:",s),console.log("🔍 Available quizzes:",l.map(m=>({id:m.id,title:m.title}))),!s){console.log("❌ No quiz ID provided"),n("/quiz-list");return}const r=l.find(m=>m.id===s);console.log("🔍 Found quiz in store:",r?r.title:"NOT FOUND"),r?(y(r),t(E(r)),u?(console.log("📊 Tracking quiz view for user:",u.uid),Q.trackView(s,u.uid)):(console.log("📊 Tracking anonymous quiz view"),Q.trackView(s))):(console.log("❌ Quiz not found in store"),n("/quiz-list"))},[s,l,n,t,u]),c.useEffect(()=>{a&&a.id===s&&(console.log("🔍 Using currentQuiz from Redux:",a.title),y(a))},[a,s]),{quiz:j,loading:d,error:h}},L=({questions:s,currentQuestionIndex:n,onQuestionChange:t,answers:l})=>{const a=z(),[d,h]=c.useState(!1),[u,j]=c.useState(!1),[y,r]=c.useState(!1),m=c.useCallback(()=>{n<s.length-1&&t(n+1)},[n,s.length,t]),o=c.useCallback(()=>{n>0&&t(n-1)},[n,t]),i=c.useCallback(p=>{p>=0&&p<s.length&&t(p)},[s.length,t]),x=c.useCallback(()=>{h(!0)},[]),N=c.useCallback(()=>{a("/quiz-list")},[a]),w=c.useCallback(()=>{s.filter(k=>!l[k.id]||Array.isArray(l[k.id])&&l[k.id].length===0||l[k.id]==="").length>0?r(!0):j(!0)},[s,l]),v=c.useCallback(()=>s.filter(p=>!l[p.id]||Array.isArray(l[p.id])&&l[p.id].length===0||l[p.id]===""),[s,l]),g=n===0,b=n===s.length-1;return{goToNextQuestion:m,goToPreviousQuestion:o,goToQuestion:i,handleExitQuiz:x,confirmExitQuiz:N,handleSubmitQuiz:w,getUnansweredQuestions:v,isFirstQuestion:g,isLastQuestion:b,modalControls:{showExitModal:d,setShowExitModal:h,showSubmitModal:u,setShowSubmitModal:j,showUnansweredModal:y,setShowUnansweredModal:r}}},R=({onTimeUp:s,isActive:n=!0})=>{const t=A(),{timeLeft:l,totalTime:a,quizStartTime:d,isTimeWarning:h}=C(g=>g.quiz),u=c.useRef(null),[j,y]=c.useState(!1);c.useEffect(()=>(n&&d&&a>0?(u.current=setInterval(()=>{t(T())},1e3),t(T())):u.current&&(clearInterval(u.current),u.current=null),()=>{u.current&&(clearInterval(u.current),u.current=null)}),[n,d,a,t]),c.useEffect(()=>{l<=0&&!j&&d&&(y(!0),s())},[l,j,s,d]);const r=c.useCallback(g=>{const b=Math.floor(g/60),f=g%60;return`${b.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`},[]),m=r(l),o=a>0?(a-l)/a*100:0,i=Math.ceil(a*.1),x=l<=i,N=l<=Math.ceil(a*.05),w=d?Math.floor((Date.now()-d)/1e3):0,v=r(w);return{timeLeft:l,formattedTime:m,percentage:o,isRunning:n,isTimeRunningOut:x,isTimeCritical:N,isTimeWarning:h,timeTaken:w,timeTakenFormatted:v,totalTime:a,formatTime:r}},U=(s,n)=>{if(n.type!=="short_answer")return!1;const t=a=>a.trim().toLowerCase().replace(/\s+/g," "),l=t(s);return n.correctAnswer&&t(n.correctAnswer)===l?!0:n.acceptedAnswers?n.acceptedAnswers.some(a=>t(a)===l):!1},B=({quiz:s})=>{const n=z(),{user:t}=C(o=>o.auth),[l,a]=c.useState({quizId:s.id,startTime:Date.now(),currentQuestionIndex:0,answers:{},isCompleted:!1,timeSpent:0});c.useEffect(()=>{t&&(console.log("📊 Tracking quiz attempt for user:",t.uid),Q.trackAttempt(s.id,t.uid))},[s.id,t]),c.useEffect(()=>{const o=setInterval(()=>{a(i=>({...i,timeSpent:Date.now()-i.startTime}))},1e3);return()=>clearInterval(o)},[]);const d=c.useCallback((o,i)=>{a(x=>({...x,answers:{...x.answers,[o]:i}}))},[]),h=c.useCallback(o=>{a(i=>({...i,currentQuestionIndex:o}))},[]),u=c.useCallback((o,i)=>{let x=0,N=o.length;return o.forEach(v=>{var f;const g=i[v.id];if(g==null)return;let b=!1;switch(v.type){case"boolean":case"multiple":case"image":{const p=(f=v.answers.find(k=>k.isCorrect))==null?void 0:f.id;b=g===p,b&&x++;break}case"checkbox":{const p=v.answers.filter(S=>S.isCorrect).map(S=>S.id).sort(),k=Array.isArray(g)?[...g].sort():[];b=JSON.stringify(p)===JSON.stringify(k),b&&x++;break}case"short_answer":{b=U(g,v),b&&x++;break}}}),{correct:x,total:N,percentage:Math.round(x/N*100)}},[]),j=c.useCallback(async()=>{var x;const o={...l,isCompleted:!0,endTime:Date.now(),timeSpent:Date.now()-l.startTime};a(o);const i=u(s.questions,o.answers);try{if(t){console.log("💾 Saving quiz result to Firestore...");const N=Object.entries(o.answers).map(([b,f])=>({questionId:b,selectedAnswerId:typeof f=="string"?f:JSON.stringify(f),isCorrect:!1,timeSpent:0})),w={userId:t.uid,userEmail:t.email||"",userName:t.displayName||((x=t.email)==null?void 0:x.split("@")[0])||"Anonymous",quizId:s.id,score:i.percentage,correctAnswers:i.correct,totalQuestions:i.total,timeSpent:Math.round(o.timeSpent/1e3),answers:N,completedAt:new Date},{submitQuizResult:v}=await $(async()=>{const{submitQuizResult:b}=await import("./index-CUTuLMUt.js").then(f=>f.ah);return{submitQuizResult:b}},__vite__mapDeps([0,1])),g=await v(w);console.log("✅ Quiz result saved with ID:",g)}}catch(N){console.error("❌ Failed to save quiz result:",N)}n(`/results/${s.id}`,{state:{quiz:s,session:o,score:i,correct:i.correct,total:i.total,answers:o.answers,timeSpent:Math.round(o.timeSpent/1e3),quizId:s.id}})},[l,s,n,u,t]),y=c.useCallback(()=>Object.keys(l.answers).filter(o=>{const i=l.answers[o];return i!=null&&i!==""&&!(Array.isArray(i)&&i.length===0)}),[l.answers]),r=c.useCallback(()=>s.questions.filter(o=>{const i=l.answers[o.id];return i==null||i===""||Array.isArray(i)&&i.length===0}),[s.questions,l.answers]),m=y().length/s.questions.length*100;return{session:l,updateAnswer:d,setCurrentQuestion:h,completeQuiz:j,calculateScore:u,getAnsweredQuestions:y,getUnansweredQuestions:r,progress:m}},D=({timeLeft:s,isWarning:n,isCritical:t,percentage:l=0})=>{const a=()=>t?"text-red-600":n?"text-amber-600":"text-blue-600",d=()=>t?"bg-red-50 border-red-200":n?"bg-amber-50 border-amber-200":"bg-blue-50 border-blue-200",h=()=>t?"bg-red-500":n?"bg-amber-500":"bg-blue-500";return e.jsxs("div",{className:`rounded-md border p-3 transition-all duration-300 ${d()} ${t?"animate-pulse":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600 flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Thời gian còn lại"]}),e.jsx("span",{className:`text-lg font-bold font-mono ${a()}`,children:s})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-1000 ${h()}`,style:{width:`${Math.min(l,100)}%`}})}),t&&e.jsxs("div",{className:"text-xs text-red-600 font-medium mt-1 flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Sắp hết giờ!"]}),n&&!t&&e.jsxs("div",{className:"text-xs text-amber-600 font-medium mt-1 flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Còn ít thời gian"]})]})},O=({current:s,total:n,percentage:t})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Tiến độ"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[s," / ",n]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})})]}),_=({question:s,questionNumber:n,value:t,onChange:l})=>{const a=()=>e.jsx("div",{className:"space-y-3",children:s.answers.map((r,m)=>e.jsx("button",{onClick:()=>l(r.id),className:`w-full p-4 text-left rounded-lg border-2 transition-all ${t===r.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t===r.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:t===r.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})}),e.jsxs("span",{className:"font-medium mr-3",children:[String.fromCharCode(65+m),"."]}),e.jsx("span",{className:"flex-1",children:r.text})]})},r.id))}),d=()=>e.jsx("div",{className:"space-y-3",children:s.answers.map((r,m)=>e.jsx("button",{onClick:()=>l(r.id),className:`w-full p-4 text-left rounded-lg border-2 transition-all ${t===r.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t===r.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:t===r.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mx-auto mt-0.5"})}),e.jsxs("span",{className:"font-medium mr-3",children:[String.fromCharCode(65+m),"."]}),e.jsx("span",{className:`flex-1 font-medium ${r.text==="Đúng"?"text-green-600":"text-red-600"}`,children:r.text})]})},r.id))}),h=()=>e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"💡 Nhập đáp án vào ô bên dưới:"}),e.jsx("input",{type:"text",value:t||"",onChange:r=>l(r.target.value),placeholder:"Nhập câu trả lời của bạn...",className:"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-lg"})]})}),u=()=>e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.answers.map((r,m)=>e.jsxs("button",{onClick:()=>l(r.id),className:`relative p-4 rounded-lg border-2 transition-all ${t===r.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[r.imageUrl?e.jsxs("div",{className:"w-full h-32 mb-3 rounded-lg overflow-hidden bg-gray-100",children:[e.jsx("img",{src:r.imageUrl,alt:r.text||`Option ${String.fromCharCode(65+m)}`,className:"w-full h-full object-cover",onError:o=>{var x;const i=o.target;i.style.display="none",(x=i.nextElementSibling)==null||x.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("span",{className:"text-sm",children:"Không thể tải ảnh"})})]}):e.jsx("div",{className:"w-full h-32 mb-3 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-sm",children:"Chưa có ảnh"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[String.fromCharCode(65+m),". ",r.text||`Ảnh ${m+1}`]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${t===r.id?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:t===r.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})]},r.id))}),j=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"💡 Bạn có thể chọn nhiều đáp án cho câu hỏi này."})}),s.answers.map((r,m)=>{const o=Array.isArray(t)&&t.includes(r.id);return e.jsx("button",{onClick:()=>{const i=Array.isArray(t)?t:[],x=o?i.filter(N=>N!==r.id):[...i,r.id];l(x)},className:`w-full p-4 text-left rounded-lg border-2 transition-all ${o?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded border-2 ${o?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:o&&e.jsx("div",{className:"text-white text-xs flex items-center justify-center h-full",children:"✓"})}),e.jsxs("span",{className:"font-medium mr-3",children:[String.fromCharCode(65+m),"."]}),e.jsx("span",{className:"flex-1",children:r.text})]})},r.id)})]}),y=()=>{switch(s.type){case"multiple":return a();case"boolean":return d();case"short_answer":return h();case"image":return u();case"checkbox":return j();default:return e.jsx("div",{children:"Loại câu hỏi không được hỗ trợ"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["Câu hỏi ",n," / ",s.points," điểm"]}),e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[s.type==="multiple"&&"Trắc nghiệm",s.type==="boolean"&&"Đúng/Sai",s.type==="short_answer"&&"Điền từ",s.type==="image"&&"Hình ảnh",s.type==="checkbox"&&"Nhiều lựa chọn"]})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:s.text})]}),y()]})},P=({questions:s,currentQuestionIndex:n,answers:t,onQuestionSelect:l})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-3",children:"Điều hướng nhanh"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:s.map((a,d)=>e.jsx("button",{onClick:()=>l(d),className:`w-8 h-8 rounded text-xs font-medium transition-colors ${d===n?"bg-blue-500 text-white":t[a.id]?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:d+1},a.id))})]}),F=({modalControls:s,onConfirmExit:n,onConfirmSubmit:t,unansweredQuestions:l,onGoToQuestion:a})=>e.jsxs(e.Fragment,{children:[s.showExitModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bạn có chắc muốn thoát?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Tiến độ của bạn sẽ bị mất nếu thoát bây giờ."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>s.setShowExitModal(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Tiếp tục làm bài"}),e.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Thoát"})]})]})}),s.showSubmitModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Xác nhận nộp bài"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Bạn có chắc chắn muốn nộp bài? Sau khi nộp sẽ không thể thay đổi đáp án."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>s.setShowSubmitModal(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Hủy"}),e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Nộp bài"})]})]})}),s.showUnansweredModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Còn câu hỏi chưa trả lời"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Bạn còn ",l.length," câu hỏi chưa trả lời:"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto mb-6",children:l.map((d,h)=>e.jsxs("button",{onClick:()=>{s.setShowUnansweredModal(!1),a(h)},className:"block w-full text-left p-2 hover:bg-gray-100 rounded text-blue-600 hover:text-blue-800",children:["Câu ",h+1,": ",d.text.slice(0,50),"..."]},d.id))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>s.setShowUnansweredModal(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Tiếp tục làm bài"}),e.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Nộp bài luôn"})]})]})})]}),J=()=>{const{quiz:s,loading:n,error:t}=I();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Đang tải quiz..."})]})}):t||!s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Không thể tải quiz"}),e.jsx("p",{className:"text-gray-600",children:t||"Quiz không tồn tại"})]})}):e.jsx(H,{quiz:s})},H=({quiz:s})=>{const{session:n,updateAnswer:t,setCurrentQuestion:l,completeQuiz:a,getUnansweredQuestions:d,progress:h}=B({quiz:s}),{formattedTime:u,isTimeRunningOut:j,isTimeCritical:y,percentage:r}=R({onTimeUp:a,isActive:!n.isCompleted}),{goToNextQuestion:m,goToPreviousQuestion:o,goToQuestion:i,handleExitQuiz:x,confirmExitQuiz:N,handleSubmitQuiz:w,isFirstQuestion:v,isLastQuestion:g,modalControls:b}=L({questions:s.questions,currentQuestionIndex:n.currentQuestionIndex,onQuestionChange:l,answers:n.answers}),f=s.questions[n.currentQuestionIndex];return n.isCompleted?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Đang xử lý kết quả..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:x,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Thoát"})]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:s.title})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(O,{current:n.currentQuestionIndex+1,total:s.questions.length,percentage:h}),e.jsx(D,{timeLeft:u,isWarning:j,isCritical:y,percentage:r})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(P,{questions:s.questions,currentQuestionIndex:n.currentQuestionIndex,answers:n.answers,onQuestionSelect:i})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[e.jsx(_,{question:f,questionNumber:n.currentQuestionIndex+1,value:n.answers[f.id],onChange:p=>t(f.id,p)}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t",children:[e.jsxs("button",{onClick:o,disabled:v,className:`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all ${v?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700 shadow-sm hover:shadow-md"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Câu trước"})]}),e.jsx("div",{className:"flex space-x-3",children:g?e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-8 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm hover:shadow-md transition-all",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Nộp bài"})]}):e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-sm hover:shadow-md transition-all",children:[e.jsx("span",{children:"Câu tiếp"}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})})]})}),e.jsx(F,{modalControls:b,onConfirmExit:N,onConfirmSubmit:a,unansweredQuestions:d(),onGoToQuestion:i}),j&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-600 rounded-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"⏰"}),e.jsx("span",{className:"font-medium",children:y?"Chỉ còn ít hơn 1 phút! Hãy hoàn thành ngay.":"Sắp hết giờ! Chỉ còn 10% thời gian."})]})]})};export{J as default};
