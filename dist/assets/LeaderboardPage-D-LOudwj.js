import{R as e,r as t,u as s,j as a,q as r,l,h as i,t as c,m as n,w as o}from"./index-9G1y_mGg.js";var d={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},m=e.createContext&&e.createContext(d),x=["attr","size","title"];function u(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},h.apply(this,arguments)}function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach(function(t){b(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function b(e,t,s){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function f(t){return t&&t.map((t,s)=>e.createElement(t.tag,p({key:s},t.attr),f(t.child)))}function v(t){return s=>e.createElement(y,h({attr:p({},t.attr)},s),f(t.child))}function y(t){var s=s=>{var a,{attr:r,size:l,title:i}=t,c=u(t,x),n=l||s.size||"1em";return s.className&&(a=s.className),t.className&&(a=(a?a+" ":"")+t.className),e.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,r,c,{className:a,style:p(p({color:t.color||s.color},s.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),i&&e.createElement("title",null,i),t.children)};return void 0!==m?e.createElement(m.Consumer,null,e=>s(e)):s(d)}function j(e){return v({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M97.12 362.63c-8.69-8.69-4.16-6.24-25.12-11.85-9.51-2.55-17.87-7.45-25.43-13.32L1.2 448.7c-4.39 10.77 3.81 22.47 15.43 22.03l52.69-2.01L105.56 507c8 8.44 22.04 5.81 26.43-4.96l52.05-127.62c-10.84 6.04-22.87 9.58-35.31 9.58-19.5 0-37.82-7.59-51.61-21.37zM382.8 448.7l-45.37-111.24c-7.56 5.88-15.92 10.77-25.43 13.32-21.07 5.64-16.45 3.18-25.12 11.85-13.79 13.78-32.12 21.37-51.62 21.37-12.44 0-24.47-3.55-35.31-9.58L252 502.04c4.39 10.77 18.44 13.4 26.43 4.96l36.25-38.28 52.69 2.01c11.62.44 19.82-11.27 15.43-22.03zM263 340c15.28-15.55 17.03-14.21 38.79-20.14 13.89-3.79 24.75-14.84 28.47-28.98 7.48-28.4 5.54-24.97 25.95-45.75 10.17-10.35 14.14-25.44 10.42-39.58-7.47-28.38-7.48-24.42 0-52.83 3.72-14.14-.25-29.23-10.42-39.58-20.41-20.78-18.47-17.36-25.95-45.75-3.72-14.14-14.58-25.19-28.47-28.98-27.88-7.61-24.52-5.62-44.95-26.41-10.17-10.35-25-14.4-38.89-10.61-27.87 7.6-23.98 7.61-51.9 0-13.89-3.79-28.72.25-38.89 10.61-20.41 20.78-17.05 18.8-44.94 26.41-13.89 3.79-24.75 14.84-28.47 28.98-7.47 28.39-5.54 24.97-25.95 45.75-10.17 10.35-14.15 25.44-10.42 39.58 7.47 28.36 7.48 24.4 0 52.82-3.72 14.14.25 29.23 10.42 39.59 20.41 20.78 18.47 17.35 25.95 45.75 3.72 14.14 14.58 25.19 28.47 28.98C104.6 325.96 106.27 325 121 340c13.23 13.47 33.84 15.88 49.74 5.82a39.676 39.676 0 0 1 42.53 0c15.89 10.06 36.5 7.65 49.73-5.82zM97.66 175.96c0-53.03 42.24-96.02 94.34-96.02s94.34 42.99 94.34 96.02-42.24 96.02-94.34 96.02-94.34-42.99-94.34-96.02z"},child:[]}]})(e)}function N(e){return v({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 448H112c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h416c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm64-320c-26.5 0-48 21.5-48 48 0 7.1 1.6 13.7 4.4 19.8L476 239.2c-15.4 9.2-35.3 4-44.2-11.6L350.3 85C361 76.2 368 63 368 48c0-26.5-21.5-48-48-48s-48 21.5-48 48c0 15 7 28.2 17.7 37l-81.5 142.6c-8.9 15.6-28.9 20.8-44.2 11.6l-72.3-43.4c2.7-6 4.4-12.7 4.4-19.8 0-26.5-21.5-48-48-48S0 149.5 0 176s21.5 48 48 48c2.6 0 5.2-.4 7.7-.8L128 416h384l72.3-192.8c2.5.4 5.1.8 7.7.8 26.5 0 48-21.5 48-48s-21.5-48-48-48z"},child:[]}]})(e)}function w(e){return v({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(e)}function A(e){return v({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(e)}function S(e){return v({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M223.75 130.75L154.62 15.54A31.997 31.997 0 0 0 127.18 0H16.03C3.08 0-4.5 14.57 2.92 25.18l111.27 158.96c29.72-27.77 67.52-46.83 109.56-53.39zM495.97 0H384.82c-11.24 0-21.66 5.9-27.44 15.54l-69.13 115.21c42.04 6.56 79.84 25.62 109.56 53.38L509.08 25.18C516.5 14.57 508.92 0 495.97 0zM256 160c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm92.52 157.26l-37.93 36.96 8.97 52.22c1.6 9.36-8.26 16.51-16.65 12.09L256 393.88l-46.9 24.65c-8.4 4.45-18.25-2.74-16.65-12.09l8.97-52.22-37.93-36.96c-6.82-6.64-3.05-18.23 6.35-19.59l52.43-7.64 23.43-47.52c2.11-4.28 6.19-6.39 10.28-6.39 4.11 0 8.22 2.14 10.33 6.39l23.43 47.52 52.43 7.64c9.4 1.36 13.17 12.95 6.35 19.59z"},child:[]}]})(e)}function z(e){return v({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function C(e){return v({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(e)}function O(e){return v({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(e)}const M=()=>{var e;const[d,m]=t.useState([]),[x,u]=t.useState([]),[h,g]=t.useState(!0),[p,b]=t.useState(null),{user:f}=s(e=>e.auth),[v,y]=t.useState("all"),[M,L]=t.useState(""),[P,B]=t.useState(null),[T,H]=t.useState(!1),[D,E]=t.useState(!1);t.useEffect(()=>{(async()=>{g(!0);try{const e=r(l(i,"quizResults"),c("completedAt","desc")),t=await n(e),s=r(l(i,"quizzes"),o("isPublished","==",!0)),a=await n(s),d=r(l(i,"users")),x=await n(d),h=new Map;x.forEach(e=>{var t;const s=e.data();h.set(e.id,{id:e.id,displayName:s.displayName||(null==(t=s.email)?void 0:t.split("@")[0])||"Anonymous",email:s.email,...s})});const g=new Map;a.forEach(e=>{const t=e.data();g.set(e.id,{id:e.id,title:t.title||"Untitled Quiz",description:t.description||"",category:t.category||"general",difficulty:t.difficulty||"medium",createdBy:t.createdBy,isPublished:t.isPublished,...t})});const p=new Map,v=new Map;let y=0,j=0,N=0;const w=new Date;w.setHours(0,0,0,0),t.forEach(e=>{var t,s;const a=e.data(),r=(null==(s=null==(t=a.completedAt)?void 0:t.toDate)?void 0:s.call(t))||new Date(a.completedAt),l=a.userId;if(!p.has(l)){const e=h.get(l)||{};p.set(l,{userId:l,displayName:e.displayName||a.userName||"Anonymous",email:e.email||a.userEmail,totalScore:0,totalAttempts:0,averageScore:0,perfectScores:0,recentActivity:r.toLocaleDateString("vi-VN"),badge:"beginner"})}const i=p.get(l);i.totalAttempts++,i.totalScore+=a.score||0,100===a.score&&(i.perfectScores++,N++),r>new Date(i.recentActivity)&&(i.recentActivity=r.toLocaleDateString("vi-VN"));const c=a.quizId;if(!v.has(c)){const e=g.get(c)||{};v.set(c,{id:c,title:e.title||"Unknown Quiz",description:e.description||"",category:e.category||"general",difficulty:e.difficulty||"medium",totalAttempts:0,averageScore:0,totalCompletions:0,createdBy:e.createdBy,isPublished:e.isPublished,recentActivity:r.toLocaleDateString("vi-VN")})}const n=v.get(c);n.totalAttempts++,n.totalCompletions++,n.averageScore=(n.averageScore*(n.totalAttempts-1)+(a.score||0))/n.totalAttempts,r>new Date(n.recentActivity)&&(n.recentActivity=r.toLocaleDateString("vi-VN")),y+=a.score||0,j++}),p.forEach(e=>{e.averageScore=e.totalAttempts>0?e.totalScore/e.totalAttempts:0,e.averageScore>=90&&e.totalAttempts>=10?e.badge="legendary":e.averageScore>=80&&e.totalAttempts>=5?e.badge="expert":e.averageScore>=70&&e.totalAttempts>=3?e.badge="advanced":e.totalAttempts>=2?e.badge="intermediate":e.badge="beginner"});const A=Array.from(p.values()).sort((e,t)=>e.totalAttempts!==t.totalAttempts?t.totalAttempts-e.totalAttempts:Math.abs(e.averageScore-t.averageScore)>1?t.averageScore-e.averageScore:t.perfectScores-e.perfectScores).map((e,t)=>({...e,rank:t+1})),S=Array.from(v.values()).sort((e,t)=>t.totalAttempts-e.totalAttempts);if(m(A),u(S),f){const e=A.findIndex(e=>e.userId===f.uid);B(e>=0?e+1:null)}const z=Array.from(p.values()).filter(e=>new Date(e.recentActivity)>=w).length;b({totalUsers:p.size,totalQuizzes:v.size,totalAttempts:j,averageScore:j>0?Math.round(y/j*10)/10:0,activeToday:z,perfectScoresCount:N})}catch(e){}finally{g(!1)}})()},[f]);const I=d.filter(e=>{const t=M.toLowerCase();return e.displayName&&e.displayName.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)||e.userId&&e.userId.toLowerCase().includes(t)}),k=e=>{switch(e){case"legendary":return a.jsx(N,{className:"w-5 h-5 text-yellow-500"});case"expert":return a.jsx(C,{className:"w-5 h-5 text-purple-500"});case"advanced":return a.jsx(S,{className:"w-5 h-5 text-blue-500"});case"intermediate":return a.jsx(j,{className:"w-5 h-5 text-green-500"});default:return a.jsx(z,{className:"w-5 h-5 text-gray-500"})}},q=e=>{switch(e){case"legendary":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"expert":return"bg-purple-100 text-purple-800 border-purple-300";case"advanced":return"bg-blue-100 text-blue-800 border-blue-300";case"intermediate":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},U=e=>{switch(e){case"easy":return"bg-green-100 text-green-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[a.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-8 text-center flex items-center justify-center gap-3",children:[a.jsx(C,{className:"text-yellow-500"}),"Bảng Xếp Hạng",a.jsx(C,{className:"text-yellow-500"})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-8",children:[a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx("label",{className:"font-medium text-gray-700",children:"Thời gian:"}),a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 bg-white",value:v,onChange:e=>y(e.target.value),children:[a.jsx("option",{value:"all",children:"Tất cả thời gian"}),a.jsx("option",{value:"week",children:"Tuần này"}),a.jsx("option",{value:"month",children:"Tháng này"})]})]}),a.jsx("input",{className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-80 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"🔍 Tìm kiếm người chơi...",value:M,onChange:e=>L(e.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-4 text-center shadow-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==p?void 0:p.totalUsers)||"--"}),a.jsx("div",{className:"text-blue-100 text-sm",children:"Người chơi"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-4 text-center shadow-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==p?void 0:p.totalQuizzes)||"--"}),a.jsx("div",{className:"text-green-100 text-sm",children:"Quiz"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white rounded-xl p-4 text-center shadow-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==p?void 0:p.totalAttempts)||"--"}),a.jsx("div",{className:"text-yellow-100 text-sm",children:"Lượt chơi"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-4 text-center shadow-lg",children:[a.jsxs("div",{className:"text-2xl font-bold",children:[(null==p?void 0:p.averageScore)||"--","%"]}),a.jsx("div",{className:"text-purple-100 text-sm",children:"Điểm TB"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl p-4 text-center shadow-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==p?void 0:p.activeToday)||"--"}),a.jsx("div",{className:"text-red-100 text-sm",children:"Hoạt động hôm nay"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 text-white rounded-xl p-4 text-center shadow-lg",children:[a.jsx("div",{className:"text-2xl font-bold",children:(null==p?void 0:p.perfectScoresCount)||"--"}),a.jsx("div",{className:"text-indigo-100 text-sm",children:"Điểm tuyệt đối"})]})]}),a.jsxs("div",{className:"mb-10",children:[a.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center flex items-center justify-center gap-2",children:[a.jsx(N,{className:"text-yellow-500"}),"Top Người Chơi Xuất Sắc"]}),a.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:h?a.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>a.jsxs("div",{className:"animate-pulse flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]})]},t))}):0===I.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(O,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Chưa có dữ liệu"}),a.jsx("p",{className:"text-gray-500",children:"Hãy tham gia quiz để xuất hiện trên bảng xếp hạng!"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"flex justify-center items-end gap-6 mb-6",children:I.slice(0,3).map((e,t)=>a.jsxs("div",{className:"text-center "+(0===t?"order-2":1===t?"order-1":"order-3"),children:[a.jsxs("div",{className:"relative mb-4 "+(0===t?"transform scale-110":""),children:[a.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold text-white mx-auto "+(0===t?"bg-gradient-to-br from-yellow-400 to-yellow-600":1===t?"bg-gradient-to-br from-gray-400 to-gray-600":"bg-gradient-to-br from-orange-400 to-orange-600"),children:e.displayName.charAt(0).toUpperCase()}),a.jsx("div",{className:"absolute -top-3 -right-2",children:k(e.badge)}),0===t&&a.jsx(N,{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-2xl text-yellow-500"})]}),a.jsx("div",{className:"font-bold text-gray-900 truncate max-w-24",children:e.displayName}),a.jsxs("div",{className:"text-sm font-semibold "+(0===t?"text-yellow-600":1===t?"text-gray-600":"text-orange-600"),children:["🎯 ",e.totalAttempts," quiz"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(e.averageScore),"% điểm TB"]}),a.jsxs("div",{className:"mt-2 px-2 py-1 rounded-full text-xs font-bold "+(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"),children:["#",t+1]})]},e.userId))}),I.length>=4&&a.jsx("div",{className:"flex justify-center gap-4",children:I.slice(3,5).map((e,t)=>a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 flex items-center gap-3 min-w-64",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:e.displayName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:["#",t+4," ",e.displayName,k(e.badge)]}),a.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:["🎯 ",e.totalAttempts," quiz • ",Math.round(e.averageScore),"% TB"]})]})]},e.userId))})]}),a.jsx("div",{className:"space-y-2",children:(T?I.slice(5):I.slice(5,20)).map((e,t)=>a.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg transition-colors "+(P===t+6?"bg-blue-50 border-2 border-blue-200":"hover:bg-gray-50"),children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsxs("span",{className:"font-bold text-lg text-blue-600 w-8",children:["#",t+6]}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold",children:e.displayName.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.displayName,a.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${q(e.badge)}`,children:e.badge})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["🎯 ",e.totalAttempts," quiz • ",e.perfectScores," điểm 100 • Hoạt động: ",e.recentActivity]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-bold text-lg text-blue-600",children:["🎯 ",e.totalAttempts]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Math.round(e.averageScore),"% TB"]})]}),a.jsx("div",{className:"text-gray-400",children:k(e.badge)})]},e.userId))}),I.length>20&&a.jsx("div",{className:"text-center mt-6",children:a.jsx("button",{onClick:()=>H(!T),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:T?"Thu gọn":`Xem thêm ${I.length-20} người`})}),f&&P&&P>20&&!T&&a.jsx("div",{className:"mt-6 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"font-bold text-blue-700",children:["#",P]}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:(null==(e=f.displayName)?void 0:e.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-blue-900",children:"Vị trí của bạn"}),a.jsx("div",{className:"text-sm text-blue-700",children:f.displayName||f.email})]})]})})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-center flex items-center gap-2",children:[a.jsx(w,{className:"text-red-500"}),"Quiz Phổ Biến Nhất"]}),x.length>12&&a.jsx("button",{onClick:()=>E(!D),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold",children:D?"Thu gọn":`Xem tất cả (${x.length})`})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h?Array.from({length:6}).map((e,t)=>a.jsx("div",{className:"animate-pulse bg-white rounded-xl shadow-lg h-32"},t)):0===x.length?a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx(A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Chưa có quiz nào"}),a.jsx("p",{className:"text-gray-500",children:"Hãy tạo quiz đầu tiên để xuất hiện ở đây!"})]}):(D?x:x.slice(0,12)).map((e,t)=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow border-l-4 border-blue-500",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2",children:e.title}),a.jsx("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:e.description})]}),a.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs font-bold px-2 py-1 rounded-full",children:["#",t+1]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U(e.difficulty)}`,children:"easy"===e.difficulty?"Dễ":"hard"===e.difficulty?"Khó":"Trung bình"}),a.jsx("span",{className:"text-gray-500 text-sm capitalize",children:e.category})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Lượt chơi:"}),a.jsx("span",{className:"font-semibold text-blue-600",children:e.totalAttempts})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Điểm TB:"}),a.jsxs("span",{className:"font-semibold text-green-600",children:[Math.round(e.averageScore),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Hoạt động:"}),a.jsx("span",{className:"text-gray-500 text-xs",children:e.recentActivity})]})]})]},e.id))})]})]})})};export{M as default};
