import{a as e,u as t,e as s,r as i,f as a,j as r,g as u,h as n,i as o}from"./index-D8X0wEz4.js";import c from"./QuizList-9hiVEQ3V.js";const l=()=>{const{t:l}=e(),d=t(e=>e.auth.user),f=t(e=>e.quiz.quizzes),x=t(e=>e.quiz.loading||e.quiz.isLoading),h=s(),[v,z]=i.useState([]),[j,m]=i.useState(!0),[p,q]=i.useState(null);return i.useEffect(()=>{if(!d)return;if(0===f.length&&!x)return void h(a({user:d})).unwrap().catch(()=>{q(l("favorites.loadError")),m(!1)});(async()=>{m(!0);try{const e=u(n,"user_favorites",d.uid),t=await o(e);if(t.exists()){const e=t.data().quizIds||[];z(f.filter(t=>e.includes(t.id)))}else z([]);q(null)}catch(e){q(l("favorites.fetchError"))}m(!1)})()},[d,f,x,h]),d?p?r.jsx("div",{className:"p-8 text-center text-red-600",children:p}):j||x?r.jsx("div",{className:"p-8 text-center",children:l("loading")}):r.jsx(c,{quizzes:v,title:l("favorites.title")}):r.jsx("div",{className:"p-8 text-center",children:l("favorites.loginRequired")})};export{l as default};
