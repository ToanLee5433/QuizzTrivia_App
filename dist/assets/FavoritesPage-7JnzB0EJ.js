import{u as c,w as m,r as s,x as q,j as i,k as v,l as j,o as Q}from"./index-CNQy308a.js";import S from"./QuizList-nPnVnGAh.js";const F=()=>{const e=c(t=>t.auth.user),a=c(t=>t.quiz.quizzes),r=c(t=>t.quiz.loading||t.quiz.isLoading),o=m(),[f,h]=s.useState([]),[x,n]=s.useState(!0),[l,u]=s.useState(null);return s.useEffect(()=>{if(!e)return;if(a.length===0&&!r){o(q({user:e})).unwrap().catch(()=>{u("Không thể tải danh sách quiz. Vui lòng kiểm tra kết nối mạng hoặc thử lại sau."),n(!1)});return}(async()=>{n(!0);try{const d=v(j,"user_favorites",e.uid),z=await Q(d);if(z.exists()){const g=z.data().quizIds||[];h(a.filter(p=>g.includes(p.id)))}else h([]);u(null)}catch{u("Không thể tải quiz yêu thích.")}n(!1)})()},[e,a,r,o]),e?l?i.jsx("div",{className:"p-8 text-center text-red-600",children:l}):x||r?i.jsx("div",{className:"p-8 text-center",children:"Đang tải..."}):i.jsx(S,{quizzes:f,title:"Quiz Yêu Thích"}):i.jsx("div",{className:"p-8 text-center",children:"Bạn cần đăng nhập để xem quiz yêu thích."})};export{F as default};
