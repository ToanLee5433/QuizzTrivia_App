{
  "timestamp": "2025-08-13T10:33:08.809Z",
  "totalFiles": 102,
  "results": [
    {
      "file": "App.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ children }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    // Set timeout Ä‘á»ƒ trÃ¡nh loading vÃ´ háº¡n\r\n    const timeout = setTimeout(() => {\r\n      if (mounted) {\r\n        dispatch(authCheckComplete());\r\n      }\r\n    }, 5000); // TÄƒng lÃªn 5 giÃ¢y Ä‘á»ƒ Ä‘áº£m báº£o Ä‘á»§ thá»i gian\r\n\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (!mounted) return;\r\n      clearTimeout(timeout); // Clear timeout náº¿u auth check thÃ nh cÃ´ng\r\n      \r\n      console.log('ðŸ” Auth state changed:', {\r\n        user: user ? {\r\n          uid: user.uid,\r\n          email: user.email,\r\n          displayName: user.displayName,\r\n          emailVerified: user.emailVerified\r\n        } : null,\r\n        timestamp: new Date().toISOString()\r\n      });\r\n      \r\n      if (user) {\r\n        try {\r\n          // Get role from Firestore trÆ°á»›c khi check email verification\r\n          const userDocRef = doc(db, 'users', user.uid);\r\n          const userDoc = await getDoc(userDocRef);\r\n          \r\n          let role: 'admin' | 'creator' | 'user' = 'user';\r\n          let userData = null;\r\n          \r\n          if (userDoc.exists()) {\r\n            userData = userDoc.data();\r\n            \r\n            // Check if user is deleted or inactive\r\n            if (userData.isDeleted || userData.isActive === false) {\r\n              console.log('ðŸš« User account is deleted/inactive, logging out');\r\n              await auth.signOut();\r\n              dispatch(logout());\r\n              dispatch(authCheckComplete());\r\n              return;\r\n            }\r\n            \r\n            role = userData.role || 'user';\r\n            console.log('âœ… Found user document:', { uid: user.uid, role, userData });\r\n            \r\n            // Chá»‰ check email verification cho user thÆ°á»ng, khÃ´ng pháº£i admin\r\n            if (!user.emailVerified && user.email !== 'admin123@gmail.com' && role !== 'admin') {\r\n              console.log('ðŸ“§ Email not verified for regular user, redirecting to verification');\r\n              // KhÃ´ng sign out ngay, Ä‘á»ƒ user cÃ³ cÆ¡ há»™i verify email\r\n              // await auth.signOut();\r\n              // dispatch(logout());\r\n              // dispatch(authCheckComplete());\r\n              // return;\r\n            }\r\n          } else if (user.email === 'admin123@gmail.com') {\r\n            role = 'admin';\r\n            console.log('ðŸ‘‘ Creating admin user document');\r\n            // Create admin document if it doesn't exist\r\n            try {\r\n              await setDoc(userDocRef, {\r\n                email: user.email,\r\n                displayName: user.displayName || 'Admin',\r\n                role: 'admin',\r\n                createdAt: serverTimestamp(), // Sá»­ dá»¥ng serverTimestamp thay vÃ¬ Date\r\n                isActive: true,\r\n                emailVerified: true\r\n              });\r\n            } catch (createError) {\r\n              console.error('Error creating admin document:', createError);\r\n            }\r\n          } else {\r\n            // User má»›i chÆ°a cÃ³ document trong Firestore - cÃ³ thá»ƒ lÃ  user vá»«a Ä‘Äƒng kÃ½\r\n            console.log('ðŸ†• User document not found for:', user.email);\r\n            \r\n            // KhÃ´ng tá»± Ä‘á»™ng táº¡o document ná»¯a, Ä‘á»ƒ LoginPage xá»­ lÃ½\r\n            // Chá»‰ fallback náº¿u lÃ  admin email Ä‘áº·c biá»‡t\r\n            if (user.email === 'admin123@gmail.com') {\r\n              console.log('ðŸ‘‘ Creating admin user document');\r\n              try {\r\n                await setDoc(userDocRef, {\r\n                  email: user.email,\r\n                  displayName: user.displayName || 'Admin',\r\n                  role: 'admin',\r\n                  createdAt: serverTimestamp(), // Sá»­ dá»¥ng serverTimestamp thay vÃ¬ Date\r\n                  isActive: true\r\n                });\r\n                role = 'admin';\r\n              } catch (createError) {\r\n                console.error('Error creating admin document:', createError);\r\n              }\r\n            } else {\r\n              // User thÆ°á»ng khÃ´ng cÃ³ document - cÃ³ thá»ƒ chÆ°a hoÃ n thÃ nh Ä‘Äƒng kÃ½\r\n              console.log('âš ï¸ Regular user without document, might need role selection');\r\n              // KhÃ´ng set role, Ä‘á»ƒ component xá»­ lÃ½\r\n              role = undefined as any;\r\n            }\r\n          }\r\n\r\n          const authUser = {\r\n            uid: user.uid,\r\n            email: user.email,\r\n            displayName: user.displayName,\r\n            photoURL: user.photoURL,\r\n            emailVerified: user.emailVerified,\r\n            role: role,\r\n            needsRoleSelection: userData?.needsRoleSelection || (!role && role !== 'admin'), // Admin khÃ´ng cáº§n chá»n role\r\n            createdAt: userData?.createdAt ? \r\n              (userData.createdAt.toDate ? userData.createdAt.toDate().toISOString() : \r\n               userData.createdAt instanceof Date ? userData.createdAt.toISOString() : \r\n               userData.createdAt) : \r\n              new Date().toISOString(), // Convert Date to ISO string\r\n          };\r\n          \r\n          console.log('ðŸ“ Dispatching loginSuccess with:', authUser);\r\n          dispatch(loginSuccess(authUser));\r\n          \r\n          // Force re-render Ä‘á»ƒ cáº­p nháº­t UI ngay láº­p tá»©c\r\n          setTimeout(() => {\r\n            console.log('ðŸ”„ Force state refresh for UI update');\r\n            dispatch(loginSuccess(authUser));\r\n          }, 100);\r\n        } catch (error) {\r\n          console.error('Error getting user role:', error);\r\n          // Fallback role vá»›i check admin email chÃ­nh xÃ¡c hÆ¡n\r\n          const fallbackRole: 'admin' | 'user' = user.email === 'admin123@gmail.com' ? 'admin' : 'user';\r\n          const authUser = {\r\n            uid: user.uid,\r\n            email: user.email,\r\n            displayName: user.displayName,\r\n            photoURL: user.photoURL,\r\n            emailVerified: user.emailVerified,\r\n            role: fallbackRole,\r\n            createdAt: new Date().toISOString(), // Convert Date to ISO string\r\n          };\r\n          \r\n          console.log('ðŸ“ Dispatching fallback loginSuccess with:', authUser);\r\n          dispatch(loginSuccess(authUser));\r\n          \r\n          // Force re-render cho fallback cÅ©ng cáº§n\r\n          setTimeout(() => {\r\n            console.log('ðŸ”„ Force state refresh for fallback user');\r\n            dispatch(loginSuccess(authUser));\r\n          }, 100);\r\n        }\r\n      } else {\r\n        dispatch(logout());\r\n      }\r\n      dispatch(authCheckComplete());\r\n    });\r\n    \r\n    return () => {\r\n      clearTimeout(timeout);\r\n      unsubscribe();\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return",
          "index": 3834
        },
        {
          "kind": "JSXText",
          "text": ";\r\n};\r\n\r\n// ThÃªm LoadingFallback component náº¿u chÆ°a cÃ³\r\nconst LoadingFallback = () => {\r\n  const { t } = useTranslation();\r\n  return (",
          "index": 10348
        },
        {
          "kind": "JSXText",
          "text": ");\r\n};\r\n\r\n// Cáº­p nháº­t AppContent Ä‘á»ƒ Ä‘áº£m báº£o má»i lazy component Ä‘á»u Ä‘Æ°á»£c bá»c trong Suspense\r\nconst AppContent: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const { user, isLoading, authChecked, isAuthenticated, needsRoleSelection } = useSelector((state: RootState) => state.auth);\r\n\r\n  console.log('ðŸ“± AppContent render:', {\r\n    user: user ? { uid: user.uid, email: user.email, role: user.role } : null,\r\n    isLoading,\r\n    authChecked,\r\n    isAuthenticated,\r\n    needsRoleSelection\r\n  });\r\n\r\n  // Show loading while checking authentication\r\n  if (isLoading || !authChecked) {\r\n    console.log('ðŸ“± App: Showing loading screen', { isLoading, authChecked });\r\n    return (",
          "index": 10769
        },
        {
          "kind": "JSXText",
          "text": ");\r\n  }\r\n\r\n  // Show role selection if user needs to choose a role\r\n  if (isAuthenticated && user && needsRoleSelection) {\r\n    console.log('ðŸ“± App: Showing role selection screen');\r\n    \r\n    const handleRoleSelected = (role: 'user' | 'creator') => {\r\n      console.log('ðŸŽ¯ Role selected:', role);\r\n      \r\n      // Navigate theo role vá»›i proper redirect\r\n      setTimeout(() => {\r\n        if (role === 'creator') {\r\n          window.location.href = '/creator';\r\n        } else if (role === 'user') {\r\n          window.location.href = '/dashboard';\r\n        }\r\n      }, 1500); // Increase delay Ä‘á»ƒ user tháº¥y Ä‘Æ°á»£c toast message\r\n    };\r\n    \r\n    return",
          "index": 12053
        }
      ]
    },
    {
      "file": "utils\\initializeCategories.ts",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "Láº­p trÃ¬nh vÃ  phÃ¡t triá»ƒn pháº§n má»m",
          "index": 192
        },
        {
          "kind": "StringLiteral",
          "text": "PhÃ¡t triá»ƒn web frontend vÃ  backend",
          "index": 323
        },
        {
          "kind": "StringLiteral",
          "text": "Khoa há»c tá»± nhiÃªn vÃ  cÃ´ng nghá»‡",
          "index": 449
        },
        {
          "kind": "StringLiteral",
          "text": "ToÃ¡n há»c vÃ  thá»‘ng kÃª",
          "index": 576
        },
        {
          "kind": "StringLiteral",
          "text": "Kiáº¿n thá»©c tá»•ng há»£p",
          "index": 699
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»‹ch sá»­ tháº¿ giá»›i vÃ  Viá»‡t Nam",
          "index": 808
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»ƒ thao vÃ  sá»©c khá»e",
          "index": 928
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i trÃ­ vÃ  vÄƒn hÃ³a",
          "index": 1047
        }
      ]
    },
    {
      "file": "services\\geminiAI.ts",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "CÃ¢u há»i...",
          "index": 752
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n A",
          "index": 804
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n B",
          "index": 855
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n C",
          "index": 905
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n D",
          "index": 956
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i Ä‘á»‹nh dáº¡ng JSON tá»« AI. Vui lÃ²ng thá»­ láº¡i.",
          "index": 2594
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i",
          "index": 2793
        },
        {
          "kind": "StringLiteral",
          "text": "ChÃ o báº¡n! HÃ£y tráº£ lá»i ngáº¯n gá»n báº±ng tiáº¿ng Viá»‡t: AI Ä‘ang hoáº¡t Ä‘á»™ng tá»‘t khÃ´ng?",
          "index": 3045
        },
        {
          "kind": "StringLiteral",
          "text": "Káº¿t ná»‘i AI thÃ nh cÃ´ng!",
          "index": 3276
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n AI",
          "index": 3473
        }
      ]
    },
    {
      "file": "services\\fileProcessor.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    const fileType = this.getFileType(file);\r\n    \r\n    switch (fileType) {\r\n      case 'image':\r\n        return this.processImage(file);\r\n      case 'pdf':\r\n        return this.processPDF(file);\r\n      case 'doc':\r\n        return this.processDocument(file);\r\n      case 'text':\r\n        return this.processTextFile(file);\r\n      default:\r\n        return {\r\n          content: '',\r\n          type: 'text',\r\n          error: `Loáº¡i file khÃ´ng Ä‘Æ°á»£c há»— trá»£: ${file.type}`\r\n        };\r\n    }\r\n  }\r\n\r\n  private getFileType(file: File): string {\r\n    const extension = file.name.split('.').pop()?.toLowerCase();\r\n    const mimeType = file.type.toLowerCase();\r\n\r\n    if (mimeType.startsWith('image/')) return 'image';\r\n    if (mimeType === 'application/pdf' || extension === 'pdf') return 'pdf';\r\n    if (mimeType.includes('word') || ['doc', 'docx'].includes(extension || '')) return 'doc';\r\n    if (mimeType.startsWith('text/') || ['txt', 'md', 'csv'].includes(extension || '')) return 'text';\r\n    \r\n    return 'unknown';\r\n  }\r\n\r\n  private async processImage(file: File): Promise",
          "index": 464
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      const model = this.genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n      \r\n      // Convert file to base64\r\n      const base64Data = await this.fileToBase64(file);\r\n      \r\n      const prompt = `\r\nPhÃ¢n tÃ­ch hÃ¬nh áº£nh nÃ y vÃ  trÃ­ch xuáº¥t ná»™i dung vÄƒn báº£n. \r\nNáº¿u cÃ³ biá»ƒu Ä‘á»“, báº£ng, hoáº·c thÃ´ng tin trá»±c quan, hÃ£y mÃ´ táº£ chi tiáº¿t.\r\nTráº£ vá» ná»™i dung má»™t cÃ¡ch cÃ³ cáº¥u trÃºc vÃ  rÃµ rÃ ng Ä‘á»ƒ cÃ³ thá»ƒ táº¡o cÃ¢u há»i.\r\n`;\r\n\r\n      const result = await model.generateContent([\r\n        prompt,\r\n        {\r\n          inlineData: {\r\n            data: base64Data,\r\n            mimeType: file.type\r\n          }\r\n        }\r\n      ]);\r\n\r\n      const response = await result.response;\r\n      const content = response.text();\r\n\r\n      return {\r\n        content,\r\n        type: 'image'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        content: '',\r\n        type: 'image',\r\n        error: `Lá»—i xá»­ lÃ½ áº£nh: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n\r\n  private async processPDF(file: File): Promise",
          "index": 1563
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      // Convert to base64 for AI processing\r\n      const base64Data = await this.fileToBase64(file);\r\n      const model = this.genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\n      const prompt = `\r\nÄÃ¢y lÃ  file PDF. HÃ£y trÃ­ch xuáº¥t vÃ  phÃ¢n tÃ­ch ná»™i dung vÄƒn báº£n tá»« file nÃ y.\r\nTÃ³m táº¯t ná»™i dung chÃ­nh vÃ  cung cáº¥p thÃ´ng tin chi tiáº¿t Ä‘á»ƒ cÃ³ thá»ƒ táº¡o cÃ¢u há»i.\r\nNáº¿u cÃ³ báº£ng, biá»ƒu Ä‘á»“ hoáº·c hÃ¬nh áº£nh, hÃ£y mÃ´ táº£ chÃºng.\r\n`;\r\n\r\n      const result = await model.generateContent([\r\n        prompt,\r\n        {\r\n          inlineData: {\r\n            data: base64Data,\r\n            mimeType: file.type\r\n          }\r\n        }\r\n      ]);\r\n\r\n      const response = await result.response;\r\n      const content = response.text();\r\n\r\n      return {\r\n        content,\r\n        type: 'document'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        content: '',\r\n        type: 'document',\r\n        error: `Lá»—i xá»­ lÃ½ PDF: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n\r\n  private async processDocument(file: File): Promise",
          "index": 2628
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      // For DOC/DOCX files, convert to base64 and let AI process\r\n      const base64Data = await this.fileToBase64(file);\r\n      const model = this.genAI.getGenerativeModel({ model: \"gemini-1.5-flash\" });\r\n\r\n      const prompt = `\r\nÄÃ¢y lÃ  file tÃ i liá»‡u Word. HÃ£y trÃ­ch xuáº¥t vÃ  phÃ¢n tÃ­ch ná»™i dung vÄƒn báº£n tá»« file nÃ y.\r\nTÃ³m táº¯t ná»™i dung chÃ­nh vÃ  cung cáº¥p thÃ´ng tin chi tiáº¿t Ä‘á»ƒ cÃ³ thá»ƒ táº¡o cÃ¢u há»i.\r\nBao gá»“m cáº£ Ä‘á»‹nh dáº¡ng, tiÃªu Ä‘á», vÃ  cáº¥u trÃºc cá»§a tÃ i liá»‡u.\r\n`;\r\n\r\n      const result = await model.generateContent([\r\n        prompt,\r\n        {\r\n          inlineData: {\r\n            data: base64Data,\r\n            mimeType: file.type || 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'\r\n          }\r\n        }\r\n      ]);\r\n\r\n      const response = await result.response;\r\n      const content = response.text();\r\n\r\n      return {\r\n        content,\r\n        type: 'document'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        content: '',\r\n        type: 'document',\r\n        error: `Lá»—i xá»­ lÃ½ tÃ i liá»‡u: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n\r\n  private async processTextFile(file: File): Promise",
          "index": 3713
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      const text = await this.readTextFile(file);\r\n      return {\r\n        content: text,\r\n        type: 'text'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        content: '',\r\n        type: 'text',\r\n        error: `Lá»—i Ä‘á»c file text: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n\r\n  private async fileToBase64(file: File): Promise",
          "index": 4915
        }
      ]
    },
    {
      "file": "services\\emailJSService.ts",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "ðŸ”§ EmailJS Config Ä‘Ã£ sáºµn sÃ ng:",
          "index": 912
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸš€ Äang gá»­i OTP email Ä‘áº¿n:",
          "index": 1722
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ“§ Template params Ä‘áº§y Ä‘á»§:",
          "index": 1779
        },
        {
          "kind": "StringLiteral",
          "text": "âœ… EmailJS Response thÃ nh cÃ´ng:",
          "index": 2042
        },
        {
          "kind": "StringLiteral",
          "text": "âŒ EmailJS gáº·p lá»—i:",
          "index": 2387
        },
        {
          "kind": "StringLiteral",
          "text": "âŒ Chi tiáº¿t lá»—i:",
          "index": 2438
        }
      ]
    },
    {
      "file": "lib\\store.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(next: any) => (action: any) => {\r\n  try {\r\n    return next(action);\r\n  } catch (error) {\r\n    console.error('Redux Error:', error);\r\n    toast.error('ÄÃ£ xáº£y ra lá»—i. Vui lÃ²ng táº£i láº¡i trang.');\r\n    return;\r\n  }\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: authReducer,\r\n    quiz: quizReducer,\r\n    // multiplayer: multiplayerReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) => {\r\n    const defaultMiddleware = getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [\r\n          'persist/PERSIST', \r\n          'persist/REHYDRATE',\r\n          'quiz/fetchQuizzes/fulfilled',\r\n          'quiz/fetchQuizById/fulfilled',\r\n          'multiplayer/setCurrentRoom',\r\n          'multiplayer/updatePlayerInRoom'\r\n        ],\r\n        ignoredPaths: [\r\n          'quiz.quizzes',\r\n          'quiz.currentQuiz',\r\n          'quiz.userResults',\r\n          'multiplayer.currentRoom',\r\n          'multiplayer.currentPlayer'\r\n        ],\r\n      },\r\n      immutableCheck: { warnAfter: 128 },\r\n      thunk: {\r\n        extraArgument: {\r\n          timeout: 10000 // 10 seconds timeout for async actions\r\n        }\r\n      }\r\n    });\r\n\r\n    return defaultMiddleware.concat(errorHandlingMiddleware);\r\n  },\r\n});\r\n\r\nexport type RootState = ReturnType",
          "index": 360
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ xáº£y ra lá»—i. Vui lÃ²ng táº£i láº¡i trang.",
          "index": 512
        }
      ]
    },
    {
      "file": "components\\ClientSideAIGenerator.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "('');\r\n  const [formData, setFormData] = useState({\r\n    topic: '',\r\n    difficulty: 'easy' as 'easy' | 'medium' | 'hard',\r\n    numQuestions: 5,\r\n    useFileContent: false\r\n  });\r\n\r\n  const testConnection = async () => {\r\n    setIsTesting(true);\r\n    try {\r\n      const result = await geminiAI.testConnection();\r\n      if (result.success) {\r\n        setConnectionStatus('connected');\r\n        toast.success('âœ… Káº¿t ná»‘i AI thÃ nh cÃ´ng!');\r\n      } else {\r\n        setConnectionStatus('failed');\r\n        toast.error('âŒ KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n AI: ' + result.message);\r\n      }\r\n    } catch (error) {\r\n      setConnectionStatus('failed');\r\n      toast.error('âŒ Lá»—i káº¿t ná»‘i AI');\r\n    } finally {\r\n      setIsTesting(false);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (event: React.ChangeEvent",
          "index": 1068
        },
        {
          "kind": "JSXText",
          "text": ") => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setIsProcessingFile(true);\r\n    try {\r\n      const apiKey = import.meta.env.VITE_GEMINI_API_KEY;\r\n      if (!apiKey) {\r\n        toast.error('API key khÃ´ng Ä‘Æ°á»£c cáº¥u hÃ¬nh');\r\n        return;\r\n      }\r\n\r\n      const fileProcessor = new FileProcessor(apiKey);\r\n      const result = await fileProcessor.processFile(file);\r\n      \r\n      if (result.content && !result.error) {\r\n        setUploadedFile(file);\r\n        setFileContent(result.content);\r\n        setFormData(prev => ({ \r\n          ...prev, \r\n          topic: result.content?.substring(0, 100) + '...' || prev.topic,\r\n          useFileContent: true \r\n        }));\r\n        toast.success(`ÄÃ£ xá»­ lÃ½ file ${file.name} thÃ nh cÃ´ng!`);\r\n      } else {\r\n        toast.error(result.error || 'KhÃ´ng thá»ƒ xá»­ lÃ½ file nÃ y');\r\n      }\r\n    } catch (error) {\r\n      console.error('File processing error:', error);\r\n      toast.error('Lá»—i khi xá»­ lÃ½ file');\r\n    } finally {\r\n      setIsProcessingFile(false);\r\n    }\r\n  };\r\n\r\n  const removeUploadedFile = () => {\r\n    setUploadedFile(null);\r\n    setFileContent('');\r\n    setFormData(prev => ({ ...prev, useFileContent: false }));\r\n  };\r\n\r\n  const generateQuestions = async () => {\r\n    const topicToUse = formData.useFileContent && fileContent \r\n      ? `Dá»±a trÃªn ná»™i dung file Ä‘Ã£ táº£i lÃªn: ${fileContent}. Táº¡o cÃ¢u há»i vá»: ${formData.topic}`\r\n      : formData.topic;\r\n\r\n    if (!topicToUse.trim()) {\r\n      toast.error('Vui lÃ²ng nháº­p chá»§ Ä‘á» hoáº·c táº£i lÃªn file!');\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n    try {\r\n      const result = await geminiAI.generateQuestions(\r\n        topicToUse,\r\n        formData.difficulty,\r\n        formData.numQuestions\r\n      );\r\n\r\n      if (result.success && result.questions) {\r\n        onQuestionsGenerated(result.questions);\r\n        toast.success(`âœ… ${result.message}`);\r\n        \r\n        // Reset form\r\n        setFormData({\r\n          topic: '',\r\n          difficulty: 'easy',\r\n          numQuestions: 5,\r\n          useFileContent: false\r\n        });\r\n        \r\n        // Reset file state\r\n        setUploadedFile(null);\r\n        setFileContent('');\r\n      } else {\r\n        toast.error('âŒ ' + result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Generate questions error:', error);\r\n      toast.error('âŒ CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i');\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const getDifficultyLabel = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'ðŸŸ¢ Dá»…';\r\n      case 'medium': return 'ðŸŸ¡ Trung bÃ¬nh';\r\n      case 'hard': return 'ðŸ”´ KhÃ³';\r\n      default: return difficulty;\r\n    }\r\n  };\r\n\r\n  const getConnectionIcon = () => {\r\n    switch (connectionStatus) {\r\n      case 'connected': return",
          "index": 1878
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o cÃ¢u há»i tá»± Ä‘á»™ng báº±ng Google Gemini AI",
          "index": 5482
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n            Test káº¿t ná»‘i",
          "index": 6065
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“š Chá»§ Ä‘á»",
          "index": 6315
        },
        {
          "kind": "JSXText",
          "text": "setFormData({ ...formData, topic: e.target.value })}\r\n            placeholder=\"VD: JavaScript, Lá»‹ch sá»­ Viá»‡t Nam, ToÃ¡n há»c...\"\r\n            className=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\r\n          />",
          "index": 6467
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“Ž Táº£i lÃªn file Ä‘á»ƒ AI phÃ¢n tÃ­ch",
          "index": 7218
        },
        {
          "kind": "JSXText",
          "text": "Há»— trá»£: áº¢nh (JPG, PNG), PDF, Word (DOC, DOCX), Text (TXT)",
          "index": 7363
        },
        {
          "kind": "JSXText",
          "text": "Chá»n file",
          "index": 7700
        },
        {
          "kind": "JSXText",
          "text": "{(uploadedFile.size / 1024 / 1024).toFixed(2)} MB - ÄÃ£ xá»­ lÃ½ thÃ nh cÃ´ng",
          "index": 9125
        },
        {
          "kind": "JSXText",
          "text": "Äang xá»­ lÃ½ file...",
          "index": 9947
        },
        {
          "kind": "JSXText",
          "text": "ðŸŽ¯ Äá»™ khÃ³",
          "index": 10243
        },
        {
          "kind": "JSXText",
          "text": "ðŸŸ¢ Dá»…",
          "index": 10640
        },
        {
          "kind": "JSXText",
          "text": "ðŸŸ¡ Trung bÃ¬nh",
          "index": 10693
        },
        {
          "kind": "JSXText",
          "text": "ðŸ”´ KhÃ³",
          "index": 10752
        },
        {
          "kind": "JSXText",
          "text": "ðŸ”¢ Sá»‘ cÃ¢u há»i",
          "index": 10944
        },
        {
          "kind": "JSXText",
          "text": "3 cÃ¢u",
          "index": 11349
        },
        {
          "kind": "JSXText",
          "text": "5 cÃ¢u",
          "index": 11397
        },
        {
          "kind": "JSXText",
          "text": "10 cÃ¢u",
          "index": 11446
        },
        {
          "kind": "JSXText",
          "text": "15 cÃ¢u",
          "index": 11496
        },
        {
          "kind": "JSXText",
          "text": "20 cÃ¢u",
          "index": 11546
        },
        {
          "kind": "JSXText",
          "text": "Äang táº¡o cÃ¢u há»i...",
          "index": 12182
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o {formData.numQuestions} cÃ¢u há»i {getDifficultyLabel(formData.difficulty)}\r\n              {formData.useFileContent && ' tá»« file'}",
          "index": 12312
        },
        {
          "kind": "JSXText",
          "text": "ðŸ’¡ ThÃ´ng tin:",
          "index": 12677
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Sá»­ dá»¥ng Google Gemini AI miá»…n phÃ­",
          "index": 12773
        },
        {
          "kind": "JSXText",
          "text": "â€¢ KhÃ´ng cáº§n Firebase Functions",
          "index": 12831
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Cháº¡y trá»±c tiáº¿p trÃªn trÃ¬nh duyá»‡t",
          "index": 12884
        },
        {
          "kind": "JSXText",
          "text": "Má»›i:",
          "index": 12950
        },
        {
          "kind": "JSXText",
          "text": "Há»— trá»£ Ä‘á»c file áº£nh, PDF, Word, Text",
          "index": 12963
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Free tier: {AI_CONFIG.maxRequestsPerMinute} requests/phÃºt",
          "index": 13023
        },
        {
          "kind": "StringLiteral",
          "text": "âœ… Káº¿t ná»‘i AI thÃ nh cÃ´ng!",
          "index": 1476
        },
        {
          "kind": "StringLiteral",
          "text": "âŒ KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n AI: ",
          "index": 1582
        },
        {
          "kind": "StringLiteral",
          "text": "âŒ Lá»—i káº¿t ná»‘i AI",
          "index": 1721
        },
        {
          "kind": "StringLiteral",
          "text": "API key khÃ´ng Ä‘Æ°á»£c cáº¥u hÃ¬nh",
          "index": 2100
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ xá»­ lÃ½ file nÃ y",
          "index": 2699
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi xá»­ lÃ½ file",
          "index": 2834
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng nháº­p chá»§ Ä‘á» hoáº·c táº£i lÃªn file!",
          "index": 3367
        },
        {
          "kind": "StringLiteral",
          "text": "âŒ CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i",
          "index": 4220
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸŸ¢ Dá»…",
          "index": 4429
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸŸ¡ Trung bÃ¬nh",
          "index": 4467
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ”´ KhÃ³",
          "index": 4511
        },
        {
          "kind": "StringLiteral",
          "text": "VD: JavaScript, Lá»‹ch sá»­ Viá»‡t Nam, ToÃ¡n há»c...",
          "index": 6547
        },
        {
          "kind": "StringLiteral",
          "text": " tá»« file",
          "index": 12450
        }
      ]
    },
    {
      "file": "shared\\pages\\Home.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\n  const { t } = useTranslation();\n\r\n  const dispatch = useDispatch();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const { quizzes, loading } = useSelector((state: RootState) => state.quiz);\r\n  \r\n  // **THÃŠM Má»šI**: Dashboard stats state vá»›i dá»¯ liá»‡u tháº­t\r\n  const [stats, setStats] = useState",
          "index": 859
        },
        {
          "kind": "JSXText",
          "text": "([]);\r\n  const [statsLoading, setStatsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (quizzes.length === 0) {\r\n      dispatch(fetchQuizzes({ user }) as any);\r\n    }\r\n    loadRealStats();\r\n  }, [dispatch, user, quizzes.length]);\r\n\r\n  const loadRealStats = async () => {\r\n    try {\r\n      setStatsLoading(true);\r\n      \r\n      // Láº¥y dá»¯ liá»‡u thá»±c tá»« Firebase\r\n      const [quizzesSnapshot, usersSnapshot] = await Promise.all([\r\n        getDocs(collection(db, 'quizzes')),\r\n        getDocs(collection(db, 'users'))\r\n      ]);\r\n      \r\n      // Äáº¿m chá»‰ users ACTIVE (khÃ´ng bá»‹ xoÃ¡ vÃ  isActive = true)\r\n      const users = usersSnapshot.docs.map(doc => doc.data());\r\n      const activeUsers = users.filter(user => \r\n        user.isActive !== false && \r\n        user.isDeleted !== true\r\n      );\r\n      \r\n      // Äáº¿m creators trong sá»‘ users ACTIVE\r\n      const creators = activeUsers.filter(user => \r\n        user.role === 'creator' || user.role === 'admin'\r\n      );\r\n      \r\n      // Quiz hoÃ n thÃ nh táº¡m thá»i = 0 vÃ¬ chÆ°a cÃ³ data vá» quiz results\r\n      const completedQuizzes = 0;\r\n      \r\n      setStats({\r\n        totalQuizzes: quizzesSnapshot.size,\r\n        totalUsers: activeUsers.length, // CHá»ˆ Äáº¾M USERS HOáº T Äá»˜NG\r\n        completedQuizzes: completedQuizzes,\r\n        totalCreators: creators.length // CHá»ˆ Äáº¾M CREATORS HOáº T Äá»˜NG\r\n      });\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading real stats:', error);\r\n    } finally {\r\n      setStatsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (quizzes.length > 0) {\r\n      // **THÃŠM Má»šI**: Set featured quizzes (trending/popular)\r\n      const trending = quizzes\r\n        .filter(q => q.isPublic)\r\n        .sort((a, b) => (b.attempts || 0) - (a.attempts || 0))\r\n        .slice(0, 6);\r\n      setFeaturedQuizzes(trending);\r\n    }\r\n  }, [quizzes]);\r\n\r\n  if (loading) {\r\n    return (",
          "index": 1361
        },
        {
          "kind": "JSXText",
          "text": "ChÃ o má»«ng trá»Ÿ láº¡i, {user?.displayName?.split(' ')[0] || 'Quiz Master'}!",
          "index": 4534
        },
        {
          "kind": "JSXText",
          "text": "Sáºµn sÃ ng thá»­ thÃ¡ch kiáº¿n thá»©c cá»§a báº¡n chÆ°a?",
          "index": 4708
        },
        {
          "kind": "JSXText",
          "text": "KhÃ¡m phÃ¡ hÃ ng nghÃ¬n quiz thÃº vá»‹, thá»­ thÃ¡ch báº£n thÃ¢n vÃ  leo lÃªn báº£ng xáº¿p háº¡ng! ðŸš€",
          "index": 4920
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Dashboard Stats */}",
          "index": 5933
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“ˆ Dá»¯ liá»‡u thá»±c táº¿",
          "index": 6616
        },
        {
          "kind": "JSXText",
          "text": "ðŸ‘¥ ÄÃ£ Ä‘Äƒng kÃ½",
          "index": 7768
        },
        {
          "kind": "JSXText",
          "text": "âœ… Chá» cáº­p nháº­t",
          "index": 8928
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Featured/Trending Quizzes */}\r\n      {featuredQuizzes.length > 0 && (",
          "index": 10871
        },
        {
          "kind": "JSXText",
          "text": "Nhá»¯ng quiz Ä‘Æ°á»£c yÃªu thÃ­ch nháº¥t",
          "index": 11559
        },
        {
          "kind": "JSXText",
          "text": "Xem táº¥t cáº£",
          "index": 11977
        },
        {
          "kind": "JSXText",
          "text": "ChÆ°a cÃ³ quiz trending",
          "index": 13006
        },
        {
          "kind": "JSXText",
          "text": "HÃ£y báº¯t Ä‘áº§u táº¡o quiz Ä‘áº§u tiÃªn cá»§a báº¡n!",
          "index": 13082
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o Quiz ngay",
          "index": 13358
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n\r\n      {/* **THÃŠM Má»šI**: Quick Actions */}",
          "index": 13491
        },
        {
          "kind": "JSXText",
          "text": "HÃ nh Ä‘á»™ng nhanh",
          "index": 13983
        },
        {
          "kind": "JSXText",
          "text": "Nhá»¯ng thao tÃ¡c thÆ°á»ng dÃ¹ng Ä‘á»ƒ báº¯t Ä‘áº§u",
          "index": 14046
        },
        {
          "kind": "JSXText",
          "text": "Thiáº¿t káº¿ vÃ  chia sáº» quiz cá»§a riÃªng báº¡n vá»›i má»i ngÆ°á»i",
          "index": 14986
        },
        {
          "kind": "JSXText",
          "text": "Báº¯t Ä‘áº§u táº¡o",
          "index": 15184
        },
        {
          "kind": "JSXText",
          "text": "Quiz ngáº«u nhiÃªn",
          "index": 16024
        },
        {
          "kind": "JSXText",
          "text": "Nháº£y vÃ o má»™t quiz báº¥t ká»³ vÃ  thá»­ thÃ¡ch kiáº¿n thá»©c cá»§a báº¡n",
          "index": 16103
        },
        {
          "kind": "JSXText",
          "text": "ChÆ¡i ngay",
          "index": 16305
        },
        {
          "kind": "JSXText",
          "text": "Xem tiáº¿n Ä‘á»™",
          "index": 17305
        },
        {
          "kind": "JSXText",
          "text": "Kiá»ƒm tra thÃ nh tÃ­ch vÃ  lá»‹ch sá»­ lÃ m quiz cá»§a báº¡n",
          "index": 17380
        },
        {
          "kind": "JSXText",
          "text": "Quiz phá»• biáº¿n",
          "index": 18175
        },
        {
          "kind": "JSXText",
          "text": "Nhá»¯ng quiz Ä‘Æ°á»£c yÃªu thÃ­ch nháº¥t tuáº§n nÃ y",
          "index": 18236
        }
      ]
    },
    {
      "file": "shared\\pages\\Dashboard.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{/* Header giá»‘ng Admin */}",
          "index": 1323
        },
        {
          "kind": "JSXText",
          "text": "{/* Main Actions Grid - 2 cá»™t nhÆ° Admin */}",
          "index": 1974
        }
      ]
    },
    {
      "file": "shared\\pages\\Creator.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "('my-quizzes');\r\n\r\n  // Kiá»ƒm tra quyá»n creator\r\n  if (!user) {\r\n    return (",
          "index": 578
        }
      ]
    },
    {
      "file": "shared\\components\\Sidebar.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n\r\n  const menuItems = [\r\n    { path: '/', label: 'Trang chá»§', icon: 'ðŸ ' },\r\n    { path: '/quizzes', label: 'Danh sÃ¡ch Quiz', icon: 'ðŸ“' },\r\n    { path: '/favorites', label: 'YÃªu thÃ­ch', icon: 'â¤ï¸' },\r\n    { path: '/leaderboard', label: 'Báº£ng xáº¿p háº¡ng', icon: 'ðŸ†' },\r\n    { path: '/profile', label: 'Há»“ sÆ¡', icon: 'ðŸ‘¤' },\r\n  ];\r\n\r\n  // Add role-specific menu items\r\n  if (user?.role === 'creator' || user?.role === 'admin') {\r\n    menuItems.push({ path: '/creator', label: 'Táº¡o Quiz', icon: 'âž•' });\r\n    menuItems.push({ path: '/my-quizzes', label: 'Quiz cá»§a tÃ´i', icon: 'ðŸ“' });\r\n  }\r\n\r\n  if (user?.role === 'admin') {\r\n    menuItems.push({ path: '/admin', label: 'Quáº£n trá»‹', icon: 'âš™ï¸' });\r\n  }\r\n\r\n  return (",
          "index": 213
        },
        {
          "kind": "StringLiteral",
          "text": "Trang chá»§",
          "index": 404
        },
        {
          "kind": "StringLiteral",
          "text": "Danh sÃ¡ch Quiz",
          "index": 463
        },
        {
          "kind": "StringLiteral",
          "text": "YÃªu thÃ­ch",
          "index": 529
        },
        {
          "kind": "StringLiteral",
          "text": "Báº£ng xáº¿p háº¡ng",
          "index": 592
        },
        {
          "kind": "StringLiteral",
          "text": "Há»“ sÆ¡",
          "index": 655
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o Quiz",
          "index": 829
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz cá»§a tÃ´i",
          "index": 905
        },
        {
          "kind": "StringLiteral",
          "text": "Quáº£n trá»‹",
          "index": 1021
        }
      ]
    },
    {
      "file": "shared\\components\\SearchComponent.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ \r\n  onSearch, \r\n  placeholder = \"TÃ¬m kiáº¿m...\", \r\n  className = \"\" \r\n}) => {\r\n  const [query, setQuery] = useState('');\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSearch(query);\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent",
          "index": 221
        },
        {
          "kind": "StringLiteral",
          "text": "TÃ¬m kiáº¿m...",
          "index": 260
        }
      ]
    },
    {
      "file": "shared\\components\\RoleBasedRedirect.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "; // Admin cÅ©ng vÃ o dashboard chÃ­nh\r\n    case 'creator':\r\n      return",
          "index": 606
        },
        {
          "kind": "JSXText",
          "text": "; // Creator cÅ©ng vÃ o dashboard chÃ­nh\r\n    case 'user':\r\n    default:\r\n      return",
          "index": 713
        }
      ]
    },
    {
      "file": "shared\\components\\QuizReviewSystem.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ \r\n  quizId, \r\n  quizTitle = 'Quiz nÃ y',\r\n  showSubmitForm = true \r\n}) => {\r\n  const { t } = useTranslation();\r\n  const user = useSelector((state: RootState) => state.auth.user);\r\n  const [reviews, setReviews] = useState",
          "index": 714
        },
        {
          "kind": "JSXText",
          "text": "= {\r\n        quizId,\r\n        userId: user.uid,\r\n        userName: user.displayName || user.email || 'NgÆ°á»i dÃ¹ng áº©n danh',\r\n        rating: userRating,\r\n        comment: userComment.trim(),\r\n        createdAt: new Date()\r\n      };\r\n\r\n      const docRef = await addDoc(collection(db, 'quizReviews'), newReview);\r\n      \r\n      // Add to local state\r\n      setReviews(prev => [{ ...newReview, id: docRef.id }, ...prev]);\r\n      setHasUserReviewed(true);\r\n      setUserRating(0);\r\n      setUserComment('');\r\n      \r\n      toast.success(t('quiz.reviews.submitSuccess'));\r\n    } catch (error) {\r\n      console.error('Error submitting review:', error);\r\n      toast.error(t('quiz.reviews.submitError'));\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const StarRating: React.FC",
          "index": 3017
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz nÃ y",
          "index": 749
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng áº©n danh",
          "index": 3120
        }
      ]
    },
    {
      "file": "shared\\components\\QuickReviewSection.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Báº¡n tháº¥y quiz nÃ y nhÆ° tháº¿ nÃ o?",
          "index": 1190
        },
        {
          "kind": "JSXText",
          "text": "Chia sáº» cáº£m nháº­n cá»§a báº¡n Ä‘á»ƒ giÃºp nhá»¯ng ngÆ°á»i khÃ¡c cÃ³ tráº£i nghiá»‡m tá»‘t hÆ¡n",
          "index": 1301
        },
        {
          "kind": "JSXText",
          "text": "Viáº¿t Ä‘Ã¡nh giÃ¡",
          "index": 1838
        },
        {
          "kind": "JSXText",
          "text": "Xem táº¥t cáº£ Ä‘Ã¡nh giÃ¡",
          "index": 2224
        },
        {
          "kind": "JSXText",
          "text": "ÄÄƒng nháº­p Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ vÃ  xem cÃ¡c Ä‘Ã¡nh giÃ¡ khÃ¡c",
          "index": 2411
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡nh giÃ¡: {quizTitle}",
          "index": 3216
        },
        {
          "kind": "JSXText",
          "text": "setShowReviewForm(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 text-2xl font-bold\"\r\n              >\r\n                Ã—",
          "index": 3297
        }
      ]
    },
    {
      "file": "shared\\components\\PopularQuizzesRanking.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadPopularQuizzes = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // TODO: Load real popular quizzes based on attempts/ratings\r\n        // For now, show empty state\r\n        setPopularQuizzes([]);\r\n      } catch (error) {\r\n        console.error('Error loading popular quizzes:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadPopularQuizzes();\r\n  }, [timeFilter]);\r\n\r\n  const getDifficultyColor = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'text-green-600 bg-green-100';\r\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\r\n      case 'hard': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const formatDifficulty = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'Dá»…';\r\n      case 'medium': return 'Trung bÃ¬nh';\r\n      case 'hard': return 'KhÃ³';\r\n      default: return difficulty;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (",
          "index": 541
        },
        {
          "kind": "JSXText",
          "text": "ðŸ† Quiz Phá»• Biáº¿n",
          "index": 1806
        },
        {
          "kind": "JSXText",
          "text": "ðŸ† Quiz Phá»• Biáº¿n",
          "index": 2563
        },
        {
          "kind": "JSXText",
          "text": "{timeFilter === 'week' ? 'Tuáº§n nÃ y' : timeFilter === 'month' ? 'ThÃ¡ng nÃ y' : 'Táº¥t cáº£'}",
          "index": 2645
        },
        {
          "kind": "JSXText",
          "text": "ChÆ°a cÃ³ dá»¯ liá»‡u quiz phá»• biáº¿n",
          "index": 2940
        },
        {
          "kind": "JSXText",
          "text": "Dá»¯ liá»‡u sáº½ xuáº¥t hiá»‡n khi cÃ³ nhiá»u ngÆ°á»i tham gia quiz hÆ¡n",
          "index": 3008
        },
        {
          "kind": "StringLiteral",
          "text": "Dá»…",
          "index": 1494
        },
        {
          "kind": "StringLiteral",
          "text": "Trung bÃ¬nh",
          "index": 1529
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ³",
          "index": 1570
        },
        {
          "kind": "StringLiteral",
          "text": "Tuáº§n nÃ y",
          "index": 2683
        },
        {
          "kind": "StringLiteral",
          "text": "ThÃ¡ng nÃ y",
          "index": 2721
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¥t cáº£",
          "index": 2735
        }
      ]
    },
    {
      "file": "shared\\components\\NotificationCenter.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "markAsRead(notification.id)}\r\n                              className=\"text-xs text-blue-600 hover:text-blue-800\"\r\n                            >\r\n                              ÄÃ¡nh dáº¥u Ä‘Ã£ Ä‘á»c",
          "index": 5396
        },
        {
          "kind": "JSXText",
          "text": "Xem táº¥t cáº£ thÃ´ng bÃ¡o",
          "index": 6808
        }
      ]
    },
    {
      "file": "shared\\components\\NotificationBanner.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n\r\n  // Sá»­a láº¡i useEffect Ä‘á»ƒ xá»­ lÃ½ lá»—i Ä‘Ãºng cÃ¡ch\r\n  useEffect(() => {\r\n    // HÃ m nÃ y Ä‘Æ°á»£c khai bÃ¡o trong useEffect Ä‘á»ƒ trÃ¡nh váº¥n Ä‘á» vá»›i React Hooks\r\n    const loadActiveNotification = async () => {\r\n      if (!user) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        const notificationsRef = collection(db, 'system_notifications');\r\n        \r\n        const q = query(\r\n          notificationsRef,\r\n          where('isActive', '==', true),\r\n          orderBy('createdAt', 'desc'),\r\n          limit(1)\r\n        );\r\n\r\n        const snapshot = await getDocs(q);\r\n        if (snapshot.empty) {\r\n          setNotification(null);\r\n          setLoading(false);\r\n          return;\r\n        }\r\n\r\n        let activeNotification = null;\r\n        snapshot.forEach(doc => {\r\n          const data = doc.data() as Notification;\r\n          data.id = doc.id;\r\n          if (\r\n            data.targetRole === 'all' || \r\n            !data.targetRole || \r\n            data.targetRole === user.role\r\n          ) {\r\n            activeNotification = data;\r\n          }\r\n        });\r\n\r\n        setNotification(activeNotification);\r\n      } catch (err) {\r\n        console.error('Error loading notifications:', err);\r\n        setError('Error loading notifications');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadActiveNotification().catch(console.error);\r\n  }, [user]);\r\n\r\n  // KhÃ´ng hiá»ƒn thá»‹ gÃ¬ náº¿u Ä‘ang táº£i hoáº·c khÃ´ng cÃ³ thÃ´ng bÃ¡o\r\n  if (loading || !notification) return null;\r\n\r\n  // Náº¿u cÃ³ lá»—i, cÃ³ thá»ƒ hiá»ƒn thá»‹ má»™t thÃ´ng bÃ¡o lá»—i hoáº·c khÃ´ng hiá»ƒn thá»‹ gÃ¬\r\n  if (error) {\r\n    console.error('NotificationBanner error:', error);\r\n    return null;\r\n  }\r\n\r\n  // XÃ¡c Ä‘á»‹nh mÃ u sáº¯c dá»±a trÃªn loáº¡i thÃ´ng bÃ¡o\r\n  const getBgColor = () => {\r\n    switch (notification.type) {\r\n      case 'info': return 'bg-blue-100 border-blue-500 text-blue-800';\r\n      case 'warning': return 'bg-yellow-100 border-yellow-500 text-yellow-800';\r\n      case 'success': return 'bg-green-100 border-green-500 text-green-800';\r\n      case 'error': return 'bg-red-100 border-red-500 text-red-800';\r\n      default: return 'bg-gray-100 border-gray-500 text-gray-800';\r\n    }\r\n  };\r\n\r\n  // ThÃªm hÃ m getButtonColor\r\n  const getButtonColor = () => {\r\n    switch (notification?.type) {\r\n      case 'info': return 'text-blue-800 hover:text-blue-600';\r\n      case 'warning': return 'text-yellow-800 hover:text-yellow-600';\r\n      case 'success': return 'text-green-800 hover:text-green-600';\r\n      case 'error': return 'text-red-800 hover:text-red-600';\r\n      default: return 'text-gray-800 hover:text-gray-600';\r\n    }\r\n  };\r\n\r\n  // Sá»­a láº¡i nÃºt Ä‘Ã³ng Ä‘á»ƒ sá»­ dá»¥ng mÃ u chá»¯ phÃ¹ há»£p\r\n  return (",
          "index": 720
        },
        {
          "kind": "JSXText",
          "text": "setNotification(null)}\r\n          className={`ml-4 font-bold text-xl ${getButtonColor()} hover:scale-110 transition-transform`}\r\n          aria-label=\"ÄÃ³ng thÃ´ng bÃ¡o\"\r\n        >\r\n          &times;",
          "index": 3793
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ³ng thÃ´ng bÃ¡o",
          "index": 3945
        }
      ]
    },
    {
      "file": "shared\\components\\LanguageSwitcher.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ variant = 'light' }) => {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const languages = [\r\n    { code: 'vi', name: 'Tiáº¿ng Viá»‡t', flag: 'ðŸ‡»ðŸ‡³' },\r\n    { code: 'en', name: 'English', flag: 'ðŸ‡ºðŸ‡¸' }\r\n  ];\r\n\r\n  const currentLanguage = languages.find(lang => lang.code === i18n.language) || languages[0];\r\n\r\n  const changeLanguage = (languageCode: string) => {\r\n    i18n.changeLanguage(languageCode);\r\n  };\r\n\r\n  // Styling based on variant\r\n  const getButtonStyles = () => {\r\n    switch (variant) {\r\n      case 'dark': // For landing page with dark background\r\n        return \"flex items-center space-x-2 px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors border border-white/20 backdrop-blur-sm text-white\";\r\n      case 'header': // For authenticated header with white background\r\n        return \"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border border-gray-300 text-gray-700\";\r\n      default: // Light variant - for login/register pages\r\n        return \"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-white shadow-md\";\r\n    }\r\n  };\r\n\r\n  const getIconColor = () => {\r\n    switch (variant) {\r\n      case 'dark':\r\n        return \"text-white\";\r\n      case 'header':\r\n        return \"text-gray-600\";\r\n      default:\r\n        return \"text-white\";\r\n    }\r\n  };\r\n\r\n  const getTextColor = () => {\r\n    switch (variant) {\r\n      case 'dark':\r\n        return \"text-white\";\r\n      case 'header':\r\n        return \"text-gray-700\";\r\n      default:\r\n        return \"text-white\";\r\n    }\r\n  };\r\n\r\n  const getArrowColor = () => {\r\n    switch (variant) {\r\n      case 'dark':\r\n        return \"text-white/70\";\r\n      case 'header':\r\n        return \"text-gray-500\";\r\n      default:\r\n        return \"text-white/80\";\r\n    }\r\n  };\r\n\r\n  return (",
          "index": 254
        },
        {
          "kind": "StringLiteral",
          "text": "Tiáº¿ng Viá»‡t",
          "index": 378
        }
      ]
    },
    {
      "file": "shared\\components\\ErrorBoundary.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "ÄÃ£ xáº£y ra lá»—i",
          "index": 1931
        },
        {
          "kind": "JSXText",
          "text": "{this.state.error?.message || 'á»¨ng dá»¥ng gáº·p sá»± cá»‘ khÃ´ng mong muá»‘n.'}",
          "index": 1997
        },
        {
          "kind": "JSXText",
          "text": "window.location.reload()}\r\n              className=\"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200\"\r\n            >\r\n              Táº£i láº¡i trang",
          "index": 2150
        },
        {
          "kind": "JSXText",
          "text": "Chi tiáº¿t lá»—i (Development only)",
          "index": 2590
        },
        {
          "kind": "StringLiteral",
          "text": "á»¨ng dá»¥ng gáº·p sá»± cá»‘ khÃ´ng mong muá»‘n.",
          "index": 2044
        }
      ]
    },
    {
      "file": "shared\\components\\EmptyState.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ",\r\n          title: 'ChÆ°a cÃ³ quiz nÃ o',\r\n          description: 'HÃ£y táº¡o quiz Ä‘áº§u tiÃªn cá»§a báº¡n Ä‘á»ƒ báº¯t Ä‘áº§u!',\r\n          actionLabel: 'Táº¡o Quiz Má»›i',\r\n          actionUrl: '/create-quiz'\r\n        };\r\n      case 'reviews':\r\n        return {\r\n          icon:",
          "index": 577
        },
        {
          "kind": "JSXText",
          "text": ",\r\n          title: 'ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o',\r\n          description: 'HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡ quiz nÃ y!',\r\n          actionLabel: 'Viáº¿t Ä‘Ã¡nh giÃ¡',\r\n          actionUrl: null\r\n        };\r\n      case 'favorites':\r\n        return {\r\n          icon:",
          "index": 881
        },
        {
          "kind": "JSXText",
          "text": ",\r\n          title: 'ChÆ°a cÃ³ quiz yÃªu thÃ­ch',\r\n          description: 'HÃ£y thÃªm quiz vÃ o danh sÃ¡ch yÃªu thÃ­ch Ä‘á»ƒ dá»… dÃ ng truy cáº­p!',\r\n          actionLabel: 'KhÃ¡m phÃ¡ Quiz',\r\n          actionUrl: '/quiz'\r\n        };\r\n      default:\r\n        return {\r\n          icon:",
          "index": 1181
        },
        {
          "kind": "JSXText",
          "text": ",\r\n          title: 'KhÃ´ng cÃ³ dá»¯ liá»‡u',\r\n          description: 'Hiá»‡n táº¡i chÆ°a cÃ³ ná»™i dung nÃ o.',\r\n          actionLabel: null,\r\n          actionUrl: null\r\n        };\r\n    }\r\n  };\r\n\r\n  const defaultContent = getDefaultContent();\r\n  const finalTitle = title || defaultContent.title;\r\n  const finalDescription = description || defaultContent.description;\r\n  const finalActionLabel = actionLabel || defaultContent.actionLabel;\r\n  const finalActionUrl = actionUrl || defaultContent.actionUrl;\r\n\r\n  return (",
          "index": 1495
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ quiz nÃ o",
          "index": 598
        },
        {
          "kind": "StringLiteral",
          "text": "HÃ£y táº¡o quiz Ä‘áº§u tiÃªn cá»§a báº¡n Ä‘á»ƒ báº¯t Ä‘áº§u!",
          "index": 642
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o Quiz Má»›i",
          "index": 711
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o",
          "index": 902
        },
        {
          "kind": "StringLiteral",
          "text": "HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡ quiz nÃ y!",
          "index": 950
        },
        {
          "kind": "StringLiteral",
          "text": "Viáº¿t Ä‘Ã¡nh giÃ¡",
          "index": 1018
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ quiz yÃªu thÃ­ch",
          "index": 1202
        },
        {
          "kind": "StringLiteral",
          "text": "HÃ£y thÃªm quiz vÃ o danh sÃ¡ch yÃªu thÃ­ch Ä‘á»ƒ dá»… dÃ ng truy cáº­p!",
          "index": 1252
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ¡m phÃ¡ Quiz",
          "index": 1338
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng cÃ³ dá»¯ liá»‡u",
          "index": 1516
        },
        {
          "kind": "StringLiteral",
          "text": "Hiá»‡n táº¡i chÆ°a cÃ³ ná»™i dung nÃ o.",
          "index": 1560
        }
      ]
    },
    {
      "file": "shared\\components\\AchievementSystem.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "[] = [\r\n  {\r\n    id: 'first_quiz',\r\n    title: 'ðŸŽ¯ BÆ°á»›c Ä‘áº§u tiÃªn',\r\n    description: 'HoÃ n thÃ nh quiz Ä‘áº§u tiÃªn',\r\n    icon: 'ðŸŽ¯',\r\n    condition: { type: 'quiz_count', value: 1 },\r\n    rarity: 'common'\r\n  },\r\n  {\r\n    id: 'quiz_master',\r\n    title: 'ðŸ“š Tháº¡c sÄ© Quiz',\r\n    description: 'HoÃ n thÃ nh 10 quiz',\r\n    icon: 'ðŸ“š',\r\n    condition: { type: 'quiz_count', value: 10 },\r\n    rarity: 'rare'\r\n  },\r\n  {\r\n    id: 'quiz_legend',\r\n    title: 'ðŸ‘‘ Huyá»n thoáº¡i Quiz',\r\n    description: 'HoÃ n thÃ nh 50 quiz',\r\n    icon: 'ðŸ‘‘',\r\n    condition: { type: 'quiz_count', value: 50 },\r\n    rarity: 'legendary'\r\n  },\r\n  {\r\n    id: 'high_scorer',\r\n    title: 'â­ Äiá»ƒm cao',\r\n    description: 'Äáº¡t Ä‘iá»ƒm trung bÃ¬nh trÃªn 80%',\r\n    icon: 'â­',\r\n    condition: { type: 'score_average', value: 80 },\r\n    rarity: 'rare'\r\n  },\r\n  {\r\n    id: 'perfectionist',\r\n    title: 'ðŸ’¯ HoÃ n háº£o',\r\n    description: 'Äáº¡t 100% trong 1 quiz',\r\n    icon: 'ðŸ’¯',\r\n    condition: { type: 'perfect_score', value: 100 },\r\n    rarity: 'epic'\r\n  },\r\n  {\r\n    id: 'streak_5',\r\n    title: 'ðŸ”¥ Chuá»—i 5',\r\n    description: 'HoÃ n thÃ nh 5 quiz liÃªn tiáº¿p',\r\n    icon: 'ðŸ”¥',\r\n    condition: { type: 'streak', value: 5 },\r\n    rarity: 'rare'\r\n  },\r\n  {\r\n    id: 'speed_demon',\r\n    title: 'âš¡ Tá»‘c Ä‘á»™ Ã¡nh sÃ¡ng',\r\n    description: 'HoÃ n thÃ nh quiz trong thá»i gian ká»· lá»¥c',\r\n    icon: 'âš¡',\r\n    condition: { type: 'time_record', value: 60 }, // seconds\r\n    rarity: 'epic'\r\n  }\r\n];\r\n\r\nconst AchievementCard: React.FC",
          "index": 631
        },
        {
          "kind": "JSXText",
          "text": "ðŸ† ThÃ nh tÃ­ch",
          "index": 9832
        },
        {
          "kind": "JSXText",
          "text": "{unlockedCount}/{totalCount} Ä‘Ã£ má»Ÿ khÃ³a",
          "index": 9901
        },
        {
          "kind": "JSXText",
          "text": "{\r\n                      // Share achievement\r\n                      navigator.clipboard.writeText(`ðŸŽ‰ TÃ´i vá»«a má»Ÿ khÃ³a thÃ nh tÃ­ch \"${showModal.title}\" trong Quiz App!`);\r\n                      setShowModal(null);\r\n                    }}\r\n                    className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                  >\r\n                    {t('share')}",
          "index": 11587
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸŽ¯ BÆ°á»›c Ä‘áº§u tiÃªn",
          "index": 679
        },
        {
          "kind": "StringLiteral",
          "text": "HoÃ n thÃ nh quiz Ä‘áº§u tiÃªn",
          "index": 717
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ“š Tháº¡c sÄ© Quiz",
          "index": 881
        },
        {
          "kind": "StringLiteral",
          "text": "HoÃ n thÃ nh 10 quiz",
          "index": 918
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ‘‘ Huyá»n thoáº¡i Quiz",
          "index": 1075
        },
        {
          "kind": "StringLiteral",
          "text": "HoÃ n thÃ nh 50 quiz",
          "index": 1116
        },
        {
          "kind": "StringLiteral",
          "text": "â­ Äiá»ƒm cao",
          "index": 1278
        },
        {
          "kind": "StringLiteral",
          "text": "Äáº¡t Ä‘iá»ƒm trung bÃ¬nh trÃªn 80%",
          "index": 1310
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ’¯ HoÃ n háº£o",
          "index": 1481
        },
        {
          "kind": "StringLiteral",
          "text": "Äáº¡t 100% trong 1 quiz",
          "index": 1514
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ”¥ Chuá»—i 5",
          "index": 1675
        },
        {
          "kind": "StringLiteral",
          "text": "HoÃ n thÃ nh 5 quiz liÃªn tiáº¿p",
          "index": 1707
        },
        {
          "kind": "StringLiteral",
          "text": "âš¡ Tá»‘c Ä‘á»™ Ã¡nh sÃ¡ng",
          "index": 1868
        },
        {
          "kind": "StringLiteral",
          "text": "HoÃ n thÃ nh quiz trong thá»i gian ká»· lá»¥c",
          "index": 1907
        }
      ]
    },
    {
      "file": "lib\\utils\\helpers.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n  return new Intl.DateTimeFormat('vi-VN', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  }).format(date);\r\n};\r\n\r\n/**\r\n * Format a number to percentage with Vietnamese locale\r\n */\r\nexport const formatPercentage = (value: number, total: number): string => {\r\n  const percentage = (value / total) * 100;\r\n  return `${percentage.toFixed(1)}%`;\r\n};\r\n\r\n/**\r\n * Calculate quiz score\r\n */\r\nexport const calculateScore = (result: QuizResult): number => {\r\n  return Math.round((result.correctAnswers / result.totalQuestions) * 100);\r\n};\r\n\r\n/**\r\n * Get difficulty badge color\r\n */\r\nexport const getDifficultyColor = (difficulty: string): string => {\r\n  switch (difficulty) {\r\n    case 'easy':\r\n      return 'bg-green-100 text-green-800';\r\n    case 'medium':\r\n      return 'bg-yellow-100 text-yellow-800';\r\n    case 'hard':\r\n      return 'bg-red-100 text-red-800';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800';\r\n  }\r\n};\r\n\r\n/**\r\n * Get difficulty label in Vietnamese\r\n */\r\nexport const getDifficultyLabel = (difficulty: string): string => {\r\n  switch (difficulty) {\r\n    case 'easy':\r\n      return 'Dá»…';\r\n    case 'medium':\r\n      return 'Trung bÃ¬nh';\r\n    case 'hard':\r\n      return 'KhÃ³';\r\n    default:\r\n      return 'KhÃ´ng xÃ¡c Ä‘á»‹nh';\r\n  }\r\n};\r\n\r\n/**\r\n * Shuffle an array (Fisher-Yates algorithm)\r\n */\r\nexport const shuffleArray =",
          "index": 470
        },
        {
          "kind": "StringLiteral",
          "text": "Dá»…",
          "index": 1638
        },
        {
          "kind": "StringLiteral",
          "text": "Trung bÃ¬nh",
          "index": 1678
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ³",
          "index": 1724
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng xÃ¡c Ä‘á»‹nh",
          "index": 1759
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±",
          "index": 3018
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 1 chá»¯ hoa",
          "index": 3115
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 1 chá»¯ thÆ°á»ng",
          "index": 3214
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 1 sá»‘",
          "index": 3316
        }
      ]
    },
    {
      "file": "lib\\i18n\\index.ts",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "Äang táº£i...",
          "index": 313
        },
        {
          "kind": "StringLiteral",
          "text": "LÆ°u",
          "index": 344
        },
        {
          "kind": "StringLiteral",
          "text": "Há»§y",
          "index": 369
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ³a",
          "index": 394
        },
        {
          "kind": "StringLiteral",
          "text": "Chá»‰nh sá»­a",
          "index": 417
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o má»›i",
          "index": 448
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº­p nháº­t",
          "index": 477
        },
        {
          "kind": "StringLiteral",
          "text": "TÃ¬m kiáº¿m",
          "index": 507
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»c",
          "index": 537
        },
        {
          "kind": "StringLiteral",
          "text": "Sáº¯p xáº¿p",
          "index": 560
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³",
          "index": 586
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng",
          "index": 606
        },
        {
          "kind": "StringLiteral",
          "text": "Äá»“ng Ã½",
          "index": 629
        },
        {
          "kind": "StringLiteral",
          "text": "Quay láº¡i",
          "index": 655
        },
        {
          "kind": "StringLiteral",
          "text": "Tiáº¿p theo",
          "index": 683
        },
        {
          "kind": "StringLiteral",
          "text": "TrÆ°á»›c Ä‘Ã³",
          "index": 716
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ³ng",
          "index": 745
        },
        {
          "kind": "StringLiteral",
          "text": "Má»Ÿ",
          "index": 769
        },
        {
          "kind": "StringLiteral",
          "text": "Táº£i xuá»‘ng",
          "index": 818
        },
        {
          "kind": "StringLiteral",
          "text": "Táº£i lÃªn",
          "index": 849
        },
        {
          "kind": "StringLiteral",
          "text": "Hoáº·c",
          "index": 874
        },
        {
          "kind": "StringLiteral",
          "text": "Äang táº£i dá»¯ liá»‡u...",
          "index": 905
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng Ä‘á»£i má»™t chÃºt",
          "index": 950
        },
        {
          "kind": "StringLiteral",
          "text": "Äang kiá»ƒm tra xÃ¡c thá»±c...",
          "index": 999
        },
        {
          "kind": "StringLiteral",
          "text": "phÃºt",
          "index": 1047
        },
        {
          "kind": "StringLiteral",
          "text": "giÃ¢y",
          "index": 1074
        },
        {
          "kind": "StringLiteral",
          "text": "ngÆ°á»i chÆ¡i",
          "index": 1101
        },
        {
          "kind": "StringLiteral",
          "text": "phÃ²ng",
          "index": 1131
        },
        {
          "kind": "StringLiteral",
          "text": "Rá»i khá»i",
          "index": 1185
        },
        {
          "kind": "StringLiteral",
          "text": "Sáºµn sÃ ng",
          "index": 1214
        },
        {
          "kind": "StringLiteral",
          "text": "Äang chá»",
          "index": 1245
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¯t Ä‘áº§u",
          "index": 1274
        },
        {
          "kind": "StringLiteral",
          "text": "Káº¿t thÃºc",
          "index": 1303
        },
        {
          "kind": "StringLiteral",
          "text": "HoÃ n thÃ nh",
          "index": 1335
        },
        {
          "kind": "StringLiteral",
          "text": "Tiáº¿p tá»¥c",
          "index": 1369
        },
        {
          "kind": "StringLiteral",
          "text": "Äang xá»­ lÃ½...",
          "index": 1403
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng cÃ³ dá»¯ liá»‡u",
          "index": 1438
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng thá»­ láº¡i",
          "index": 1478
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»­ láº¡i",
          "index": 1515
        },
        {
          "kind": "StringLiteral",
          "text": "LÃ m má»›i",
          "index": 1545
        },
        {
          "kind": "StringLiteral",
          "text": "ThÃ nh cÃ´ng",
          "index": 1575
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i",
          "index": 1606
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº£nh bÃ¡o",
          "index": 1632
        },
        {
          "kind": "StringLiteral",
          "text": "ThÃ´ng tin",
          "index": 1660
        },
        {
          "kind": "StringLiteral",
          "text": "Trang chá»§",
          "index": 1739
        },
        {
          "kind": "StringLiteral",
          "text": "Báº£ng Ä‘iá»u khiá»ƒn",
          "index": 1773
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ¡i cÃ¹ng",
          "index": 1842
        },
        {
          "kind": "StringLiteral",
          "text": "YÃªu thÃ­ch",
          "index": 1876
        },
        {
          "kind": "StringLiteral",
          "text": "Báº£ng xáº¿p háº¡ng",
          "index": 1912
        },
        {
          "kind": "StringLiteral",
          "text": "Há»“ sÆ¡",
          "index": 1948
        },
        {
          "kind": "StringLiteral",
          "text": "Quáº£n trá»‹",
          "index": 2004
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng nháº­p",
          "index": 2033
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng xuáº¥t",
          "index": 2064
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng kÃ½",
          "index": 2097
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ i Ä‘áº·t",
          "index": 2128
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ¡i cÃ¹ng báº¡n bÃ¨",
          "index": 2215
        },
        {
          "kind": "StringLiteral",
          "text": "Tham gia phÃ²ng vÃ  thi Ä‘áº¥u vá»›i ngÆ°á»i khÃ¡c",
          "index": 2255
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o phÃ²ng má»›i",
          "index": 2321
        },
        {
          "kind": "StringLiteral",
          "text": "Tham gia phÃ²ng",
          "index": 2358
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ£ phÃ²ng",
          "index": 2396
        },
        {
          "kind": "StringLiteral",
          "text": "TÃªn phÃ²ng",
          "index": 2428
        },
        {
          "kind": "StringLiteral",
          "text": "Sá»‘ ngÆ°á»i tá»‘i Ä‘a",
          "index": 2463
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»i gian má»—i cÃ¢u",
          "index": 2503
        },
        {
          "kind": "StringLiteral",
          "text": "Quyá»n riÃªng tÆ°",
          "index": 2543
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ´ng khai",
          "index": 2579
        },
        {
          "kind": "StringLiteral",
          "text": "RiÃªng tÆ°",
          "index": 2611
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u",
          "index": 2643
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p máº­t kháº©u",
          "index": 2680
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ i Ä‘áº·t phÃ²ng",
          "index": 2721
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ i Ä‘áº·t game",
          "index": 2762
        },
        {
          "kind": "StringLiteral",
          "text": "Hiá»ƒn thá»‹ Ä‘Ã¡p Ã¡n",
          "index": 2801
        },
        {
          "kind": "StringLiteral",
          "text": "Cho phÃ©p vÃ o muá»™n",
          "index": 2845
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»± Ä‘á»™ng báº¯t Ä‘áº§u",
          "index": 2887
        },
        {
          "kind": "StringLiteral",
          "text": "PhÃ²ng chá»",
          "index": 2944
        },
        {
          "kind": "StringLiteral",
          "text": "Äang chá» chá»§ phÃ²ng báº¯t Ä‘áº§u",
          "index": 2985
        },
        {
          "kind": "StringLiteral",
          "text": "{{ready}}/{{total}} ngÆ°á»i sáºµn sÃ ng",
          "index": 3041
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¯t Ä‘áº§u game",
          "index": 3102
        },
        {
          "kind": "StringLiteral",
          "text": "Kick ngÆ°á»i chÆ¡i",
          "index": 3142
        },
        {
          "kind": "StringLiteral",
          "text": "Rá»i phÃ²ng",
          "index": 3184
        },
        {
          "kind": "StringLiteral",
          "text": "Sao chÃ©p mÃ£ phÃ²ng",
          "index": 3219
        },
        {
          "kind": "StringLiteral",
          "text": "Chia sáº» mÃ£ phÃ²ng",
          "index": 3263
        },
        {
          "kind": "StringLiteral",
          "text": "Game Ä‘ang diá»…n ra",
          "index": 3330
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ¢u há»i {{current}}/{{total}}",
          "index": 3373
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ²n láº¡i {{time}}s",
          "index": 3428
        },
        {
          "kind": "StringLiteral",
          "text": "Äang gá»­i cÃ¢u tráº£ lá»i...",
          "index": 3473
        },
        {
          "kind": "StringLiteral",
          "text": "Äang chá» ngÆ°á»i khÃ¡c...",
          "index": 3530
        },
        {
          "kind": "StringLiteral",
          "text": "Káº¿t quáº£ cÃ¢u há»i",
          "index": 3577
        },
        {
          "kind": "StringLiteral",
          "text": "Báº£ng xáº¿p háº¡ng",
          "index": 3621
        },
        {
          "kind": "StringLiteral",
          "text": "Game káº¿t thÃºc",
          "index": 3660
        },
        {
          "kind": "StringLiteral",
          "text": "Káº¿t quáº£ cuá»‘i cÃ¹ng",
          "index": 3703
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p tin nháº¯n...",
          "index": 3804
        },
        {
          "kind": "StringLiteral",
          "text": "Gá»­i",
          "index": 3842
        },
        {
          "kind": "StringLiteral",
          "text": "Há»‡ thá»‘ng",
          "index": 3869
        },
        {
          "kind": "StringLiteral",
          "text": "{{name}} Ä‘Ã£ tham gia",
          "index": 3907
        },
        {
          "kind": "StringLiteral",
          "text": "{{name}} Ä‘Ã£ rá»i khá»i",
          "index": 3955
        },
        {
          "kind": "StringLiteral",
          "text": "{{name}} Ä‘Ã£ bá»‹ kick",
          "index": 4005
        },
        {
          "kind": "StringLiteral",
          "text": "Game Ä‘Ã£ báº¯t Ä‘áº§u",
          "index": 4053
        },
        {
          "kind": "StringLiteral",
          "text": "Game Ä‘Ã£ káº¿t thÃºc",
          "index": 4095
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y phÃ²ng",
          "index": 4171
        },
        {
          "kind": "StringLiteral",
          "text": "PhÃ²ng Ä‘Ã£ Ä‘áº§y",
          "index": 4217
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u khÃ´ng Ä‘Ãºng",
          "index": 4260
        },
        {
          "kind": "StringLiteral",
          "text": "Game Ä‘ang diá»…n ra",
          "index": 4311
        },
        {
          "kind": "StringLiteral",
          "text": "Máº¥t káº¿t ná»‘i",
          "index": 4360
        },
        {
          "kind": "StringLiteral",
          "text": "Äang káº¿t ná»‘i láº¡i...",
          "index": 4401
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ tham gia phÃ²ng",
          "index": 4450
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº¡o phÃ²ng",
          "index": 4506
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o phÃ²ng thÃ nh cÃ´ng",
          "index": 4585
        },
        {
          "kind": "StringLiteral",
          "text": "Tham gia phÃ²ng thÃ nh cÃ´ng",
          "index": 4633
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ rá»i khá»i phÃ²ng",
          "index": 4684
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ kick ngÆ°á»i chÆ¡i",
          "index": 4731
        },
        {
          "kind": "StringLiteral",
          "text": "Game Ä‘Ã£ báº¯t Ä‘áº§u",
          "index": 4778
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»­ thÃ¡ch kiáº¿n thá»©c cá»§a báº¡n",
          "index": 4900
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ¡m phÃ¡ hÃ ng ngÃ n quiz thÃº vá»‹, thá»­ thÃ¡ch báº£n thÃ¢n vÃ  nÃ¢ng cao kiáº¿n thá»©c vá»›i Quiz Trivia - ná»n táº£ng quiz tÆ°Æ¡ng tÃ¡c hÃ ng Ä‘áº§u!",
          "index": 4953
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¯t Ä‘áº§u ngay - Miá»…n phÃ­!",
          "index": 5129
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ cÃ³ tÃ i khoáº£n?",
          "index": 5180
        },
        {
          "kind": "StringLiteral",
          "text": "Äa dáº¡ng chá»§ Ä‘á»",
          "index": 5278
        },
        {
          "kind": "StringLiteral",
          "text": "Khoa há»c, lá»‹ch sá»­, thá»ƒ thao, giáº£i trÃ­ vÃ  nhiá»u chá»§ Ä‘á» háº¥p dáº«n khÃ¡c",
          "index": 5323
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»i gian thá»±c",
          "index": 5450
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»­ thÃ¡ch vá»›i timer Ä‘áº¿m ngÆ°á»£c vÃ  theo dÃµi tiáº¿n Ä‘á»™ realtime",
          "index": 5495
        },
        {
          "kind": "StringLiteral",
          "text": "Xáº¿p háº¡ng & ThÃ nh tÃ­ch",
          "index": 5613
        },
        {
          "kind": "StringLiteral",
          "text": "Theo dÃµi Ä‘iá»ƒm sá»‘, thá»‘ng kÃª vÃ  so sÃ¡nh vá»›i báº¡n bÃ¨",
          "index": 5665
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz Ä‘a dáº¡ng",
          "index": 5779
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i chÆ¡i",
          "index": 5816
        },
        {
          "kind": "StringLiteral",
          "text": "LÆ°á»£t chÆ¡i",
          "index": 5849
        },
        {
          "kind": "StringLiteral",
          "text": "Há»— trá»£",
          "index": 5883
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¥t cáº£ quyá»n Ä‘Æ°á»£c báº£o lÆ°u.",
          "index": 5943
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p cÃ¢u tráº£ lá»i cá»§a báº¡n...",
          "index": 6064
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ¡m phÃ¡ Quiz",
          "index": 6121
        },
        {
          "kind": "StringLiteral",
          "text": "TÃ¬m hiá»ƒu kiáº¿n thá»©c má»›i qua cÃ¡c quiz thÃº vá»‹",
          "index": 6168
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz khÃ´ng tÃªn",
          "index": 6234
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng nháº­p",
          "index": 6327
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng kÃ½",
          "index": 6360
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng xuáº¥t",
          "index": 6389
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u",
          "index": 6448
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ¡c nháº­n máº­t kháº©u",
          "index": 6487
        },
        {
          "kind": "StringLiteral",
          "text": "TÃªn hiá»ƒn thá»‹",
          "index": 6531
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p email cá»§a báº¡n",
          "index": 6575
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p máº­t kháº©u",
          "index": 6628
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p tÃªn hiá»ƒn thá»‹",
          "index": 6679
        },
        {
          "kind": "StringLiteral",
          "text": "ChÃ o má»«ng trá»Ÿ láº¡i!",
          "index": 6723
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o tÃ i khoáº£n má»›i",
          "index": 6773
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng nháº­p thÃ nh cÃ´ng!",
          "index": 6818
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng kÃ½ thÃ nh cÃ´ng!",
          "index": 6870
        },
        {
          "kind": "StringLiteral",
          "text": "QuÃªn máº­t kháº©u?",
          "index": 6919
        },
        {
          "kind": "StringLiteral",
          "text": "Ghi nhá»› Ä‘Äƒng nháº­p",
          "index": 6959
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng nháº­p vá»›i Google",
          "index": 7007
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng kÃ½ vá»›i Google",
          "index": 7061
        },
        {
          "kind": "StringLiteral",
          "text": "TÃ´i Ä‘á»“ng Ã½ vá»›i cÃ¡c Ä‘iá»u khoáº£n vÃ  Ä‘iá»u kiá»‡n",
          "index": 7107
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ cÃ³ tÃ i khoáº£n?",
          "index": 7183
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ tÃ i khoáº£n?",
          "index": 7230
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng nháº­p email",
          "index": 7303
        },
        {
          "kind": "StringLiteral",
          "text": "Email khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng",
          "index": 7352
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng nháº­p máº­t kháº©u",
          "index": 7412
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng nháº­p tÃªn hiá»ƒn thá»‹",
          "index": 7471
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u xÃ¡c nháº­n khÃ´ng khá»›p",
          "index": 7531
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±",
          "index": 7593
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng Ä‘á»“ng Ã½ vá»›i Ä‘iá»u khoáº£n sá»­ dá»¥ng",
          "index": 7656
        },
        {
          "kind": "StringLiteral",
          "text": "Email khÃ´ng tá»“n táº¡i",
          "index": 7754
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u khÃ´ng Ä‘Ãºng",
          "index": 7804
        },
        {
          "kind": "StringLiteral",
          "text": "Email hoáº·c máº­t kháº©u khÃ´ng Ä‘Ãºng",
          "index": 7858
        },
        {
          "kind": "StringLiteral",
          "text": "Email khÃ´ng há»£p lá»‡",
          "index": 7918
        },
        {
          "kind": "StringLiteral",
          "text": "TÃ i khoáº£n Ä‘Ã£ bá»‹ vÃ´ hiá»‡u hÃ³a",
          "index": 7966
        },
        {
          "kind": "StringLiteral",
          "text": "QuÃ¡ nhiá»u láº§n thá»­. Vui lÃ²ng thá»­ láº¡i sau",
          "index": 8026
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i Ä‘Äƒng nháº­p: {{message}}",
          "index": 8093
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi gá»­i mÃ£ xÃ¡c thá»±c: {{message}}",
          "index": 8149
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin Ä‘Äƒng kÃ½",
          "index": 8237
        },
        {
          "kind": "StringLiteral",
          "text": "Email nÃ y Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng",
          "index": 8304
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u quÃ¡ yáº¿u",
          "index": 8359
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i táº¡o tÃ i khoáº£n: {{message}}",
          "index": 8406
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i Ä‘Äƒng nháº­p Google: {{message}}",
          "index": 8470
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÄƒng nháº­p Google thÃ nh cÃ´ng!",
          "index": 8547
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ há»§y quÃ¡ trÃ¬nh Ä‘Äƒng kÃ½",
          "index": 8612
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ¡c nháº­n máº­t kháº©u",
          "index": 8678
        },
        {
          "kind": "StringLiteral",
          "text": "Ä‘iá»u khoáº£n sá»­ dá»¥ng",
          "index": 8725
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ tÃ i khoáº£n? ÄÄƒng kÃ½ ngay",
          "index": 8768
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ cÃ³ tÃ i khoáº£n? ÄÄƒng nháº­p",
          "index": 8825
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº§n Ä‘Äƒng nháº­p",
          "index": 8880
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ truy cáº­p trang Creator",
          "index": 8977
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cáº§n cÃ³ vai trÃ² Creator hoáº·c Admin Ä‘á»ƒ truy cáº­p trang nÃ y",
          "index": 9048
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ táº¡o quiz",
          "index": 9194
        },
        {
          "kind": "StringLiteral",
          "text": "ThÃ´ng tin cÆ¡ báº£n",
          "index": 9268
        },
        {
          "kind": "StringLiteral",
          "text": "Äiá»n thÃ´ng tin cÆ¡ báº£n vá» quiz cá»§a báº¡n",
          "index": 9310
        },
        {
          "kind": "StringLiteral",
          "text": "TiÃªu Ä‘á» Quiz",
          "index": 9375
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p tiÃªu Ä‘á» quiz...",
          "index": 9421
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ´ táº£",
          "index": 9475
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ´ táº£ chi tiáº¿t vá» quiz...",
          "index": 9520
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng cÃ³ quyá»n truy cáº­p",
          "index": 9636
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n server. Vui lÃ²ng thá»­ láº¡i sau.",
          "index": 9686
        },
        {
          "kind": "StringLiteral",
          "text": "Äang thá»­ káº¿t ná»‘i láº¡i...",
          "index": 9761
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Firestore",
          "index": 9868
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ” TÃ¬m kiáº¿m ngÆ°á»i chÆ¡i...",
          "index": 9983
        },
        {
          "kind": "StringLiteral",
          "text": "Thu gá»n",
          "index": 10032
        },
        {
          "kind": "StringLiteral",
          "text": "Xem thÃªm {{count}} ngÆ°á»i",
          "index": 10063
        },
        {
          "kind": "StringLiteral",
          "text": "Xin chÃ o, {{name}}!",
          "index": 10165
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»­ thÃ¡ch kiáº¿n thá»©c vá»›i cÃ¡c bÃ i quiz Ä‘a dáº¡ng",
          "index": 10211
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ¡c quiz báº¡n Ä‘Ã£ lÆ°u Ä‘á»ƒ lÃ m sau",
          "index": 10286
        },
        {
          "kind": "StringLiteral",
          "text": "Xem thá»© háº¡ng vÃ  thÃ nh tÃ­ch cá»§a báº¡n",
          "index": 10343
        },
        {
          "kind": "StringLiteral",
          "text": "Xem vÃ  chá»‰nh sá»­a thÃ´ng tin cÃ¡ nhÃ¢n",
          "index": 10404
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o cÃ¡c bÃ i quiz cá»§a riÃªng báº¡n",
          "index": 10467
        },
        {
          "kind": "StringLiteral",
          "text": "Quáº£n lÃ½ ngÆ°á»i dÃ¹ng vÃ  há»‡ thá»‘ng",
          "index": 10523
        },
        {
          "kind": "StringLiteral",
          "text": "Báº£ng Quáº£n Trá»‹",
          "index": 10621
        },
        {
          "kind": "StringLiteral",
          "text": "Xin chÃ o, {{name}}",
          "index": 10658
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ phÃª duyá»‡t quiz thÃ nh cÃ´ng!",
          "index": 10704
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi phÃª duyá»‡t quiz!",
          "index": 10766
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ tá»« chá»‘i quiz!",
          "index": 10827
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi tá»« chá»‘i quiz!",
          "index": 10877
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ táº£i dá»¯ liá»‡u thá»±c táº¿ tá»« Firebase!",
          "index": 10939
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi táº£i dá»¯ liá»‡u",
          "index": 11003
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi táº£i dá»¯ liá»‡u thá»±c táº¿",
          "index": 11055
        },
        {
          "kind": "StringLiteral",
          "text": "Chá»©c nÄƒng xuáº¥t dá»¯ liá»‡u Ä‘ang Ä‘Æ°á»£c phÃ¡t triá»ƒn",
          "index": 11119
        },
        {
          "kind": "StringLiteral",
          "text": "Tab hiá»‡n táº¡i: {{tab}}",
          "index": 11188
        },
        {
          "kind": "StringLiteral",
          "text": "Vá» Tá»•ng quan",
          "index": 11239
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n Ä‘ang xem pháº§n Thá»‘ng kÃª & Tá»•ng quan",
          "index": 11286
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¢y lÃ  trang chá»©a biá»ƒu Ä‘á»“ vÃ  thá»‘ng kÃª nÃ¢ng cao mÃ  báº¡n vá»«a thÃªm",
          "index": 11364
        },
        {
          "kind": "StringLiteral",
          "text": "Quáº£n lÃ½ ngÆ°á»i dÃ¹ng",
          "index": 11456
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»•ng quan",
          "index": 11518
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng",
          "index": 11550
        },
        {
          "kind": "StringLiteral",
          "text": "Danh má»¥c",
          "index": 11618
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»•ng quan & Thá»‘ng kÃª",
          "index": 11657
        },
        {
          "kind": "StringLiteral",
          "text": "Quáº£n lÃ½ NgÆ°á»i dÃ¹ng",
          "index": 11709
        },
        {
          "kind": "StringLiteral",
          "text": "Quáº£n lÃ½ Quiz",
          "index": 11759
        },
        {
          "kind": "StringLiteral",
          "text": "Quáº£n lÃ½ Danh má»¥c",
          "index": 11807
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»•ng tÃ i khoáº£n",
          "index": 11880
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz Ä‘Ã£ xuáº¥t báº£n",
          "index": 11928
        },
        {
          "kind": "StringLiteral",
          "text": "LÆ°á»£t lÃ m bÃ i",
          "index": 11980
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i sÃ¡ng táº¡o",
          "index": 12023
        },
        {
          "kind": "StringLiteral",
          "text": "TÄƒng trÆ°á»Ÿng ngÆ°á»i dÃ¹ng",
          "index": 12065
        }
      ]
    },
    {
      "file": "lib\\firebase\\config.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    console.error(\"Auth persistence error:\", error);\r\n    toast.error(\"CÃ³ lá»—i xáº£y ra khi thiáº¿t láº­p xÃ¡c thá»±c. Vui lÃ²ng táº£i láº¡i trang.\");\r\n  });\r\n\r\n// Initialize Firestore with modern configuration\r\nexport const db = getFirestore(app);\r\n\r\n// Use modern cache settings instead of deprecated enableIndexedDbPersistence\r\n// This is automatically handled by the new Firebase SDK\r\n\r\n// Configure timeout for Firestore operations\r\nexport const FIRESTORE_TIMEOUT = 15000; // 15 seconds\r\n\r\nexport const withTimeout = async (promise: Promise",
          "index": 1134
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi thiáº¿t láº­p xÃ¡c thá»±c. Vui lÃ²ng táº£i láº¡i trang.",
          "index": 1209
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n server. Vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i máº¡ng.",
          "index": 2101
        }
      ]
    },
    {
      "file": "features\\quiz\\store.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      const result = await quizService.getQuizzes(undefined, undefined);\r\n      return result.quizzes;\r\n    } catch (error: any) {\r\n      console.error('Failed to fetch quizzes:', error);\r\n      \r\n      if (error.type === 'CONNECTION_ERROR') {\r\n        return rejectWithValue('KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n server. Vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i máº¡ng cá»§a báº¡n.');\r\n      }\r\n      \r\n      if (error.type === 'TIMEOUT_ERROR') {\r\n        return rejectWithValue('Server khÃ´ng pháº£n há»“i. Vui lÃ²ng thá»­ láº¡i sau.');\r\n      }\r\n      \r\n      return rejectWithValue('ÄÃ£ cÃ³ lá»—i xáº£y ra khi táº£i danh sÃ¡ch quiz. Vui lÃ²ng thá»­ láº¡i.');\r\n    }\r\n  }\r\n);\r\n\r\nexport const fetchQuizById = createAsyncThunk(\r\n  'quiz/fetchQuizById',\r\n  async (quizId: string) => {\r\n    const quiz = await quizService.getQuizById(quizId);\r\n    return quiz;\r\n  }\r\n);\r\n\r\nexport const fetchUserQuizResults = createAsyncThunk(\r\n  'quiz/fetchUserQuizResults',\r\n  async (userId: string) => {\r\n    const results = await getUserQuizResults(userId);\r\n    return results;\r\n  }\r\n);\r\n\r\n// ThÃªm isTimeWarning vÃ  totalTime vÃ o QuizState\r\ninterface QuizState {\r\n  quizzes: Quiz[];\r\n  currentQuiz: Quiz | null;\r\n  userResults: QuizResult[];\r\n  loading: boolean;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  connectionError: boolean;\r\n  filters: QuizFilters;\r\n  currentQuestionIndex: number;\r\n  userAnswers: Record",
          "index": 369
        },
        {
          "kind": "JSXText",
          "text": ") => {\r\n      state.currentQuiz = action.payload;\r\n      if (action.payload) {\r\n        state.currentQuestionIndex = 0;\r\n        state.userAnswers = {};\r\n        state.totalTime = action.payload.duration * 60; // Tá»•ng thá»i gian (giÃ¢y)\r\n        state.timeLeft = state.totalTime;\r\n        state.quizStartTime = Date.now();\r\n        state.isTimeWarning = false;\r\n      } else {\r\n        state.currentQuestionIndex = 0;\r\n        state.userAnswers = {};\r\n        state.timeLeft = 0;\r\n        state.quizStartTime = null;\r\n        state.totalTime = 0;\r\n        state.isTimeWarning = false;\r\n      }\r\n    },\r\n\r\n    // Cáº­p nháº­t timeLeft dá»±a trÃªn thá»i gian thá»±c táº¿ Ä‘Ã£ trÃ´i qua\r\n    updateTimeLeft: (state) => {\r\n      if (state.quizStartTime && state.totalTime > 0) {\r\n        const elapsed = Math.floor((Date.now() - state.quizStartTime) / 1000);\r\n        const newTimeLeft = Math.max(state.totalTime - elapsed, 0);\r\n        state.timeLeft = newTimeLeft;\r\n        // Cáº£nh bÃ¡o khi cÃ²n",
          "index": 3450
        },
        {
          "kind": "JSXText",
          "text": "{\r\n      if (state.timeLeft > 0) {\r\n        state.timeLeft -= 1;\r\n        // Cáº£nh bÃ¡o khi cÃ²n",
          "index": 4626
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n server. Vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i máº¡ng cá»§a báº¡n.",
          "index": 661
        },
        {
          "kind": "StringLiteral",
          "text": "Server khÃ´ng pháº£n há»“i. Vui lÃ²ng thá»­ láº¡i sau.",
          "index": 829
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ cÃ³ lá»—i xáº£y ra khi táº£i danh sÃ¡ch quiz. Vui lÃ²ng thá»­ láº¡i.",
          "index": 925
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi táº£i quiz",
          "index": 6825
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi táº£i quiz",
          "index": 7567
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi táº£i káº¿t quáº£ quiz",
          "index": 8000
        }
      ]
    },
    {
      "file": "features\\auth\\store.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": ") => {\r\n      console.log('ðŸŽ¯ Auth loginSuccess reducer called with:', action.payload);\r\n      state.isLoading = false;\r\n      state.user = action.payload;\r\n      state.isAuthenticated = true;\r\n      state.error = null;\r\n      // Kiá»ƒm tra xem user Ä‘Ã£ chá»n role chÆ°a (Æ°u tiÃªn needsRoleSelection tá»« payload)\r\n      state.needsRoleSelection = action.payload.needsRoleSelection ?? !action.payload.role;\r\n      console.log('ðŸŽ¯ Auth state after loginSuccess:', {\r\n        isAuthenticated: state.isAuthenticated,\r\n        user: state.user,\r\n        needsRoleSelection: state.needsRoleSelection,\r\n        isLoading: state.isLoading\r\n      });\r\n    },\r\n    loginFailure: (state, action: PayloadAction",
          "index": 577
        },
        {
          "kind": "JSXText",
          "text": ") => {\r\n      if (state.user) {\r\n        state.user.role = action.payload;\r\n        // KhÃ´ng cáº§n chá»n role ná»¯a\r\n        state.needsRoleSelection = false;\r\n      }\r\n    },\r\n    setLoading: (state, action: PayloadAction",
          "index": 1727
        }
      ]
    },
    {
      "file": "features\\auth\\services.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    console.log('ðŸ”µ Attempting login for:', credentials.email);\r\n    \r\n    const userCredential = await signInWithEmailAndPassword(\r\n      auth,\r\n      credentials.email,\r\n      credentials.password\r\n    );\r\n    \r\n    console.log('ðŸŸ¢ Firebase login successful, UID:', userCredential.user.uid);\r\n    \r\n    // Kiá»ƒm tra náº¿u lÃ  tÃ i khoáº£n admin cá»‘ Ä‘á»‹nh\r\n    const isAdminAccount = credentials.email === 'admin123@gmail.com';\r\n    let userRole: 'user' | 'creator' | 'admin' | undefined;\r\n    \r\n    if (isAdminAccount) {\r\n      // Tá»± Ä‘á»™ng gÃ¡n role admin\r\n      userRole = 'admin';\r\n      console.log('ðŸ›¡ï¸ Admin account detected, setting role to admin');\r\n      \r\n      // LÆ°u role admin vÃ o Firestore\r\n      await setDoc(doc(db, 'users', userCredential.user.uid), {\r\n        role: 'admin',\r\n        isAdmin: true,\r\n        email: userCredential.user.email,\r\n        displayName: userCredential.user.displayName || 'System Admin',\r\n        updatedAt: new Date()\r\n      }, { merge: true });\r\n      \r\n      // LÆ°u vÃ o localStorage\r\n      localStorage.setItem(`user_role_${userCredential.user.uid}`, 'admin');\r\n      localStorage.setItem('isAdmin', 'true');\r\n      console.log('ðŸ’¾ Admin role saved');\r\n    } else {\r\n      // Láº¥y role tá»« Firestore cho user thÆ°á»ng\r\n      const userDoc = await getDoc(doc(db, 'users', userCredential.user.uid));\r\n      const userData = userDoc.data();\r\n      userRole = userData?.role;\r\n      console.log('ðŸ” Role from Firestore:', userRole);\r\n    }\r\n    \r\n    const authUser = {\r\n      uid: userCredential.user.uid,\r\n      email: userCredential.user.email,\r\n      displayName: userCredential.user.displayName,\r\n      photoURL: userCredential.user.photoURL,\r\n      emailVerified: userCredential.user.emailVerified,\r\n      role: userRole,\r\n    };\r\n    \r\n    console.log('ðŸš€ Returning auth user:', authUser);\r\n    return authUser;\r\n    \r\n  } catch (error) {\r\n    const authError = error as FirebaseAuthError;\r\n    console.error('âŒ Login error:', authError);\r\n    throw new Error(getAuthErrorMessage(authError.code));\r\n  }\r\n};\r\n\r\n/**\r\n * Register new user\r\n */\r\nexport const register = async (credentials: RegisterCredentials): Promise",
          "index": 622
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    const userCredential = await createUserWithEmailAndPassword(\r\n      auth,\r\n      credentials.email,\r\n      credentials.password\r\n    );\r\n\r\n    // Cáº­p nháº­t tÃªn hiá»ƒn thá»‹\r\n    await updateProfile(userCredential.user, {\r\n      displayName: credentials.displayName,\r\n    });\r\n\r\n    // Táº¡o tÃ i khoáº£n ngÆ°á»i dÃ¹ng trong Firestore vá»›i vai trÃ² máº·c Ä‘á»‹nh lÃ  'user'\r\n    const userData: User = {\r\n      id: userCredential.user.uid,\r\n      email: credentials.email,\r\n      displayName: credentials.displayName,\r\n      role: 'user', // LuÃ´n lÃ  'user' khi Ä‘Äƒng kÃ½\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n      preferences: {\r\n        theme: 'light',\r\n        language: 'vi',\r\n        notifications: {\r\n          email: true,\r\n          push: true,\r\n          quizReminders: true,\r\n          newQuizzes: true,\r\n        },\r\n      },\r\n      stats: {\r\n        totalQuizzesTaken: 0,\r\n        totalQuizzesCreated: 0,\r\n        averageScore: 0,\r\n        totalTimeSpent: 0,\r\n        favoriteCategories: [],\r\n        streak: 0,\r\n        achievements: [],\r\n      },\r\n    };\r\n\r\n    await setDoc(doc(db, 'users', userCredential.user.uid), userData);\r\n\r\n    // Gá»­i email xÃ¡c thá»±c\r\n    await sendEmailVerification(userCredential.user);\r\n\r\n    return {\r\n      uid: userCredential.user.uid,\r\n      email: userCredential.user.email,\r\n      displayName: userCredential.user.displayName,\r\n      photoURL: userCredential.user.photoURL,\r\n      emailVerified: userCredential.user.emailVerified,\r\n      role: 'user', // LuÃ´n tráº£ vá» 'user'\r\n    };\r\n  } catch (error) {\r\n    const authError = error as FirebaseAuthError;\r\n    // Tráº£ vá» lá»—i tiáº¿ng Viá»‡t\r\n    throw new Error(getAuthErrorMessage(authError.code));\r\n  }\r\n};\r\n\r\n/**\r\n * Sign out user\r\n */\r\nexport const signOutUser = async (): Promise",
          "index": 2800
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  if (!auth.currentUser) {\r\n    throw new Error('NgÆ°á»i dÃ¹ng chÆ°a Ä‘Äƒng nháº­p');\r\n  }\r\n\r\n  try {\r\n    await updatePassword(auth.currentUser, newPassword);\r\n  } catch (error) {\r\n    const authError = error as FirebaseAuthError;\r\n    throw new Error(getAuthErrorMessage(authError.code));\r\n  }\r\n};\r\n\r\n/**\r\n * Update user profile\r\n */\r\nexport const updateUserProfile = async (updates: {\r\n  displayName?: string;\r\n  photoURL?: string;\r\n}): Promise",
          "index": 5200
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  if (!auth.currentUser) {\r\n    throw new Error('NgÆ°á»i dÃ¹ng chÆ°a Ä‘Äƒng nháº­p');\r\n  }\r\n\r\n  try {\r\n    await updateProfile(auth.currentUser, updates);\r\n    \r\n    // Update user document in Firestore\r\n    const userDoc = doc(db, 'users', auth.currentUser.uid);\r\n    await setDoc(userDoc, {\r\n      displayName: updates.displayName,\r\n      updatedAt: new Date(),\r\n    }, { merge: true });\r\n  } catch (error) {\r\n    throw new Error('KhÃ´ng thá»ƒ cáº­p nháº­t profile');\r\n  }\r\n};\r\n\r\n/**\r\n * Get current user data from Firestore\r\n */\r\nexport const getCurrentUserData = async (): Promise",
          "index": 5652
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  if (!auth.currentUser) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const userDoc = await getDoc(doc(db, 'users', auth.currentUser.uid));\r\n    if (userDoc.exists()) {\r\n      return userDoc.data() as User;\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Error fetching user data:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * Convert Firebase auth error codes to Vietnamese messages\r\n */\r\nconst getAuthErrorMessage = (errorCode: string): string => {\r\n  switch (errorCode) {\r\n    case 'auth/user-not-found':\r\n      return 'KhÃ´ng tÃ¬m tháº¥y tÃ i khoáº£n vá»›i email nÃ y';\r\n    case 'auth/wrong-password':\r\n      return 'Máº­t kháº©u khÃ´ng chÃ­nh xÃ¡c';\r\n    case 'auth/email-already-in-use':\r\n      return 'Email nÃ y Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng';\r\n    case 'auth/weak-password':\r\n      return 'Máº­t kháº©u quÃ¡ yáº¿u';\r\n    case 'auth/invalid-email':\r\n      return 'Email khÃ´ng há»£p lá»‡';\r\n    case 'auth/user-disabled':\r\n      return 'TÃ i khoáº£n Ä‘Ã£ bá»‹ vÃ´ hiá»‡u hÃ³a';\r\n    case 'auth/too-many-requests':\r\n      return 'QuÃ¡ nhiá»u yÃªu cáº§u. Vui lÃ²ng thá»­ láº¡i sau';\r\n    case 'auth/network-request-failed':\r\n      return 'Lá»—i káº¿t ná»‘i máº¡ng';\r\n    default:\r\n      return 'ÄÃ£ xáº£y ra lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh';\r\n  }\r\n};\r\n\r\n/**\r\n * Check if user is authenticated\r\n */\r\nexport const isAuthenticated = (): boolean => {\r\n  return !!auth.currentUser;\r\n};\r\n\r\n/**\r\n * Get current Firebase user\r\n */\r\nexport const getCurrentUser = (): FirebaseUser | null => {\r\n  return auth.currentUser;\r\n};\r\n\r\n/**\r\n * Sign up new user (alias for register)\r\n */\r\nexport const signUp = register;\r\n\r\n/**\r\n * Update user quiz stats after completing a quiz\r\n */\r\nexport const updateUserStats = async (\r\n  userId: string, \r\n  quizData: {\r\n    score: number;\r\n    totalQuestions: number;\r\n    correctAnswers: number;\r\n    timeSpent: number;\r\n    difficulty: string;\r\n  }\r\n): Promise",
          "index": 6241
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng chÆ°a Ä‘Äƒng nháº­p",
          "index": 5256
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng chÆ°a Ä‘Äƒng nháº­p",
          "index": 5708
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ cáº­p nháº­t profile",
          "index": 6084
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y tÃ i khoáº£n vá»›i email nÃ y",
          "index": 6787
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u khÃ´ng chÃ­nh xÃ¡c",
          "index": 6876
        },
        {
          "kind": "StringLiteral",
          "text": "Email nÃ y Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng",
          "index": 6957
        },
        {
          "kind": "StringLiteral",
          "text": "Máº­t kháº©u quÃ¡ yáº¿u",
          "index": 7032
        },
        {
          "kind": "StringLiteral",
          "text": "Email khÃ´ng há»£p lá»‡",
          "index": 7098
        },
        {
          "kind": "StringLiteral",
          "text": "TÃ i khoáº£n Ä‘Ã£ bá»‹ vÃ´ hiá»‡u hÃ³a",
          "index": 7166
        },
        {
          "kind": "StringLiteral",
          "text": "QuÃ¡ nhiá»u yÃªu cáº§u. Vui lÃ²ng thá»­ láº¡i sau",
          "index": 7247
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i káº¿t ná»‘i máº¡ng",
          "index": 7345
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ xáº£y ra lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh",
          "index": 7393
        }
      ]
    },
    {
      "file": "shared\\components\\ui\\RichTextEditor.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({\r\n  value,\r\n  onChange,\r\n  placeholder = 'Nháº­p ná»™i dung...',\r\n  readOnly = false,\r\n  height = 300,\r\n  className = ''\r\n}) => {\r\n  // Memoize the change handler to prevent unnecessary re-renders\r\n  const handleChange = useCallback((content: string) => {\r\n    onChange(content);\r\n  }, [onChange]);\r\n\r\n  // Quill modules configuration\r\n  const modules = useMemo(() => ({\r\n    toolbar: !readOnly ? {\r\n      container: [\r\n        [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n        [{ 'font': [] }],\r\n        [{ 'size': ['small', false, 'large', 'huge'] }],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        [{ 'color': [] }, { 'background': [] }],\r\n        [{ 'script': 'sub' }, { 'script': 'super' }],\r\n        [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n        [{ 'indent': '-1' }, { 'indent': '+1' }],\r\n        [{ 'direction': 'rtl' }],\r\n        [{ 'align': [] }],\r\n        ['link', 'image', 'video'],\r\n        ['blockquote', 'code-block'],\r\n        ['clean']\r\n      ]\r\n    } : false,\r\n    clipboard: {\r\n      matchVisual: false,\r\n    }\r\n  }), [readOnly]);\r\n\r\n  // Quill formats\r\n  const formats = [\r\n    'header', 'font', 'size',\r\n    'bold', 'italic', 'underline', 'strike',\r\n    'color', 'background',\r\n    'script',\r\n    'list', 'bullet', 'indent',\r\n    'direction', 'align',\r\n    'link', 'image', 'video',\r\n    'blockquote', 'code-block'\r\n  ];\r\n\r\n  return (",
          "index": 373
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p ná»™i dung...",
          "index": 420
        }
      ]
    },
    {
      "file": "shared\\components\\ui\\Modal.tsx",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "ÄÃ³ng modal",
          "index": 2185
        }
      ]
    },
    {
      "file": "shared\\components\\layout\\Loading.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ");\r\n  }\r\n  // Skeleton cho loading danh sÃ¡ch\r\n  return (",
          "index": 722
        }
      ]
    },
    {
      "file": "features\\quiz\\services\\reviewService.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      console.log('Creating review with data:', { reviewData, userId, userName, userAvatar });\r\n      \r\n      const reviewDoc = {\r\n        ...reviewData,\r\n        userId,\r\n        userName,\r\n        userAvatar: userAvatar || null,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        helpful: [],\r\n        reported: []\r\n      };\r\n\r\n      console.log('Review document to be saved:', reviewDoc);\r\n      \r\n      const docRef = await addDoc(collection(db, REVIEWS_COLLECTION), reviewDoc);\r\n      console.log('Review saved successfully with ID:', docRef.id);\r\n      \r\n      // Update quiz with new review stats\r\n      try {\r\n        await this.updateQuizReviewStats(reviewData.quizId);\r\n        console.log('Quiz stats updated successfully');\r\n      } catch (statsError) {\r\n        console.warn('Error updating quiz stats (review still saved):', statsError);\r\n      }\r\n      \r\n      return docRef.id;\r\n    } catch (error) {\r\n      console.error('Error creating review:', error);\r\n      console.error('Error details:', JSON.stringify(error, null, 2));\r\n      throw new Error(`KhÃ´ng thá»ƒ táº¡o Ä‘Ã¡nh giÃ¡: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  },\r\n\r\n  // Simple get reviews without ordering (to avoid index requirements)\r\n  async getQuizReviewsSimple(quizId: string): Promise",
          "index": 572
        }
      ]
    },
    {
      "file": "features\\quiz\\services\\firebaseAIService.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    const { \r\n      content, \r\n      customPrompt, \r\n      numQuestions = 5, \r\n      difficulty = 'mixed', \r\n      language = 'vi' \r\n    } = options;\r\n\r\n    // Kiá»ƒm tra xÃ¡c thá»±c\r\n    const auth = getAuth();\r\n    if (!auth.currentUser) {\r\n      throw new Error('Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng AI');\r\n    }\r\n\r\n    try {\r\n      // Táº¡o system prompt\r\n      const systemPrompt = customPrompt || this.getDefaultPrompt(numQuestions, difficulty, language);\r\n      \r\n      // Gá»i Firebase Function\r\n      const generateQuestions = httpsCallable(this.functions, 'generateQuestions');\r\n      \r\n      const result = await generateQuestions({\r\n        prompt: systemPrompt,\r\n        content: content,\r\n        config: {\r\n          model: config.model || 'gemini-pro',\r\n          temperature: config.temperature || 0.7,\r\n          maxTokens: config.maxTokens || 2000\r\n        }\r\n      });\r\n\r\n      const data = result.data as any;\r\n      \r\n      if (!data.success) {\r\n        throw new Error(data.error || 'AI generation failed');\r\n      }\r\n\r\n      return this.parseQuestionsFromResponse(data.questions);\r\n    } catch (error) {\r\n      console.error('Firebase AI Service Error:', error);\r\n      throw new Error(`KhÃ´ng thá»ƒ táº¡o cÃ¢u há»i: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fallback method using direct Vertex AI REST API\r\n   */\r\n  static async generateQuestionsDirectAPI(\r\n    config: FirebaseAIConfig = {},\r\n    options: QuestionGenerationOptions\r\n  ): Promise",
          "index": 923
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    const { \r\n      content, \r\n      customPrompt, \r\n      numQuestions = 5, \r\n      difficulty = 'mixed', \r\n      language = 'vi' \r\n    } = options;\r\n\r\n    try {\r\n      // Sá»­ dá»¥ng endpoint cá»§a Firebase project\r\n      const projectId = 'quiz-app-85db6';\r\n      const apiEndpoint = `https://us-central1-aiplatform.googleapis.com/v1/projects/${projectId}/locations/us-central1/publishers/google/models/gemini-pro:generateContent`;\r\n      \r\n      const systemPrompt = customPrompt || this.getDefaultPrompt(numQuestions, difficulty, language);\r\n      \r\n      // Get auth token from Firebase\r\n      const auth = getAuth();\r\n      const idToken = await auth.currentUser?.getIdToken();\r\n      \r\n      if (!idToken) {\r\n        throw new Error('KhÃ´ng thá»ƒ xÃ¡c thá»±c ngÆ°á»i dÃ¹ng');\r\n      }\r\n\r\n      const response = await fetch(apiEndpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${idToken}`\r\n        },\r\n        body: JSON.stringify({\r\n          contents: [{\r\n            parts: [{\r\n              text: `${systemPrompt}\\n\\nNá»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:\\n\\n${content}`\r\n            }]\r\n          }],\r\n          generationConfig: {\r\n            temperature: config.temperature || 0.7,\r\n            maxOutputTokens: config.maxTokens || 2000,\r\n            topP: 0.8,\r\n            topK: 40\r\n          }\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Vertex AI API Error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const generatedText = data.candidates?.[0]?.content?.parts?.[0]?.text;\r\n\r\n      if (!generatedText) {\r\n        throw new Error('KhÃ´ng nháº­n Ä‘Æ°á»£c pháº£n há»“i tá»« AI');\r\n      }\r\n\r\n      return this.parseQuestionsFromText(generatedText);\r\n    } catch (error) {\r\n      console.error('Direct API Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Táº¡o prompt máº·c Ä‘á»‹nh cho viá»‡c generate cÃ¢u há»i\r\n   */\r\n  private static getDefaultPrompt(numQuestions: number, difficulty: string, language: string): string {\r\n    const lang = language === 'vi' ? 'tiáº¿ng Viá»‡t' : 'English';\r\n    \r\n    return `\r\nBáº¡n lÃ  má»™t chuyÃªn gia táº¡o cÃ¢u há»i tráº¯c nghiá»‡m cháº¥t lÆ°á»£ng cao. HÃ£y táº¡o ${numQuestions} cÃ¢u há»i tráº¯c nghiá»‡m báº±ng ${lang} dá»±a trÃªn ná»™i dung Ä‘Æ°á»£c cung cáº¥p.\r\n\r\nYÃªu cáº§u:\r\n- Má»—i cÃ¢u há»i cÃ³ 4 Ä‘Ã¡p Ã¡n (A, B, C, D)\r\n- Chá»‰ cÃ³ 1 Ä‘Ã¡p Ã¡n Ä‘Ãºng\r\n- CÃ¢u há»i pháº£i liÃªn quan trá»±c tiáº¿p Ä‘áº¿n ná»™i dung\r\n- Äá»™ khÃ³: ${difficulty}\r\n- Bao gá»“m giáº£i thÃ­ch cho Ä‘Ã¡p Ã¡n Ä‘Ãºng\r\n- Äáº£m báº£o cÃ¢u há»i cÃ³ tÃ­nh phÃ¢n biá»‡t cao\r\n\r\nTráº£ vá» Ä‘á»‹nh dáº¡ng JSON chÃ­nh xÃ¡c nhÆ° sau:\r\n{\r\n  \"questions\": [\r\n    {\r\n      \"text\": \"CÃ¢u há»i á»Ÿ Ä‘Ã¢y\",\r\n      \"answers\": [\r\n        {\"text\": \"ÄÃ¡p Ã¡n A\", \"isCorrect\": true},\r\n        {\"text\": \"ÄÃ¡p Ã¡n B\", \"isCorrect\": false},\r\n        {\"text\": \"ÄÃ¡p Ã¡n C\", \"isCorrect\": false},\r\n        {\"text\": \"ÄÃ¡p Ã¡n D\", \"isCorrect\": false}\r\n      ],\r\n      \"explanation\": \"Giáº£i thÃ­ch táº¡i sao Ä‘Ã¡p Ã¡n A Ä‘Ãºng\",\r\n      \"points\": 10,\r\n      \"difficulty\": \"${difficulty}\"\r\n    }\r\n  ]\r\n}\r\n\r\nQUAN TRá»ŒNG: Chá»‰ tráº£ vá» JSON thuáº§n tÃºy, khÃ´ng thÃªm text hoáº·c markdown nÃ o khÃ¡c.\r\n`;\r\n  }\r\n\r\n  /**\r\n   * Parse questions tá»« Firebase Function response\r\n   */\r\n  private static parseQuestionsFromResponse(questionsData: any[]): Question[] {\r\n    try {\r\n      const questions: Question[] = [];\r\n      \r\n      for (const questionData of questionsData) {\r\n        const question: Question = {\r\n          id: `q_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n          text: questionData.text || '',\r\n          type: 'multiple',\r\n          answers: questionData.answers?.map((answer: any, index: number) => ({\r\n            id: `a_${index + 1}`,\r\n            text: answer.text || '',\r\n            isCorrect: answer.isCorrect === true\r\n          })) || [],\r\n          explanation: questionData.explanation || '',\r\n          points: questionData.points || 10,\r\n          difficulty: questionData.difficulty || 'medium'\r\n        };\r\n\r\n        // Validate question\r\n        if (question.text && question.answers.length >= 2) {\r\n          questions.push(question);\r\n        }\r\n      }\r\n\r\n      return questions;\r\n    } catch (error) {\r\n      console.error('Error parsing questions from response:', error);\r\n      throw new Error('KhÃ´ng thá»ƒ phÃ¢n tÃ­ch cÃ¢u há»i tá»« AI');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse questions tá»« raw text response\r\n   */\r\n  private static parseQuestionsFromText(text: string): Question[] {\r\n    try {\r\n      // Remove markdown code blocks if present\r\n      const cleanText = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\r\n      \r\n      // Try to parse JSON\r\n      const parsed = JSON.parse(cleanText);\r\n      const questionsData = parsed.questions || [];\r\n\r\n      return this.parseQuestionsFromResponse(questionsData);\r\n    } catch (error) {\r\n      console.error('Error parsing questions from text:', error);\r\n      throw new Error('KhÃ´ng thá»ƒ phÃ¢n tÃ­ch cÃ¢u há»i tá»« pháº£n há»“i AI');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Kiá»ƒm tra availability cá»§a Firebase AI\r\n   */\r\n  static async checkAvailability(): Promise",
          "index": 2446
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng AI",
          "index": 1188
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ xÃ¡c thá»±c ngÆ°á»i dÃ¹ng",
          "index": 3186
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng nháº­n Ä‘Æ°á»£c pháº£n há»“i tá»« AI",
          "index": 4156
        },
        {
          "kind": "StringLiteral",
          "text": "tiáº¿ng Viá»‡t",
          "index": 4576
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ¢u há»i á»Ÿ Ä‘Ã¢y",
          "index": 5091
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n A",
          "index": 5146
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n B",
          "index": 5196
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n C",
          "index": 5247
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n D",
          "index": 5298
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i thÃ­ch táº¡i sao Ä‘Ã¡p Ã¡n A Ä‘Ãºng",
          "index": 5362
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ phÃ¢n tÃ­ch cÃ¢u há»i tá»« AI",
          "index": 6702
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ phÃ¢n tÃ­ch cÃ¢u há»i tá»« pháº£n há»“i AI",
          "index": 7339
        }
      ]
    },
    {
      "file": "features\\quiz\\services\\fileProcessingService.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      const worker = await this.initializeWorker();\r\n      \r\n      // Äá»c file thÃ nh blob URL Ä‘á»ƒ OCR\r\n      const imageUrl = URL.createObjectURL(file);\r\n      \r\n      const { data: { text, confidence } } = await worker.recognize(imageUrl);\r\n      \r\n      // Clean up\r\n      URL.revokeObjectURL(imageUrl);\r\n      \r\n      return {\r\n        extractedText: text,\r\n        success: true,\r\n        metadata: { confidence, fileSize: file.size }\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        success: false,\r\n        error: `OCR Error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n\r\n  static async terminateWorker() {\r\n    if (this.worker) {\r\n      await this.worker.terminate();\r\n      this.worker = null;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * PDF Service - TrÃ­ch xuáº¥t text tá»« PDF\r\n */\r\nexport class PDFService {\r\n  static async extractTextFromPDF(file: File): Promise",
          "index": 830
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      // Äá»c file PDF\r\n      const arrayBuffer = await file.arrayBuffer();\r\n      \r\n      // Load PDF document\r\n      const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\r\n      \r\n      let fullText = '';\r\n      const totalPages = pdf.numPages;\r\n      \r\n      // TrÃ­ch xuáº¥t text tá»« táº¥t cáº£ cÃ¡c trang\r\n      for (let i = 1; i",
          "index": 1795
        },
        {
          "kind": "JSXText",
          "text": "item.str)\r\n          .join(' ');\r\n        \r\n        fullText += `\\n--- Trang ${i} ---\\n${pageText}\\n`;\r\n      }\r\n      \r\n      return {\r\n        extractedText: fullText.trim(),\r\n        success: true,\r\n        metadata: { \r\n          totalPages, \r\n          fileSize: file.size,\r\n          fileName: file.name \r\n        }\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        success: false,\r\n        error: `PDF Error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Word Document Service - TrÃ­ch xuáº¥t text tá»« .docx\r\n */\r\nexport class WordService {\r\n  static async extractTextFromWord(file: File): Promise",
          "index": 2360
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      const arrayBuffer = await file.arrayBuffer();\r\n      \r\n      // Sá»­ dá»¥ng mammoth Ä‘á»ƒ Ä‘á»c .docx\r\n      const result = await mammoth.extractRawText({ arrayBuffer });\r\n      \r\n      return {\r\n        extractedText: result.value,\r\n        success: true,\r\n        metadata: {\r\n          fileSize: file.size,\r\n          fileName: file.name,\r\n          messages: result.messages // Warnings tá»« mammoth\r\n        }\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        success: false,\r\n        error: `Word Error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Excel/Spreadsheet Service - TrÃ­ch xuáº¥t data tá»« Excel/CSV\r\n */\r\nexport class SpreadsheetService {\r\n  static async extractTextFromSpreadsheet(file: File): Promise",
          "index": 3070
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      const arrayBuffer = await file.arrayBuffer();\r\n      const workbook = XLSX.read(arrayBuffer, { type: 'array' });\r\n      \r\n      let fullText = '';\r\n      \r\n      // Äá»c táº¥t cáº£ worksheets\r\n      workbook.SheetNames.forEach(sheetName => {\r\n        const worksheet = workbook.Sheets[sheetName];\r\n        const csvText = XLSX.utils.sheet_to_csv(worksheet);\r\n        fullText += `\\n=== Sheet: ${sheetName} ===\\n${csvText}\\n`;\r\n      });\r\n      \r\n      return {\r\n        extractedText: fullText.trim(),\r\n        success: true,\r\n        metadata: {\r\n          fileSize: file.size,\r\n          fileName: file.name,\r\n          sheetCount: workbook.SheetNames.length,\r\n          sheetNames: workbook.SheetNames\r\n        }\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        success: false,\r\n        error: `Spreadsheet Error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Text File Service - Äá»c plain text files\r\n */\r\nexport class TextService {\r\n  static async extractTextFromTextFile(file: File): Promise",
          "index": 3905
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    try {\r\n      const text = await file.text();\r\n      \r\n      return {\r\n        extractedText: text,\r\n        success: true,\r\n        metadata: {\r\n          fileSize: file.size,\r\n          fileName: file.name\r\n        }\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        success: false,\r\n        error: `Text Error: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Main File Processor - Router Ä‘á»ƒ xá»­ lÃ½ cÃ¡c loáº¡i file khÃ¡c nhau\r\n */\r\nexport class FileProcessor {\r\n  static getSupportedTypes() {\r\n    return {\r\n      images: ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp'],\r\n      documents: ['.pdf', '.doc', '.docx', '.txt', '.rtf'],\r\n      spreadsheets: ['.csv', '.xlsx', '.xls']\r\n    };\r\n  }\r\n\r\n  static isFileSupported(fileName: string): boolean {\r\n    const lowercaseName = fileName.toLowerCase();\r\n    const supportedTypes = this.getSupportedTypes();\r\n    \r\n    return Object.values(supportedTypes)\r\n      .flat()\r\n      .some(ext => lowercaseName.endsWith(ext));\r\n  }\r\n\r\n  static async processFile(file: File): Promise",
          "index": 5028
        },
        {
          "kind": "StringLiteral",
          "text": "File quÃ¡ lá»›n. Vui lÃ²ng chá»n file nhá» hÆ¡n 50MB.",
          "index": 6462
        },
        {
          "kind": "StringLiteral",
          "text": "Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£.",
          "index": 7393
        }
      ]
    },
    {
      "file": "features\\quiz\\services\\aiService.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    const { content, customPrompt, numQuestions = 5, difficulty = 'mixed', language = 'vi' } = options;\r\n    const systemPrompt = customPrompt || this.getDefaultPrompt(numQuestions, difficulty, language);\r\n    // Use hardcoded API key if not provided\r\n    const apiKey = config.apiKey || DEFAULT_OPENAI_API_KEY;\r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${apiKey}`\r\n        },\r\n        body: JSON.stringify({\r\n          model: config.model || 'gpt-3.5-turbo',\r\n          messages: [\r\n            { role: 'system', content: systemPrompt },\r\n            { role: 'user', content: `Ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:\\n\\n${content}` }\r\n          ],\r\n          temperature: 0.7,\r\n          max_tokens: 2000\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`OpenAI API Error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const generatedText = data.choices[0]?.message?.content;\r\n\r\n      return this.parseQuestionsFromText(generatedText);\r\n    } catch (error) {\r\n      console.error('OpenAI Service Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  public static getDefaultPrompt(numQuestions: number, difficulty: string, language: string): string {\r\n    const lang = language === 'vi' ? 'tiáº¿ng Viá»‡t' : 'English';\r\n    \r\n    return `\r\nBáº¡n lÃ  má»™t chuyÃªn gia táº¡o cÃ¢u há»i tráº¯c nghiá»‡m cháº¥t lÆ°á»£ng cao. HÃ£y táº¡o ${numQuestions} cÃ¢u há»i tráº¯c nghiá»‡m báº±ng ${lang} dá»±a trÃªn ná»™i dung Ä‘Æ°á»£c cung cáº¥p.\r\n\r\nYÃªu cáº§u:\r\n- Má»—i cÃ¢u há»i cÃ³ 4 Ä‘Ã¡p Ã¡n (A, B, C, D)\r\n- Chá»‰ cÃ³ 1 Ä‘Ã¡p Ã¡n Ä‘Ãºng\r\n- CÃ¢u há»i pháº£i liÃªn quan trá»±c tiáº¿p Ä‘áº¿n ná»™i dung\r\n- Äá»™ khÃ³: ${difficulty}\r\n- Bao gá»“m giáº£i thÃ­ch cho Ä‘Ã¡p Ã¡n Ä‘Ãºng\r\n- Äáº£m báº£o cÃ¢u há»i cÃ³ tÃ­nh phÃ¢n biá»‡t cao\r\n\r\nTráº£ vá» Ä‘á»‹nh dáº¡ng JSON chÃ­nh xÃ¡c nhÆ° sau:\r\n{\r\n  \"questions\": [\r\n    {\r\n      \"text\": \"CÃ¢u há»i á»Ÿ Ä‘Ã¢y\",\r\n      \"answers\": [\r\n        {\"text\": \"ÄÃ¡p Ã¡n A\", \"isCorrect\": true},\r\n        {\"text\": \"ÄÃ¡p Ã¡n B\", \"isCorrect\": false},\r\n        {\"text\": \"ÄÃ¡p Ã¡n C\", \"isCorrect\": false},\r\n        {\"text\": \"ÄÃ¡p Ã¡n D\", \"isCorrect\": false}\r\n      ],\r\n      \"explanation\": \"Giáº£i thÃ­ch táº¡i sao Ä‘Ã¡p Ã¡n A Ä‘Ãºng\",\r\n      \"points\": 10,\r\n      \"difficulty\": \"medium\"\r\n    }\r\n  ]\r\n}\r\n\r\nCHá»ˆ tráº£ vá» JSON, khÃ´ng cÃ³ text khÃ¡c.`;\r\n  }\r\n\r\n  static parseQuestionsFromText(text: string): Question[] {\r\n    try {\r\n      // Clean up the response text\r\n      const cleanText = text.replace(/```json|```/g, '').trim();\r\n      const parsed = JSON.parse(cleanText);\r\n      \r\n      if (!parsed.questions || !Array.isArray(parsed.questions)) {\r\n        throw new Error('Invalid JSON structure');\r\n      }\r\n\r\n      return parsed.questions.map((q: any, index: number) => ({\r\n        id: `ai-${Date.now()}-${index}`,\r\n        text: q.text,\r\n        type: 'multiple' as const,\r\n        answers: q.answers.map((a: any, idx: number) => ({\r\n          id: String.fromCharCode(97 + idx), // a, b, c, d\r\n          text: a.text,\r\n          isCorrect: a.isCorrect\r\n        })),\r\n        explanation: q.explanation,\r\n        points: q.points || 10\r\n      }));\r\n    } catch (error) {\r\n      console.error('Failed to parse AI response:', error);\r\n      console.log('Raw response:', text);\r\n      \r\n      // Fallback: return empty array with error info\r\n      throw new Error('KhÃ´ng thá»ƒ phÃ¢n tÃ­ch cÃ¢u tráº£ lá»i tá»« AI. Vui lÃ²ng thá»­ láº¡i.');\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Claude Service (Anthropic)\r\n */\r\nexport class ClaudeService {\r\n  static async generateQuestions(\r\n    config: AIConfig,\r\n    options: QuestionGenerationOptions\r\n  ): Promise",
          "index": 1021
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    const { content, customPrompt, numQuestions = 5, difficulty = 'mixed', language = 'vi' } = options;\r\n\r\n    const systemPrompt = customPrompt || OpenAIService.getDefaultPrompt(numQuestions, difficulty, language);\r\n\r\n    try {\r\n      const response = await fetch('https://api.anthropic.com/v1/messages', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-api-key': config.apiKey,\r\n          'anthropic-version': '2023-06-01'\r\n        },\r\n        body: JSON.stringify({\r\n          model: config.model || 'claude-3-sonnet-20240229',\r\n          max_tokens: 2000,\r\n          system: systemPrompt,\r\n          messages: [\r\n            { role: 'user', content: `Ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:\\n\\n${content}` }\r\n          ]\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Claude API Error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const generatedText = data.content[0]?.text;\r\n\r\n      return OpenAIService.parseQuestionsFromText(generatedText);\r\n    } catch (error) {\r\n      console.error('Claude Service Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static getDefaultPrompt(numQuestions: number, difficulty: string, language: string): string {\r\n    // Same as OpenAI for consistency\r\n    return OpenAIService.getDefaultPrompt(numQuestions, difficulty, language);\r\n  }\r\n}\r\n\r\n/**\r\n * Gemini Service (Google)\r\n */\r\nexport class GeminiService {\r\n  static async generateQuestions(\r\n    config: AIConfig,\r\n    options: QuestionGenerationOptions\r\n  ): Promise",
          "index": 4690
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    const { content, customPrompt, numQuestions = 5, difficulty = 'mixed', language = 'vi' } = options;\r\n\r\n    const systemPrompt = customPrompt || OpenAIService.getDefaultPrompt(numQuestions, difficulty, language);\r\n\r\n    try {\r\n      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${config.model || 'gemini-pro'}:generateContent?key=${config.apiKey}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          contents: [{\r\n            parts: [{\r\n              text: `${systemPrompt}\\n\\nNá»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:\\n\\n${content}`\r\n            }]\r\n          }],\r\n          generationConfig: {\r\n            temperature: 0.7,\r\n            maxOutputTokens: 2000\r\n          }\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Gemini API Error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const generatedText = data.candidates[0]?.content?.parts[0]?.text;\r\n\r\n      return OpenAIService.parseQuestionsFromText(generatedText);\r\n    } catch (error) {\r\n      console.error('Gemini Service Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static getDefaultPrompt(numQuestions: number, difficulty: string, language: string): string {\r\n    return OpenAIService.getDefaultPrompt(numQuestions, difficulty, language);\r\n  }\r\n}\r\n\r\n/**\r\n * Local AI Service (for local models like Ollama)\r\n */\r\nexport class LocalAIService {\r\n  static async generateQuestions(\r\n    config: AIConfig,\r\n    options: QuestionGenerationOptions\r\n  ): Promise",
          "index": 6307
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    const { content, customPrompt, numQuestions = 5, difficulty = 'mixed', language = 'vi' } = options;\r\n\r\n    const systemPrompt = customPrompt || OpenAIService.getDefaultPrompt(numQuestions, difficulty, language);\r\n    const baseURL = config.baseURL || 'http://localhost:11434'; // Default Ollama port\r\n\r\n    try {\r\n      const response = await fetch(`${baseURL}/api/generate`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          model: config.model || 'llama2',\r\n          prompt: `${systemPrompt}\\n\\nNá»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:\\n\\n${content}`,\r\n          stream: false,\r\n          options: {\r\n            temperature: 0.7,\r\n            num_predict: 2000\r\n          }\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Local AI Error: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const generatedText = data.response;\r\n\r\n      return OpenAIService.parseQuestionsFromText(generatedText);\r\n    } catch (error) {\r\n      console.error('Local AI Service Error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  static getDefaultPrompt(numQuestions: number, difficulty: string, language: string): string {\r\n    return OpenAIService.getDefaultPrompt(numQuestions, difficulty, language);\r\n  }\r\n}\r\n\r\n/**\r\n * Main AI Service - Router cho cÃ¡c providers\r\n */\r\nexport class AIService {\r\n  static async generateQuestions(\r\n    config: AIConfig,\r\n    options: QuestionGenerationOptions\r\n  ): Promise",
          "index": 7962
        },
        {
          "kind": "StringLiteral",
          "text": "tiáº¿ng Viá»‡t",
          "index": 2470
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ¢u há»i á»Ÿ Ä‘Ã¢y",
          "index": 2985
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n A",
          "index": 3040
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n B",
          "index": 3090
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n C",
          "index": 3141
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n D",
          "index": 3192
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i thÃ­ch táº¡i sao Ä‘Ã¡p Ã¡n A Ä‘Ãºng",
          "index": 3256
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ phÃ¢n tÃ­ch cÃ¢u tráº£ lá»i tá»« AI. Vui lÃ²ng thá»­ láº¡i.",
          "index": 4419
        }
      ]
    },
    {
      "file": "features\\quiz\\services\\aiQuestionService.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    switch (providerId) {\r\n      case 'openai':\r\n        return {\r\n          model: 'gpt-3.5-turbo',\r\n          temperature: 0.7,\r\n          maxQuestions: 10\r\n        };\r\n      case 'claude':\r\n        return {\r\n          model: 'claude-3-sonnet',\r\n          temperature: 0.6,\r\n          maxQuestions: 10\r\n        };\r\n      case 'gemini':\r\n        return {\r\n          model: 'gemini-pro',\r\n          temperature: 0.8,\r\n          maxQuestions: 8\r\n        };\r\n      case 'ollama':\r\n        return {\r\n          model: 'llama2',\r\n          temperature: 0.7,\r\n          maxQuestions: 6\r\n        };\r\n      default:\r\n        return {};\r\n    }\r\n  }\r\n\r\n  // Generate system prompt based on config\r\n  private generateSystemPrompt(config: AIConfig): string {\r\n    const { difficulty, questionTypes, language, maxQuestions } = config;\r\n    \r\n    const difficultyText = {\r\n      easy: 'dá»… (há»c sinh trung há»c cÆ¡ sá»Ÿ)',\r\n      medium: 'trung bÃ¬nh (há»c sinh trung há»c phá»• thÃ´ng)',\r\n      hard: 'khÃ³ (sinh viÃªn Ä‘áº¡i há»c)',\r\n      mixed: 'Ä‘a dáº¡ng tá»« dá»… Ä‘áº¿n khÃ³'\r\n    };\r\n\r\n    const typeText = {\r\n      multiple: 'tráº¯c nghiá»‡m nhiá»u lá»±a chá»n (4 Ä‘Ã¡p Ã¡n, 1 Ä‘Ãºng)',\r\n      boolean: 'Ä‘Ãºng/sai',\r\n      short_answer: 'tráº£ lá»i ngáº¯n'\r\n    };\r\n\r\n    const selectedTypes = questionTypes.map(t => typeText[t]).join(', ');\r\n    const lang = language === 'vi' ? 'tiáº¿ng Viá»‡t' : 'English';\r\n\r\n    return `Báº¡n lÃ  má»™t chuyÃªn gia táº¡o cÃ¢u há»i tráº¯c nghiá»‡m chuyÃªn nghiá»‡p. \r\n\r\nNHIá»†M Vá»¤: Táº¡o ${maxQuestions} cÃ¢u há»i cháº¥t lÆ°á»£ng cao tá»« ná»™i dung Ä‘Æ°á»£c cung cáº¥p.\r\n\r\nYÃŠU Cáº¦U:\r\n- Äá»™ khÃ³: ${difficultyText[difficulty]}\r\n- Loáº¡i cÃ¢u há»i: ${selectedTypes}\r\n- NgÃ´n ngá»¯: ${lang}\r\n- CÃ¢u há»i pháº£i chÃ­nh xÃ¡c, rÃµ rÃ ng vÃ  cÃ³ giÃ¡ trá»‹ giÃ¡o dá»¥c\r\n- ÄÃ¡p Ã¡n pháº£i chÃ­nh xÃ¡c 100%\r\n- TrÃ¡nh cÃ¢u há»i quÃ¡ dá»… hoáº·c mÆ¡ há»“\r\n\r\nFORMAT TRáº¢I Lá»œI (JSON):\r\n{\r\n  \"questions\": [\r\n    {\r\n      \"id\": \"unique_id\",\r\n      \"text\": \"Ná»™i dung cÃ¢u há»i\",\r\n      \"type\": \"multiple|boolean|short_answer\",\r\n      \"answers\": [\r\n        {\"id\": \"ans1\", \"text\": \"ÄÃ¡p Ã¡n A\", \"isCorrect\": true},\r\n        {\"id\": \"ans2\", \"text\": \"ÄÃ¡p Ã¡n B\", \"isCorrect\": false},\r\n        {\"id\": \"ans3\", \"text\": \"ÄÃ¡p Ã¡n C\", \"isCorrect\": false},\r\n        {\"id\": \"ans4\", \"text\": \"ÄÃ¡p Ã¡n D\", \"isCorrect\": false}\r\n      ],\r\n      \"points\": 1,\r\n      \"explanation\": \"Giáº£i thÃ­ch táº¡i sao Ä‘Ã¡p Ã¡n nÃ y Ä‘Ãºng\"\r\n    }\r\n  ]\r\n}\r\n\r\nCHá»ˆ TRáº¢ Vá»€ JSON, KHÃ”NG THÃŠM TEXT KHÃC.`;\r\n  }\r\n\r\n  // Generate questions using selected AI provider\r\n  async generateQuestions(request: GenerateQuestionsRequest): Promise",
          "index": 2419
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    if (!config.apiKey) {\r\n      throw new Error('OpenAI API key is required');\r\n    }\r\n\r\n    const systemPrompt = customPrompt || this.generateSystemPrompt(config);\r\n    const userPrompt = `Ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:\\n\\n${content}`;\r\n\r\n    const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${config.apiKey}`\r\n      },\r\n      body: JSON.stringify({\r\n        model: config.model,\r\n        messages: [\r\n          { role: 'system', content: systemPrompt },\r\n          { role: 'user', content: userPrompt }\r\n        ],\r\n        temperature: config.temperature,\r\n        max_tokens: 4000\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.text();\r\n      throw new Error(`OpenAI API error: ${error}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    const questionsJson = JSON.parse(data.choices[0].message.content);\r\n    \r\n    return {\r\n      questions: this.formatQuestions(questionsJson.questions),\r\n      usage: data.usage\r\n    };\r\n  }\r\n\r\n  private async generateWithGemini(content: string, config: AIConfig, customPrompt?: string): Promise",
          "index": 5897
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    if (!config.apiKey) {\r\n      throw new Error('Gemini API key is required');\r\n    }\r\n\r\n    const prompt = `${customPrompt || this.generateSystemPrompt(config)}\\n\\nNá»™i dung: ${content}`;\r\n\r\n    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${config.model}:generateContent?key=${config.apiKey}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        contents: [{ parts: [{ text: prompt }] }],\r\n        generationConfig: {\r\n          temperature: config.temperature,\r\n          maxOutputTokens: 4000\r\n        }\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.text();\r\n      throw new Error(`Gemini API error: ${error}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    const questionsJson = JSON.parse(data.candidates[0].content.parts[0].text);\r\n    \r\n    return {\r\n      questions: this.formatQuestions(questionsJson.questions)\r\n    };\r\n  }\r\n\r\n  private async generateWithClaude(content: string, config: AIConfig, customPrompt?: string): Promise",
          "index": 7149
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    if (!config.apiKey) {\r\n      throw new Error('Claude API key is required');\r\n    }\r\n\r\n    const systemPrompt = customPrompt || this.generateSystemPrompt(config);\r\n\r\n    const response = await fetch('https://api.anthropic.com/v1/messages', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-api-key': config.apiKey,\r\n        'anthropic-version': '2023-06-01'\r\n      },\r\n      body: JSON.stringify({\r\n        model: config.model,\r\n        max_tokens: 4000,\r\n        temperature: config.temperature,\r\n        system: systemPrompt,\r\n        messages: [\r\n          { role: 'user', content: `Ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i:\\n\\n${content}` }\r\n        ]\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.text();\r\n      throw new Error(`Claude API error: ${error}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    const questionsJson = JSON.parse(data.content[0].text);\r\n    \r\n    return {\r\n      questions: this.formatQuestions(questionsJson.questions),\r\n      usage: data.usage\r\n    };\r\n  }\r\n\r\n  private async generateWithOllama(content: string, config: AIConfig, customPrompt?: string): Promise",
          "index": 8289
        },
        {
          "kind": "JSXText",
          "text": "{\r\n    const prompt = `${customPrompt || this.generateSystemPrompt(config)}\\n\\nNá»™i dung: ${content}`;\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:11434/api/generate', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          model: config.model,\r\n          prompt: prompt,\r\n          stream: false,\r\n          options: {\r\n            temperature: config.temperature,\r\n            num_predict: 4000\r\n          }\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Ollama not running or model not available. Please install Ollama and pull the ${config.model} model.`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const questionsJson = JSON.parse(data.response);\r\n      \r\n      return {\r\n        questions: this.formatQuestions(questionsJson.questions)\r\n      };\r\n    } catch (error) {\r\n      throw new Error(`Ollama error: ${error instanceof Error ? error.message : 'Unknown error'}. Make sure Ollama is running on localhost:11434`);\r\n    }\r\n  }\r\n\r\n  private formatQuestions(questions: any[]): Question[] {\r\n    return questions.map((q: any) => ({\r\n      id: q.id || `q_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      text: q.text || '',\r\n      type: q.type || 'multiple',\r\n      answers: q.answers || [],\r\n      points: q.points || 1,\r\n      correctAnswer: q.correctAnswer || '',\r\n      acceptedAnswers: q.acceptedAnswers || [],\r\n      explanation: q.explanation || ''\r\n    }));\r\n  }\r\n\r\n  // Test AI connection\r\n  async testConnection(config: AIConfig): Promise",
          "index": 9494
        },
        {
          "kind": "StringLiteral",
          "text": "GPT-4 vÃ  GPT-3.5 tá»« OpenAI - Cháº¥t lÆ°á»£ng cao, Ä‘a dáº¡ng cÃ¢u há»i",
          "index": 1329
        },
        {
          "kind": "StringLiteral",
          "text": "Claude 3 tá»« Anthropic - TÆ° duy logic tá»‘t, an toÃ n",
          "index": 1590
        },
        {
          "kind": "StringLiteral",
          "text": "Gemini Pro tá»« Google - Hiá»ƒu ngá»¯ cáº£nh tá»‘t, miá»…n phÃ­ háº¡n cháº¿",
          "index": 1848
        },
        {
          "kind": "StringLiteral",
          "text": "Cháº¡y local vá»›i Llama, Mistral, CodeLlama - HoÃ n toÃ n miá»…n phÃ­",
          "index": 2096
        },
        {
          "kind": "StringLiteral",
          "text": "dá»… (há»c sinh trung há»c cÆ¡ sá»Ÿ)",
          "index": 3295
        },
        {
          "kind": "StringLiteral",
          "text": "trung bÃ¬nh (há»c sinh trung há»c phá»• thÃ´ng)",
          "index": 3343
        },
        {
          "kind": "StringLiteral",
          "text": "khÃ³ (sinh viÃªn Ä‘áº¡i há»c)",
          "index": 3401
        },
        {
          "kind": "StringLiteral",
          "text": "Ä‘a dáº¡ng tá»« dá»… Ä‘áº¿n khÃ³",
          "index": 3442
        },
        {
          "kind": "StringLiteral",
          "text": "tráº¯c nghiá»‡m nhiá»u lá»±a chá»n (4 Ä‘Ã¡p Ã¡n, 1 Ä‘Ãºng)",
          "index": 3517
        },
        {
          "kind": "StringLiteral",
          "text": "Ä‘Ãºng/sai",
          "index": 3582
        },
        {
          "kind": "StringLiteral",
          "text": "tráº£ lá»i ngáº¯n",
          "index": 3615
        },
        {
          "kind": "StringLiteral",
          "text": "tiáº¿ng Viá»‡t",
          "index": 3753
        },
        {
          "kind": "StringLiteral",
          "text": "Ná»™i dung cÃ¢u há»i",
          "index": 4266
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n A",
          "index": 4386
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n B",
          "index": 4450
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n C",
          "index": 4515
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n D",
          "index": 4580
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i thÃ­ch táº¡i sao Ä‘Ã¡p Ã¡n nÃ y Ä‘Ãºng",
          "index": 4664
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ";\r\n  isTimeUp?: boolean;\r\n  timeSpent?: number;\r\n  quizId?: string;\r\n  tracked?: boolean; // Add this to prevent duplicate tracking\r\n}\r\n\r\ninterface LeaderboardEntry {\r\n  id: string;\r\n  userId: string;\r\n  userName: string;\r\n  userEmail: string;\r\n  score: number;\r\n  correctAnswers: number;\r\n  totalQuestions: number;\r\n  timeSpent: number;\r\n  completedAt: Date;\r\n}\r\n\r\n// **THÃŠM Má»šI**: Confetti animation component\r\nconst Confetti: React.FC = () => {\r\n  return (",
          "index": 713
        },
        {
          "kind": "JSXText",
          "text": ");\r\n};\r\n\r\n// **THÃŠM Má»šI**: Score circle component\r\nconst ScoreCircle: React.FC",
          "index": 1856
        },
        {
          "kind": "JSXText",
          "text": ");\r\n};\r\n\r\n// Helper: format seconds to mm:ss\r\nconst formatTime = (seconds: number) => {\r\n  const m = Math.floor(seconds / 60);\r\n  const s = seconds % 60;\r\n  return `${m}:${s.toString().padStart(2, '0')}`;\r\n};\r\n\r\n// Helper Ã©p kiá»ƒu an toÃ n cho sá»‘\r\nconst safeNumber = (val: any, fallback = 0) => {\r\n  const n = Number(val);\r\n  return isNaN(n) ? fallback : n;\r\n};\r\n\r\nexport const ResultPage: React.FC = () => {\r\n  const { attemptId } = useParams",
          "index": 4034
        },
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [loadingStats, setLoadingStats] = useState(true);\r\n\r\n  useEffect(() => {\r\n    console.log('ðŸ” ResultPage useEffect - attemptId:', attemptId, 'location.state:', location.state);\r\n    \r\n    if (location.state) {\r\n      // CÃ³ state tá»« navigation - sá»­ dá»¥ng ngay\r\n      const resultData = location.state as ResultState;\r\n      console.log('âœ… Using state from navigation:', resultData);\r\n      setResult(resultData);\r\n      setQuizId(resultData.quizId || attemptId || null);\r\n    } else if (attemptId) {\r\n      // KhÃ´ng cÃ³ state, cáº§n fetch tá»« Firestore\r\n      console.log('ðŸ“¡ Fetching result from Firestore for attemptId:', attemptId);\r\n      getQuizResultById(attemptId).then((res: any) => {\r\n        if (res) {\r\n          console.log('âœ… Fetched result from Firestore:', res);\r\n          const resultData = res as ResultState;\r\n          setResult(resultData);\r\n          setQuizId(resultData.quizId || null);\r\n        } else {\r\n          console.error('âŒ No result found for attemptId:', attemptId);\r\n          toast.error('KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£ quiz!');\r\n          navigate('/quiz-list');\r\n        }\r\n      }).catch(error => {\r\n        console.error('âŒ Error fetching result:', error);\r\n        toast.error('KhÃ´ng thá»ƒ táº£i káº¿t quáº£ quiz!');\r\n        navigate('/quiz-list');\r\n      });\r\n    } else {\r\n      console.error('âŒ No attemptId or state provided');\r\n      navigate('/quiz-list');\r\n    }\r\n  }, [attemptId, location.state, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (!quizId) return;\r\n    \r\n    console.log('ðŸ” Looking for quiz with ID:', quizId);\r\n    const foundQuiz = quizzes.find(q => q.id === quizId);\r\n    \r\n    if (foundQuiz) {\r\n      console.log('âœ… Found quiz in store:', foundQuiz.title);\r\n      setQuiz(foundQuiz);\r\n    } else {\r\n      console.log('ðŸ“¡ Quiz not in store, fetching from Firestore...');\r\n      // Náº¿u khÃ´ng cÃ³ trong store, fetch tá»« Firestore\r\n      getQuizById(quizId).then(qz => {\r\n        if (qz) {\r\n          console.log('âœ… Fetched quiz from Firestore:', qz.title);\r\n          setQuiz(qz);\r\n        } else {\r\n          console.error('âŒ Quiz not found:', quizId);\r\n          toast.error('KhÃ´ng tÃ¬m tháº¥y quiz!');\r\n          navigate('/quiz-list');\r\n        }\r\n      }).catch(error => {\r\n        console.error('âŒ Error fetching quiz:', error);\r\n        toast.error('KhÃ´ng thá»ƒ táº£i quiz!');\r\n        navigate('/quiz-list');\r\n      });\r\n    }\r\n  }, [quizId, quizzes, navigate]);\r\n\r\n  // Track completion when result and quiz are both available\r\n  useEffect(() => {\r\n    if (result && quiz && user && !result.tracked) {\r\n      console.log('ðŸ“Š Tracking quiz completion for user:', user.uid);\r\n      const score = safeNumber(result.correct, 0);\r\n      const total = safeNumber(result.total, quiz.questions.length);\r\n      \r\n      quizStatsService.trackCompletion(quiz.id, user.uid, score, total);\r\n      \r\n      // Mark as tracked to prevent duplicate tracking\r\n      setResult(prev => prev ? { ...prev, tracked: true } : null);\r\n    }\r\n  }, [result, quiz, user]);\r\n\r\n  useEffect(() => {\r\n    const fetchLeaderboard = async () => {\r\n      if (!quizId) return;\r\n      \r\n      try {\r\n        setLoadingStats(true);\r\n        console.log('ðŸ“Š Fetching leaderboard for quiz:', quizId);\r\n        const results = await getQuizResults(quizId);\r\n        console.log('ðŸ“Š Raw results from Firebase:', results);\r\n        \r\n        // Transform results to leaderboard entries with user info\r\n        const leaderboardData: LeaderboardEntry[] = results.map((result: any) => {\r\n          console.log('ðŸ” Processing result:', result);\r\n          return {\r\n            id: result.id,\r\n            userId: result.userId,\r\n            userName: result.userName || result.userEmail?.split('@')[0] || 'Anonymous',\r\n            userEmail: result.userEmail || '',\r\n            score: result.score,\r\n            correctAnswers: result.correctAnswers,\r\n            totalQuestions: result.totalQuestions,\r\n            timeSpent: result.timeSpent || 0,\r\n            completedAt: result.completedAt?.toDate?.() || new Date(result.completedAt)\r\n          };\r\n        });\r\n\r\n        console.log('ðŸ“Š Leaderboard data processed:', leaderboardData);\r\n\r\n        // Sort by score (descending) then by time (ascending) for same scores\r\n        const sortedLeaderboard = leaderboardData.sort((a, b) => {\r\n          if (a.score !== b.score) {\r\n            return b.score - a.score; // Higher score first\r\n          }\r\n          return a.timeSpent - b.timeSpent; // Faster time first if same score\r\n        });\r\n\r\n        console.log('ðŸ“Š Sorted leaderboard:', sortedLeaderboard);\r\n        setLeaderboard(sortedLeaderboard.slice(0, 10)); // Top 10\r\n\r\n        // Find current user's rank\r\n        if (user) {\r\n          const userResultIndex = sortedLeaderboard.findIndex(r => r.userId === user.uid);\r\n          setUserRank(userResultIndex >= 0 ? userResultIndex + 1 : null);\r\n          console.log('ðŸ‘¤ User rank:', userResultIndex >= 0 ? userResultIndex + 1 : 'Not found');\r\n        }\r\n\r\n        console.log('ðŸ“Š Leaderboard loaded:', sortedLeaderboard.length, 'entries');\r\n      } catch (error) {\r\n        console.error('âŒ Failed to fetch leaderboard:', error);\r\n        toast.error('KhÃ´ng thá»ƒ táº£i báº£ng xáº¿p háº¡ng!');\r\n      } finally {\r\n        setLoadingStats(false);\r\n      }\r\n    };\r\n\r\n    fetchLeaderboard();\r\n  }, [quizId, user]);\r\n\r\n  if (!result || !quiz) {\r\n    return (",
          "index": 5126
        },
        {
          "kind": "JSXText",
          "text": ");\r\n  }\r\n\r\n  // TÃ­nh toÃ¡n Ä‘iá»ƒm sá»‘, kiá»ƒm tra há»£p lá»‡\r\n  const correct = safeNumber(result.correct);\r\n  const total = safeNumber(result.total);\r\n  const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;\r\n  const isExcellent = percentage >= 80;\r\n\r\n  return (",
          "index": 10942
        },
        {
          "kind": "JSXText",
          "text": "{/* Káº¿t quáº£ tá»•ng quan */}",
          "index": 11396
        },
        {
          "kind": "JSXText",
          "text": "{/* Hiá»ƒn thá»‹ thá»i gian lÃ m bÃ i */}\r\n              {typeof result.timeSpent === 'number' && (",
          "index": 12682
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Stats Grid */}",
          "index": 13078
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Performance Analysis */}",
          "index": 13971
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Review Answers Section */}",
          "index": 15769
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£ quiz!",
          "index": 6163
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i káº¿t quáº£ quiz!",
          "index": 6349
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y quiz!",
          "index": 7259
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i quiz!",
          "index": 7435
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i báº£ng xáº¿p háº¡ng!",
          "index": 10306
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\RealQuizListPage.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Äang táº£i danh sÃ¡ch quiz thá»±c táº¿...",
          "index": 1216
        },
        {
          "kind": "JSXText",
          "text": "Quay láº¡i Admin",
          "index": 1684
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“š Danh SÃ¡ch Quiz Thá»±c Táº¿",
          "index": 1964
        },
        {
          "kind": "JSXText",
          "text": "{quizzes.length} quiz Ä‘Æ°á»£c tÃ¬m tháº¥y trong database",
          "index": 2079
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng cÃ³ quiz nÃ o trong database",
          "index": 2765
        },
        {
          "kind": "JSXText",
          "text": "HÃ£y táº¡o má»™t sá»‘ quiz Ä‘á»ƒ test há»‡ thá»‘ng review",
          "index": 2875
        },
        {
          "kind": "JSXText",
          "text": "{quiz.title || 'KhÃ´ng cÃ³ tiÃªu Ä‘á»'}",
          "index": 3357
        },
        {
          "kind": "JSXText",
          "text": "{quiz.description || 'KhÃ´ng cÃ³ mÃ´ táº£'}",
          "index": 3520
        },
        {
          "kind": "JSXText",
          "text": "Danh má»¥c: {quiz.category}",
          "index": 3872
        },
        {
          "kind": "JSXText",
          "text": "{quiz.status === 'approved' ? 'ÄÃ£ duyá»‡t' :\r\n                           quiz.status === 'pending' ? 'Chá» duyá»‡t' : 'Bá»‹ tá»« chá»‘i'}",
          "index": 4283
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡nh giÃ¡",
          "index": 5312
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“Š Thá»‘ng kÃª nhanh",
          "index": 5696
        },
        {
          "kind": "JSXText",
          "text": "Tá»•ng quiz",
          "index": 5987
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng cÃ³ tiÃªu Ä‘á»",
          "index": 3397
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng cÃ³ mÃ´ táº£",
          "index": 3566
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ duyá»‡t",
          "index": 4342
        },
        {
          "kind": "StringLiteral",
          "text": "Chá» duyá»‡t",
          "index": 4411
        },
        {
          "kind": "StringLiteral",
          "text": "Bá»‹ tá»« chá»‘i",
          "index": 4425
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizReviewsPage.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showReviewForm, setShowReviewForm] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (quizId) {\r\n      console.log('ðŸŽ¯ QuizReviewsPage mounted with quizId:', quizId);\r\n      loadQuizAndReviews();\r\n    } else {\r\n      console.error('âŒ No quizId provided in URL params');\r\n      setLoading(false);\r\n    }\r\n  }, [quizId]);\r\n\r\n  const loadQuizAndReviews = async () => {\r\n    if (!quizId) {\r\n      console.error('âŒ No quizId provided');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    console.log('ðŸ”„ Starting to load quiz and reviews for:', quizId);\r\n    \r\n    try {\r\n      // Step 1: Load quiz details (REQUIRED)\r\n      console.log('ðŸ“ Loading quiz details...');\r\n      let quizData;\r\n      try {\r\n        quizData = await getQuizById(quizId);\r\n        console.log('ðŸ” Raw quiz data from API:', quizData);\r\n        \r\n        if (!quizData) {\r\n          console.error('âŒ Quiz not found in database for ID:', quizId);\r\n          \r\n          // Create a fallback quiz object for testing\r\n          console.log('ðŸ”§ Creating fallback quiz for testing...');\r\n          const fallbackQuiz: Quiz = {\r\n            id: quizId,\r\n            title: `Quiz Sample ${quizId}`,\r\n            description: 'ÄÃ¢y lÃ  quiz máº«u Ä‘á»ƒ test há»‡ thá»‘ng Ä‘Ã¡nh giÃ¡',\r\n            category: 'General',\r\n            difficulty: 'easy' as const,\r\n            questions: [\r\n              {\r\n                id: '1',\r\n                text: 'CÃ¢u há»i máº«u?',\r\n                type: 'multiple',\r\n                answers: [\r\n                  { id: '1', text: 'ÄÃ¡p Ã¡n A', isCorrect: true },\r\n                  { id: '2', text: 'ÄÃ¡p Ã¡n B', isCorrect: false },\r\n                  { id: '3', text: 'ÄÃ¡p Ã¡n C', isCorrect: false },\r\n                  { id: '4', text: 'ÄÃ¡p Ã¡n D', isCorrect: false }\r\n                ],\r\n                explanation: 'Giáº£i thÃ­ch máº«u',\r\n                points: 10\r\n              }\r\n            ],\r\n            duration: 300,\r\n            createdBy: 'system',\r\n            createdAt: new Date(),\r\n            updatedAt: new Date(),\r\n            isPublished: true,\r\n            tags: ['sample', 'test']\r\n          };\r\n          setQuiz(fallbackQuiz);\r\n          console.log('âœ… Using fallback quiz for testing');\r\n        } else {\r\n          console.log('âœ… Quiz data loaded successfully:', quizData.title);\r\n          setQuiz(quizData);\r\n        }\r\n      } catch (quizError) {\r\n        console.error('âŒ Failed to load quiz:', quizError);\r\n        toast.error('KhÃ´ng tÃ¬m tháº¥y quiz nÃ y');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Step 2: Load reviews (OPTIONAL - don't fail if reviews fail)\r\n      console.log('ðŸ“Š Loading reviews...');\r\n      try {\r\n        // Try simple query first to avoid index issues\r\n        const reviewsData = await reviewService.getQuizReviewsSimple(quizId);\r\n        console.log(`âœ… Reviews loaded: ${reviewsData.length} reviews found`);\r\n        setReviews(reviewsData || []);\r\n\r\n        // Calculate stats from reviews\r\n        if (reviewsData && reviewsData.length > 0) {\r\n          const totalRating = reviewsData.reduce((sum: number, review: any) => sum + (review.rating || 0), 0);\r\n          const averageRating = totalRating / reviewsData.length;\r\n          \r\n          const ratingDistribution = {\r\n            5: reviewsData.filter((r: any) => r.rating === 5).length,\r\n            4: reviewsData.filter((r: any) => r.rating === 4).length,\r\n            3: reviewsData.filter((r: any) => r.rating === 3).length,\r\n            2: reviewsData.filter((r: any) => r.rating === 2).length,\r\n            1: reviewsData.filter((r: any) => r.rating === 1).length\r\n          };\r\n\r\n          setStats({\r\n            totalReviews: reviewsData.length,\r\n            averageRating: Math.round(averageRating * 10) / 10,\r\n            ratingDistribution\r\n          });\r\n          console.log(`ðŸ“ˆ Stats calculated: ${reviewsData.length} reviews, ${averageRating.toFixed(1)} avg rating`);\r\n        } else {\r\n          console.log('ðŸ“Š No reviews found, setting empty stats');\r\n          setStats({\r\n            totalReviews: 0,\r\n            averageRating: 0,\r\n            ratingDistribution: { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 }\r\n          });\r\n        }\r\n      } catch (reviewError) {\r\n        console.error('âš ï¸ Error loading reviews:', reviewError);\r\n        \r\n        // Set empty state on error\r\n        setReviews([]);\r\n        setStats({\r\n          totalReviews: 0,\r\n          averageRating: 0,\r\n          ratingDistribution: { 5: 0, 4: 0, 3: 0, 2: 0, 1: 0 }\r\n        });\r\n        toast.error('KhÃ´ng thá»ƒ táº£i Ä‘Ã¡nh giÃ¡');\r\n      }\r\n\r\n      console.log('ðŸŽ‰ Page loading completed successfully');\r\n    } catch (error) {\r\n      console.error('âŒ Critical error in loadQuizAndReviews:', error);\r\n      toast.error('CÃ³ lá»—i khi táº£i trang Ä‘Ã¡nh giÃ¡');\r\n    } finally {\r\n      // ALWAYS set loading to false\r\n      setLoading(false);\r\n      console.log('âœ… Loading state set to false');\r\n    }\r\n  };\r\n\r\n  const handleReviewSubmitted = async () => {\r\n    console.log('ðŸ”„ Review submitted, refreshing data...');\r\n    setShowReviewForm(false);\r\n    \r\n    // Clear current reviews to show loading state\r\n    setReviews([]);\r\n    setLoading(true);\r\n    \r\n    // Add delay to ensure Firebase has processed the write\r\n    setTimeout(() => {\r\n      console.log('â° Delay completed, reloading reviews with cache bypass...');\r\n      loadQuizAndReviews();\r\n    }, 1500); // Increased delay to 1.5 seconds\r\n  };\r\n\r\n  const handleHelpfulClick = async (reviewId: string) => {\r\n    // TODO: Implement helpful functionality\r\n    console.log('Helpful clicked for review:', reviewId);\r\n  };\r\n\r\n  const handleReportClick = async (reviewId: string) => {\r\n    // TODO: Implement report functionality  \r\n    console.log('Report clicked for review:', reviewId);\r\n  };\r\n\r\n  const renderRatingDistribution = () => {\r\n    if (!stats) return null;\r\n\r\n    return (",
          "index": 805
        },
        {
          "kind": "JSXText",
          "text": "Äang táº£i thÃ´ng tin quiz...",
          "index": 8380
        },
        {
          "kind": "JSXText",
          "text": "Quiz khÃ´ng tá»“n táº¡i",
          "index": 8723
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng thá»ƒ tÃ¬m tháº¥y quiz nÃ y",
          "index": 8792
        },
        {
          "kind": "JSXText",
          "text": "{\r\n                  loadQuizAndReviews();\r\n                }}\r\n                disabled={loading}\r\n                className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium disabled:opacity-50\"\r\n                title=\"LÃ m má»›i Ä‘Ã¡nh giÃ¡\"\r\n              >",
          "index": 10434
        },
        {
          "kind": "JSXText",
          "text": "setShowReviewForm(true)}\r\n                className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n              >\r\n                Viáº¿t Ä‘Ã¡nh giÃ¡",
          "index": 10902
        },
        {
          "kind": "JSXText",
          "text": "{stats?.totalReviews === 0 ? 'ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡' : 'ngÆ°á»i Ä‘Ã£ Ä‘Ã¡nh giÃ¡'}",
          "index": 13060
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡nh giÃ¡ tÃ­ch cá»±c",
          "index": 13877
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡nh giÃ¡ tá»« ngÆ°á»i dÃ¹ng ({reviews.length})",
          "index": 14567
        },
        {
          "kind": "JSXText",
          "text": "setShowReviewForm(true)}\r\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\"\r\n                  >\r\n                    Viáº¿t Ä‘Ã¡nh giÃ¡",
          "index": 14718
        },
        {
          "kind": "JSXText",
          "text": "ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o",
          "index": 15317
        },
        {
          "kind": "JSXText",
          "text": "HÃ£y trá»Ÿ thÃ nh ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡ quiz nÃ y! \r\n                      Chia sáº» tráº£i nghiá»‡m cá»§a báº¡n Ä‘á»ƒ giÃºp nhá»¯ng ngÆ°á»i khÃ¡c.",
          "index": 15461
        },
        {
          "kind": "JSXText",
          "text": "Viáº¿t Ä‘Ã¡nh giÃ¡ Ä‘áº§u tiÃªn",
          "index": 15969
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¢y lÃ  quiz máº«u Ä‘á»ƒ test há»‡ thá»‘ng Ä‘Ã¡nh giÃ¡",
          "index": 2092
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ¢u há»i máº«u?",
          "index": 2305
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n A",
          "index": 2420
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n B",
          "index": 2487
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n C",
          "index": 2555
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n D",
          "index": 2623
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i thÃ­ch máº«u",
          "index": 2704
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y quiz nÃ y",
          "index": 3342
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i Ä‘Ã¡nh giÃ¡",
          "index": 5412
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i khi táº£i trang Ä‘Ã¡nh giÃ¡",
          "index": 5626
        },
        {
          "kind": "StringLiteral",
          "text": "LÃ m má»›i Ä‘Ã¡nh giÃ¡",
          "index": 10702
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡",
          "index": 13112
        },
        {
          "kind": "StringLiteral",
          "text": "ngÆ°á»i Ä‘Ã£ Ä‘Ã¡nh giÃ¡",
          "index": 13133
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPreviewPage.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ");\r\n  }\r\n\r\n  const getDifficultyColor = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'bg-green-100 text-green-800';\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\r\n      case 'hard': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getDifficultyText = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'Dá»…';\r\n      case 'medium': return 'Trung bÃ¬nh';\r\n      case 'hard': return 'KhÃ³';\r\n      default: return difficulty;\r\n    }\r\n  };\r\n\r\n  return (",
          "index": 2764
        },
        {
          "kind": "JSXText",
          "text": "ChÆ¡i cÃ¹ng báº¡n bÃ¨",
          "index": 7018
        },
        {
          "kind": "StringLiteral",
          "text": "Dá»…",
          "index": 3214
        },
        {
          "kind": "StringLiteral",
          "text": "Trung bÃ¬nh",
          "index": 3249
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ³",
          "index": 3290
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizList.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "('grid'); // grid, list\r\n  const [showCompleted, setShowCompleted] = useState(true);\r\n  const [showStats, setShowStats] = useState(false);\r\n  \r\n  const categories = Array.from(new Set(quizzes.map(q => q.category)));\r\n  const difficulties = Array.from(new Set(quizzes.map(q => q.difficulty)));\r\n  \r\n  // Chá»‰ hiá»ƒn thá»‹ quiz Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t\r\n  let filtered = quizzes.filter(q =>\r\n    q.status === 'approved' &&\r\n    (category === 'all' || q.category === category) &&\r\n    (difficulty === 'all' || q.difficulty === difficulty) &&\r\n    (showCompleted || !q.isCompleted) &&\r\n    q.title.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  // Sorting logic\r\n  filtered = filtered.sort((a, b) => {\r\n    switch (sortBy) {\r\n      case 'newest':\r\n        return new Date(b.createdAt || 0).getTime() - new Date(a.createdAt || 0).getTime();\r\n      case 'oldest':\r\n        return new Date(a.createdAt || 0).getTime() - new Date(b.createdAt || 0).getTime();\r\n      case 'popular':\r\n        return (b.totalPlayers || 0) - (a.totalPlayers || 0);\r\n      case 'difficulty':\r\n        const diffOrder = { 'easy': 1, 'medium': 2, 'hard': 3 };\r\n        return (diffOrder[a.difficulty as keyof typeof diffOrder] || 2) - (diffOrder[b.difficulty as keyof typeof diffOrder] || 2);\r\n      default:\r\n        return 0;\r\n    }\r\n  });\r\n\r\n  // Retry connection handler\r\n  const handleRetry = () => {\r\n    setRetryCount(0);\r\n    dispatch(fetchQuizzes({ user }) as any);\r\n  };\r\n\r\n  if (error) {\r\n    return (",
          "index": 2849
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\MyQuizzesPage.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [editReason, setEditReason] = useState('');\r\n  const [submittingRequest, setSubmittingRequest] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadMyQuizzes();\r\n    }\r\n  }, [user]);\r\n\r\n  const loadMyQuizzes = async () => {\r\n    if (!user) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const quizzesQuery = query(\r\n        collection(db, 'quizzes'),\r\n        where('createdBy', '==', user.uid)\r\n      );\r\n      \r\n      const snapshot = await getDocs(quizzesQuery);\r\n      const loadedQuizzes: Quiz[] = [];\r\n      \r\n      for (const docSnap of snapshot.docs) {\r\n        const data = docSnap.data();\r\n        \r\n        // Load edit requests for this quiz\r\n        const editRequestsQuery = query(\r\n          collection(db, 'editRequests'),\r\n          where('quizId', '==', docSnap.id)\r\n        );\r\n        const editRequestsSnapshot = await getDocs(editRequestsQuery);\r\n        const editRequests = editRequestsSnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          requestedAt: doc.data().requestedAt?.toDate() || new Date(),\r\n          approvedAt: doc.data().approvedAt?.toDate()\r\n        })) as EditRequest[];\r\n        \r\n        loadedQuizzes.push({\r\n          id: docSnap.id,\r\n          ...data,\r\n          // Ensure stats are included\r\n          views: data.stats?.views || data.views || 0,\r\n          attempts: data.stats?.attempts || data.attempts || 0,\r\n          completions: data.stats?.completions || data.completions || 0,\r\n          averageScore: data.stats?.averageScore || data.averageScore || 0,\r\n          createdAt: data.createdAt && typeof data.createdAt.toDate === 'function' \r\n            ? data.createdAt.toDate() \r\n            : data.createdAt instanceof Date \r\n              ? data.createdAt \r\n              : new Date(),\r\n          updatedAt: data.updatedAt && typeof data.updatedAt.toDate === 'function'\r\n            ? data.updatedAt.toDate()\r\n            : data.updatedAt instanceof Date\r\n              ? data.updatedAt\r\n              : new Date(),\r\n          editRequests\r\n        } as Quiz);\r\n      }\r\n      \r\n      // Sort in memory instead of using orderBy in query\r\n      loadedQuizzes.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\r\n      \r\n      setQuizzes(loadedQuizzes);\r\n    } catch (error) {\r\n      console.error('Error loading quizzes:', error);\r\n      toast.error(t('quiz.loadError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEditRequest = async () => {\r\n    if (!selectedQuiz || !editReason.trim()) {\r\n      toast.error(t('quiz.editReasonRequired'));\r\n      return;\r\n    }\r\n\r\n    setSubmittingRequest(true);\r\n    try {\r\n      await addDoc(collection(db, 'editRequests'), {\r\n        quizId: selectedQuiz.id,\r\n        requestedBy: user?.uid,\r\n        requestedAt: serverTimestamp(),\r\n        reason: editReason.trim(),\r\n        status: 'pending'\r\n      });\r\n\r\n      toast.success('YÃªu cáº§u chá»‰nh sá»­a Ä‘Ã£ Ä‘Æ°á»£c gá»­i, chá» admin phÃª duyá»‡t');\r\n      setShowEditRequestModal(false);\r\n      setEditReason('');\r\n      setSelectedQuiz(null);\r\n      loadMyQuizzes(); // Reload to get updated data\r\n    } catch (error) {\r\n      console.error('Error submitting edit request:', error);\r\n      toast.error(t('quiz.editRequestError'));\r\n    } finally {\r\n      setSubmittingRequest(false);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const styles = {\r\n      pending: 'bg-yellow-100 text-yellow-800',\r\n      approved: 'bg-green-100 text-green-800',\r\n      rejected: 'bg-red-100 text-red-800',\r\n      draft: 'bg-gray-100 text-gray-800'\r\n    };\r\n\r\n    const icons = {\r\n      pending:",
          "index": 1890
        },
        {
          "kind": "JSXText",
          "text": "};\r\n\r\n    const labels = {\r\n      pending: 'Chá» duyá»‡t',\r\n      approved: 'ÄÃ£ duyá»‡t',\r\n      rejected: 'Bá»‹ tá»« chá»‘i',\r\n      draft: 'Báº£n nhÃ¡p'\r\n    };\r\n\r\n    return (",
          "index": 5722
        },
        {
          "kind": "JSXText",
          "text": ");\r\n  };\r\n\r\n  const getDifficultyBadge = (difficulty: string) => {\r\n    const styles = {\r\n      easy: 'bg-green-100 text-green-800',\r\n      medium: 'bg-yellow-100 text-yellow-800',\r\n      hard: 'bg-red-100 text-red-800'\r\n    };\r\n\r\n    const labels = {\r\n      easy: 'ðŸŸ¢ Dá»…',\r\n      medium: 'ðŸŸ¡ Trung bÃ¬nh',\r\n      hard: 'ðŸ”´ KhÃ³'\r\n    };\r\n\r\n    return (",
          "index": 6146
        },
        {
          "kind": "JSXText",
          "text": ");\r\n  };\r\n\r\n  const canEdit = (quiz: Quiz): { allowed: boolean; reason?: string } => {\r\n    // Check if there's a pending edit request\r\n    const pendingRequest = quiz.editRequests?.find(req => req.status === 'pending');\r\n    if (pendingRequest) {\r\n      return { allowed: false, reason: 'CÃ³ yÃªu cáº§u chá»‰nh sá»­a Ä‘ang chá» duyá»‡t' };\r\n    }\r\n\r\n    // Check if quiz is approved and needs admin permission to edit\r\n    if (quiz.status === 'approved') {\r\n      return { allowed: false, reason: 'Quiz Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t, cáº§n xin phÃ©p admin Ä‘á»ƒ chá»‰nh sá»­a' };\r\n    }\r\n\r\n    // Can edit if draft or rejected\r\n    return { allowed: true };\r\n  };\r\n\r\n  const handleEditQuiz = (quiz: Quiz) => {\r\n    const editPermission = canEdit(quiz);\r\n    \r\n    if (!editPermission.allowed) {\r\n      if (quiz.status === 'approved') {\r\n        setSelectedQuiz(quiz);\r\n        setShowEditRequestModal(true);\r\n      } else {\r\n        toast.warning(editPermission.reason);\r\n      }\r\n    } else {\r\n      navigate(`/quiz/${quiz.id}/edit`);\r\n    }\r\n  };\r\n\r\n  const filteredQuizzes = quizzes.filter(quiz => {\r\n    const matchesSearch = quiz.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         quiz.description.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = statusFilter === 'all' || quiz.status === statusFilter;\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  if (!user || (user.role !== 'creator' && user.role !== 'admin')) {\r\n    return (",
          "index": 6682
        },
        {
          "kind": "JSXText",
          "text": "Quáº£n lÃ½ vÃ  theo dÃµi quiz báº¡n Ä‘Ã£ táº¡o",
          "index": 8871
        },
        {
          "kind": "JSXText",
          "text": "Táº¥t cáº£ tráº¡ng thÃ¡i",
          "index": 10437
        },
        {
          "kind": "JSXText",
          "text": "Báº£n nhÃ¡p",
          "index": 10503
        },
        {
          "kind": "JSXText",
          "text": "Tá»•ng quiz",
          "index": 11335
        },
        {
          "kind": "JSXText",
          "text": "Tá»•ng lÆ°á»£t xem",
          "index": 13191
        },
        {
          "kind": "JSXText",
          "text": "Tá»•ng lÆ°á»£t thá»­",
          "index": 13817
        },
        {
          "kind": "JSXText",
          "text": "{searchTerm || statusFilter !== 'all' \r\n                  ? 'KhÃ´ng tÃ¬m tháº¥y quiz phÃ¹ há»£p vá»›i bá»™ lá»c'\r\n                  : 'Báº¡n chÆ°a táº¡o quiz nÃ o. HÃ£y táº¡o quiz Ä‘áº§u tiÃªn!'\r\n                }",
          "index": 15367
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o Quiz Äáº§u TiÃªn",
          "index": 15938
        },
        {
          "kind": "JSXText",
          "text": "Danh má»¥c & Äá»™ khÃ³",
          "index": 16538
        },
        {
          "kind": "JSXText",
          "text": "NgÃ y táº¡o",
          "index": 17061
        },
        {
          "kind": "JSXText",
          "text": "{quiz.questions?.length || 0} cÃ¢u há»i",
          "index": 18024
        },
        {
          "kind": "JSXText",
          "text": "CÃ³ yÃªu cáº§u chá»‰nh sá»­a",
          "index": 18989
        },
        {
          "kind": "JSXText",
          "text": "ðŸ‘ï¸ {quiz.views || 0} lÆ°á»£t xem",
          "index": 19335
        },
        {
          "kind": "JSXText",
          "text": "ðŸŽ¯ {quiz.attempts || 0} lÆ°á»£t thá»­",
          "index": 19404
        },
        {
          "kind": "JSXText",
          "text": "âœ… {quiz.completions || 0} hoÃ n thÃ nh",
          "index": 19475
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“Š {quiz.averageScore}% Ä‘iá»ƒm TB",
          "index": 19617
        },
        {
          "kind": "JSXText",
          "text": "navigate(`/quiz/${quiz.id}/preview`)}\r\n                            className=\"text-blue-600 hover:text-blue-900 p-1\"\r\n                            title=\"Xem trÆ°á»›c\"\r\n                          >",
          "index": 20309
        },
        {
          "kind": "JSXText",
          "text": "{\r\n                                // Handle delete\r\n                                if (window.confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a quiz nÃ y?')) {\r\n                                  // Delete logic here\r\n                                }\r\n                              }}\r\n                              className=\"text-red-600 hover:text-red-900 p-1\"\r\n                              title={t(\"action.clear\")}\r\n                            >",
          "index": 21145
        },
        {
          "kind": "JSXText",
          "text": "YÃªu cáº§u chá»‰nh sá»­a quiz",
          "index": 22317
        },
        {
          "kind": "JSXText",
          "text": "LÃ½ do chá»‰nh sá»­a *",
          "index": 22709
        },
        {
          "kind": "JSXText",
          "text": "setEditReason(e.target.value)}\r\n                    placeholder=\"Vui lÃ²ng mÃ´ táº£ lÃ½ do báº¡n muá»‘n chá»‰nh sá»­a quiz nÃ y...\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                    rows={4}\r\n                  />",
          "index": 22883
        },
        {
          "kind": "JSXText",
          "text": "âš ï¸ Quiz Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t. YÃªu cáº§u chá»‰nh sá»­a sáº½ Ä‘Æ°á»£c gá»­i tá»›i admin Ä‘á»ƒ xÃ©t duyá»‡t. \r\n                    Sau khi Ä‘Æ°á»£c phÃ©p chá»‰nh sá»­a, báº¡n cáº§n gá»­i láº¡i Ä‘á»ƒ admin duyá»‡t ná»™i dung má»›i.",
          "index": 23386
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n                  Gá»­i yÃªu cáº§u",
          "index": 24683
        },
        {
          "kind": "StringLiteral",
          "text": "YÃªu cáº§u chá»‰nh sá»­a Ä‘Ã£ Ä‘Æ°á»£c gá»­i, chá» admin phÃª duyá»‡t",
          "index": 4833
        },
        {
          "kind": "StringLiteral",
          "text": "Chá» duyá»‡t",
          "index": 5772
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ duyá»‡t",
          "index": 5802
        },
        {
          "kind": "StringLiteral",
          "text": "Bá»‹ tá»« chá»‘i",
          "index": 5831
        },
        {
          "kind": "StringLiteral",
          "text": "Báº£n nhÃ¡p",
          "index": 5859
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸŸ¢ Dá»…",
          "index": 6418
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸŸ¡ Trung bÃ¬nh",
          "index": 6442
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ”´ KhÃ³",
          "index": 6472
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ yÃªu cáº§u chá»‰nh sá»­a Ä‘ang chá» duyá»‡t",
          "index": 6977
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t, cáº§n xin phÃ©p admin Ä‘á»ƒ chá»‰nh sá»­a",
          "index": 7175
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y quiz phÃ¹ há»£p vá»›i bá»™ lá»c",
          "index": 15446
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n chÆ°a táº¡o quiz nÃ o. HÃ£y táº¡o quiz Ä‘áº§u tiÃªn!",
          "index": 15508
        },
        {
          "kind": "StringLiteral",
          "text": "Xem trÆ°á»›c",
          "index": 20463
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a quiz nÃ y?",
          "index": 21251
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng mÃ´ táº£ lÃ½ do báº¡n muá»‘n chá»‰nh sá»­a quiz nÃ y...",
          "index": 22949
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\EditQuizPageAdvanced.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "([]);\r\n\r\n  useEffect(() => {\r\n    if (id) loadQuiz();\r\n  }, [id]);\r\n\r\n  const loadQuiz = async () => {\r\n    if (!id) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const quizData = await getQuizById(id);\r\n      if (quizData) {\r\n        setQuiz(quizData);\r\n        setQuizInfo({\r\n          title: quizData.title || '',\r\n          description: quizData.description || '',\r\n          category: quizData.category || '',\r\n          difficulty: quizData.difficulty || 'medium',\r\n          status: quizData.status || 'pending',\r\n          timeLimit: quizData.duration || 30,\r\n          passingScore: 70,\r\n          tags: quizData.tags || [],\r\n          isPublished: quizData.isPublished || false\r\n        });\r\n        setQuestions(quizData.questions || []);\r\n      } else {\r\n        toast.error('Quiz not found');\r\n        navigate('/admin/stats-test');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading quiz:', error);\r\n      toast.error('Failed to load quiz');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!id || !quiz) return;\r\n\r\n    if (!quizInfo.title.trim()) {\r\n      toast.error('Quiz title is required');\r\n      return;\r\n    }\r\n\r\n    if (questions.length === 0) {\r\n      toast.error('Quiz must have at least one question');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const updatedQuiz: Quiz = {\r\n        ...quiz,\r\n        ...quizInfo,\r\n        duration: quizInfo.timeLimit,\r\n        questions,\r\n        updatedAt: new Date()\r\n      };\r\n\r\n      // âœ… HANDLE RESUBMISSION AFTER EDIT APPROVAL\r\n      if (quiz.needsReApproval) {\r\n        // Quiz was edited after admin approval, resubmit for approval\r\n        updatedQuiz.status = 'pending';\r\n        updatedQuiz.canEdit = false;\r\n        updatedQuiz.isApproved = false;\r\n        updatedQuiz.needsReApproval = false;\r\n        updatedQuiz.resubmittedAt = new Date();\r\n        \r\n        // Create notification for admin about resubmission\r\n        await addDoc(collection(db, 'notifications'), {\r\n          userId: 'admin', // Or get actual admin IDs\r\n          type: 'quiz_resubmitted',\r\n          title: 'Quiz Ä‘Ã£ Ä‘Æ°á»£c sá»­a vÃ  ná»™p láº¡i',\r\n          message: `Quiz \"${updatedQuiz.title}\" Ä‘Ã£ Ä‘Æ°á»£c creator sá»­a xong vÃ  ná»™p láº¡i Ä‘á»ƒ admin duyá»‡t.`,\r\n          quizId: id,\r\n          createdBy: user?.uid,\r\n          createdByName: user?.displayName || user?.email,\r\n          createdAt: serverTimestamp(),\r\n          read: false\r\n        });\r\n        \r\n        toast.success('âœ… Quiz Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t vÃ  ná»™p láº¡i Ä‘á»ƒ admin duyá»‡t!');\r\n      } else {\r\n        toast.success('âœ… Quiz updated successfully!');\r\n      }\r\n\r\n      await updateQuiz(id, updatedQuiz);\r\n      navigate('/admin/stats-test');\r\n    } catch (error) {\r\n      console.error('Error updating quiz:', error);\r\n      toast.error('Failed to update quiz');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const addQuestion = () => {\r\n    const newQuestion: Question = {\r\n      id: `q_${Date.now()}`,\r\n      text: '',\r\n      type: 'multiple',\r\n      answers: [\r\n        { id: 'a1', text: '', isCorrect: true },\r\n        { id: 'a2', text: '', isCorrect: false },\r\n        { id: 'a3', text: '', isCorrect: false },\r\n        { id: 'a4', text: '', isCorrect: false }\r\n      ],\r\n      explanation: '',\r\n      points: 10,\r\n      difficulty: 'medium'\r\n    };\r\n    setQuestions([...questions, newQuestion]);\r\n    setEditingQuestionId(newQuestion.id);\r\n  };\r\n\r\n  const deleteQuestion = (questionId: string) => {\r\n    if (window.confirm('Are you sure you want to delete this question?')) {\r\n      setQuestions(questions.filter(q => q.id !== questionId));\r\n      if (editingQuestionId === questionId) {\r\n        setEditingQuestionId(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const updateQuestion = (questionId: string, updatedQuestion: Partial",
          "index": 2467
        },
        {
          "kind": "JSXText",
          "text": "Chá»‰nh sá»­a thÃ´ng tin quiz cá»§a báº¡n",
          "index": 11602
        },
        {
          "kind": "JSXText",
          "text": "MÃ´ táº£ quiz *",
          "index": 12739
        },
        {
          "kind": "JSXText",
          "text": "Thá»i gian (phÃºt)",
          "index": 15617
        },
        {
          "kind": "JSXText",
          "text": "â³ Chá» duyá»‡t",
          "index": 16890
        },
        {
          "kind": "JSXText",
          "text": "âœ… ÄÃ£ duyá»‡t",
          "index": 16961
        },
        {
          "kind": "JSXText",
          "text": "âŒ Tá»« chá»‘i",
          "index": 17031
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»•ng há»£p",
          "index": 839
        },
        {
          "kind": "StringLiteral",
          "text": "Khoa há»c",
          "index": 883
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»‹ch sá»­",
          "index": 927
        },
        {
          "kind": "StringLiteral",
          "text": "Äá»‹a lÃ½",
          "index": 972
        },
        {
          "kind": "StringLiteral",
          "text": "VÄƒn há»c",
          "index": 1017
        },
        {
          "kind": "StringLiteral",
          "text": "ToÃ¡n há»c",
          "index": 1057
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ´ng nghá»‡",
          "index": 1104
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»ƒ thao",
          "index": 1148
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i trÃ­",
          "index": 1198
        },
        {
          "kind": "StringLiteral",
          "text": "áº¨m thá»±c",
          "index": 1239
        },
        {
          "kind": "StringLiteral",
          "text": "Dá»…",
          "index": 1308
        },
        {
          "kind": "StringLiteral",
          "text": "Trung bÃ¬nh",
          "index": 1383
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ³",
          "index": 1466
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz Ä‘Ã£ Ä‘Æ°á»£c sá»­a vÃ  ná»™p láº¡i",
          "index": 4623
        },
        {
          "kind": "StringLiteral",
          "text": "âœ… Quiz Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t vÃ  ná»™p láº¡i Ä‘á»ƒ admin duyá»‡t!",
          "index": 4983
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ´ táº£ ngáº¯n gá»n vá» ná»™i dung quiz...",
          "index": 13040
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\EditQuizPage.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    category: '',\r\n    difficulty: 'medium' as 'easy' | 'medium' | 'hard',\r\n    status: 'pending' as 'pending' | 'approved' | 'rejected' | 'draft'\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      loadQuiz();\r\n    }\r\n  }, [id]);\r\n\r\n  const loadQuiz = async () => {\r\n    if (!id) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const quizData = await getQuizById(id);\r\n      if (quizData) {\r\n        setQuiz(quizData);\r\n        setFormData({\r\n          title: quizData.title || '',\r\n          description: quizData.description || '',\r\n          category: quizData.category || '',\r\n          difficulty: quizData.difficulty || 'medium',\r\n          status: quizData.status || 'pending'\r\n        });\r\n      } else {\r\n        toast.error('KhÃ´ng tÃ¬m tháº¥y quiz nÃ y');\r\n        navigate('/admin');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading quiz:', error);\r\n      toast.error('Lá»—i khi táº£i quiz');\r\n      navigate('/admin');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!id || !quiz) return;\r\n\r\n    setSaving(true);\r\n    try {\r\n      const updatedQuiz = {\r\n        ...quiz,\r\n        ...formData,\r\n        updatedAt: new Date()\r\n      };\r\n\r\n      await updateQuiz(id, updatedQuiz);\r\n      toast.success('Cáº­p nháº­t quiz thÃ nh cÃ´ng!');\r\n      navigate('/admin');\r\n    } catch (error) {\r\n      console.error('Error updating quiz:', error);\r\n      toast.error('Lá»—i khi cáº­p nháº­t quiz');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field: string, value: string) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  if (loading) {\r\n    return (",
          "index": 576
        },
        {
          "kind": "JSXText",
          "text": "Äang táº£i quiz...",
          "index": 2814
        },
        {
          "kind": "JSXText",
          "text": "Quay láº¡i Admin",
          "index": 3613
        },
        {
          "kind": "JSXText",
          "text": "âœï¸ Chá»‰nh sá»­a Quiz",
          "index": 3805
        },
        {
          "kind": "JSXText",
          "text": "TiÃªu Ä‘á» Quiz",
          "index": 4311
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n                {saving ? 'Äang lÆ°u...' : 'LÆ°u thay Ä‘á»•i'}",
          "index": 8198
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“Š ThÃ´ng tin Quiz",
          "index": 8521
        },
        {
          "kind": "JSXText",
          "text": "Sá»‘ cÃ¢u há»i:",
          "index": 8709
        },
        {
          "kind": "JSXText",
          "text": "NgÆ°á»i táº¡o:",
          "index": 8929
        },
        {
          "kind": "JSXText",
          "text": "NgÃ y táº¡o:",
          "index": 9144
        },
        {
          "kind": "JSXText",
          "text": "Láº§n sá»­a cuá»‘i:",
          "index": 9446
        },
        {
          "kind": "JSXText",
          "text": "{quiz.updatedAt ? new Date(quiz.updatedAt).toLocaleDateString('vi-VN') : 'ChÆ°a sá»­a'}",
          "index": 9519
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y quiz nÃ y",
          "index": 1509
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi táº£i quiz",
          "index": 1669
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº­p nháº­t quiz thÃ nh cÃ´ng!",
          "index": 2097
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi cáº­p nháº­t quiz",
          "index": 2249
        },
        {
          "kind": "StringLiteral",
          "text": "Äang lÆ°u...",
          "index": 8247
        },
        {
          "kind": "StringLiteral",
          "text": "LÆ°u thay Ä‘á»•i",
          "index": 8263
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a sá»­a",
          "index": 9611
        }
      ]
    },
    {
      "file": "features\\quiz\\components\\ReviewList.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ");\r\n  };\r\n\r\n  const getRatingText = (rating: number) => {\r\n    switch (rating) {\r\n      case 1: return 'Ráº¥t tá»‡';\r\n      case 2: return 'Tá»‡';\r\n      case 3: return 'BÃ¬nh thÆ°á»ng';\r\n      case 4: return 'Tá»‘t';\r\n      case 5: return 'Ráº¥t tá»‘t';\r\n      default: return '';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (",
          "index": 1492
        },
        {
          "kind": "JSXText",
          "text": "ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o",
          "index": 2877
        },
        {
          "kind": "JSXText",
          "text": "HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡ quiz nÃ y!",
          "index": 2941
        },
        {
          "kind": "JSXText",
          "text": "toggleExpanded(review.id)}\r\n                    className=\"mt-2 text-blue-600 hover:text-blue-700 text-sm font-medium\"\r\n                  >\r\n                    {isExpanded ? 'Thu gá»n' : 'Xem thÃªm'}",
          "index": 5655
        },
        {
          "kind": "JSXText",
          "text": "Há»¯u Ã­ch ({review.helpful?.length || 0})",
          "index": 6433
        },
        {
          "kind": "JSXText",
          "text": "BÃ¡o cÃ¡o",
          "index": 6822
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ£ chá»‰nh sá»­a {formatDate(review.updatedAt)}",
          "index": 7024
        },
        {
          "kind": "StringLiteral",
          "text": "Ráº¥t tá»‡",
          "index": 1602
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»‡",
          "index": 1634
        },
        {
          "kind": "StringLiteral",
          "text": "BÃ¬nh thÆ°á»ng",
          "index": 1662
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»‘t",
          "index": 1699
        },
        {
          "kind": "StringLiteral",
          "text": "Ráº¥t tá»‘t",
          "index": 1728
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng áº©n danh",
          "index": 4322
        },
        {
          "kind": "StringLiteral",
          "text": "Thu gá»n",
          "index": 5832
        },
        {
          "kind": "StringLiteral",
          "text": "Xem thÃªm",
          "index": 5844
        }
      ]
    },
    {
      "file": "features\\quiz\\components\\ReviewForm.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({\r\n  quizId,\r\n  onReviewSubmitted,\r\n  onClose,\r\n  existingReview\r\n}) => {\n  const { t } = useTranslation();\n\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const [rating, setRating] = useState(existingReview?.rating || 0);\r\n  const [comment, setComment] = useState(existingReview?.comment || '');\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!user) {\r\n      toast.error('Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ Ä‘Ã¡nh giÃ¡');\r\n      return;\r\n    }\r\n\r\n    if (rating === 0) {\r\n      toast.error('Vui lÃ²ng chá»n sá»‘ sao');\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      if (existingReview) {\r\n        // Update existing review\r\n        await reviewService.updateReview(existingReview.id, {\r\n          rating,\r\n          comment\r\n        });\r\n        toast.success('Cáº­p nháº­t Ä‘Ã¡nh giÃ¡ thÃ nh cÃ´ng!');\r\n      } else {\r\n        // Create new review\r\n        await reviewService.createReview({\r\n          quizId,\r\n          rating,\r\n          comment\r\n        }, user.uid, user.displayName || user.email || '');\r\n        toast.success('Gá»­i Ä‘Ã¡nh giÃ¡ thÃ nh cÃ´ng!');\r\n      }\r\n      \r\n      onReviewSubmitted();\r\n    } catch (error) {\r\n      console.error('Error submitting review:', error);\r\n      toast.error('CÃ³ lá»—i khi gá»­i Ä‘Ã¡nh giÃ¡');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (",
          "index": 574
        },
        {
          "kind": "JSXText",
          "text": "{existingReview ? 'Chá»‰nh sá»­a Ä‘Ã¡nh giÃ¡' : 'Viáº¿t Ä‘Ã¡nh giÃ¡'}",
          "index": 2374
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡nh giÃ¡ cá»§a báº¡n",
          "index": 2906
        },
        {
          "kind": "JSXText",
          "text": "{rating === 1 && 'Ráº¥t khÃ´ng hÃ i lÃ²ng'}\r\n                  {rating === 2 && 'KhÃ´ng hÃ i lÃ²ng'}\r\n                  {rating === 3 && 'BÃ¬nh thÆ°á»ng'}\r\n                  {rating === 4 && 'HÃ i lÃ²ng'}\r\n                  {rating === 5 && 'Ráº¥t hÃ i lÃ²ng'}",
          "index": 3844
        },
        {
          "kind": "JSXText",
          "text": "Nháº­n xÃ©t (tÃ¹y chá»n)",
          "index": 4297
        },
        {
          "kind": "JSXText",
          "text": "setComment(e.target.value)}\r\n                rows={4}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                placeholder=\"Chia sáº» tráº£i nghiá»‡m cá»§a báº¡n vá» quiz nÃ y...\"\r\n                maxLength={500}\r\n              />",
          "index": 4450
        },
        {
          "kind": "JSXText",
          "text": "{comment.length}/500 kÃ½ tá»±",
          "index": 4837
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cáº§n Ä‘Äƒng nháº­p Ä‘á»ƒ Ä‘Ã¡nh giÃ¡",
          "index": 1081
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng chá»n sá»‘ sao",
          "index": 1183
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº­p nháº­t Ä‘Ã¡nh giÃ¡ thÃ nh cÃ´ng!",
          "index": 1470
        },
        {
          "kind": "StringLiteral",
          "text": "Gá»­i Ä‘Ã¡nh giÃ¡ thÃ nh cÃ´ng!",
          "index": 1735
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i khi gá»­i Ä‘Ã¡nh giÃ¡",
          "index": 1908
        },
        {
          "kind": "StringLiteral",
          "text": "Chá»‰nh sá»­a Ä‘Ã¡nh giÃ¡",
          "index": 2409
        },
        {
          "kind": "StringLiteral",
          "text": "Viáº¿t Ä‘Ã¡nh giÃ¡",
          "index": 2432
        },
        {
          "kind": "StringLiteral",
          "text": "Ráº¥t khÃ´ng hÃ i lÃ²ng",
          "index": 3882
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng hÃ i lÃ²ng",
          "index": 3940
        },
        {
          "kind": "StringLiteral",
          "text": "BÃ¬nh thÆ°á»ng",
          "index": 3994
        },
        {
          "kind": "StringLiteral",
          "text": "HÃ i lÃ²ng",
          "index": 4045
        },
        {
          "kind": "StringLiteral",
          "text": "Ráº¥t hÃ i lÃ²ng",
          "index": 4093
        },
        {
          "kind": "StringLiteral",
          "text": "Chia sáº» tráº£i nghiá»‡m cá»§a báº¡n vá» quiz nÃ y...",
          "index": 4685
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº­p nháº­t",
          "index": 6000
        },
        {
          "kind": "StringLiteral",
          "text": "Gá»­i Ä‘Ã¡nh giÃ¡",
          "index": 6013
        }
      ]
    },
    {
      "file": "features\\quiz\\components\\QuizStats.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Tiáº¿n Ä‘á»™",
          "index": 3288
        },
        {
          "kind": "JSXText",
          "text": "{totalQuizzes > 0 ? Math.round(totalPlayers / totalQuizzes) : 0} trung bÃ¬nh/quiz",
          "index": 4456
        },
        {
          "kind": "JSXText",
          "text": "Cháº¥t lÆ°á»£ng tá»‘t",
          "index": 5667
        },
        {
          "kind": "JSXText",
          "text": "PhÃ¢n bá»‘ Ä‘á»™ khÃ³",
          "index": 5922
        },
        {
          "kind": "JSXText",
          "text": "Danh má»¥c phá»• biáº¿n",
          "index": 8520
        },
        {
          "kind": "JSXText",
          "text": "ChÆ°a cÃ³ dá»¯ liá»‡u danh má»¥c",
          "index": 9674
        }
      ]
    },
    {
      "file": "features\\quiz\\components\\QuizFilters.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{d === 'easy' ? 'ðŸ˜Š Dá»…' : d === 'medium' ? 'ðŸ˜ Trung bÃ¬nh' : 'ðŸ˜¤ KhÃ³'}",
          "index": 4299
        },
        {
          "kind": "JSXText",
          "text": "ðŸ”¥ Phá»• biáº¿n nháº¥t",
          "index": 5127
        },
        {
          "kind": "JSXText",
          "text": "ðŸ”¢ Theo sá»‘ cÃ¢u há»i",
          "index": 5277
        },
        {
          "kind": "JSXText",
          "text": "â±ï¸ Theo thá»i lÆ°á»£ng",
          "index": 5345
        },
        {
          "kind": "JSXText",
          "text": "Sá»‘ cÃ¢u há»i tá»‘i thiá»ƒu: {filters.minQuestions}",
          "index": 5519
        },
        {
          "kind": "JSXText",
          "text": "Thá»i lÆ°á»£ng tá»‘i Ä‘a: {filters.maxDuration} phÃºt",
          "index": 6007
        },
        {
          "kind": "StringLiteral",
          "text": "áº¨n",
          "index": 2445
        },
        {
          "kind": "StringLiteral",
          "text": "Hiá»‡n",
          "index": 2452
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ” TÃ¬m kiáº¿m quiz...",
          "index": 3103
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ˜Š Dá»…",
          "index": 4330
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ˜ Trung bÃ¬nh",
          "index": 4357
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ˜¤ KhÃ³",
          "index": 4375
        }
      ]
    },
    {
      "file": "features\\quiz\\components\\QuizCard.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ quiz, viewMode = 'grid' }) => {\r\n  // **THÃŠM Má»šI**: Helper functions\r\n  const getDifficultyColor = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'bg-green-100 text-green-800 border-green-200';\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\r\n      case 'hard': return 'bg-red-100 text-red-800 border-red-200';\r\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const formatDuration = (minutes: number) => {\r\n    if (minutes",
          "index": 683
        },
        {
          "kind": "JSXText",
          "text": "(null);\r\n\r\n  // Fetch review stats\r\n  useEffect(() => {\r\n    const fetchReviewStats = async () => {\r\n      try {\r\n        const stats = await reviewService.getQuizReviewStats(quiz.id);\r\n        setReviewStats(stats);\r\n      } catch (error) {\r\n        console.error('Error fetching review stats:', error);\r\n      }\r\n    };\r\n    \r\n    fetchReviewStats();\r\n  }, [quiz.id]);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    const checkFavorite = async () => {\r\n      const favRef = doc(db, 'user_favorites', user.uid);\r\n      const favSnap = await getDoc(favRef);\r\n      if (favSnap.exists()) {\r\n        const data = favSnap.data();\r\n        setIsFavorite(Array.isArray(data.quizIds) && data.quizIds.includes(quiz.id));\r\n      } else {\r\n        setIsFavorite(false);\r\n      }\r\n    };\r\n    checkFavorite();\r\n  }, [user, quiz.id]);\r\n\r\n  const handleToggleFavorite = async (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n    setFavLoading(true);\r\n    const favRef = doc(db, 'user_favorites', user.uid);\r\n    try {\r\n      const favSnap = await getDoc(favRef);\r\n      if (favSnap.exists()) {\r\n        await updateDoc(favRef, {\r\n          quizIds: isFavorite ? arrayRemove(quiz.id) : arrayUnion(quiz.id)\r\n        });\r\n      } else {\r\n        await setDoc(favRef, {\r\n          quizIds: [quiz.id]\r\n        });\r\n      }\r\n      setIsFavorite(!isFavorite);\r\n      toast.success(isFavorite ? 'ÄÃ£ bá» yÃªu thÃ­ch quiz!' : 'ÄÃ£ thÃªm vÃ o yÃªu thÃ­ch!');\r\n      // Náº¿u Ä‘ang á»Ÿ trang Favorites, refetch láº¡i\r\n      if (window.location.pathname.startsWith('/favorites')) {\r\n        window.location.reload();\r\n      }\r\n    } catch (err) {\r\n      toast.error('Lá»—i khi cáº­p nháº­t yÃªu thÃ­ch!');\r\n    } finally {\r\n      setFavLoading(false);\r\n    }\r\n  };\r\n\r\n  // **THÃŠM Má»šI**: Render list view\r\n  if (viewMode === 'list') {\r\n    return (",
          "index": 2647
        },
        {
          "kind": "JSXText",
          "text": "âœ“ HoÃ n thÃ nh",
          "index": 5868
        },
        {
          "kind": "JSXText",
          "text": "{quiz.questions.length} cÃ¢u há»i",
          "index": 7066
        },
        {
          "kind": "JSXText",
          "text": "{quiz.totalPlayers} lÆ°á»£t chÆ¡i",
          "index": 7666
        },
        {
          "kind": "JSXText",
          "text": "console.log('Quiz card clicked:', quiz.id, quiz.title)}\r\n            >\r\n              {quiz.isCompleted ? 'ChÆ¡i láº¡i' : 'Xem chi tiáº¿t'}",
          "index": 10362
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Image Header */}",
          "index": 10853
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Overlay badges */}",
          "index": 11993
        },
        {
          "kind": "JSXText",
          "text": "{quiz.difficulty === 'easy' ? 'ðŸŸ¢ Dá»…' : quiz.difficulty === 'medium' ? 'ðŸŸ¡ Trung bÃ¬nh' : 'ðŸ”´ KhÃ³'}",
          "index": 12268
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“¢ CÃ´ng khai",
          "index": 12562
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Favorite button in overlay */}",
          "index": 12641
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Quiz metadata */}",
          "index": 15165
        },
        {
          "kind": "JSXText",
          "text": "{/* **THÃŠM Má»šI**: Completion status */}\r\n        {quiz.isCompleted && (",
          "index": 17292
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ£ hoÃ n thÃ nh: {quiz.score}%",
          "index": 17839
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n\r\n        {/* **THÃŠM Má»šI**: Tags */}\r\n        {quiz.tags && quiz.tags.length > 0 && (",
          "index": 17892
        },
        {
          "kind": "JSXText",
          "text": "console.log('Quiz card clicked:', quiz.id, quiz.title)}\r\n          >\r\n            {quiz.isCompleted ? 'ðŸ”„ ChÆ¡i láº¡i' : 'ðŸš€ Báº¯t Ä‘áº§u'}",
          "index": 19085
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ bá» yÃªu thÃ­ch quiz!",
          "index": 4056
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ thÃªm vÃ o yÃªu thÃ­ch!",
          "index": 4082
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi cáº­p nháº­t yÃªu thÃ­ch!",
          "index": 4307
        },
        {
          "kind": "StringLiteral",
          "text": "Bá» yÃªu thÃ­ch",
          "index": 9120
        },
        {
          "kind": "StringLiteral",
          "text": "YÃªu thÃ­ch quiz nÃ y",
          "index": 9137
        },
        {
          "kind": "StringLiteral",
          "text": "Xem Ä‘Ã¡nh giÃ¡",
          "index": 9990
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ¡i láº¡i",
          "index": 10470
        },
        {
          "kind": "StringLiteral",
          "text": "Xem chi tiáº¿t",
          "index": 10483
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸŸ¢ Dá»…",
          "index": 12313
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸŸ¡ Trung bÃ¬nh",
          "index": 12354
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ”´ KhÃ³",
          "index": 12372
        },
        {
          "kind": "StringLiteral",
          "text": "Bá» yÃªu thÃ­ch",
          "index": 13142
        },
        {
          "kind": "StringLiteral",
          "text": "YÃªu thÃ­ch quiz nÃ y",
          "index": 13159
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ”„ ChÆ¡i láº¡i",
          "index": 19189
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸš€ Báº¯t Ä‘áº§u",
          "index": 19205
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ¡i cÃ¹ng báº¡n bÃ¨",
          "index": 19578
        },
        {
          "kind": "StringLiteral",
          "text": "Xem Ä‘Ã¡nh giÃ¡",
          "index": 20287
        }
      ]
    },
    {
      "file": "features\\quiz\\api\\user.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    // Simple test query\r\n    const testQuery = query(\r\n      collection(db, QUIZZES_COLLECTION),\r\n      limit(1)\r\n    );\r\n    await getDocs(testQuery);\r\n    console.log('âœ… Firestore connection successful');\r\n    return true;\r\n  } catch (error: any) {\r\n    console.error('âŒ Firestore connection failed:', error);\r\n    \r\n    if (error.code === 'unavailable' || error.message?.includes('ERR_BLOCKED_BY_CLIENT')) {\r\n      console.error('ðŸš« Firestore bá»‹ cháº·n bá»Ÿi ad blocker hoáº·c network. Vui lÃ²ng:');\r\n      console.error('   1. Táº¯t ad blocker cho localhost');\r\n      console.error('   2. ThÃªm *.googleapis.com vÃ o whitelist');\r\n      console.error('   3. Thá»­ cháº¿ Ä‘á»™ Incognito');\r\n    }\r\n    \r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Get quizzes for USER role - can see published quizzes only\r\n */\r\nexport const getUserQuizzes = async (\r\n  filters?: QuizFilters, \r\n  pageSize = 20, \r\n  lastDoc?: DocumentSnapshot\r\n): Promise",
          "index": 1273
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    // Check Firestore connection first\r\n    const isConnected = await checkFirestoreConnection();\r\n    if (!isConnected) {\r\n      throw new Error('KhÃ´ng thá»ƒ káº¿t ná»‘i Firestore. Vui lÃ²ng táº¯t ad blocker hoáº·c thá»­ cháº¿ Ä‘á»™ Incognito.');\r\n    }\r\n\r\n    console.log('ðŸ” [USER] Fetching published quizzes for regular user');\r\n    \r\n    let q = query(collection(db, QUIZZES_COLLECTION));\r\n    q = query(q, orderBy('createdAt', 'desc'), limit(pageSize || 50));\r\n\r\n    if (lastDoc) {\r\n      q = query(q, startAfter(lastDoc));\r\n    }\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    const allQuizzes: Quiz[] = [];\r\n    let lastDocument: DocumentSnapshot | null = null;\r\n\r\n    console.log('ðŸ“ [USER] Found', querySnapshot.size, 'quiz documents');\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const quizData = doc.data();\r\n      const convertedData = convertTimestamps(quizData);\r\n      allQuizzes.push({\r\n        id: doc.id,\r\n        ...convertedData,\r\n      } as Quiz);\r\n      lastDocument = doc;\r\n    });\r\n\r\n    // Filter quizzes for regular user:\r\n    // Only approved AND published quizzes\r\n    const filteredQuizzes = allQuizzes.filter(quiz => {\r\n      const isApproved = quiz.status === 'approved';\r\n      const isPublished = quiz.isPublished === true;\r\n      \r\n      if (isApproved && isPublished) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n\r\n    console.log('âœ… [USER] Filtered quizzes:', {\r\n      total: allQuizzes.length,\r\n      userVisible: filteredQuizzes.length,\r\n      publishedQuizzes: filteredQuizzes.length\r\n    });\r\n\r\n    // Apply client-side filters\r\n    const finalQuizzes = applyQuizFilters(filteredQuizzes, filters);\r\n\r\n    console.log('âœ… [USER] Returning', finalQuizzes.length, 'quizzes after filters');\r\n\r\n    return {\r\n      quizzes: finalQuizzes,\r\n      lastDoc: lastDocument,\r\n      hasMore: querySnapshot.size === pageSize,\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ [USER] Error fetching quizzes:', error);\r\n    throw new Error('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Get quizzes for anonymous (not logged in) users\r\n */\r\nexport const getAnonymousQuizzes = async (\r\n  filters?: QuizFilters, \r\n  pageSize = 20, \r\n  lastDoc?: DocumentSnapshot\r\n): Promise",
          "index": 2291
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸš« Firestore bá»‹ cháº·n bá»Ÿi ad blocker hoáº·c network. Vui lÃ²ng:",
          "index": 1723
        },
        {
          "kind": "StringLiteral",
          "text": "   1. Táº¯t ad blocker cho localhost",
          "index": 1808
        },
        {
          "kind": "StringLiteral",
          "text": "   2. ThÃªm *.googleapis.com vÃ o whitelist",
          "index": 1868
        },
        {
          "kind": "StringLiteral",
          "text": "   3. Thá»­ cháº¿ Ä‘á»™ Incognito",
          "index": 1935
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Firestore. Vui lÃ²ng táº¯t ad blocker hoáº·c thá»­ cháº¿ Ä‘á»™ Incognito.",
          "index": 2455
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz",
          "index": 4301
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Firestore. Vui lÃ²ng táº¯t ad blocker hoáº·c thá»­ cháº¿ Ä‘á»™ Incognito.",
          "index": 4785
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz",
          "index": 6804
        }
      ]
    },
    {
      "file": "features\\quiz\\api\\shared.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    const q = query(\r\n      collection(db, QUIZ_RESULTS_COLLECTION),\r\n      where('userId', '==', userId),\r\n      orderBy('completedAt', 'desc')\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    const results: QuizResult[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const data = doc.data();\r\n      console.log('ðŸ” Raw Firestore data for result:', doc.id, data);\r\n      \r\n      let result = {\r\n        id: doc.id,\r\n        ...data,\r\n        completedAt: data.completedAt?.toDate\r\n          ? data.completedAt.toDate().toISOString()\r\n          : (data.completedAt instanceof Date\r\n              ? data.completedAt.toISOString()\r\n              : typeof data.completedAt === 'string'\r\n                ? data.completedAt\r\n                : ''),\r\n      } as any;\r\n\r\n      // Validate and fix score data for legacy results\r\n      const hasValidCorrectAnswers = typeof result.correctAnswers === 'number';\r\n      const hasValidTotalQuestions = typeof result.totalQuestions === 'number' && result.totalQuestions > 0;\r\n      const hasValidScore = typeof result.score === 'number' && !isNaN(result.score);\r\n\r\n      // If missing critical fields but has answers, compute them\r\n      if ((!hasValidCorrectAnswers || !hasValidTotalQuestions) && Array.isArray(result.answers) && result.answers.length > 0) {\r\n        const computedCorrect = result.answers.filter((a: any) => a && a.isCorrect === true).length;\r\n        const computedTotal = result.answers.length;\r\n        \r\n        if (!hasValidCorrectAnswers) {\r\n          result.correctAnswers = computedCorrect;\r\n        }\r\n        if (!hasValidTotalQuestions) {\r\n          result.totalQuestions = computedTotal;\r\n        }\r\n        \r\n        // Recompute score if missing or zero\r\n        if (!hasValidScore || result.score === 0) {\r\n          result.score = result.totalQuestions > 0 ? Math.round((result.correctAnswers / result.totalQuestions) * 100) : 0;\r\n        }\r\n        \r\n        console.log('ðŸ› ï¸ Hydrated legacy result:', { \r\n          id: result.id, \r\n          correctAnswers: result.correctAnswers, \r\n          totalQuestions: result.totalQuestions, \r\n          score: result.score,\r\n          computedFromAnswers: true\r\n        });\r\n      }\r\n\r\n      results.push(result as QuizResult);\r\n    });\r\n\r\n    return results;\r\n  } catch (error) {\r\n    console.error('Error fetching user quiz results:', error);\r\n    throw new Error('KhÃ´ng thá»ƒ táº£i káº¿t quáº£ quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Get quiz categories (from existing quizzes)\r\n */\r\nexport const getQuizCategories = async (): Promise",
          "index": 405
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    // This would require aggregation queries or a separate collection\r\n    // For now, we'll get recent quizzes as a placeholder\r\n    const q = query(\r\n      collection(db, QUIZZES_COLLECTION),\r\n      where('isPublished', '==', true),\r\n      orderBy('createdAt', 'desc'),\r\n      limit(limitCount)\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    const quizzes: Quiz[] = [];\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      quizzes.push({ id: doc.id, ...doc.data() } as Quiz);\r\n    });\r\n\r\n    return quizzes;\r\n  } catch (error) {\r\n    console.error('Error fetching popular quizzes:', error);\r\n    throw new Error('KhÃ´ng thá»ƒ táº£i quiz phá»• biáº¿n');\r\n  }\r\n};\r\n\r\n/**\r\n * Search quizzes by title or description\r\n */\r\nexport const searchQuizzes = async (searchTerm: string, limitCount = 20): Promise",
          "index": 3583
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i káº¿t quáº£ quiz",
          "index": 2818
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i quiz phá»• biáº¿n",
          "index": 4222
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ tÃ¬m kiáº¿m quiz",
          "index": 5317
        }
      ]
    },
    {
      "file": "features\\quiz\\api\\creator.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    console.log('ðŸ” [CREATOR] Fetching quizzes for creator:', userId);\r\n    \r\n    let q = query(collection(db, QUIZZES_COLLECTION));\r\n    q = query(q, orderBy('createdAt', 'desc'), limit(pageSize || 50));\r\n\r\n    if (lastDoc) {\r\n      q = query(q, startAfter(lastDoc));\r\n    }\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    const allQuizzes: Quiz[] = [];\r\n    let lastDocument: DocumentSnapshot | null = null;\r\n\r\n    console.log('ðŸ“ [CREATOR] Found', querySnapshot.size, 'quiz documents');\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const quizData = doc.data();\r\n      const convertedData = convertTimestamps(quizData);\r\n      allQuizzes.push({ id: doc.id, ...convertedData } as Quiz);\r\n      lastDocument = doc;\r\n    });\r\n\r\n    // Filter quizzes for creator:\r\n    // 1. Own quizzes (regardless of status)\r\n    // 2. Other's approved and published quizzes\r\n    const filteredQuizzes = allQuizzes.filter(quiz => {\r\n      // Own quiz - always show\r\n      if (quiz.createdBy === userId) {\r\n        console.log('ðŸ“ [CREATOR] Own quiz:', quiz.title, 'Status:', quiz.status);\r\n        return true;\r\n      }\r\n      \r\n      // Other's quiz - must be approved and published\r\n      if (quiz.status === 'approved' && quiz.isPublished === true) {\r\n        console.log('ðŸ“ [CREATOR] Approved quiz:', quiz.title);\r\n        return true;\r\n      }\r\n      \r\n      console.log('ðŸ“ [CREATOR] Filtered out quiz:', quiz.title, 'Status:', quiz.status, 'Published:', quiz.isPublished);\r\n      return false;\r\n    });\r\n\r\n    console.log('âœ… [CREATOR] Filtered quizzes:', {\r\n      total: allQuizzes.length,\r\n      creatorVisible: filteredQuizzes.length,\r\n      ownQuizzes: filteredQuizzes.filter(q => q.createdBy === userId).length,\r\n      approvedQuizzes: filteredQuizzes.filter(q => q.createdBy !== userId).length\r\n    });\r\n\r\n    // Apply client-side filters\r\n    const finalQuizzes = applyQuizFilters(filteredQuizzes, filters);\r\n\r\n    console.log('âœ… [CREATOR] Returning', finalQuizzes.length, 'quizzes after filters');\r\n\r\n    return {\r\n      quizzes: finalQuizzes,\r\n      lastDoc: lastDocument,\r\n      hasMore: querySnapshot.size === pageSize,\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ [CREATOR] Error fetching quizzes:', error);\r\n    throw new Error('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Get quizzes created by a specific creator\r\n */\r\nexport const getCreatorOwnQuizzes = async (userId: string): Promise",
          "index": 1492
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz",
          "index": 3752
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i quiz cá»§a ngÆ°á»i dÃ¹ng",
          "index": 4792
        }
      ]
    },
    {
      "file": "features\\quiz\\api\\base.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= {\r\n      ...quizData,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    };\r\n\r\n    const docRef = await addDoc(collection(db, QUIZZES_COLLECTION), quiz);\r\n    toast.success('Táº¡o quiz thÃ nh cÃ´ng!');\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('Error creating quiz:', error);\r\n    toast.error('KhÃ´ng thá»ƒ táº¡o quiz');\r\n    throw new Error('KhÃ´ng thá»ƒ táº¡o quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Update an existing quiz\r\n */\r\nexport const updateQuiz = async (quizId: string, updates: Partial",
          "index": 1714
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    const quizRef = doc(db, QUIZZES_COLLECTION, quizId);\r\n    await updateDoc(quizRef, {\r\n      ...updates,\r\n      updatedAt: new Date(),\r\n    });\r\n    toast.success('Cáº­p nháº­t quiz thÃ nh cÃ´ng!');\r\n  } catch (error) {\r\n    console.error('Error updating quiz:', error);\r\n    toast.error('KhÃ´ng thá»ƒ cáº­p nháº­t quiz');\r\n    throw new Error('KhÃ´ng thá»ƒ cáº­p nháº­t quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Delete a quiz\r\n */\r\nexport const deleteQuiz = async (quizId: string): Promise",
          "index": 2245
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    await deleteDoc(doc(db, QUIZZES_COLLECTION, quizId));\r\n    toast.success('XÃ³a quiz thÃ nh cÃ´ng!');\r\n  } catch (error) {\r\n    console.error('Error deleting quiz:', error);\r\n    toast.error('KhÃ´ng thá»ƒ xÃ³a quiz');\r\n    throw new Error('KhÃ´ng thá»ƒ xÃ³a quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Get quiz by ID\r\n */\r\nexport const getQuizById = async (quizId: string): Promise",
          "index": 2726
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    const quizDoc = await getDoc(doc(db, QUIZZES_COLLECTION, quizId));\r\n    if (quizDoc.exists()) {\r\n      const data = quizDoc.data();\r\n      const convertedData = convertTimestamps(data);\r\n      return {\r\n        id: quizDoc.id,\r\n        ...convertedData,\r\n      } as Quiz;\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Error fetching quiz:', error);\r\n    throw new Error('KhÃ´ng thá»ƒ táº£i quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Submit quiz result\r\n */\r\nexport const submitQuizResult = async (result: Omit",
          "index": 3112
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  console.log('ðŸ” [submitQuizResult] Input data:', result);\r\n  \r\n  // Enhanced validation for all required fields\r\n  const requiredFields = ['userId', 'quizId', 'score', 'correctAnswers', 'totalQuestions', 'answers', 'completedAt'];\r\n  const missingFields = requiredFields.filter(field => {\r\n    const value = (result as any)[field];\r\n    if (field === 'answers') return !Array.isArray(value);\r\n    if (field === 'completedAt') return !value;\r\n    if (['score', 'correctAnswers', 'totalQuestions'].includes(field)) {\r\n      return typeof value !== 'number' || isNaN(value);\r\n    }\r\n    return !value;\r\n  });\r\n\r\n  if (missingFields.length > 0) {\r\n    console.error('âŒ [submitQuizResult] Missing required fields:', missingFields, result);\r\n    throw new Error(`Thiáº¿u trÆ°á»ng báº¯t buá»™c: ${missingFields.join(', ')}`);\r\n  }\r\n\r\n  // Validate score range\r\n  if (result.score",
          "index": 3677
        },
        {
          "kind": "JSXText",
          "text": "100) {\r\n    console.error('âŒ [submitQuizResult] Invalid score range:', result.score);\r\n    throw new Error('Äiá»ƒm sá»‘ pháº£i trong khoáº£ng 0-100');\r\n  }\r\n\r\n  // Validate correctAnswers vs totalQuestions\r\n  if (result.correctAnswers > result.totalQuestions) {\r\n    console.error('âŒ [submitQuizResult] correctAnswers > totalQuestions:', { \r\n      correctAnswers: result.correctAnswers, \r\n      totalQuestions: result.totalQuestions \r\n    });\r\n    throw new Error('Sá»‘ cÃ¢u Ä‘Ãºng khÃ´ng thá»ƒ lá»›n hÆ¡n tá»•ng sá»‘ cÃ¢u');\r\n  }\r\n\r\n  // Validate answers array has isCorrect field\r\n  const answersWithoutCorrect = result.answers.filter(a => typeof a.isCorrect !== 'boolean');\r\n  if (answersWithoutCorrect.length > 0) {\r\n    console.warn('âš ï¸ [submitQuizResult] Some answers missing isCorrect field:', answersWithoutCorrect.length);\r\n  }\r\n  \r\n  console.log('âœ… [submitQuizResult] All validations passed, saving to Firestore...');\r\n  console.log('ðŸ“Š [submitQuizResult] Final data to save:', {\r\n    userId: result.userId,\r\n    quizId: result.quizId,\r\n    score: result.score,\r\n    correctAnswers: result.correctAnswers,\r\n    totalQuestions: result.totalQuestions,\r\n    answersCount: result.answers.length,\r\n    answersWithCorrect: result.answers.filter(a => a.isCorrect).length\r\n  });\r\n  \r\n  try {\r\n    const docRef = await addDoc(collection(db, QUIZ_RESULTS_COLLECTION), result);\r\n    console.log('âœ… [submitQuizResult] Successfully saved with ID:', docRef.id);\r\n    toast.success('Ná»™p bÃ i thÃ nh cÃ´ng!');\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('âŒ [submitQuizResult] Firestore error:', error);\r\n    console.error('âŒ [submitQuizResult] Data that failed to save:', result);\r\n    toast.error('KhÃ´ng thá»ƒ lÆ°u káº¿t quáº£ quiz');\r\n    throw new Error('KhÃ´ng thá»ƒ lÆ°u káº¿t quáº£ quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Get quiz results for a specific quiz\r\n */\r\nexport const getQuizResults = async (quizId: string): Promise",
          "index": 4572
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡o quiz thÃ nh cÃ´ng!",
          "index": 1905
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº¡o quiz",
          "index": 2042
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº¡o quiz",
          "index": 2086
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº­p nháº­t quiz thÃ nh cÃ´ng!",
          "index": 2428
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ cáº­p nháº­t quiz",
          "index": 2547
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ cáº­p nháº­t quiz",
          "index": 2596
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ³a quiz thÃ nh cÃ´ng!",
          "index": 2820
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ xÃ³a quiz",
          "index": 2934
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ xÃ³a quiz",
          "index": 2978
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i quiz",
          "index": 3523
        },
        {
          "kind": "StringLiteral",
          "text": "Äiá»ƒm sá»‘ pháº£i trong khoáº£ng 0-100",
          "index": 4681
        },
        {
          "kind": "StringLiteral",
          "text": "Sá»‘ cÃ¢u Ä‘Ãºng khÃ´ng thá»ƒ lá»›n hÆ¡n tá»•ng sá»‘ cÃ¢u",
          "index": 5030
        },
        {
          "kind": "StringLiteral",
          "text": "Ná»™p bÃ i thÃ nh cÃ´ng!",
          "index": 6027
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ lÆ°u káº¿t quáº£ quiz",
          "index": 6258
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ lÆ°u káº¿t quáº£ quiz",
          "index": 6310
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i káº¿t quáº£ quiz",
          "index": 8065
        }
      ]
    },
    {
      "file": "features\\quiz\\api\\admin.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    console.log('ðŸ” [ADMIN] Fetching ALL quizzes from Firestore...');\r\n    \r\n    let q = query(collection(db, QUIZZES_COLLECTION));\r\n    q = query(q, orderBy('createdAt', 'desc'), limit(pageSize || 50));\r\n\r\n    if (lastDoc) {\r\n      q = query(q, startAfter(lastDoc));\r\n    }\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    const quizzes: Quiz[] = [];\r\n    let lastDocument: DocumentSnapshot | null = null;\r\n\r\n    console.log('ðŸ“ [ADMIN] Found', querySnapshot.size, 'quiz documents');\r\n\r\n    querySnapshot.forEach((doc) => {\r\n      const quizData = doc.data();\r\n      const convertedData = convertTimestamps(quizData);\r\n      console.log('ðŸ“ [ADMIN] Quiz data:', doc.id, {\r\n        title: convertedData.title,\r\n        status: convertedData.status,\r\n        isPublished: convertedData.isPublished,\r\n        createdBy: convertedData.createdBy\r\n      });\r\n      quizzes.push({\r\n        id: doc.id,\r\n        ...convertedData,\r\n      } as Quiz);\r\n      lastDocument = doc;\r\n    });\r\n\r\n    console.log('âœ… [ADMIN] Total quizzes before filtering:', quizzes.length);\r\n\r\n    // Admin sees ALL quizzes - no role-based filtering\r\n    let filteredQuizzes = quizzes;\r\n\r\n    // Apply client-side filters only\r\n    filteredQuizzes = applyQuizFilters(filteredQuizzes, filters);\r\n\r\n    console.log('âœ… [ADMIN] Returning', filteredQuizzes.length, 'filtered quizzes');\r\n\r\n    return {\r\n      quizzes: filteredQuizzes,\r\n      lastDoc: lastDocument,\r\n      hasMore: querySnapshot.size === pageSize,\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ [ADMIN] Error fetching quizzes:', error);\r\n    throw new Error('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz');\r\n  }\r\n};\r\n\r\n/**\r\n * Get quizzes created by a specific user (Admin function)\r\n */\r\nexport const getUserQuizzesAdmin = async (userId: string): Promise",
          "index": 1537
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz",
          "index": 3148
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i quiz cá»§a ngÆ°á»i dÃ¹ng",
          "index": 4077
        }
      ]
    },
    {
      "file": "features\\multiplayer\\components\\MultiplayerTestComponent.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "navigate('/multiplayer')}\r\n              className=\"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors\"\r\n            >\r\n              Xem phÃ²ng",
          "index": 1036
        },
        {
          "kind": "JSXText",
          "text": "alert('HÆ°á»›ng dáº«n multiplayer:\\n1. Táº¡o hoáº·c tham gia phÃ²ng\\n2. Chá» host báº¯t Ä‘áº§u\\n3. Tráº£ lá»i cÃ¢u há»i nhanh Ä‘á»ƒ Ä‘Æ°á»£c Ä‘iá»ƒm cao\\n4. Xem káº¿t quáº£ cuá»‘i game')}\r\n            >\r\n              Xem hÆ°á»›ng dáº«n",
          "index": 2383
        },
        {
          "kind": "StringLiteral",
          "text": "HÆ°á»›ng dáº«n multiplayer:\\n1. Táº¡o hoáº·c tham gia phÃ²ng\\n2. Chá» host báº¯t Ä‘áº§u\\n3. Tráº£ lá»i cÃ¢u há»i nhanh Ä‘á»ƒ Ä‘Æ°á»£c Ä‘iá»ƒm cao\\n4. Xem káº¿t quáº£ cuá»‘i game",
          "index": 2391
        }
      ]
    },
    {
      "file": "features\\multiplayer\\components\\CreateRoomModal.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "2 ngÆ°á»i",
          "index": 3356
        },
        {
          "kind": "JSXText",
          "text": "4 ngÆ°á»i",
          "index": 3406
        },
        {
          "kind": "JSXText",
          "text": "6 ngÆ°á»i",
          "index": 3456
        },
        {
          "kind": "JSXText",
          "text": "8 ngÆ°á»i",
          "index": 3506
        },
        {
          "kind": "JSXText",
          "text": "10 ngÆ°á»i",
          "index": 3557
        },
        {
          "kind": "JSXText",
          "text": "15 giÃ¢y",
          "index": 4177
        },
        {
          "kind": "JSXText",
          "text": "20 giÃ¢y",
          "index": 4228
        },
        {
          "kind": "JSXText",
          "text": "30 giÃ¢y",
          "index": 4279
        },
        {
          "kind": "JSXText",
          "text": "45 giÃ¢y",
          "index": 4330
        },
        {
          "kind": "JSXText",
          "text": "60 giÃ¢y",
          "index": 4381
        },
        {
          "kind": "JSXText",
          "text": "{selectedQuiz.questions?.length || 0} cÃ¢u há»i",
          "index": 7099
        }
      ]
    },
    {
      "file": "features\\admin\\pages\\StatsDashboard.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Thá»‘ng kÃª Admin",
          "index": 740
        },
        {
          "kind": "JSXText",
          "text": "â† Vá» Admin Dashboard",
          "index": 1060
        },
        {
          "kind": "JSXText",
          "text": "ThÃ nh cÃ´ng! Báº¡n Ä‘ang xem trang thá»‘ng kÃª vá»›i biá»ƒu Ä‘á»“",
          "index": 1545
        },
        {
          "kind": "JSXText",
          "text": "Trang nÃ y hiá»ƒn thá»‹:",
          "index": 1709
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“Š Biá»ƒu Ä‘á»“ cá»™t - Danh má»¥c phá»• biáº¿n",
          "index": 1813
        },
        {
          "kind": "JSXText",
          "text": "ðŸ¥§ Biá»ƒu Ä‘á»“ trÃ²n - Tá»· lá»‡ quiz Ä‘Ã£ duyá»‡t/chá» duyá»‡t",
          "index": 1874
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“ˆ 8 Cards thá»‘ng kÃª chi tiáº¿t",
          "index": 1948
        },
        {
          "kind": "JSXText",
          "text": "ðŸŽ¯ Dá»¯ liá»‡u máº«u Ä‘á»ƒ demo",
          "index": 2003
        }
      ]
    },
    {
      "file": "features\\admin\\pages\\CreatorManagement.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [showCreatorModal, setShowCreatorModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadCreators();\r\n    loadStats();\r\n  }, []);\r\n\r\n  const loadCreators = async () => {\r\n    setLoading(true);\r\n    try {\r\n      console.log('Loading creators...');\r\n      \r\n      // Load users with creator role\r\n      const usersQuery = query(\r\n        collection(db, 'users'),\r\n        where('role', 'in', ['creator', 'admin']),\r\n        orderBy('createdAt', 'desc')\r\n      );\r\n      \r\n      const usersSnapshot = await getDocs(usersQuery);\r\n      console.log('Found users:', usersSnapshot.docs.length);\r\n      const loadedCreators: Creator[] = [];\r\n\r\n      for (const userDoc of usersSnapshot.docs) {\r\n        const userData = userDoc.data();\r\n        \r\n        try {\r\n          // Count quizzes created by this user\r\n          const quizzesQuery = query(\r\n            collection(db, 'quizzes'),\r\n            where('createdBy', '==', userDoc.id)\r\n          );\r\n          const quizzesSnapshot = await getCountFromServer(quizzesQuery);\r\n          const quizCount = quizzesSnapshot.data().count;\r\n\r\n          // Get quiz IDs for this creator\r\n          const quizIds = await getQuizIdsByCreator(userDoc.id);\r\n          \r\n          // Count total plays (quiz results) - only if there are quizzes\r\n          let totalPlays = 0;\r\n          if (quizIds.length > 0) {\r\n            const resultsQuery = query(\r\n              collection(db, 'quizResults'),\r\n              where('quizId', 'in', quizIds.slice(0, 10)) // Limit to avoid Firestore 'in' constraint\r\n            );\r\n            const resultsSnapshot = await getCountFromServer(resultsQuery);\r\n            totalPlays = resultsSnapshot.data().count;\r\n          }\r\n\r\n          loadedCreators.push({\r\n            id: userDoc.id,\r\n            displayName: userData.displayName || userData.email || 'NgÆ°á»i dÃ¹ng',\r\n            email: userData.email || '',\r\n            role: userData.role || 'creator',\r\n            isActive: userData.isActive !== false,\r\n            createdAt: userData.createdAt?.toDate() || new Date(),\r\n            lastLoginAt: userData.lastLoginAt?.toDate(),\r\n            quizCount,\r\n            totalPlays,\r\n            avgRating: 4.2 + Math.random() * 0.8, // Mock rating\r\n            status: userData.status || 'active',\r\n            permissions: userData.permissions || {\r\n              canCreateQuiz: true,\r\n              canEditOwnQuiz: true,\r\n              canDeleteOwnQuiz: true,\r\n              canViewAnalytics: true\r\n            }\r\n          });\r\n        } catch (userError) {\r\n          console.warn(`Error loading data for user ${userDoc.id}:`, userError);\r\n          // Add user with minimal data if there's an error\r\n          loadedCreators.push({\r\n            id: userDoc.id,\r\n            displayName: userData.displayName || userData.email || 'NgÆ°á»i dÃ¹ng',\r\n            email: userData.email || '',\r\n            role: userData.role || 'creator',\r\n            isActive: userData.isActive !== false,\r\n            createdAt: userData.createdAt?.toDate() || new Date(),\r\n            lastLoginAt: userData.lastLoginAt?.toDate(),\r\n            quizCount: 0,\r\n            totalPlays: 0,\r\n            avgRating: 0,\r\n            status: userData.status || 'active',\r\n            permissions: userData.permissions || {\r\n              canCreateQuiz: true,\r\n              canEditOwnQuiz: true,\r\n              canDeleteOwnQuiz: true,\r\n              canViewAnalytics: true\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      console.log('Loaded creators:', loadedCreators.length);\r\n      setCreators(loadedCreators);\r\n      \r\n      // Show empty state if no real creators found\r\n      if (loadedCreators.length === 0) {\r\n        console.log('No real creators found');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading creators:', error);\r\n      toast.error('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch creator');\r\n      setCreators([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getQuizIdsByCreator = async (creatorId: string): Promise",
          "index": 1803
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n    try {\r\n      const quizzesQuery = query(\r\n        collection(db, 'quizzes'),\r\n        where('createdBy', '==', creatorId)\r\n      );\r\n      const snapshot = await getDocs(quizzesQuery);\r\n      return snapshot.docs.map(doc => doc.id);\r\n    } catch (error) {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const loadStats = async () => {\r\n    try {\r\n      const usersQuery = query(\r\n        collection(db, 'users'),\r\n        where('role', 'in', ['creator', 'admin'])\r\n      );\r\n      const usersSnapshot = await getDocs(usersQuery);\r\n      \r\n      const allCreators = usersSnapshot.docs.map(doc => doc.data());\r\n      const totalCreators = allCreators.length;\r\n      const activeCreators = allCreators.filter(u => u.status !== 'banned' && u.status !== 'suspended').length;\r\n      const suspendedCreators = allCreators.filter(u => u.status === 'suspended').length;\r\n      const bannedCreators = allCreators.filter(u => u.status === 'banned').length;\r\n\r\n      // Count total quizzes\r\n      const quizzesSnapshot = await getCountFromServer(collection(db, 'quizzes'));\r\n      const totalQuizzes = quizzesSnapshot.data().count;\r\n\r\n      setStats({\r\n        totalCreators,\r\n        activeCreators,\r\n        suspendedCreators,\r\n        bannedCreators,\r\n        totalQuizzes,\r\n        thisMonth: Math.floor(totalQuizzes * 0.3) // Mock this month data\r\n      });\r\n    } catch (error) {\r\n      console.error('Error loading stats:', error);\r\n      // Set empty stats on error\r\n      setStats({\r\n        totalCreators: 0,\r\n        activeCreators: 0,\r\n        suspendedCreators: 0,\r\n        bannedCreators: 0,\r\n        totalQuizzes: 0,\r\n        thisMonth: 0\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (creatorId: string, newStatus: 'active' | 'suspended' | 'banned') => {\r\n    try {\r\n      await updateDoc(doc(db, 'users', creatorId), {\r\n        status: newStatus,\r\n        isActive: newStatus === 'active'\r\n      });\r\n\r\n      setCreators(creators.map(creator =>\r\n        creator.id === creatorId\r\n          ? { ...creator, status: newStatus, isActive: newStatus === 'active' }\r\n          : creator\r\n      ));\r\n\r\n      toast.success(`ÄÃ£ cáº­p nháº­t tráº¡ng thÃ¡i thÃ nh cÃ´ng`);\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      toast.error('CÃ³ lá»—i khi cáº­p nháº­t tráº¡ng thÃ¡i');\r\n    }\r\n  };\r\n\r\n  const handleDeleteCreator = async (creatorId: string) => {\r\n    if (!confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a creator nÃ y? HÃ nh Ä‘á»™ng nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c.')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteDoc(doc(db, 'users', creatorId));\r\n      setCreators(creators.filter(creator => creator.id !== creatorId));\r\n      toast.success('ÄÃ£ xÃ³a creator thÃ nh cÃ´ng');\r\n    } catch (error) {\r\n      console.error('Error deleting creator:', error);\r\n      toast.error('CÃ³ lá»—i khi xÃ³a creator');\r\n    }\r\n  };\r\n\r\n  const filteredCreators = creators.filter(creator => {\r\n    const matchesSearch = creator.displayName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         creator.email.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = statusFilter === 'all' || creator.status === statusFilter;\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const renderStatsCard = (icon: React.ReactNode, title: string, value: number, color: string) => (",
          "index": 5851
        },
        {
          "kind": "JSXText",
          "text": ");\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const styles = {\r\n      active: 'bg-green-100 text-green-800',\r\n      suspended: 'bg-yellow-100 text-yellow-800',\r\n      banned: 'bg-red-100 text-red-800'\r\n    };\r\n\r\n    const labels = {\r\n      active: 'Hoáº¡t Ä‘á»™ng',\r\n      suspended: 'Táº¡m khÃ³a',\r\n      banned: 'Bá»‹ cáº¥m'\r\n    };\r\n\r\n    return (",
          "index": 9602
        },
        {
          "kind": "JSXText",
          "text": "Báº¡n cáº§n quyá»n admin Ä‘á»ƒ truy cáº­p trang nÃ y",
          "index": 10535
        },
        {
          "kind": "JSXText",
          "text": "Quáº£n lÃ½ Creator",
          "index": 10870
        },
        {
          "kind": "JSXText",
          "text": "Quáº£n lÃ½ vÃ  theo dÃµi hoáº¡t Ä‘á»™ng cá»§a cÃ¡c creator",
          "index": 10936
        },
        {
          "kind": "JSXText",
          "text": ",\r\n              'Tá»•ng Creator',\r\n              stats.totalCreators,\r\n              'bg-blue-500'\r\n            )}\r\n            {renderStatsCard(",
          "index": 11227
        },
        {
          "kind": "JSXText",
          "text": ",\r\n              'Äang hoáº¡t Ä‘á»™ng',\r\n              stats.activeCreators,\r\n              'bg-green-500'\r\n            )}\r\n            {renderStatsCard(",
          "index": 11431
        },
        {
          "kind": "JSXText",
          "text": ",\r\n              'Táº¡m khÃ³a',\r\n              stats.suspendedCreators,\r\n              'bg-yellow-500'\r\n            )}\r\n            {renderStatsCard(",
          "index": 11639
        },
        {
          "kind": "JSXText",
          "text": ",\r\n              'Bá»‹ cáº¥m',\r\n              stats.bannedCreators,\r\n              'bg-red-500'\r\n            )}",
          "index": 11841
        },
        {
          "kind": "JSXText",
          "text": "Táº¥t cáº£ tráº¡ng thÃ¡i",
          "index": 13151
        },
        {
          "kind": "JSXText",
          "text": "Táº¡m khÃ³a",
          "index": 13298
        },
        {
          "kind": "JSXText",
          "text": "Bá»‹ cáº¥m",
          "index": 13356
        },
        {
          "kind": "JSXText",
          "text": "Hiá»ƒn thá»‹ {filteredCreators.length} trong tá»•ng {creators.length} creator",
          "index": 13471
        },
        {
          "kind": "JSXText",
          "text": "Äang táº£i danh sÃ¡ch creator...",
          "index": 13973
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng cÃ³ creator nÃ o",
          "index": 14267
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng tÃ¬m tháº¥y creator phÃ¹ há»£p vá»›i bá»™ lá»c",
          "index": 14337
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡nh giÃ¡",
          "index": 15401
        },
        {
          "kind": "JSXText",
          "text": "Hoáº¡t Ä‘á»™ng cuá»‘i",
          "index": 15577
        },
        {
          "kind": "JSXText",
          "text": ") : (\r\n                          'ChÆ°a Ä‘Äƒng nháº­p'\r\n                        )}",
          "index": 18682
        },
        {
          "kind": "JSXText",
          "text": "Chi tiáº¿t Creator",
          "index": 21331
        },
        {
          "kind": "JSXText",
          "text": "setShowCreatorModal(false)}\r\n                    className=\"text-gray-400 hover:text-gray-600\"\r\n                  >\r\n                    Ã—",
          "index": 21457
        },
        {
          "kind": "JSXText",
          "text": "Quiz Ä‘Ã£ táº¡o",
          "index": 23084
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡nh giÃ¡ TB",
          "index": 23847
        },
        {
          "kind": "JSXText",
          "text": "Quyá»n háº¡n",
          "index": 24012
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o quiz",
          "index": 24216
        },
        {
          "kind": "JSXText",
          "text": "{selectedCreator.permissions.canCreateQuiz ? 'CÃ³' : 'KhÃ´ng'}",
          "index": 24522
        },
        {
          "kind": "JSXText",
          "text": "{selectedCreator.permissions.canEditOwnQuiz ? 'CÃ³' : 'KhÃ´ng'}",
          "index": 25154
        },
        {
          "kind": "JSXText",
          "text": "XÃ³a quiz",
          "index": 25447
        },
        {
          "kind": "JSXText",
          "text": "{selectedCreator.permissions.canDeleteOwnQuiz ? 'CÃ³' : 'KhÃ´ng'}",
          "index": 25756
        },
        {
          "kind": "JSXText",
          "text": "{selectedCreator.permissions.canViewAnalytics ? 'CÃ³' : 'KhÃ´ng'}",
          "index": 26365
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng",
          "index": 3653
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng",
          "index": 4635
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i danh sÃ¡ch creator",
          "index": 5659
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i khi cáº­p nháº­t tráº¡ng thÃ¡i",
          "index": 8123
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a creator nÃ y? HÃ nh Ä‘á»™ng nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c.",
          "index": 8253
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ xÃ³a creator thÃ nh cÃ´ng",
          "index": 8515
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i khi xÃ³a creator",
          "index": 8643
        },
        {
          "kind": "StringLiteral",
          "text": "Hoáº¡t Ä‘á»™ng",
          "index": 9867
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡m khÃ³a",
          "index": 9898
        },
        {
          "kind": "StringLiteral",
          "text": "Bá»‹ cáº¥m",
          "index": 9925
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»•ng Creator",
          "index": 11245
        },
        {
          "kind": "StringLiteral",
          "text": "Äang hoáº¡t Ä‘á»™ng",
          "index": 11449
        },
        {
          "kind": "StringLiteral",
          "text": "Táº¡m khÃ³a",
          "index": 11657
        },
        {
          "kind": "StringLiteral",
          "text": "Bá»‹ cáº¥m",
          "index": 11859
        },
        {
          "kind": "StringLiteral",
          "text": "TÃ¬m kiáº¿m creator...",
          "index": 12509
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a Ä‘Äƒng nháº­p",
          "index": 18742
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³",
          "index": 24596
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng",
          "index": 24603
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³",
          "index": 25229
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng",
          "index": 25236
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³",
          "index": 25833
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng",
          "index": 25840
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³",
          "index": 26442
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng",
          "index": 26449
        }
      ]
    },
    {
      "file": "features\\admin\\pages\\CategoryManagement.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    icon: 'ðŸ“š',\r\n    color: 'blue'\r\n  });\r\n\r\n  const colors = [\r\n    { value: 'blue', label: t('categories.colors.blue'), class: 'bg-blue-500' },\r\n    { value: 'green', label: t('categories.colors.green'), class: 'bg-green-500' },\r\n    { value: 'purple', label: t('categories.colors.purple'), class: 'bg-purple-500' },\r\n    { value: 'red', label: t('categories.colors.red'), class: 'bg-red-500' },\r\n    { value: 'yellow', label: t('categories.colors.yellow'), class: 'bg-yellow-500' },\r\n    { value: 'pink', label: t('categories.colors.pink'), class: 'bg-pink-500' },\r\n    { value: 'indigo', label: t('categories.colors.indigo'), class: 'bg-indigo-500' },\r\n    { value: 'gray', label: t('categories.colors.gray'), class: 'bg-gray-500' }\r\n  ];\r\n\r\n  const icons = ['ðŸ“š', 'ðŸ”¬', 'ðŸ’»', 'ðŸŽ¨', 'ðŸ“Š', 'ðŸŒ', 'ðŸƒâ€â™‚ï¸', 'ðŸŽµ', 'ðŸ³', 'ðŸ“ˆ', 'ðŸ§®', 'ðŸ“'];\r\n\r\n  // Kiá»ƒm tra quyá»n admin\r\n  if (!user || user.role !== 'admin') {\r\n    return (",
          "index": 1206
        },
        {
          "kind": "JSXText",
          "text": ");\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadCategories();\r\n  }, []);\r\n\r\n  const loadCategories = async () => {\r\n    try {\r\n      setLoading(true);\r\n      console.log('ðŸ” Loading categories from Firebase...');\r\n      \r\n      // Initialize default categories if none exist\r\n      await initializeCategories();\r\n      \r\n      const categoriesRef = collection(db, 'categories');\r\n      const snapshot = await getDocs(categoriesRef);\r\n      \r\n      console.log('ðŸ“Š Found categories in DB:', snapshot.size);\r\n      const loadedCategories: Category[] = [];\r\n      \r\n      for (const doc of snapshot.docs) {\r\n        const data = doc.data();\r\n        console.log('ðŸ“ Category data:', { id: doc.id, ...data });\r\n        \r\n        // Äáº¿m sá»‘ quiz trong danh má»¥c nÃ y\r\n        const quizzesRef = collection(db, 'quizzes');\r\n        const quizzesSnapshot = await getDocs(query(quizzesRef, where('category', '==', data.name)));\r\n        \r\n        loadedCategories.push({\r\n          id: doc.id,\r\n          name: data.name,\r\n          description: data.description,\r\n          icon: data.icon,\r\n          color: data.color,\r\n          createdAt: data.createdAt?.toDate() || new Date(),\r\n          quizCount: quizzesSnapshot.size\r\n        });\r\n      }\r\n      \r\n      console.log('âœ… Loaded categories:', loadedCategories);\r\n      setCategories(loadedCategories.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime()));\r\n    } catch (error) {\r\n      console.error('âŒ Error loading categories:', error);\r\n      toast.error(t('categories.loadError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.name.trim()) {\r\n      toast.error(t('categories.enterName'));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (editingCategory) {\r\n        // Update existing category\r\n        const categoryRef = doc(db, 'categories', editingCategory.id);\r\n        await updateDoc(categoryRef, {\r\n          name: formData.name.trim(),\r\n          description: formData.description.trim(),\r\n          icon: formData.icon,\r\n          color: formData.color,\r\n          updatedAt: new Date()\r\n        });\r\n        \r\n        setCategories(prev => prev.map(cat => \r\n          cat.id === editingCategory.id \r\n            ? { ...cat, ...formData, name: formData.name.trim(), description: formData.description.trim() }\r\n            : cat\r\n        ));\r\n        \r\n        toast.success(t('categories.updateSuccess'));\r\n      } else {\r\n        // Add new category\r\n        const docRef = await addDoc(collection(db, 'categories'), {\r\n          name: formData.name.trim(),\r\n          description: formData.description.trim(),\r\n          icon: formData.icon,\r\n          color: formData.color,\r\n          createdAt: new Date()\r\n        });\r\n        \r\n        const newCategory: Category = {\r\n          id: docRef.id,\r\n          name: formData.name.trim(),\r\n          description: formData.description.trim(),\r\n          icon: formData.icon,\r\n          color: formData.color,\r\n          createdAt: new Date(),\r\n          quizCount: 0\r\n        };\r\n        \r\n        setCategories(prev => [newCategory, ...prev]);\r\n        toast.success(t('categories.addSuccess'));\r\n      }\r\n      \r\n      // Reset form\r\n      setFormData({ name: '', description: '', icon: 'ðŸ“š', color: 'blue' });\r\n      setShowAddForm(false);\r\n      setEditingCategory(null);\r\n    } catch (error) {\r\n      console.error('Error saving category:', error);\r\n      toast.error(t('categories.saveError'));\r\n    }\r\n  };\r\n\r\n  const handleEdit = (category: Category) => {\r\n    setEditingCategory(category);\r\n    setFormData({\r\n      name: category.name,\r\n      description: category.description,\r\n      icon: category.icon,\r\n      color: category.color\r\n    });\r\n    setShowAddForm(true);\r\n  };\r\n\r\n  const handleDelete = async (categoryId: string, categoryName: string) => {\r\n    if (!confirm(t('categories.confirmDeleteName', {name: categoryName, defaultValue: `Are you sure you want to delete category \"${categoryName}\"?`}))) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await deleteDoc(doc(db, 'categories', categoryId));\r\n      setCategories(prev => prev.filter(cat => cat.id !== categoryId));\r\n      toast.success(t('categories.deleteSuccess'));\r\n    } catch (error) {\r\n      console.error('Error deleting category:', error);\r\n      toast.error(t('categories.deleteError'));\r\n    }\r\n  };\r\n\r\n  const filteredCategories = categories.filter(category =>\r\n    category.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    category.description.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const getColorClass = (color: string) => {\r\n    const colorMap: { [key: string]: string } = {\r\n      blue: 'bg-blue-500',\r\n      green: 'bg-green-500',\r\n      purple: 'bg-purple-500',\r\n      red: 'bg-red-500',\r\n      yellow: 'bg-yellow-500',\r\n      pink: 'bg-pink-500',\r\n      indigo: 'bg-indigo-500',\r\n      gray: 'bg-gray-500'\r\n    };\r\n    return colorMap[color] || 'bg-blue-500';\r\n  };\r\n\r\n  if (loading) {\r\n    return (",
          "index": 2809
        }
      ]
    },
    {
      "file": "features\\admin\\pages\\AdminUserManagement.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "setConfirmModal({ open: true, type: 'roleChange', payload: { userId: userData.id, newRole: e.target.value }, message: `Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n Ä‘á»•i quyá»n cho ngÆ°á»i dÃ¹ng nÃ y thÃ nh ${e.target.value}?` })}\r\n                    disabled={userData.id === user?.uid}\r\n                    className=\"text-sm border border-gray-300 rounded px-2 py-1\"\r\n                  >",
          "index": 9452
        },
        {
          "kind": "JSXText",
          "text": "setConfirmModal({ open: true, type: 'toggleUserStatus', payload: { userId: userData.id, currentStatus: userData.isActive !== false }, message: userData.isActive !== false ? 'Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n khÃ³a tÃ i khoáº£n nÃ y?' : 'Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n kÃ­ch hoáº¡t tÃ i khoáº£n nÃ y?' })}\r\n                          className={`px-3 py-1 rounded text-xs ${userData.isActive !== false ? 'bg-red-600 text-white hover:bg-red-700' : 'bg-green-600 text-white hover:bg-green-700'}`}\r\n                          disabled={loading}\r\n                        >\r\n                          {userData.isActive !== false ? t('action.deactivate') : t('action.activate')}",
          "index": 11067
        },
        {
          "kind": "JSXText",
          "text": "{/* Modal xÃ¡c nháº­n thao tÃ¡c */}",
          "index": 12382
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n khÃ³a tÃ i khoáº£n nÃ y?",
          "index": 11242
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n kÃ­ch hoáº¡t tÃ i khoáº£n nÃ y?",
          "index": 11288
        }
      ]
    },
    {
      "file": "features\\admin\\pages\\AdminQuizManagement.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Helper function Ä‘á»ƒ xá»­ lÃ½ date tá»« Firestore\r\n  const parseFirestoreDate = (dateValue: any): Date => {\r\n    if (!dateValue) {\r\n      return new Date();\r\n    }\r\n    \r\n    // Náº¿u lÃ  Firestore Timestamp\r\n    if (dateValue && typeof dateValue.toDate === 'function') {\r\n      return dateValue.toDate();\r\n    }\r\n    \r\n    // Náº¿u lÃ  Date object\r\n    if (dateValue instanceof Date) {\r\n      return dateValue;\r\n    }\r\n    \r\n    // Náº¿u lÃ  string hoáº·c number\r\n    if (typeof dateValue === 'string' || typeof dateValue === 'number') {\r\n      const date = new Date(dateValue);\r\n      return isNaN(date.getTime()) ? new Date() : date;\r\n    }\r\n    \r\n    // Náº¿u lÃ  object cÃ³ seconds (Firestore server timestamp)\r\n    if (dateValue && typeof dateValue === 'object' && dateValue.seconds) {\r\n      return new Date(dateValue.seconds * 1000);\r\n    }\r\n    \r\n    // Fallback\r\n    console.warn('Unknown date format:', dateValue);\r\n    return new Date();\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadQuizzes();\r\n    loadEditRequests();\r\n  }, []);\r\n\r\n  const loadQuizzes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      console.log('ðŸ” Loading quizzes from Firestore...');\r\n      const q = query(collection(db, 'quizzes'), orderBy('createdAt', 'desc'));\r\n      const querySnapshot = await getDocs(q);\r\n      \r\n      console.log('ðŸ“Š Firestore response:', {\r\n        empty: querySnapshot.empty,\r\n        size: querySnapshot.size,\r\n        docs: querySnapshot.docs.length\r\n      });\r\n      \r\n      const loadedQuizzes: Quiz[] = [];\r\n      querySnapshot.forEach((doc) => {\r\n        const data = doc.data();\r\n        console.log('ðŸ“ Quiz data raw:', { \r\n          id: doc.id, \r\n          title: data.title, \r\n          status: data.status, \r\n          createdAt: data.createdAt,\r\n          createdAtType: typeof data.createdAt \r\n        });\r\n        \r\n        try {\r\n          loadedQuizzes.push({\r\n            id: doc.id,\r\n            title: data.title || 'Untitled Quiz',\r\n            description: data.description || '',\r\n            status: data.status || 'pending',\r\n            createdBy: data.createdBy || 'unknown',\r\n            createdAt: parseFirestoreDate(data.createdAt),\r\n            questions: data.questions || [],\r\n            difficulty: data.difficulty || 'easy',\r\n            category: data.category || 'general',\r\n            isPublic: data.isPublic || false,\r\n            isPublished: data.isPublished || false\r\n          });\r\n        } catch (error) {\r\n          console.error('Error parsing quiz:', doc.id, error);\r\n          // Skip invalid quiz\r\n        }\r\n      });\r\n      \r\n      console.log('âœ… Loaded quizzes:', loadedQuizzes.length);\r\n      setQuizzes(loadedQuizzes);\r\n      \r\n      // Náº¿u khÃ´ng cÃ³ quiz, hiá»ƒn thá»‹ empty state\r\n      if (loadedQuizzes.length === 0) {\r\n        console.log('âš ï¸ No quizzes found, showing empty state');\r\n        toast.info('ChÆ°a cÃ³ quiz nÃ o trong há»‡ thá»‘ng');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Error loading quizzes:', error);\r\n      setError('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz');\r\n      toast.error('KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz: ' + error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadEditRequests = async () => {\r\n    try {\r\n      console.log('ðŸ” Loading edit requests...');\r\n      \r\n      // First approach: Try with simple query and client-side filtering/sorting\r\n      const q = query(\r\n        collection(db, 'editRequests'),\r\n        where('status', '==', 'pending')\r\n      );\r\n      const querySnapshot = await getDocs(q);\r\n      \r\n      const loadedRequests: any[] = [];\r\n      querySnapshot.forEach((doc) => {\r\n        const data = doc.data();\r\n        loadedRequests.push({\r\n          id: doc.id,\r\n          ...data,\r\n          requestedAt: parseFirestoreDate(data.requestedAt)\r\n        });\r\n      });\r\n      \r\n      // Sort by requestedAt descending on client side\r\n      loadedRequests.sort((a, b) => {\r\n        const aTime = a.requestedAt ? new Date(a.requestedAt).getTime() : 0;\r\n        const bTime = b.requestedAt ? new Date(b.requestedAt).getTime() : 0;\r\n        return bTime - aTime;\r\n      });\r\n      \r\n      console.log('âœ… Loaded edit requests:', loadedRequests.length);\r\n      setEditRequests(loadedRequests);\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Error loading edit requests:', error);\r\n      \r\n      // Fallback: Load all edit requests and filter client-side\r\n      try {\r\n        console.log('ðŸ”„ Trying fallback approach...');\r\n        const fallbackQ = query(collection(db, 'editRequests'));\r\n        const fallbackSnapshot = await getDocs(fallbackQ);\r\n        \r\n        const allRequests: any[] = [];\r\n        fallbackSnapshot.forEach((doc) => {\r\n          const data = doc.data();\r\n          if (data.status === 'pending') {\r\n            allRequests.push({\r\n              id: doc.id,\r\n              ...data,\r\n              requestedAt: parseFirestoreDate(data.requestedAt)\r\n            });\r\n          }\r\n        });\r\n        \r\n        // Sort by requestedAt descending\r\n        allRequests.sort((a, b) => {\r\n          const aTime = a.requestedAt ? new Date(a.requestedAt).getTime() : 0;\r\n          const bTime = b.requestedAt ? new Date(b.requestedAt).getTime() : 0;\r\n          return bTime - aTime;\r\n        });\r\n        \r\n        console.log('âœ… Fallback loaded edit requests:', allRequests.length);\r\n        setEditRequests(allRequests);\r\n        \r\n      } catch (fallbackError) {\r\n        console.error('âŒ Fallback also failed:', fallbackError);\r\n        setEditRequests([]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEdit = (quizId: string) => {\r\n    navigate(`/admin/edit-quiz/${quizId}`);\r\n  };\r\n\r\n  const handlePreview = (quiz: Quiz) => {\r\n    setPreviewQuiz(quiz);\r\n    setShowPreview(true);\r\n  };\r\n\r\n  const handleApprove = async (quizId: string) => {\r\n    try {\r\n      const quizRef = doc(db, 'quizzes', quizId);\r\n      await updateDoc(quizRef, {\r\n        status: 'approved',\r\n        isPublished: true,\r\n        approvedAt: new Date(),\r\n        approvedBy: user?.uid\r\n      });\r\n      \r\n      setQuizzes(prev => prev.map(quiz => \r\n        quiz.id === quizId \r\n          ? { ...quiz, status: 'approved' as const, isPublished: true }\r\n          : quiz\r\n      ));\r\n      \r\n      toast.success('ÄÃ£ phÃª duyá»‡t quiz thÃ nh cÃ´ng!');\r\n    } catch (error) {\r\n      console.error('Error approving quiz:', error);\r\n      toast.error('KhÃ´ng thá»ƒ duyá»‡t quiz');\r\n    }\r\n  };\r\n\r\n  const handleReject = async (quizId: string) => {\r\n    try {\r\n      const quizRef = doc(db, 'quizzes', quizId);\r\n      await updateDoc(quizRef, {\r\n        status: 'rejected',\r\n        isPublished: false,\r\n        rejectedAt: new Date(),\r\n        rejectedBy: user?.uid\r\n      });\r\n      \r\n      setQuizzes(prev => prev.map(quiz => \r\n        quiz.id === quizId \r\n          ? { ...quiz, status: 'rejected' as const, isPublished: false }\r\n          : quiz\r\n      ));\r\n      \r\n      toast.success('ÄÃ£ tá»« chá»‘i quiz!');\r\n    } catch (error) {\r\n      console.error('Error rejecting quiz:', error);\r\n      toast.error('KhÃ´ng thá»ƒ tá»« chá»‘i quiz');\r\n    }\r\n  };\r\n\r\n  const handleApproveEditRequest = async (requestId: string, quizId: string) => {\r\n    try {\r\n      const editRequest = editRequests.find(req => req.id === requestId);\r\n      if (!editRequest) {\r\n        toast.error('KhÃ´ng tÃ¬m tháº¥y yÃªu cáº§u chá»‰nh sá»­a');\r\n        return;\r\n      }\r\n\r\n      // Update edit request status\r\n      const requestRef = doc(db, 'editRequests', requestId);\r\n      await updateDoc(requestRef, {\r\n        status: 'approved',\r\n        reviewedBy: user?.uid,\r\n        reviewedByName: user?.displayName || 'Admin',\r\n        reviewedAt: new Date()\r\n      });\r\n\r\n      // Gá»  QUIZ XUá»NG Äá»‚ Sá»¬A: Set quiz status to draft vÃ  allow edit\r\n      const quizRef = doc(db, 'quizzes', quizId);\r\n      await updateDoc(quizRef, {\r\n        status: 'draft', // Gá»¡ quiz xuá»‘ng draft Ä‘á»ƒ sá»­a\r\n        isApproved: false, // Bá» approved status\r\n        canEdit: true, // Cho phÃ©p creator edit\r\n        editRequestApproved: true,\r\n        lastEditRequestApproved: new Date(),\r\n        approvedBy: user?.uid,\r\n        needsReApproval: true // Flag Ä‘á»ƒ biáº¿t quiz nÃ y cáº§n Ä‘Æ°á»£c duyá»‡t láº¡i sau khi sá»­a\r\n      });\r\n\r\n      // Create notification for the creator\r\n      await addDoc(collection(db, 'notifications'), {\r\n        userId: editRequest.requestedBy,\r\n        type: 'edit_request_approved',\r\n        title: 'YÃªu cáº§u chá»‰nh sá»­a Ä‘Ã£ Ä‘Æ°á»£c phÃª duyá»‡t',\r\n        message: `YÃªu cáº§u chá»‰nh sá»­a quiz \"${editRequest.quizTitle}\" cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c admin phÃª duyá»‡t. Quiz Ä‘Ã£ Ä‘Æ°á»£c gá»¡ xuá»‘ng Ä‘á»ƒ báº¡n chá»‰nh sá»­a. Sau khi sá»­a xong, vui lÃ²ng ná»™p láº¡i Ä‘á»ƒ admin duyá»‡t.`,\r\n        quizId: quizId,\r\n        createdAt: serverTimestamp(),\r\n        read: false\r\n      });\r\n\r\n      // Remove from edit requests list\r\n      setEditRequests(prev => prev.filter(req => req.id !== requestId));\r\n      \r\n      toast.success(`ÄÃ£ phÃª duyá»‡t yÃªu cáº§u chá»‰nh sá»­a cá»§a ${editRequest.requestedByName || editRequest.requestedByEmail}!`);\r\n    } catch (error) {\r\n      console.error('Error approving edit request:', error);\r\n      toast.error('KhÃ´ng thá»ƒ phÃª duyá»‡t yÃªu cáº§u chá»‰nh sá»­a');\r\n    }\r\n  };\r\n\r\n  const handleRejectEditRequest = async (requestId: string) => {\r\n    try {\r\n      const editRequest = editRequests.find(req => req.id === requestId);\r\n      if (!editRequest) {\r\n        toast.error('KhÃ´ng tÃ¬m tháº¥y yÃªu cáº§u chá»‰nh sá»­a');\r\n        return;\r\n      }\r\n\r\n      const requestRef = doc(db, 'editRequests', requestId);\r\n      await updateDoc(requestRef, {\r\n        status: 'rejected',\r\n        reviewedBy: user?.uid,\r\n        reviewedByName: user?.displayName || 'Admin',\r\n        reviewedAt: new Date()\r\n      });\r\n\r\n      // Create notification for the creator\r\n      await addDoc(collection(db, 'notifications'), {\r\n        userId: editRequest.requestedBy,\r\n        type: 'edit_request_rejected', \r\n        title: 'YÃªu cáº§u chá»‰nh sá»­a Ä‘Ã£ bá»‹ tá»« chá»‘i',\r\n        message: `YÃªu cáº§u chá»‰nh sá»­a quiz \"${editRequest.quizTitle}\" cá»§a báº¡n Ä‘Ã£ bá»‹ admin tá»« chá»‘i. Vui lÃ²ng liÃªn há»‡ admin Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.`,\r\n        quizId: editRequest.quizId,\r\n        createdAt: serverTimestamp(),\r\n        read: false\r\n      });\r\n\r\n      // Remove from edit requests list\r\n      setEditRequests(prev => prev.filter(req => req.id !== requestId));\r\n      \r\n      toast.success(`ÄÃ£ tá»« chá»‘i yÃªu cáº§u chá»‰nh sá»­a cá»§a ${editRequest.requestedByName || editRequest.requestedByEmail}!`);\r\n    } catch (error) {\r\n      console.error('Error rejecting edit request:', error);\r\n      toast.error('KhÃ´ng thá»ƒ tá»« chá»‘i yÃªu cáº§u chá»‰nh sá»­a');\r\n    }\r\n  };\r\n\r\n  const handleReopen = async (quizId: string) => {\r\n    try {\r\n      const quizRef = doc(db, 'quizzes', quizId);\r\n      await updateDoc(quizRef, {\r\n        status: 'pending',\r\n        isPublished: false,\r\n        reopenedAt: new Date(),\r\n        reopenedBy: user?.uid\r\n      });\r\n      \r\n      setQuizzes(prev => prev.map(quiz => \r\n        quiz.id === quizId \r\n          ? { ...quiz, status: 'pending' as const, isPublished: false }\r\n          : quiz\r\n      ));\r\n      \r\n      toast.success('ÄÃ£ má»Ÿ láº¡i quiz Ä‘á»ƒ xem xÃ©t!');\r\n    } catch (error) {\r\n      console.error('Error reopening quiz:', error);\r\n      toast.error('KhÃ´ng thá»ƒ má»Ÿ láº¡i quiz');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (quizId: string) => {\r\n    if (!window.confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a quiz nÃ y khÃ´ng?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log('ðŸ—‘ï¸ Deleting quiz from database:', quizId);\r\n      await deleteDoc(doc(db, 'quizzes', quizId));\r\n      console.log('âœ… Quiz deleted from database successfully');\r\n      \r\n      setQuizzes(prev => prev.filter(quiz => quiz.id !== quizId));\r\n      toast.success('Quiz Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i database');\r\n    } catch (error) {\r\n      console.error('âŒ Error deleting quiz:', error);\r\n      toast.error('KhÃ´ng thá»ƒ xÃ³a quiz: ' + error);\r\n    }\r\n  };\r\n\r\n  const filteredQuizzes = quizzes.filter(quiz => {\r\n    const matchesFilter = filterStatus === 'all' || quiz.status === filterStatus;\r\n    const matchesSearch = quiz.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         quiz.description.toLowerCase().includes(searchTerm.toLowerCase());\r\n    return matchesFilter && matchesSearch;\r\n  });\r\n\r\n  const getStatusCounts = () => {\r\n    return {\r\n      all: quizzes.length,\r\n      pending: quizzes.filter(q => q.status === 'pending').length,\r\n      approved: quizzes.filter(q => q.status === 'approved').length,\r\n      rejected: quizzes.filter(q => q.status === 'rejected').length\r\n    };\r\n  };\r\n\r\n  const statusCounts = getStatusCounts();\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return",
          "index": 1943
        },
        {
          "kind": "JSXText",
          "text": "âœ… ÄÃ£ duyá»‡t",
          "index": 14747
        },
        {
          "kind": "JSXText",
          "text": "âŒ Tá»« chá»‘i",
          "index": 14891
        },
        {
          "kind": "JSXText",
          "text": "â³ Chá» duyá»‡t",
          "index": 15032
        },
        {
          "kind": "JSXText",
          "text": "ðŸŸ¢ Dá»…",
          "index": 15263
        },
        {
          "kind": "JSXText",
          "text": "ðŸ”´ KhÃ³",
          "index": 15386
        },
        {
          "kind": "JSXText",
          "text": "ðŸŸ¡ Trung bÃ¬nh",
          "index": 15512
        },
        {
          "kind": "JSXText",
          "text": "{loadQuizzes(); loadEditRequests();}}\r\n                className=\"w-full sm:w-auto px-4 py-2.5 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white rounded-xl transition-all duration-200 flex items-center justify-center gap-2 border border-white/20 hover:border-white/40 shadow-lg hover:shadow-xl\"\r\n                title=\"LÃ m má»›i danh sÃ¡ch\"\r\n              >",
          "index": 18095
        },
        {
          "kind": "JSXText",
          "text": "{/* Actions - 6 chá»©c nÄƒng: View, Edit, Approve, Reject, Reopen, Delete */}",
          "index": 29549
        },
        {
          "kind": "JSXText",
          "text": "{/* 1. Xem trÆ°á»›c (luÃ´n hiá»ƒn thá»‹) */}",
          "index": 29729
        },
        {
          "kind": "JSXText",
          "text": "{/* 2. Chá»‰nh sá»­a (luÃ´n hiá»ƒn thá»‹) */}",
          "index": 30157
        },
        {
          "kind": "JSXText",
          "text": "{/* 3 & 4. Duyá»‡t & Tá»« chá»‘i (chá»‰ hiá»ƒn thá»‹ khi pending) */}\r\n                    {quiz.status === 'pending' && (",
          "index": 30590
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n\r\n                    {/* 5. Má»Ÿ láº¡i (hiá»ƒn thá»‹ khi Ä‘Ã£ duyá»‡t hoáº·c tá»« chá»‘i) */}\r\n                      {(quiz.status === 'approved' || quiz.status === 'rejected') && (",
          "index": 31597
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n                    \r\n                    {/* 6. XÃ³a (luÃ´n hiá»ƒn thá»‹) */}",
          "index": 32180
        },
        {
          "kind": "JSXText",
          "text": "YÃªu cáº§u chá»‰nh sá»­a Quiz ({editRequests.length})",
          "index": 33143
        },
        {
          "kind": "JSXText",
          "text": "{request.requestedByName || request.requestedByEmail || 'NgÆ°á»i dÃ¹ng khÃ´ng xÃ¡c Ä‘á»‹nh'}",
          "index": 34388
        },
        {
          "kind": "JSXText",
          "text": "{request.requestedByEmail || request.requestedBy || 'Email khÃ´ng xÃ¡c Ä‘á»‹nh'}",
          "index": 34606
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“ Quiz: {request.quizTitle || 'TÃªn quiz khÃ´ng xÃ¡c Ä‘á»‹nh'}",
          "index": 34988
        },
        {
          "kind": "JSXText",
          "text": "LÃ½ do yÃªu cáº§u:",
          "index": 35216
        },
        {
          "kind": "JSXText",
          "text": "{request.reason || 'KhÃ´ng cÃ³ lÃ½ do cá»¥ thá»ƒ'}",
          "index": 35239
        },
        {
          "kind": "JSXText",
          "text": "Chi tiáº¿t:",
          "index": 35475
        },
        {
          "kind": "JSXText",
          "text": "{request.requestedAt?.toLocaleDateString('vi-VN', {\r\n                              day: '2-digit',\r\n                              month: '2-digit', \r\n                              year: 'numeric',\r\n                              hour: '2-digit',\r\n                              minute: '2-digit'\r\n                            }) || 'Thá»i gian khÃ´ng xÃ¡c Ä‘á»‹nh'}",
          "index": 35855
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ quiz nÃ o trong há»‡ thá»‘ng",
          "index": 4896
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz",
          "index": 5045
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i danh sÃ¡ch quiz: ",
          "index": 5097
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ phÃª duyá»‡t quiz thÃ nh cÃ´ng!",
          "index": 8268
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ duyá»‡t quiz",
          "index": 8398
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ tá»« chá»‘i quiz!",
          "index": 8932
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ tá»« chá»‘i quiz",
          "index": 9049
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y yÃªu cáº§u chá»‰nh sá»­a",
          "index": 9308
        },
        {
          "kind": "StringLiteral",
          "text": "YÃªu cáº§u chá»‰nh sá»­a Ä‘Ã£ Ä‘Æ°á»£c phÃª duyá»‡t",
          "index": 10394
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ phÃª duyá»‡t yÃªu cáº§u chá»‰nh sá»­a",
          "index": 11077
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y yÃªu cáº§u chá»‰nh sá»­a",
          "index": 11334
        },
        {
          "kind": "StringLiteral",
          "text": "YÃªu cáº§u chá»‰nh sá»­a Ä‘Ã£ bá»‹ tá»« chá»‘i",
          "index": 11859
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ tá»« chá»‘i yÃªu cáº§u chá»‰nh sá»­a",
          "index": 12499
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ má»Ÿ láº¡i quiz Ä‘á»ƒ xem xÃ©t!",
          "index": 13046
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ má»Ÿ láº¡i quiz",
          "index": 13173
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a quiz nÃ y khÃ´ng?",
          "index": 13291
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz Ä‘Ã£ Ä‘Æ°á»£c xÃ³a khá»i database",
          "index": 13652
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ xÃ³a quiz: ",
          "index": 13784
        },
        {
          "kind": "StringLiteral",
          "text": "LÃ m má»›i danh sÃ¡ch",
          "index": 18423
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng khÃ´ng xÃ¡c Ä‘á»‹nh",
          "index": 34477
        },
        {
          "kind": "StringLiteral",
          "text": "Email khÃ´ng xÃ¡c Ä‘á»‹nh",
          "index": 34691
        },
        {
          "kind": "StringLiteral",
          "text": "TÃªn quiz khÃ´ng xÃ¡c Ä‘á»‹nh",
          "index": 35050
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng cÃ³ lÃ½ do cá»¥ thá»ƒ",
          "index": 35260
        },
        {
          "kind": "StringLiteral",
          "text": "Thá»i gian khÃ´ng xÃ¡c Ä‘á»‹nh",
          "index": 36215
        }
      ]
    },
    {
      "file": "features\\admin\\pages\\AdminDashboard.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ")\r\n    );\r\n  };\r\n\r\n  // New category form\r\n  const [newCategory, setNewCategory] = useState({ name: '', description: '' });\r\n  const [showAddCategory, setShowAddCategory] = useState(false);\r\n\r\n  // State cho modal xÃ¡c nháº­n\r\n  const [confirmModal, setConfirmModal] = useState",
          "index": 3872
        },
        {
          "kind": "JSXText",
          "text": "Thao tÃ¡c",
          "index": 13716
        },
        {
          "kind": "JSXText",
          "text": "{user.displayName || 'ChÆ°a cÃ³ tÃªn'}",
          "index": 14062
        },
        {
          "kind": "JSXText",
          "text": "{user.isActive !== false ? 'Hoáº¡t Ä‘á»™ng' : 'Bá»‹ khÃ³a'}",
          "index": 15085
        },
        {
          "kind": "JSXText",
          "text": "setConfirmModal({ open: true, type: 'toggleUserStatus', payload: { userId: user.id, currentStatus: user.isActive !== false }, message: user.isActive !== false ? 'Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n khÃ³a tÃ i khoáº£n nÃ y?' : 'Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n má»Ÿ khÃ³a tÃ i khoáº£n nÃ y?' })}\r\n                    className={`px-3 py-1 rounded text-xs ${user.isActive !== false ? 'bg-red-100 text-red-600 hover:bg-red-200' : 'bg-green-100 text-green-600 hover:bg-green-200'}`}\r\n                  >\r\n                    {user.isActive !== false ? 'KhÃ³a' : 'Má»Ÿ khÃ³a'}",
          "index": 15363
        },
        {
          "kind": "JSXText",
          "text": "setConfirmModal({ open: true, type: 'deleteUser', payload: { userId: user.id }, message: 'Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a ngÆ°á»i dÃ¹ng nÃ y?' })}\r\n                      className=\"px-3 py-1 bg-red-100 text-red-600 rounded text-xs hover:bg-red-200\"\r\n                    >{t(\"action.clear\")}",
          "index": 16071
        },
        {
          "kind": "JSXText",
          "text": "Äá»ƒ xem thá»‘ng kÃª biá»ƒu Ä‘á»“",
          "index": 25982
        },
        {
          "kind": "JSXText",
          "text": "Nháº¥n vÃ o tab \"ðŸ“Š Tá»•ng quan\" bÃªn dÆ°á»›i hoáº·c",
          "index": 26065
        },
        {
          "kind": "JSXText",
          "text": "âž¤ Xem trang thá»‘ng kÃª riÃªng",
          "index": 26229
        },
        {
          "kind": "JSXText",
          "text": "Tab hiá»‡n táº¡i:",
          "index": 26456
        },
        {
          "kind": "JSXText",
          "text": "Thá»‘ng kÃª riÃªng",
          "index": 27974
        },
        {
          "kind": "JSXText",
          "text": "{\r\n                  console.log('Force switching to dashboard');\r\n                  setActiveTab('dashboard');\r\n                }}\r\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center space-x-2\"\r\n                title=\"Force chuyá»ƒn vá» tab Tá»•ng quan\"\r\n              >",
          "index": 28070
        },
        {
          "kind": "JSXText",
          "text": "Cáº­p nháº­t: {lastUpdate.toLocaleTimeString()}",
          "index": 29421
        },
        {
          "kind": "JSXText",
          "text": "ðŸ”§ Debug: activeTab = \"{activeTab}\" | Táº¥t cáº£ tabs: dashboard, users, quizzes, categories",
          "index": 29981
        },
        {
          "kind": "JSXText",
          "text": "{\r\n                  console.log('Clicking tab:', tab.id);\r\n                  setActiveTab(tab.id);\r\n                }}\r\n                className={`py-4 px-3 border-b-2 font-medium text-sm transition-colors duration-200 ${\r\n                  activeTab === tab.id\r\n                    ? 'border-red-500 text-red-600 bg-red-50'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50'\r\n                } ${tab.id === 'dashboard' ? 'ring-2 ring-blue-300' : ''}`}\r\n                title={`Chuyá»ƒn Ä‘áº¿n tab ${tab.label}`}\r\n              >",
          "index": 30604
        },
        {
          "kind": "JSXText",
          "text": "{/* Modal xÃ¡c nháº­n thao tÃ¡c */}",
          "index": 33181
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a cÃ³ tÃªn",
          "index": 14106
        },
        {
          "kind": "StringLiteral",
          "text": "Hoáº¡t Ä‘á»™ng",
          "index": 15135
        },
        {
          "kind": "StringLiteral",
          "text": "Bá»‹ khÃ³a",
          "index": 15149
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n khÃ³a tÃ i khoáº£n nÃ y?",
          "index": 15526
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n má»Ÿ khÃ³a tÃ i khoáº£n nÃ y?",
          "index": 15572
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ³a",
          "index": 15876
        },
        {
          "kind": "StringLiteral",
          "text": "Má»Ÿ khÃ³a",
          "index": 15885
        },
        {
          "kind": "StringLiteral",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a ngÆ°á»i dÃ¹ng nÃ y?",
          "index": 16162
        },
        {
          "kind": "StringLiteral",
          "text": "ðŸ“Š Tá»•ng quan",
          "index": 26099
        },
        {
          "kind": "StringLiteral",
          "text": "Xem trang thá»‘ng kÃª riÃªng vá»›i biá»ƒu Ä‘á»“",
          "index": 27863
        },
        {
          "kind": "StringLiteral",
          "text": "Force chuyá»ƒn vá» tab Tá»•ng quan",
          "index": 28397
        },
        {
          "kind": "StringLiteral",
          "text": "Cáº­p nháº­t dá»¯ liá»‡u",
          "index": 28871
        }
      ]
    },
    {
      "file": "features\\admin\\pages\\Admin.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n  const { t } = useTranslation();\r\n  // State cho thá»‘ng kÃª\r\n  const [stats, setStats] = useState({\r\n    totalQuizzes: 0,\r\n    totalUsers: 0,\r\n    completedQuizzes: 0,\r\n    totalCreators: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchStats = async () => {\r\n      try {\r\n        // Láº¥y táº¥t cáº£ quiz\r\n        const quizzesSnap = await getDocs(collection(db, 'quizzes'));\r\n        const quizzes = quizzesSnap.docs.map(doc => doc.data());\r\n        // Chá»‰ láº¥y quiz Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t (status === 'approved')\r\n        const approvedQuizzes = quizzes.filter(q => q.status === 'approved');\r\n        const totalQuizzes = approvedQuizzes.length;\r\n        const completedQuizzes = approvedQuizzes.filter(q => q.completed === true || q.status === 'completed').length;\r\n        const totalCreators = approvedQuizzes\r\n          .map(q => q.creatorId)\r\n          .filter((v, i, a) => v && a.indexOf(v) === i).length;\r\n\r\n        // Láº¥y tá»•ng sá»‘ user\r\n        const usersSnap = await getDocs(collection(db, 'users'));\r\n        const users = usersSnap.docs.map(doc => doc.data());\r\n        const totalUsers = users.length;\r\n\r\n        setStats({\r\n          totalQuizzes,\r\n          totalUsers,\r\n          completedQuizzes,\r\n          totalCreators,\r\n        });\r\n      } catch (err) {\r\n        // CÃ³ thá»ƒ toast lá»—i náº¿u muá»‘n\r\n      }\r\n    };\r\n    fetchStats();\r\n  }, []);\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const [showNotificationModal, setShowNotificationModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [notificationData, setNotificationData] = useState({\r\n    message: '',\r\n    type: 'info' as 'info' | 'warning' | 'success' | 'error',\r\n    targetRole: 'all' as 'all' | 'user' | 'creator'\r\n  });\r\n\r\n  const createSystemNotification = async () => {\r\n    if (!notificationData.message.trim()) {\r\n      toast.error(t('admin.quickActions.toasts.enterMessage'));\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      await addDoc(collection(db, 'system_notifications'), {\r\n        message: notificationData.message,\r\n        type: notificationData.type,\r\n        createdAt: new Date(),\r\n        isActive: true,\r\n        targetRole: notificationData.targetRole\r\n      });\r\n      \r\n      // Reset form\r\n      setNotificationData({\r\n        message: '',\r\n        type: 'info',\r\n        targetRole: 'all'\r\n      });\r\n      setShowNotificationModal(false);\r\n      \r\n      toast.success(t('admin.quickActions.toasts.createSuccess'));\r\n    } catch (error) {\r\n      console.error('Error creating notification:', error);\r\n      toast.error(t('admin.quickActions.toasts.createError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Backup dá»¯ liá»‡u\r\n  const backupData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const collections = ['users', 'quizzes', 'categories', 'quiz_results'];\r\n      const backup: any = {};\r\n      \r\n      for (const collectionName of collections) {\r\n        const snapshot = await getDocs(collection(db, collectionName));\r\n        backup[collectionName] = snapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data()\r\n        }));\r\n      }\r\n\r\n      // Táº¡o file backup\r\n      const dataStr = JSON.stringify(backup, null, 2);\r\n      const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n      const url = URL.createObjectURL(dataBlob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `quiz-app-backup-${new Date().toISOString().split('T')[0]}.json`;\r\n      link.click();\r\n      \r\n      toast.success(t('admin.quickActions.toasts.backupSuccess'));\r\n    } catch (error) {\r\n      toast.error(t('admin.quickActions.toasts.backupError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // XÃ³a thÃ´ng bÃ¡o há»‡ thá»‘ng\r\n  const deleteNotifications = async () => {\r\n    if (!confirm(t('admin.quickActions.toasts.confirmDeleteAll'))) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const notificationsSnapshot = await getDocs(collection(db, 'system_notifications'));\r\n      const deletePromises = notificationsSnapshot.docs.map(doc => \r\n        updateDoc(doc.ref, { isActive: false })\r\n      );\r\n      \r\n      await Promise.all(deletePromises);\r\n      toast.success(t('admin.quickActions.toasts.deleteSuccess'));\r\n    } catch (error) {\r\n      console.error('Error deleting notifications:', error);\r\n      toast.error(t('admin.quickActions.toasts.deleteError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Dá»n dáº¹p dá»¯ liá»‡u Ä‘Ã£ xÃ³a\r\n  const cleanupDeletedData = async () => {\r\n    if (!confirm(t('admin.quickActions.toasts.confirmCleanup'))) return;\r\n    setLoading(true);\r\n    try {\r\n      const quizzesSnapshot = await getDocs(collection(db, 'quizzes'));\r\n      const deletedQuizzes = quizzesSnapshot.docs.filter(doc => doc.data().deleted === true);\r\n      const quizDeletePromises = deletedQuizzes.map(q => updateDoc(doc(db, 'quizzes', q.id), { isPurged: true }));\r\n\r\n      const usersSnapshot = await getDocs(collection(db, 'users'));\r\n      const deletedUsers = usersSnapshot.docs.filter(doc => doc.data().deleted === true);\r\n      const userDeletePromises = deletedUsers.map(u => updateDoc(doc(db, 'users', u.id), { isPurged: true }));\r\n\r\n      await Promise.all([...quizDeletePromises, ...userDeletePromises]);\r\n      toast.success(t('admin.quickActions.toasts.cleanupSuccess'));\r\n    } catch (error) {\r\n      toast.error(t('admin.quickActions.toasts.cleanupError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (user?.role !== 'admin') {\r\n    return (",
          "index": 497
        },
        {
          "kind": "JSXText",
          "text": "{/* Modal gá»­i thÃ´ng bÃ¡o - Responsive */}\r\n      {showNotificationModal && (",
          "index": 14382
        },
        {
          "kind": "JSXText",
          "text": "{/* Ná»™i dung thÃ´ng bÃ¡o */}",
          "index": 14819
        },
        {
          "kind": "JSXText",
          "text": "{/* Loáº¡i thÃ´ng bÃ¡o */}",
          "index": 15507
        },
        {
          "kind": "JSXText",
          "text": "{/* Äá»‘i tÆ°á»£ng nháº­n thÃ´ng bÃ¡o */}",
          "index": 16483
        }
      ]
    },
    {
      "file": "features\\admin\\components\\QuizPreview.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "void;\r\n}\r\n\r\n// Modal component vá»›i kháº£ nÄƒng cuá»™n tá»‘t hÆ¡n\r\nconst Modal: React.FC",
          "index": 218
        },
        {
          "kind": "JSXText",
          "text": "Äiá»ƒm:",
          "index": 6592
        }
      ]
    },
    {
      "file": "features\\admin\\components\\QuickActions_Simple.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "void;\r\n  stats: {\r\n    totalUsers: number;\r\n    pendingQuizzes: number;\r\n    approvedQuizzes: number;\r\n    totalCategories: number;\r\n  };\r\n}\r\n\r\n// Äá»•i tÃªn component\r\nconst QuickActionsSimple: React.FC",
          "index": 296
        },
        {
          "kind": "JSXText",
          "text": "= ({ stats }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const { t } = useTranslation();\r\n  const [showNotificationModal, setShowNotificationModal] = useState(false);\r\n  const [notificationData, setNotificationData] = useState({\r\n    message: '',\r\n    type: 'info' as 'info' | 'warning' | 'success' | 'error',\r\n    targetRole: 'all' as 'all' | 'user' | 'creator'\r\n  });\r\n\r\n  // 1. Táº¡o thÃ´ng bÃ¡o há»‡ thá»‘ng\r\n  const createSystemNotification = async () => {\r\n    if (!notificationData.message.trim()) {\r\n      toast.error(t('admin.quickActions.toasts.enterMessage'));\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      await addDoc(collection(db, 'system_notifications'), {\r\n        message: notificationData.message,\r\n        type: notificationData.type,\r\n        createdAt: new Date(),\r\n        isActive: true,\r\n        targetRole: notificationData.targetRole\r\n      });\r\n      \r\n      // Reset form\r\n      setNotificationData({\r\n        message: '',\r\n        type: 'info',\r\n        targetRole: 'all'\r\n      });\r\n      setShowNotificationModal(false);\r\n      \r\n      toast.success(t('admin.quickActions.toasts.createSuccess'));\r\n    } catch (error) {\r\n      console.error('Error creating notification:', error);\r\n      toast.error(t('admin.quickActions.toasts.createError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const openNotificationModal = () => {\r\n    console.log('ðŸš€ Opening notification modal...');\r\n    setShowNotificationModal(true);\r\n    console.log('ðŸ“Š Modal state should be:', true);\r\n  };\r\n\r\n  return (",
          "index": 516
        },
        {
          "kind": "JSXText",
          "text": "{/* NÃºt gá»­i thÃ´ng bÃ¡o */}",
          "index": 2314
        },
        {
          "kind": "JSXText",
          "text": "{/* NÃºt test modal */}",
          "index": 2940
        },
        {
          "kind": "JSXText",
          "text": "{/* Thá»‘ng kÃª nhanh hiá»ƒn thá»‹ */}",
          "index": 3970
        },
        {
          "kind": "JSXText",
          "text": "{/* Modal gá»­i thÃ´ng bÃ¡o */}\r\n      {showNotificationModal && (",
          "index": 5530
        },
        {
          "kind": "JSXText",
          "text": "{/* Ná»™i dung thÃ´ng bÃ¡o */}",
          "index": 5932
        },
        {
          "kind": "JSXText",
          "text": "{/* Loáº¡i thÃ´ng bÃ¡o */}",
          "index": 6599
        },
        {
          "kind": "JSXText",
          "text": "{/* Äá»‘i tÆ°á»£ng nháº­n thÃ´ng bÃ¡o */}",
          "index": 7554
        }
      ]
    },
    {
      "file": "features\\admin\\components\\QuickActions.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  // 1. Táº¡o thÃ´ng bÃ¡o há»‡ thá»‘ng\r\n  const createSystemNotification = async () => {\r\n    if (!notificationData.message.trim()) {\r\n      toast.error(t('admin.quickActions.toasts.enterMessage'));\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      await addDoc(collection(db, 'system_notifications'), {\r\n        message: notificationData.message,\r\n        type: notificationData.type,\r\n        createdAt: new Date(),\r\n        isActive: true,\r\n        targetRole: notificationData.targetRole\r\n      });\r\n      \r\n      // Reset form\r\n      setNotificationData({\r\n        message: '',\r\n        type: 'info',\r\n        targetRole: 'all'\r\n      });\r\n      setShowNotificationModal(false);\r\n      setBannerData({ message: notificationData.message, type: notificationData.type });\r\n      setShowBanner(true);\r\n      setTimeout(() => setShowBanner(false), 5000);\r\n      \r\n      toast.success(t('admin.quickActions.toasts.createSuccess'));\r\n    } catch (error) {\r\n      console.error('Error creating notification:', error);\r\n      toast.error(t('admin.quickActions.toasts.createError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const openNotificationModal = () => {\r\n    setShowNotificationModal(true);\r\n  };\r\n\r\n  // 2. Backup dá»¯ liá»‡u\r\n  const backupData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const collections = ['users', 'quizzes', 'categories', 'quiz_results'];\r\n      const backup: any = {};\r\n      \r\n      for (const collectionName of collections) {\r\n        const snapshot = await getDocs(collection(db, collectionName));\r\n        backup[collectionName] = snapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data()\r\n        }));\r\n      }\r\n\r\n      // Táº¡o file backup\r\n      const dataStr = JSON.stringify(backup, null, 2);\r\n      const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n      const url = URL.createObjectURL(dataBlob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `quiz-app-backup-${new Date().toISOString().split('T')[0]}.json`;\r\n      link.click();\r\n      \r\n      toast.success(t('admin.quickActions.toasts.backupSuccess'));\r\n    } catch (error) {\r\n      toast.error(t('admin.quickActions.toasts.backupError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // 3. XÃ³a thÃ´ng bÃ¡o há»‡ thá»‘ng\r\n  const deleteNotifications = async () => {\r\n    if (!confirm(t('admin.quickActions.toasts.confirmDeleteAll'))) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // Láº¥y táº¥t cáº£ thÃ´ng bÃ¡o Ä‘ang active\r\n      const notificationsSnapshot = await getDocs(collection(db, 'system_notifications'));\r\n      const deletePromises = notificationsSnapshot.docs.map(doc => \r\n        updateDoc(doc.ref, { isActive: false })\r\n      );\r\n      \r\n      await Promise.all(deletePromises);\r\n      toast.success(t('admin.quickActions.toasts.deleteSuccess'));\r\n      onRefreshData();\r\n    } catch (error) {\r\n      console.error('Error deleting notifications:', error);\r\n      toast.error(t('admin.quickActions.toasts.deleteError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // 4. Dá»n dáº¹p dá»¯ liá»‡u Ä‘Ã£ xÃ³a\r\n  const cleanupDeletedData = async () => {\r\n    if (!confirm(t('admin.quickActions.toasts.confirmCleanup'))) return;\r\n    setLoading(true);\r\n    try {\r\n      // XÃ³a quiz Ä‘Ã£ bá»‹ Ä‘Ã¡nh dáº¥u deleted=true\r\n      const quizzesSnapshot = await getDocs(collection(db, 'quizzes'));\r\n      const deletedQuizzes = quizzesSnapshot.docs.filter(doc => doc.data().deleted === true);\r\n      const quizDeletePromises = deletedQuizzes.map(q => updateDoc(doc(db, 'quizzes', q.id), { isPurged: true }));\r\n\r\n      // XÃ³a user Ä‘Ã£ bá»‹ Ä‘Ã¡nh dáº¥u deleted=true\r\n      const usersSnapshot = await getDocs(collection(db, 'users'));\r\n      const deletedUsers = usersSnapshot.docs.filter(doc => doc.data().deleted === true);\r\n      const userDeletePromises = deletedUsers.map(u => updateDoc(doc(db, 'users', u.id), { isPurged: true }));\r\n\r\n      await Promise.all([...quizDeletePromises, ...userDeletePromises]);\r\n      toast.success(t('admin.quickActions.toasts.cleanupSuccess'));\r\n      onRefreshData();\r\n    } catch (error) {\r\n      toast.error(t('admin.quickActions.toasts.cleanupError'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const quickActions = [\r\n    // Updated actions as requested\r\n    {\r\n      icon: 'ðŸ“¢',\r\n      title: t('admin.quickActions.items.notify.title'),\r\n      description: t('admin.quickActions.items.notify.desc'),\r\n      action: openNotificationModal,\r\n      color: 'blue'\r\n    },\r\n    {\r\n      icon: 'âŒ',\r\n      title: t('admin.quickActions.items.deleteNotifications.title'),\r\n      description: t('admin.quickActions.items.deleteNotifications.desc'),\r\n      action: deleteNotifications,\r\n      color: 'red'\r\n    },\r\n    {\r\n      icon: 'ðŸ—‚ï¸',\r\n      title: t('admin.quickActions.items.backup.title'),\r\n      description: t('admin.quickActions.items.backup.desc'),\r\n      action: backupData,\r\n      color: 'green'\r\n    },\r\n    {\r\n      icon: 'ðŸ—‘ï¸',\r\n      title: t('admin.quickActions.items.cleanup.title'),\r\n      description: t('admin.quickActions.items.cleanup.desc'),\r\n      action: cleanupDeletedData,\r\n      color: 'orange'\r\n    }\r\n  ];\r\n\r\n  // Banner notification UI\r\n  useEffect(() => {\r\n    if (showBanner && bannerData) {\r\n      document.body.classList.add('overflow-x-hidden');\r\n    } else {\r\n      document.body.classList.remove('overflow-x-hidden');\r\n    }\r\n  }, [showBanner, bannerData]);\r\n\r\n  return (",
          "index": 1025
        },
        {
          "kind": "JSXText",
          "text": "setShowBanner(false)} className=\"ml-4 text-xl font-bold focus:outline-none\">Ã—",
          "index": 7335
        },
        {
          "kind": "JSXText",
          "text": "{/* Thá»‘ng kÃª nhanh hiá»ƒn thá»‹ */}",
          "index": 8403
        },
        {
          "kind": "JSXText",
          "text": "{/* Modal gá»­i thÃ´ng bÃ¡o */}\r\n      {showNotificationModal && (",
          "index": 9532
        },
        {
          "kind": "JSXText",
          "text": "{/* Ná»™i dung thÃ´ng bÃ¡o */}",
          "index": 9934
        },
        {
          "kind": "JSXText",
          "text": "{/* Loáº¡i thÃ´ng bÃ¡o */}",
          "index": 10639
        },
        {
          "kind": "JSXText",
          "text": "{/* Äá»‘i tÆ°á»£ng nháº­n thÃ´ng bÃ¡o */}",
          "index": 11632
        }
      ]
    },
    {
      "file": "features\\admin\\components\\BulkActions.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ \r\n  selectedItems, \r\n  itemType, \r\n  onClearSelection, \r\n  onRefresh \r\n}) => {\n  const { t } = useTranslation();\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  if (selectedItems.length === 0) return null;\r\n\r\n  const bulkDelete = async () => {\r\n    if (!confirm(`Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a ${selectedItems.length} ${itemType}?`)) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const promises = selectedItems.map(id => \r\n        deleteDoc(doc(db, itemType, id))\r\n      );\r\n      await Promise.all(promises);\r\n      \r\n      toast.success(`ÄÃ£ xÃ³a ${selectedItems.length} ${itemType}!`);\r\n      onClearSelection();\r\n      onRefresh();\r\n    } catch (error) {\r\n      toast.error('Lá»—i khi xÃ³a hÃ ng loáº¡t!');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const bulkUpdateStatus = async (status: any) => {\r\n    setLoading(true);\r\n    try {\r\n      const field = itemType === 'users' ? 'isActive' : 'status';\r\n      const promises = selectedItems.map(id => \r\n        updateDoc(doc(db, itemType, id), { [field]: status })\r\n      );\r\n      await Promise.all(promises);\r\n      \r\n      toast.success(`ÄÃ£ cáº­p nháº­t ${selectedItems.length} ${itemType}!`);\r\n      onClearSelection();\r\n      onRefresh();\r\n    } catch (error) {\r\n      toast.error('Lá»—i khi cáº­p nháº­t hÃ ng loáº¡t!');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (",
          "index": 450
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ£ chá»n {selectedItems.length} {itemType}",
          "index": 1998
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi xÃ³a hÃ ng loáº¡t!",
          "index": 1140
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»—i khi cáº­p nháº­t hÃ ng loáº¡t!",
          "index": 1708
        }
      ]
    },
    {
      "file": "features\\admin\\components\\AdminProtectedRoute.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ children }) => {\r\n  const { user, isAuthenticated } = useSelector((state: RootState) => state.auth);\r\n  const { t } = useTranslation();\r\n\r\n  // Kiá»ƒm tra xem user Ä‘Ã£ Ä‘Äƒng nháº­p vÃ  cÃ³ role admin khÃ´ng\r\n  if (!isAuthenticated || !user) {\r\n    return",
          "index": 351
        }
      ]
    },
    {
      "file": "features\\auth\\services\\otpService.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    const q = query(\r\n      collection(db, 'otp_verifications'),\r\n      where('email', '==', email.toLowerCase().trim()),\r\n      where('isVerified', '==', false)\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    \r\n    if (querySnapshot.empty) {\r\n      return { success: false, message: 'KhÃ´ng tÃ¬m tháº¥y mÃ£ OTP hoáº·c mÃ£ Ä‘Ã£ háº¿t háº¡n' };\r\n    }\r\n\r\n    const otpDoc = querySnapshot.docs[0];\r\n    const otpData = otpDoc.data() as OTPVerification;\r\n    \r\n    // Check if OTP has expired\r\n    const expiresAt = otpData.expiresAt instanceof Date ? otpData.expiresAt : otpData.expiresAt.toDate();\r\n    if (new Date() > expiresAt) {\r\n      await deleteDoc(otpDoc.ref);\r\n      return { success: false, message: 'MÃ£ OTP Ä‘Ã£ háº¿t háº¡n. Vui lÃ²ng yÃªu cáº§u mÃ£ má»›i' };\r\n    }\r\n\r\n    // Check max attempts\r\n    if (otpData.attempts >= otpData.maxAttempts) {\r\n      await deleteDoc(otpDoc.ref);\r\n      return { success: false, message: 'ÄÃ£ vÆ°á»£t quÃ¡ sá»‘ láº§n thá»­. Vui lÃ²ng yÃªu cáº§u mÃ£ má»›i' };\r\n    }\r\n\r\n    // Verify code\r\n    if (otpData.code === inputCode.trim()) {\r\n      // Mark as verified and delete the record\r\n      await deleteDoc(otpDoc.ref);\r\n      return { success: true, message: 'XÃ¡c thá»±c thÃ nh cÃ´ng!' };\r\n    } else {\r\n      // Increment attempts\r\n      await updateDoc(otpDoc.ref, {\r\n        attempts: otpData.attempts + 1\r\n      });\r\n      \r\n      const remainingAttempts = otpData.maxAttempts - (otpData.attempts + 1);\r\n      return { \r\n        success: false, \r\n        message: `MÃ£ OTP khÃ´ng Ä‘Ãºng. CÃ²n láº¡i ${remainingAttempts} láº§n thá»­` \r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.error('Error verifying OTP:', error);\r\n    return { success: false, message: 'CÃ³ lá»—i xáº£y ra khi xÃ¡c thá»±c mÃ£ OTP' };\r\n  }\r\n};\r\n\r\n// Send OTP via email (using EmailJS - no server required)\r\nexport const sendOTPEmail = async (email: string, code: string): Promise",
          "index": 2063
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    console.log(`ðŸ“§ Sending OTP via EmailJS to ${email}...`);\r\n    \r\n    // Gá»­i email qua EmailJS (trá»±c tiáº¿p tá»« browser)\r\n    const result = await emailJSService.sendOTPEmail(email, code);\r\n    \r\n    if (result.success) {\r\n      console.log(`âœ… OTP email sent successfully to ${email}`);\r\n      \r\n      // LÆ°u vÃ o email_queue Ä‘á»ƒ tracking\r\n      try {\r\n        await addDoc(collection(db, 'email_queue'), {\r\n          to: email,\r\n          template: 'otp_verification',\r\n          data: {\r\n            code,\r\n            expiresIn: '10 phÃºt'\r\n          },\r\n          createdAt: serverTimestamp(),\r\n          status: 'sent_via_emailjs',\r\n          method: 'emailjs'\r\n        });\r\n      } catch (dbError) {\r\n        console.warn('Failed to log email to queue:', dbError);\r\n        // KhÃ´ng fail toÃ n bá»™ process náº¿u logging tháº¥t báº¡i\r\n      }\r\n      \r\n      return true;\r\n    } else {\r\n      throw new Error(result.messageKey || 'Failed to send email via EmailJS');\r\n    }\r\n  } catch (error: any) {\r\n    console.error('Error sending OTP email:', error);\r\n    throw new Error(error.message || 'KhÃ´ng thá»ƒ gá»­i email. Vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i internet.');\r\n  }\r\n};\r\n\r\n// Main function to generate and send OTP\r\nexport const generateAndSendOTP = async (email: string): Promise",
          "index": 3936
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n  try {\r\n    const code = generateOTP();\r\n    \r\n    console.log(`ðŸ”¢ Generated OTP: ${code} for ${email}`);\r\n    \r\n    // Store OTP in database first\r\n    await storeOTP(email, code);\r\n    console.log(`ðŸ’¾ OTP stored in database for ${email}`);\r\n    \r\n    // Send email via SMTP\r\n    await sendOTPEmail(email, code);\r\n    \r\n    return { \r\n      success: true, \r\n      message: `MÃ£ xÃ¡c thá»±c Ä‘Ã£ Ä‘Æ°á»£c gá»­i Ä‘áº¿n ${email}. Vui lÃ²ng kiá»ƒm tra há»™p thÆ° vÃ  nháº­p mÃ£ 6 sá»‘.` \r\n    };\r\n  } catch (error: any) {\r\n    console.error('Error generating and sending OTP:', error);\r\n    \r\n    // Check specific error types\r\n    if (error.message.includes('internet') || error.message.includes('network')) {\r\n      return { \r\n        success: false, \r\n        message: 'KhÃ´ng thá»ƒ káº¿t ná»‘i internet. Vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i máº¡ng vÃ  thá»­ láº¡i.' \r\n      };\r\n    }\r\n    \r\n    return { \r\n      success: false, \r\n      message: error.message || 'CÃ³ lá»—i xáº£y ra khi gá»­i mÃ£ xÃ¡c thá»±c. Vui lÃ²ng thá»­ láº¡i sau.' \r\n    };\r\n  }\r\n};\r\n\r\n// Cleanup expired OTPs (should be called periodically)\r\nexport const cleanupExpiredOTPs = async (): Promise",
          "index": 5257
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y mÃ£ OTP hoáº·c mÃ£ Ä‘Ã£ háº¿t háº¡n",
          "index": 2376
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ£ OTP Ä‘Ã£ háº¿t háº¡n. Vui lÃ²ng yÃªu cáº§u mÃ£ má»›i",
          "index": 2787
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ vÆ°á»£t quÃ¡ sá»‘ láº§n thá»­. Vui lÃ²ng yÃªu cáº§u mÃ£ má»›i",
          "index": 3000
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ¡c thá»±c thÃ nh cÃ´ng!",
          "index": 3253
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi xÃ¡c thá»±c mÃ£ OTP",
          "index": 3745
        },
        {
          "kind": "StringLiteral",
          "text": "10 phÃºt",
          "index": 4483
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ gá»­i email. Vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i internet.",
          "index": 5039
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i internet. Vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i máº¡ng vÃ  thá»­ láº¡i.",
          "index": 6008
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi gá»­i mÃ£ xÃ¡c thá»±c. Vui lÃ²ng thá»­ láº¡i sau.",
          "index": 6177
        }
      ]
    },
    {
      "file": "features\\auth\\pages\\Profile.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "('overview');\r\n  \r\n  // Profile edit states\r\n  const [displayName, setDisplayName] = useState(user?.displayName || '');\r\n  const [currentPassword, setCurrentPassword] = useState(''); // Máº­t kháº©u cÅ©\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [avatarUrl, setAvatarUrl] = useState(user?.photoURL || '');\r\n  const [saving, setSaving] = useState(false);\r\n  \r\n  // Enhanced pagination and filtering\r\n  const [itemsPerPage, setItemsPerPage] = useState(10);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [showAll, setShowAll] = useState(false);\r\n  const [sortBy, setSortBy] = useState",
          "index": 1420
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz khÃ´ng tÃªn",
          "index": 14124
        },
        {
          "kind": "StringLiteral",
          "text": "Xem láº¡i quiz",
          "index": 15308
        },
        {
          "kind": "StringLiteral",
          "text": "Xem káº¿t quáº£ chi tiáº¿t",
          "index": 15579
        }
      ]
    },
    {
      "file": "features\\auth\\pages\\AuthPageNew.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n    if (!user) return;\r\n\r\n    const userDocRef = doc(db, 'users', user.uid);\r\n    const userSnapshot = await getDoc(userDocRef);\r\n\r\n    if (!userSnapshot.exists()) {\r\n      await setDoc(userDocRef, {\r\n        uid: user.uid,\r\n        email: user.email,\r\n        role: 'user',\r\n        createdAt: new Date(),\r\n        isActive: true,\r\n        emailVerified: user.emailVerified,\r\n        needsRoleSelection: true,\r\n        ...additionalData\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    if (!validateForm()) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      // First, send OTP to email\r\n      const otpResult = await generateAndSendOTP(formData.email.trim());\r\n      \r\n      if (otpResult.success) {\r\n        // Store pending user data for after OTP verification\r\n        setPendingUserData({\r\n          email: formData.email.trim(),\r\n          password: formData.password,\r\n          displayName: formData.displayName.trim()\r\n        });\r\n        \r\n        setShowOTPVerification(true);\r\n        toast.success(otpResult.message);\r\n      } else {\r\n        toast.error(otpResult.message);\r\n      }\r\n\r\n    } catch (error: any) {\r\n      console.error('Registration error:', error);\r\n      toast.error(t('auth.errors.otpSendError'));\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Create user account after OTP verification\r\n      const userCredential = await createUserWithEmailAndPassword(\r\n        auth, \r\n        pendingUserData.email, \r\n        pendingUserData.password\r\n      );\r\n\r\n      // Create user document in Firestore (already verified)\r\n      await createUserDocument(userCredential.user, {\r\n        displayName: pendingUserData.displayName,\r\n        emailVerified: true, // Already verified via OTP\r\n        verificationMethod: 'otp'\r\n      });\r\n\r\n      toast.success(t('auth.registerSuccess'));\r\n      \r\n      // Reset form and states\r\n      setFormData({\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        displayName: '',\r\n        acceptTerms: false\r\n      });\r\n      setPendingUserData(null);\r\n      setShowOTPVerification(false);\r\n      \r\n      // Navigate to role selection or dashboard\r\n      navigate('/role-selection');\r\n\r\n    } catch (error: any) {\r\n      console.error('Final registration error:', error);\r\n      \r\n      // Handle specific Firebase errors\r\n      switch (error.code) {\r\n        case 'auth/email-already-in-use':\r\n          toast.error(t('auth.errors.emailAlreadyInUse'));\r\n          break;\r\n        case 'auth/weak-password':\r\n          toast.error(t('auth.errors.weakPassword'));\r\n          break;\r\n        case 'auth/invalid-email':\r\n          toast.error(t('auth.errors.invalidEmail'));\r\n          break;\r\n        default:\r\n          toast.error(t('auth.errors.registerError'));\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    if (!validateForm()) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      console.log('ðŸ” Attempting login with email:', formData.email.trim());\r\n      \r\n      const userCredential = await signInWithEmailAndPassword(\r\n        auth, \r\n        formData.email.trim().toLowerCase(), // Normalize email to lowercase\r\n        formData.password\r\n      );\r\n\r\n      console.log('âœ… Login successful for user:', userCredential.user.uid);\r\n\r\n      // Get user document to check role\r\n      const userDocRef = doc(db, 'users', userCredential.user.uid);\r\n      const userDoc = await getDoc(userDocRef);\r\n      \r\n      let redirectPath = '/dashboard'; // Default redirect\r\n      \r\n      if (userDoc.exists()) {\r\n        const userData = userDoc.data();\r\n        const userRole = userData.role;\r\n        \r\n        console.log('ðŸ‘¤ User role:', userRole);\r\n        \r\n        // Redirect based on role\r\n        switch (userRole) {\r\n          case 'admin':\r\n            redirectPath = '/dashboard'; // Admin cÅ©ng vÃ o dashboard chÃ­nh\r\n            break;\r\n          case 'creator':\r\n            redirectPath = '/dashboard'; // Creator cÅ©ng vÃ o dashboard chÃ­nh\r\n            break;\r\n          case 'user':\r\n          default:\r\n            redirectPath = '/dashboard';\r\n            break;\r\n        }\r\n        \r\n        // Update user document with login time\r\n        await setDoc(userDocRef, {\r\n          lastLoginAt: new Date(),\r\n          emailVerified: userCredential.user.emailVerified\r\n        }, { merge: true });\r\n      } else {\r\n        // Handle case where user document doesn't exist\r\n        console.log('âš ï¸ User document not found, redirecting to dashboard');\r\n      }\r\n\r\n      toast.success(t('auth.loginSuccess'));\r\n      console.log('ðŸš€ Redirecting to:', redirectPath);\r\n      navigate(redirectPath);\r\n\r\n    } catch (error: any) {\r\n      console.error('âŒ Login error:', error.code, error.message);\r\n      \r\n      switch (error.code) {\r\n        case 'auth/user-not-found':\r\n          toast.error(t('auth.errors.userNotFound'));\r\n          break;\r\n        case 'auth/wrong-password':\r\n          toast.error(t('auth.errors.wrongPassword'));\r\n          break;\r\n        case 'auth/invalid-credential':\r\n          toast.error(t('auth.errors.invalidCredential'));\r\n          break;\r\n        case 'auth/invalid-email':\r\n          toast.error(t('auth.errors.invalidEmail'));\r\n          break;\r\n        case 'auth/user-disabled':\r\n          toast.error(t('auth.errors.userDisabled'));\r\n          break;\r\n        case 'auth/too-many-requests':\r\n          toast.error(t('auth.errors.tooManyRequests'));\r\n          break;\r\n        default:\r\n          toast.error(t('auth.errors.loginError'));\r\n      navigate('/');\r\n    } catch (error: any) {\r\n      console.error('Google login error:', error);\r\n      toast.error(t('auth.errors.googleLoginError') : t('auth.register')}",
          "index": 3037
        }
      ]
    },
    {
      "file": "features\\auth\\components\\RoleSelection.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleRoleSelection = async (role: 'user' | 'creator') => {\r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      // Thá»­ cáº­p nháº­t Firestore trÆ°á»›c\r\n      const userDocRef = doc(db, 'users', user.uid);\r\n      await setDoc(userDocRef, { \r\n        role: role,\r\n        roleSelectedAt: new Date(),\r\n        needsRoleSelection: false, // Clear the flag\r\n        status: 'active',\r\n        email: user.email,\r\n        displayName: user.displayName,\r\n        updatedAt: new Date()\r\n      }, { merge: true });\r\n\r\n      // Cáº­p nháº­t Redux store\r\n      dispatch(setRole(role));\r\n      console.log('Role updated in Redux:', role);\r\n      \r\n      // LÆ°u vÃ o localStorage nhÆ° backup\r\n      localStorage.setItem(`user_role_${user.uid}`, role);\r\n      \r\n      // Call callback vá»›i role Ä‘á»ƒ parent cÃ³ thá»ƒ navigate\r\n      toast.success(`ChÃ o má»«ng báº¡n vá»›i vai trÃ² ${role === 'user' ? 'NgÆ°á»i dÃ¹ng' : 'NgÆ°á»i táº¡o'}!`);\r\n      \r\n      // Gá»i callback ngay láº­p tá»©c, khÃ´ng delay\r\n      onRoleSelected(role);\r\n      \r\n    } catch (error: any) {\r\n      console.error('Error updating user role:', error);\r\n      \r\n      // Náº¿u Firestore fail, váº«n lÆ°u role vÃ o localStorage vÃ  Redux\r\n      console.warn('Firestore update failed, using localStorage fallback');\r\n      \r\n      // Cáº­p nháº­t Redux store\r\n      dispatch(setRole(role));\r\n      console.log('Role updated in Redux (fallback):', role);\r\n      \r\n      // LÆ°u vÃ o localStorage \r\n      localStorage.setItem(`user_role_${user.uid}`, role);\r\n      \r\n      // Call callback vá»›i role Ä‘á»ƒ parent cÃ³ thá»ƒ navigate\r\n      toast.success(`ChÃ o má»«ng báº¡n vá»›i vai trÃ² ${role === 'user' ? 'NgÆ°á»i dÃ¹ng' : 'NgÆ°á»i táº¡o'}!`);\r\n      \r\n      // Gá»i callback ngay láº­p tá»©c, khÃ´ng delay\r\n      onRoleSelected(role);\r\n      \r\n      // Hiá»ƒn thá»‹ thÃ´ng bÃ¡o nháº¹ nhÃ ng\r\n      toast.info('Vai trÃ² Ä‘Ã£ Ä‘Æ°á»£c chá»n. Dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c Ä‘á»“ng bá»™ khi káº¿t ná»‘i á»•n Ä‘á»‹nh.');\r\n      \r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (",
          "index": 596
        },
        {
          "kind": "JSXText",
          "text": "Chá»n vai trÃ² cá»§a báº¡n",
          "index": 3361
        },
        {
          "kind": "JSXText",
          "text": "HÃ£y chá»n vai trÃ² phÃ¹ há»£p Ä‘á»ƒ báº¯t Ä‘áº§u sá»­ dá»¥ng Quiz Trivia",
          "index": 3427
        },
        {
          "kind": "JSXText",
          "text": "User (NgÆ°á»i dÃ¹ng)",
          "index": 4766
        },
        {
          "kind": "JSXText",
          "text": "Tham gia lÃ m quiz, xem káº¿t quáº£ vÃ  theo dÃµi tiáº¿n Ä‘á»™ há»c táº­p cá»§a báº¡n",
          "index": 4843
        },
        {
          "kind": "JSXText",
          "text": "â€¢ LÃ m cÃ¡c quiz cÃ³ sáºµn",
          "index": 5046
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Xem lá»‹ch sá»­ káº¿t quáº£",
          "index": 5096
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Theo dÃµi tiáº¿n Ä‘á»™ há»c táº­p",
          "index": 5146
        },
        {
          "kind": "JSXText",
          "text": "Creator (NgÆ°á»i táº¡o)",
          "index": 6380
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o quiz cho cá»™ng Ä‘á»“ng, bao gá»“m táº¥t cáº£ quyá»n cá»§a User",
          "index": 6459
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Táº¥t cáº£ quyá»n cá»§a User",
          "index": 6649
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Táº¡o quiz má»›i",
          "index": 6701
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Quáº£n lÃ½ quiz Ä‘Ã£ táº¡o",
          "index": 6744
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Quiz cáº§n admin phÃª duyá»‡t",
          "index": 6794
        },
        {
          "kind": "JSXText",
          "text": "Äang thiáº¿t láº­p vai trÃ²...",
          "index": 7692
        },
        {
          "kind": "JSXText",
          "text": ") : (\r\n              'XÃ¡c nháº­n vai trÃ²'\r\n            )}",
          "index": 7757
        },
        {
          "kind": "JSXText",
          "text": "Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i vai trÃ² sau trong pháº§n cÃ i Ä‘áº·t tÃ i khoáº£n",
          "index": 7958
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng",
          "index": 1563
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i táº¡o",
          "index": 1578
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i dÃ¹ng",
          "index": 2298
        },
        {
          "kind": "StringLiteral",
          "text": "NgÆ°á»i táº¡o",
          "index": 2313
        },
        {
          "kind": "StringLiteral",
          "text": "Vai trÃ² Ä‘Ã£ Ä‘Æ°á»£c chá»n. Dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c Ä‘á»“ng bá»™ khi káº¿t ná»‘i á»•n Ä‘á»‹nh.",
          "index": 2481
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ¡c nháº­n vai trÃ²",
          "index": 7793
        }
      ]
    },
    {
      "file": "features\\auth\\components\\ProtectedRoute.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Báº¡n cáº§n cÃ³ vai trÃ² Creator hoáº·c Admin Ä‘á»ƒ truy cáº­p trang nÃ y.",
          "index": 2197
        },
        {
          "kind": "StringLiteral",
          "text": "Äang xÃ¡c thá»±c...",
          "index": 909
        }
      ]
    },
    {
      "file": "features\\auth\\components\\OTPVerification.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ") => {\r\n    if (e.key === 'Backspace' && !otp[index] && index > 0) {\r\n      inputRefs.current[index - 1]?.focus();\r\n    }\r\n  };\r\n\r\n  // Handle paste\r\n  const handlePaste = (e: React.ClipboardEvent) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text').slice(0, 6);\r\n    if (!/^\\d+$/.test(pastedData)) return;\r\n\r\n    const newOtp = pastedData.split('').concat(['', '', '', '', '', '']).slice(0, 6);\r\n    setOtp(newOtp);\r\n\r\n    // Focus on next empty input or last input\r\n    const nextEmptyIndex = newOtp.findIndex(digit => !digit);\r\n    const focusIndex = nextEmptyIndex === -1 ? 5 : Math.min(nextEmptyIndex, 5);\r\n    inputRefs.current[focusIndex]?.focus();\r\n  };\r\n\r\n  // Verify OTP\r\n  const handleVerifyOTP = async () => {\r\n    const otpCode = otp.join('');\r\n    if (otpCode.length !== 6) {\r\n      toast.error('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ 6 sá»‘');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const result = await verifyOTP(email, otpCode);\r\n      \r\n      if (result.success) {\r\n        toast.success(result.message);\r\n        onVerificationSuccess();\r\n      } else {\r\n        toast.error(result.message);\r\n        // Clear OTP on failure\r\n        setOtp(['', '', '', '', '', '']);\r\n        inputRefs.current[0]?.focus();\r\n      }\r\n    } catch (error) {\r\n      toast.error('CÃ³ lá»—i xáº£y ra khi xÃ¡c thá»±c');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Resend OTP\r\n  const handleResendOTP = async () => {\r\n    setResendLoading(true);\r\n    try {\r\n      const result = await generateAndSendOTP(email);\r\n      \r\n      if (result.success) {\r\n        toast.success(result.message);\r\n        setTimer(60);\r\n        setCanResend(false);\r\n        setOtp(['', '', '', '', '', '']);\r\n        inputRefs.current[0]?.focus();\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error('KhÃ´ng thá»ƒ gá»­i láº¡i mÃ£ xÃ¡c thá»±c');\r\n    } finally {\r\n      setResendLoading(false);\r\n    }\r\n  };\r\n\r\n  // Auto verify when all 6 digits are entered\r\n  useEffect(() => {\r\n    const otpCode = otp.join('');\r\n    if (otpCode.length === 6 && !loading) {\r\n      handleVerifyOTP();\r\n    }\r\n  }, [otp]);\r\n\r\n  return (",
          "index": 1736
        },
        {
          "kind": "JSXText",
          "text": "ChÃºng tÃ´i Ä‘Ã£ gá»­i mÃ£ xÃ¡c thá»±c 6 sá»‘ Ä‘áº¿n",
          "index": 4375
        },
        {
          "kind": "JSXText",
          "text": "Nháº­p mÃ£ xÃ¡c thá»±c",
          "index": 4647
        },
        {
          "kind": "JSXText",
          "text": "Gá»­i láº¡i mÃ£ sau {timer}s",
          "index": 5690
        },
        {
          "kind": "JSXText",
          "text": "Gá»­i láº¡i mÃ£ xÃ¡c thá»±c",
          "index": 6073
        },
        {
          "kind": "JSXText",
          "text": "XÃ¡c thá»±c",
          "index": 6778
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng nháº­n Ä‘Æ°á»£c mÃ£?",
          "index": 7192
        },
        {
          "kind": "JSXText",
          "text": "Kiá»ƒm tra thÆ° má»¥c spam hoáº·c nháº¥n \"Gá»­i láº¡i mÃ£ xÃ¡c thá»±c\"",
          "index": 7228
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ 6 sá»‘",
          "index": 2580
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi xÃ¡c thá»±c",
          "index": 3055
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ gá»­i láº¡i mÃ£ xÃ¡c thá»±c",
          "index": 3615
        },
        {
          "kind": "StringLiteral",
          "text": "Gá»­i láº¡i mÃ£ xÃ¡c thá»±c",
          "index": 7261
        }
      ]
    },
    {
      "file": "features\\auth\\components\\ForgotPassword.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "('email');\r\n  const [otp, setOtp] = useState('');\r\n  const [generatedOTP, setGeneratedOTP] = useState('');\r\n\r\n  const handleSendOTP = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!email) {\r\n      toast.error('Vui lÃ²ng nháº­p email');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Táº¡o OTP ngáº«u nhiÃªn\r\n      const otpCode = Math.floor(100000 + Math.random() * 900000).toString();\r\n      setGeneratedOTP(otpCode);\r\n\r\n      // Gá»­i OTP qua EmailJS\r\n      await emailJSService.sendOTPEmail(email, otpCode);\r\n      \r\n      toast.success('MÃ£ OTP Ä‘Ã£ Ä‘Æ°á»£c gá»­i Ä‘áº¿n email cá»§a báº¡n!');\r\n      setStep('otp');\r\n    } catch (error) {\r\n      console.error('Error sending OTP:', error);\r\n      toast.error('KhÃ´ng thá»ƒ gá»­i mÃ£ OTP. Vui lÃ²ng thá»­ láº¡i.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleVerifyOTP = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!otp) {\r\n      toast.error('Vui lÃ²ng nháº­p mÃ£ OTP');\r\n      return;\r\n    }\r\n\r\n    if (otp !== generatedOTP) {\r\n      toast.error('MÃ£ OTP khÃ´ng Ä‘Ãºng');\r\n      return;\r\n    }\r\n\r\n    toast.success('XÃ¡c thá»±c thÃ nh cÃ´ng!');\r\n    setStep('reset');\r\n  };\r\n\r\n  const handleResetPassword = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // Sá»­ dá»¥ng Firebase's sendPasswordResetEmail\r\n      await sendPasswordResetEmail(auth, email);\r\n      toast.success('Email Ä‘áº·t láº¡i máº­t kháº©u Ä‘Ã£ Ä‘Æ°á»£c gá»­i! HÃ£y kiá»ƒm tra há»™p thÆ° cá»§a báº¡n.');\r\n      onBack();\r\n    } catch (error: any) {\r\n      console.error('Error resetting password:', error);\r\n      if (error.code === 'auth/user-not-found') {\r\n        toast.error('KhÃ´ng tÃ¬m tháº¥y tÃ i khoáº£n vá»›i email nÃ y');\r\n      } else {\r\n        toast.error('CÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (",
          "index": 690
        },
        {
          "kind": "JSXText",
          "text": "QuÃªn máº­t kháº©u",
          "index": 3086
        },
        {
          "kind": "JSXText",
          "text": "ChÃºng tÃ´i sáº½ gá»­i mÃ£ OTP Ä‘áº¿n email nÃ y Ä‘á»ƒ xÃ¡c thá»±c danh tÃ­nh.",
          "index": 4007
        },
        {
          "kind": "JSXText",
          "text": "{loading ? 'Äang gá»­i...' : 'Gá»­i mÃ£ OTP'}",
          "index": 4531
        },
        {
          "kind": "JSXText",
          "text": "MÃ£ OTP",
          "index": 4839
        },
        {
          "kind": "JSXText",
          "text": "Nháº­p mÃ£ OTP 6 sá»‘ Ä‘Ã£ Ä‘Æ°á»£c gá»­i Ä‘áº¿n email:",
          "index": 5381
        },
        {
          "kind": "JSXText",
          "text": "{loading ? 'Äang xÃ¡c thá»±c...' : 'XÃ¡c thá»±c'}",
          "index": 6278
        },
        {
          "kind": "JSXText",
          "text": "XÃ¡c thá»±c thÃ nh cÃ´ng!",
          "index": 6834
        },
        {
          "kind": "JSXText",
          "text": "ChÃºng tÃ´i sáº½ gá»­i link Ä‘áº·t láº¡i máº­t kháº©u Ä‘áº¿n email cá»§a báº¡n.",
          "index": 6917
        },
        {
          "kind": "JSXText",
          "text": "{loading ? 'Äang gá»­i email...' : 'Gá»­i email Ä‘áº·t láº¡i máº­t kháº©u'}",
          "index": 7436
        },
        {
          "kind": "JSXText",
          "text": "Quay láº¡i Ä‘Äƒng nháº­p",
          "index": 7732
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng nháº­p email",
          "index": 920
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ£ OTP Ä‘Ã£ Ä‘Æ°á»£c gá»­i Ä‘áº¿n email cá»§a báº¡n!",
          "index": 1262
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ gá»­i mÃ£ OTP. Vui lÃ²ng thá»­ láº¡i.",
          "index": 1420
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng nháº­p mÃ£ OTP",
          "index": 1642
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ£ OTP khÃ´ng Ä‘Ãºng",
          "index": 1743
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ¡c thá»±c thÃ nh cÃ´ng!",
          "index": 1808
        },
        {
          "kind": "StringLiteral",
          "text": "Email Ä‘áº·t láº¡i máº­t kháº©u Ä‘Ã£ Ä‘Æ°á»£c gá»­i! HÃ£y kiá»ƒm tra há»™p thÆ° cá»§a báº¡n.",
          "index": 2115
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y tÃ i khoáº£n vá»›i email nÃ y",
          "index": 2360
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i.",
          "index": 2440
        },
        {
          "kind": "StringLiteral",
          "text": "Äang gá»­i...",
          "index": 4559
        },
        {
          "kind": "StringLiteral",
          "text": "Gá»­i mÃ£ OTP",
          "index": 4575
        },
        {
          "kind": "StringLiteral",
          "text": "Äang xÃ¡c thá»±c...",
          "index": 6308
        },
        {
          "kind": "StringLiteral",
          "text": "XÃ¡c thá»±c",
          "index": 6329
        },
        {
          "kind": "StringLiteral",
          "text": "Äang gá»­i email...",
          "index": 7464
        },
        {
          "kind": "StringLiteral",
          "text": "Gá»­i email Ä‘áº·t láº¡i máº­t kháº©u",
          "index": 7486
        }
      ]
    },
    {
      "file": "features\\auth\\components\\AutoLogoutOnBan.tsx",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "TÃ i khoáº£n cá»§a báº¡n Ä‘Ã£ bá»‹ khoÃ¡. Vui lÃ²ng liÃªn há»‡ quáº£n trá»‹ viÃªn.",
          "index": 1038
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage\\index.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{\r\n  const { result, quiz, quizId, isLoading } = useResultData();\r\n  \r\n  // TÃ­nh toÃ¡n Ä‘iá»ƒm sá»‘, kiá»ƒm tra há»£p lá»‡\r\n  const correct = safeNumber(result?.correct);\r\n  const total = safeNumber(result?.total);\r\n  const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;\r\n  \r\n  // Pass current result to leaderboard\r\n  const currentResult = result ? {\r\n    score: { percentage },\r\n    correct,\r\n    total,\r\n    timeSpent: result.timeSpent\r\n  } : undefined;\r\n  \r\n  const { leaderboard, userRank, loadingStats } = useLeaderboard(quizId, currentResult);\r\n\r\n  // Debug logging\r\n  console.log('ðŸŽ¯ ResultPage render:', {\r\n    quizId,\r\n    isLoading,\r\n    hasResult: !!result,\r\n    hasQuiz: !!quiz,\r\n    leaderboardLength: leaderboard.length,\r\n    loadingStats,\r\n    userRank\r\n  });\r\n\r\n  if (isLoading) {\r\n    return",
          "index": 419
        },
        {
          "kind": "JSXText",
          "text": "{/* Káº¿t quáº£ tá»•ng quan */}",
          "index": 1496
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizResultViewer\\index.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      if (!resultId) {\r\n        console.error('âŒ No resultId provided');\r\n        navigate('/profile');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        console.log('ðŸ” Loading quiz result:', resultId);\r\n\r\n        // Fetch quiz result\r\n        const resultData = await getQuizResultById(resultId);\r\n        if (!resultData) {\r\n          console.error('âŒ Quiz result not found:', resultId);\r\n          toast.error('KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£ quiz!');\r\n          navigate('/profile');\r\n          return;\r\n        }\r\n\r\n        console.log('âœ… Loaded quiz result:', resultData);\r\n        setResult(resultData as QuizResult);\r\n\r\n        // Fetch quiz details\r\n        if (resultData.quizId) {\r\n          console.log('ðŸ” Loading quiz details:', resultData.quizId);\r\n          const quizData = await getQuizById(resultData.quizId);\r\n          if (quizData) {\r\n            console.log('âœ… Loaded quiz details:', quizData.title);\r\n            setQuiz(quizData);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('âŒ Error loading data:', error);\r\n        toast.error('KhÃ´ng thá»ƒ táº£i káº¿t quáº£ quiz!');\r\n        navigate('/profile');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, [resultId, navigate]);\r\n\r\n  // Calculate percentage with unified logic (same as before)\r\n  const getPercentage = () => {\r\n    if (!result) return 0;\r\n    \r\n    // Primary: Use correctAnswers/totalQuestions if available\r\n    if (typeof result.correctAnswers === 'number' && typeof result.totalQuestions === 'number' && result.totalQuestions > 0) {\r\n      return Math.round((result.correctAnswers / result.totalQuestions) * 100);\r\n    } \r\n    // Fallback: Use score field\r\n    else if (typeof result.score === 'number' && !isNaN(result.score)) {\r\n      return result.score",
          "index": 992
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£",
          "index": 4325
        },
        {
          "kind": "JSXText",
          "text": "navigate('/profile')}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          >\r\n            Quay láº¡i Profile",
          "index": 4399
        },
        {
          "kind": "JSXText",
          "text": "{/* Káº¿t quáº£ tá»•ng quan */}",
          "index": 4850
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£ quiz!",
          "index": 1551
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i káº¿t quáº£ quiz!",
          "index": 2211
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPage\\index.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Äang táº£i quiz...",
          "index": 964
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng thá»ƒ táº£i quiz",
          "index": 1308
        },
        {
          "kind": "JSXText",
          "text": "Äang xá»­ lÃ½ káº¿t quáº£...",
          "index": 2803
        },
        {
          "kind": "JSXText",
          "text": "{/* Header vá»›i Timer vÃ  Progress */}",
          "index": 2970
        },
        {
          "kind": "JSXText",
          "text": "ThoÃ¡t",
          "index": 3744
        },
        {
          "kind": "JSXText",
          "text": "navigate('/multiplayer', { state: { selectedQuiz: quiz } })}\r\n                className=\"px-3 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium hover:opacity-90 shadow-sm\"\r\n                title=\"ChÆ¡i cÃ¹ng báº¡n bÃ¨\"\r\n              >\r\n                ChÆ¡i cÃ¹ng",
          "index": 4074
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u trÆ°á»›c",
          "index": 6688
        },
        {
          "kind": "JSXText",
          "text": "Ná»™p bÃ i",
          "index": 7412
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u tiáº¿p",
          "index": 7792
        },
        {
          "kind": "JSXText",
          "text": "{/* ThÃªm cáº£nh bÃ¡o háº¿t giá» náº¿u cáº§n thiáº¿t - hiá»‡n khi cÃ²n",
          "index": 8495
        },
        {
          "kind": "JSXText",
          "text": "{isTimeCritical \r\n              ? \"Chá»‰ cÃ²n Ã­t hÆ¡n 1 phÃºt! HÃ£y hoÃ n thÃ nh ngay.\" \r\n              : \"Sáº¯p háº¿t giá»! Chá»‰ cÃ²n 10% thá»i gian.\"}",
          "index": 8820
        },
        {
          "kind": "StringLiteral",
          "text": "Quiz khÃ´ng tá»“n táº¡i",
          "index": 1383
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ¡i cÃ¹ng báº¡n bÃ¨",
          "index": 4315
        },
        {
          "kind": "StringLiteral",
          "text": "Chá»‰ cÃ²n Ã­t hÆ¡n 1 phÃºt! HÃ£y hoÃ n thÃ nh ngay.",
          "index": 8869
        },
        {
          "kind": "StringLiteral",
          "text": "Sáº¯p háº¿t giá»! Chá»‰ cÃ²n 10% thá»i gian.",
          "index": 8933
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\index.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(defaultQuiz);\r\n  const [step, setStep] = useState(0);\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  // Kiá»ƒm tra quyá»n truy cáº­p\r\n  if (!currentUser) {\r\n    return (",
          "index": 933
        },
        {
          "kind": "JSXText",
          "text": ");\r\n  }\r\n\r\n  // ThÃªm cÃ¢u há»i má»›i\r\n  const addQuestion = () => {\r\n    setQuiz(q => ({\r\n      ...q,\r\n      questions: [\r\n        ...q.questions,\r\n        {\r\n          id: generateId(),\r\n          text: '',\r\n          type: 'multiple',\r\n          answers: [\r\n            { id: generateId(), text: '', isCorrect: true },\r\n            { id: generateId(), text: '', isCorrect: false },\r\n            { id: generateId(), text: '', isCorrect: false },\r\n            { id: generateId(), text: '', isCorrect: false },\r\n          ],\r\n          points: 1,\r\n          correctAnswer: '',\r\n          acceptedAnswers: [],\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  // Sá»­a cÃ¢u há»i\r\n  const updateQuestion = (idx: number, q: Question) => {\r\n    setQuiz(prev => ({\r\n      ...prev,\r\n      questions: prev.questions.map((item, i) => i === idx ? q : item),\r\n    }));\r\n  };\r\n\r\n  // XÃ³a cÃ¢u há»i\r\n  const deleteQuestion = (idx: number) => {\r\n    setQuiz(prev => ({\r\n      ...prev,\r\n      questions: prev.questions.filter((_, i) => i !== idx),\r\n    }));\r\n  };\r\n\r\n  // Di chuyá»ƒn cÃ¢u há»i\r\n  const moveQuestion = (fromIndex: number, toIndex: number) => {\r\n    if (toIndex",
          "index": 1859
        },
        {
          "kind": "JSXText",
          "text": "= quiz.questions.length) return;\r\n    \r\n    setQuiz(prev => {\r\n      const newQuestions = [...prev.questions];\r\n      const [moved] = newQuestions.splice(fromIndex, 1);\r\n      newQuestions.splice(toIndex, 0, moved);\r\n      return { ...prev, questions: newQuestions };\r\n    });\r\n  };\r\n\r\n  // Validate tá»«ng step\r\n  const validateStep = (stepIndex: number): boolean => {\r\n    switch (stepIndex) {\r\n      case 0:\r\n        return !!(quiz.title && quiz.description && quiz.category && quiz.difficulty);\r\n      case 1:\r\n        return quiz.questions.length > 0 && quiz.questions.every(q => {\r\n          // Kiá»ƒm tra text cÃ¢u há»i\r\n          if (!q.text) return false;\r\n          \r\n          // Kiá»ƒm tra theo tá»«ng loáº¡i cÃ¢u há»i\r\n          switch (q.type) {\r\n            case 'short_answer':\r\n              return !!q.correctAnswer;\r\n            case 'boolean':\r\n            case 'multiple':\r\n            case 'image':\r\n              return q.answers.some(a => a.isCorrect) && q.answers.every(a => a.text);\r\n            default:\r\n              return false;\r\n          }\r\n        });\r\n      case 2:\r\n        return true;\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  // Submit quiz\r\n  const handleSubmit = async () => {\r\n    if (!currentUser) {\r\n      toast.error(t('createQuiz.loginRequired'));\r\n      return;\r\n    }\r\n\r\n    if (!validateStep(1)) {\r\n      toast.error(t('createQuiz.completeAllInfo'));\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    try {\r\n      await addDoc(collection(db, 'quizzes'), {\r\n        ...quiz,\r\n        createdBy: currentUser.uid,\r\n        createdAt: serverTimestamp(),\r\n        updatedAt: serverTimestamp(),\r\n        isPublished: true,\r\n        tags: [],\r\n        status: 'pending', // Äáº·t tráº¡ng thÃ¡i chá» duyá»‡t\r\n      });\r\n\r\n      toast.success(t('createQuiz.createSuccess'));\r\n      setQuiz(defaultQuiz);\r\n      setStep(0);\r\n    } catch (error) {\r\n      console.error('Error creating quiz:', error);\r\n      toast.error(t('createQuiz.createError'));\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const nextStep = () => {\r\n    if (validateStep(step)) {\r\n      setStep(prev => Math.min(prev + 1, steps.length - 1));\r\n    } else {\r\n      toast.error(t('createQuiz.completeInfoFirst'));\r\n    }\r\n  };\r\n\r\n  const prevStep = () => {\r\n    setStep(prev => Math.max(prev - 1, 0));\r\n  };\r\n\r\n  return (",
          "index": 3022
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\constants.ts",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "Láº­p trÃ¬nh",
          "index": 328
        },
        {
          "kind": "StringLiteral",
          "text": "ToÃ¡n há»c",
          "index": 370
        },
        {
          "kind": "StringLiteral",
          "text": "Khoa há»c",
          "index": 414
        },
        {
          "kind": "StringLiteral",
          "text": "Lá»‹ch sá»­",
          "index": 458
        },
        {
          "kind": "StringLiteral",
          "text": "NgÃ´n ngá»¯",
          "index": 502
        },
        {
          "kind": "StringLiteral",
          "text": "Tá»•ng há»£p",
          "index": 546
        },
        {
          "kind": "StringLiteral",
          "text": "Dá»…",
          "index": 624
        },
        {
          "kind": "StringLiteral",
          "text": "Trung bÃ¬nh",
          "index": 661
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ³",
          "index": 704
        },
        {
          "kind": "StringLiteral",
          "text": "ThÃ´ng tin Quiz",
          "index": 746
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ¢u há»i",
          "index": 767
        },
        {
          "kind": "StringLiteral",
          "text": "Xem láº¡i & Xuáº¥t báº£n",
          "index": 781
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage\\components\\ResultSummary.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{/* Hiá»ƒn thá»‹ thá»i gian lÃ m bÃ i - giá»‘ng y há»‡t Leaderboard */}\r\n          {typeof result.timeSpent === 'number' && (",
          "index": 1367
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage\\components\\Leaderboard.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "ï¿½ LÆ¯á»¢T Má»šI NHáº¤T - Xáº¾P Háº NG #{index + 1}",
          "index": 2872
        },
        {
          "kind": "JSXText",
          "text": "(LÆ°á»£t trÆ°á»›c Ä‘Ã³)",
          "index": 3183
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage\\components\\AnswerReview.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "{quiz.questions.map((question, index) => {\r\n            const userAnswerValue = result.answers[question.id];\r\n            \r\n            // Logic Ä‘á»ƒ xÃ¡c Ä‘á»‹nh Ä‘Ã¡p Ã¡n Ä‘Ãºng sai dá»±a trÃªn loáº¡i cÃ¢u há»i\r\n            let isCorrect = false;\r\n            let userAnswerText = '';\r\n            \r\n            switch (question.type) {\r\n              case 'boolean':\r\n              case 'multiple':\r\n              case 'image': {\r\n                const userAnswer = question.answers.find(a => a.id === userAnswerValue);\r\n                isCorrect = userAnswer?.isCorrect || false;\r\n                userAnswerText = userAnswer?.text || 'ChÆ°a tráº£ lá»i';\r\n                break;\r\n              }\r\n              case 'short_answer': {\r\n                // Import checkShortAnswer function hoáº·c tÃ­nh toÃ¡n táº¡i Ä‘Ã¢y\r\n                const normalizeAnswer = (answer: string) => \r\n                  answer.trim().toLowerCase().replace(/\\s+/g, ' ');\r\n                \r\n                const normalizedUserAnswer = normalizeAnswer(userAnswerValue || '');\r\n                \r\n                if (question.correctAnswer && normalizeAnswer(question.correctAnswer) === normalizedUserAnswer) {\r\n                  isCorrect = true;\r\n                } else if (question.acceptedAnswers) {\r\n                  isCorrect = question.acceptedAnswers.some(accepted => \r\n                    normalizeAnswer(accepted) === normalizedUserAnswer\r\n                  );\r\n                }\r\n                userAnswerText = userAnswerValue || 'ChÆ°a tráº£ lá»i';\r\n                break;\r\n              }\r\n              case 'checkbox': {\r\n                const correctIds = question.answers.filter(a => a.isCorrect).map(a => a.id).sort();\r\n                const userIds = Array.isArray(userAnswerValue) ? [...userAnswerValue].sort() : [];\r\n                isCorrect = JSON.stringify(correctIds) === JSON.stringify(userIds);\r\n                const selectedAnswers = question.answers.filter(a => userIds.includes(a.id));\r\n                userAnswerText = selectedAnswers.length > 0 \r\n                  ? selectedAnswers.map(a => a.text).join(', ')\r\n                  : 'ChÆ°a tráº£ lá»i';\r\n                break;\r\n              }\r\n            }\r\n\r\n            return (",
          "index": 889
        },
        {
          "kind": "JSXText",
          "text": "{/* Hiá»ƒn thá»‹ cÃ¢u tráº£ lá»i cá»§a user */}",
          "index": 3727
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u tráº£ lá»i cá»§a báº¡n:",
          "index": 3937
        },
        {
          "kind": "JSXText",
          "text": "{/* Hiá»ƒn thá»‹ Ä‘Ã¡p Ã¡n cho multiple choice, image vÃ  boolean */}\r\n                {(question.type === 'multiple' || question.type === 'image' || question.type === 'boolean') && (",
          "index": 4064
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n                {/* Hiá»ƒn thá»‹ Ä‘Ã¡p Ã¡n cho checkbox */}\r\n                {question.type === 'checkbox' && (",
          "index": 5790
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n\r\n                {/* Hiá»ƒn thá»‹ Ä‘Ã¡p Ã¡n cho short answer */}\r\n                {question.type === 'short_answer' && (",
          "index": 8014
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡p Ã¡n Ä‘Ãºng:",
          "index": 8356
        },
        {
          "kind": "JSXText",
          "text": "(hoáº·c: {question.acceptedAnswers.join(', ')})",
          "index": 8632
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a tráº£ lá»i",
          "index": 1522
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a tráº£ lá»i",
          "index": 2394
        },
        {
          "kind": "StringLiteral",
          "text": "ChÆ°a tráº£ lá»i",
          "index": 3014
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage\\components\\ActionButtons.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "navigate(`/quiz/${quiz.id}`)}\r\n        className=\"bg-blue-600 hover:bg-blue-700\"\r\n      >\r\n        ðŸ”„ LÃ m láº¡i Quiz",
          "index": 734
        },
        {
          "kind": "JSXText",
          "text": "navigate('/multiplayer', { state: { selectedQuiz: quiz } })}\r\n        className=\"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white\"\r\n      >\r\n        ðŸ‘¥ ChÆ¡i cÃ¹ng báº¡n bÃ¨",
          "index": 907
        },
        {
          "kind": "JSXText",
          "text": "{\r\n          console.log('ðŸ“š Navigating to /quizzes...');\r\n          navigate('/quizzes');\r\n        }}\r\n        variant=\"outline\"\r\n      >\r\n        ðŸ“š Xem thÃªm Quiz",
          "index": 1191
        },
        {
          "kind": "JSXText",
          "text": "navigate('/dashboard')}\r\n        variant=\"outline\"\r\n      >\r\n        ðŸ  Vá» Dashboard",
          "index": 1420
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“¤ Chia sáº» káº¿t quáº£",
          "index": 1618
        },
        {
          "kind": "JSXText",
          "text": "navigate('/profile')}\r\n        variant=\"outline\"\r\n      >\r\n        ðŸ‘¤ Xem táº¥t cáº£ káº¿t quáº£",
          "index": 1710
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage\\hooks\\useResultData.ts",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n\r\n  useEffect(() => {\r\n    console.log('ðŸ” ResultPage useEffect - attemptId:', attemptId, 'location.state:', location.state);\r\n    console.log('ðŸ” URL attemptId type and value:', typeof attemptId, attemptId);\r\n    console.log('ðŸ” Current URL:', window.location.href);\r\n    \r\n    if (location.state) {\r\n      // CÃ³ state tá»« navigation - sá»­ dá»¥ng ngay\r\n      const resultData = location.state as ResultState;\r\n      console.log('âœ… Using state from navigation:', resultData);\r\n      setResult(resultData);\r\n      setQuizId(resultData.quizId || attemptId || null);\r\n    } else if (attemptId) {\r\n      // KhÃ´ng cÃ³ state, fetch tá»« Firestore báº±ng attemptId (quizResults doc id)\r\n      (async () => {\r\n        try {\r\n          console.log('ðŸ“¡ Fetching quizResult document for attemptId:', attemptId);\r\n          console.log('ðŸ“¡ This should be a Firestore document ID, not a quiz ID');\r\n          const raw = await getQuizResultById(attemptId);\r\n          if (!raw) {\r\n            console.error('âŒ No quizResult found for attemptId:', attemptId);\r\n            console.error('âŒ This might mean attemptId is not a valid Firestore document ID');\r\n            navigate('/quiz-list');\r\n            return;\r\n          }\r\n          // Map Firestore quizResult -> ResultState shape\r\n          const totalQuestions = (raw.totalQuestions ?? (raw.answers?.length || 0));\r\n          let correctAnswers = (raw.correctAnswers ?? 0);\r\n          // Heuristic: if correctAnswers missing/zero but score >0, derive from score percentage\r\n          if ((correctAnswers === 0 || correctAnswers === undefined) && typeof raw.score === 'number' && raw.score > 0 && totalQuestions > 0) {\r\n            const derived = Math.round(((raw.score",
          "index": 904
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y quiz!",
          "index": 4519
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i quiz!",
          "index": 4695
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\ResultPage\\hooks\\useLeaderboard.ts",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "Báº¡n",
          "index": 1515
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº£i báº£ng xáº¿p háº¡ng!",
          "index": 3641
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPage\\hooks\\useQuizSession.ts",
      "matches": [
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ lÆ°u káº¿t quáº£ quiz. Vui lÃ²ng thá»­ láº¡i!",
          "index": 6362
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPage\\components\\Timer.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Thá»i gian cÃ²n láº¡i",
          "index": 1400
        },
        {
          "kind": "JSXText",
          "text": "Sáº¯p háº¿t giá»!",
          "index": 2414
        },
        {
          "kind": "JSXText",
          "text": "CÃ²n Ã­t thá»i gian",
          "index": 2888
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPage\\components\\QuickNavigation.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Äiá»u hÆ°á»›ng nhanh",
          "index": 521
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPage\\components\\QuestionRenderer.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "ðŸ’¡ Nháº­p Ä‘Ã¡p Ã¡n vÃ o Ã´ bÃªn dÆ°á»›i:",
          "index": 3187
        },
        {
          "kind": "JSXText",
          "text": "onChange(answer.id)}\r\n          className={`relative p-4 rounded-lg border-2 transition-all ${\r\n            value === answer.id\r\n              ? 'border-blue-500 bg-blue-50'\r\n              : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'\r\n          }`}\r\n        >\r\n          {/* áº¢nh */}\r\n          {answer.imageUrl ? (",
          "index": 3784
        },
        {
          "kind": "JSXText",
          "text": "KhÃ´ng thá»ƒ táº£i áº£nh",
          "index": 4805
        },
        {
          "kind": "JSXText",
          "text": "ChÆ°a cÃ³ áº£nh",
          "index": 5048
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n          \r\n          {/* Label vÃ  Radio */}",
          "index": 5086
        },
        {
          "kind": "JSXText",
          "text": "{String.fromCharCode(65 + index)}. {answer.text || `áº¢nh ${index + 1}`}",
          "index": 5267
        },
        {
          "kind": "JSXText",
          "text": "ðŸ’¡ Báº¡n cÃ³ thá»ƒ chá»n nhiá»u Ä‘Ã¡p Ã¡n cho cÃ¢u há»i nÃ y.",
          "index": 6026
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPage\\components\\ProgressIndicator.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Tiáº¿n Ä‘á»™",
          "index": 436
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\QuizPage\\components\\ConfirmationModals.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Báº¡n cÃ³ cháº¯c muá»‘n thoÃ¡t?",
          "index": 1191
        },
        {
          "kind": "JSXText",
          "text": "Tiáº¿n Ä‘á»™ cá»§a báº¡n sáº½ bá»‹ máº¥t náº¿u thoÃ¡t bÃ¢y giá».",
          "index": 1297
        },
        {
          "kind": "JSXText",
          "text": "modalControls.setShowExitModal(false)}\r\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n              >\r\n                Tiáº¿p tá»¥c lÃ m bÃ i",
          "index": 1472
        },
        {
          "kind": "JSXText",
          "text": "ThoÃ¡t",
          "index": 1901
        },
        {
          "kind": "JSXText",
          "text": "XÃ¡c nháº­n ná»™p bÃ i",
          "index": 2339
        },
        {
          "kind": "JSXText",
          "text": "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n ná»™p bÃ i? Sau khi ná»™p sáº½ khÃ´ng thá»ƒ thay Ä‘á»•i Ä‘Ã¡p Ã¡n.",
          "index": 2438
        },
        {
          "kind": "JSXText",
          "text": "Ná»™p bÃ i",
          "index": 3064
        },
        {
          "kind": "JSXText",
          "text": "CÃ²n cÃ¢u há»i chÆ°a tráº£ lá»i",
          "index": 3509
        },
        {
          "kind": "JSXText",
          "text": "Báº¡n cÃ²n {unansweredQuestions.length} cÃ¢u há»i chÆ°a tráº£ lá»i:",
          "index": 3616
        },
        {
          "kind": "JSXText",
          "text": "{\r\n                    modalControls.setShowUnansweredModal(false);\r\n                    onGoToQuestion(index);\r\n                  }}\r\n                  className=\"block w-full text-left p-2 hover:bg-gray-100 rounded text-blue-600 hover:text-blue-800\"\r\n                >\r\n                  CÃ¢u {index + 1}: {question.text.slice(0, 50)}...",
          "index": 3928
        },
        {
          "kind": "JSXText",
          "text": "modalControls.setShowUnansweredModal(false)}\r\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n              >\r\n                Tiáº¿p tá»¥c lÃ m bÃ i",
          "index": 4430
        },
        {
          "kind": "JSXText",
          "text": "Ná»™p bÃ i luÃ´n",
          "index": 4873
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\SortableItem.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "moveQuestion(index, index - 1)}\r\n          disabled={index === 0}\r\n          className=\"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30\"\r\n          title=\"Di chuyá»ƒn lÃªn\"\r\n        >\r\n          â¬†ï¸",
          "index": 1219
        },
        {
          "kind": "JSXText",
          "text": "moveQuestion(index, index + 1)}\r\n          disabled={index === totalQuestions - 1}\r\n          className=\"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30\"\r\n          title=\"Di chuyá»ƒn xuá»‘ng\"\r\n        >\r\n          â¬‡ï¸",
          "index": 1511
        },
        {
          "kind": "StringLiteral",
          "text": "KÃ©o Ä‘á»ƒ sáº¯p xáº¿p",
          "index": 1095
        },
        {
          "kind": "StringLiteral",
          "text": "Di chuyá»ƒn lÃªn",
          "index": 1385
        },
        {
          "kind": "StringLiteral",
          "text": "Di chuyá»ƒn xuá»‘ng",
          "index": 1694
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\ReviewStep.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "TiÃªu Ä‘á»:",
          "index": 641
        },
        {
          "kind": "JSXText",
          "text": "Danh má»¥c:",
          "index": 702
        },
        {
          "kind": "JSXText",
          "text": "Äá»™ khÃ³:",
          "index": 767
        },
        {
          "kind": "JSXText",
          "text": "Thá»i gian:",
          "index": 832
        },
        {
          "kind": "JSXText",
          "text": "{quiz.duration} phÃºt",
          "index": 851
        },
        {
          "kind": "JSXText",
          "text": "Sá»‘ cÃ¢u há»i:",
          "index": 903
        },
        {
          "kind": "JSXText",
          "text": "Tá»•ng Ä‘iá»ƒm:",
          "index": 978
        },
        {
          "kind": "JSXText",
          "text": "MÃ´ táº£:",
          "index": 1121
        },
        {
          "kind": "JSXText",
          "text": "Danh sÃ¡ch cÃ¢u há»i",
          "index": 1286
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u {idx + 1}: {q.text}",
          "index": 1537
        },
        {
          "kind": "JSXText",
          "text": "{q.type} â€¢ {q.points} Ä‘iá»ƒm",
          "index": 1654
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡p Ã¡n:",
          "index": 1879
        },
        {
          "kind": "JSXText",
          "text": "CÃ¡c cÃ¡ch viáº¿t khÃ¡c:",
          "index": 2041
        },
        {
          "kind": "JSXText",
          "text": "Giáº£i thÃ­ch:",
          "index": 3160
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\QuizInfoStep.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Tá»« 5 Ä‘áº¿n 120 phÃºt",
          "index": 4886
        },
        {
          "kind": "JSXText",
          "text": "Tags (tÃ¹y chá»n)",
          "index": 5116
        },
        {
          "kind": "JSXText",
          "text": "VÃ­ dá»¥: javascript, react, frontend",
          "index": 5680
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p tags, cÃ¡ch nhau báº±ng dáº¥u pháº©y...",
          "index": 5355
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\QuizBulkImport.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": ", fileType: 'csv' | 'excel') => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setUploading(true);\r\n    \r\n    try {\r\n      // Validate file type\r\n      const validTypes = fileType === 'csv' \r\n        ? ['text/csv', 'application/csv']\r\n        : ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];\r\n      \r\n      if (!validTypes.some(type => file.type.includes(type) || file.name.toLowerCase().endsWith(fileType === 'csv' ? '.csv' : '.xlsx'))) {\r\n        toast.error(`Vui lÃ²ng chá»n file ${fileType.toUpperCase()} há»£p lá»‡`);\r\n        setUploading(false);\r\n        return;\r\n      }\r\n\r\n      // Parse file content\r\n      const questions = await parseFile(file, fileType);\r\n      \r\n      if (questions.length === 0) {\r\n        toast.error('KhÃ´ng tÃ¬m tháº¥y cÃ¢u há»i há»£p lá»‡ trong file');\r\n        setUploading(false);\r\n        return;\r\n      }\r\n\r\n      onQuestionsImported(questions);\r\n      toast.success(`ÄÃ£ import thÃ nh cÃ´ng ${questions.length} cÃ¢u há»i!`);\r\n      setIsOpen(false);\r\n      \r\n    } catch (error) {\r\n      console.error('Error parsing file:', error);\r\n      toast.error('CÃ³ lá»—i xáº£y ra khi Ä‘á»c file. Vui lÃ²ng kiá»ƒm tra Ä‘á»‹nh dáº¡ng file.');\r\n    } finally {\r\n      setUploading(false);\r\n      // Reset file input\r\n      event.target.value = '';\r\n    }\r\n  };\r\n\r\n  const parseFile = async (file: File, fileType: 'csv' | 'excel'): Promise",
          "index": 483
        },
        {
          "kind": "JSXText",
          "text": "field.replace(/^\"(.*)\"$/, '$1')); // Remove surrounding quotes\r\n  };\r\n\r\n  const downloadTemplate = (fileType: 'csv' | 'excel') => {\r\n    const headers = ['CÃ¢u há»i', 'ÄÃ¡p Ã¡n A', 'ÄÃ¡p Ã¡n B', 'ÄÃ¡p Ã¡n C', 'ÄÃ¡p Ã¡n D', 'ÄÃ¡p Ã¡n Ä‘Ãºng (A/B/C/D)', 'Giáº£i thÃ­ch (tÃ¹y chá»n)', 'Äiá»ƒm (máº·c Ä‘á»‹nh 10)'];\r\n    const sampleRow = [\r\n      'JavaScript lÃ  ngÃ´n ngá»¯ gÃ¬?',\r\n      'NgÃ´n ngá»¯ láº­p trÃ¬nh',\r\n      'NgÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u',\r\n      'Há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u',\r\n      'Há»‡ Ä‘iá»u hÃ nh',\r\n      'A',\r\n      'JavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n',\r\n      '10'\r\n    ];\r\n    \r\n    const csvContent = [headers, sampleRow]\r\n      .map(row => row.map(field => `\"${field}\"`).join(','))\r\n      .join('\\n');\r\n    \r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = `quiz_template.${fileType === 'csv' ? 'csv' : 'xlsx'}`;\r\n    link.click();\r\n    URL.revokeObjectURL(link.href);\r\n  };\r\n\r\n  return (",
          "index": 4366
        },
        {
          "kind": "JSXText",
          "text": "Táº£i File",
          "index": 5632
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“ Táº£i file cÃ¢u há»i",
          "index": 5997
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“‹ Äá»‹nh dáº¡ng file:",
          "index": 6478
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Cá»™t 1: CÃ¢u há»i",
          "index": 6591
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Cá»™t 2-5: ÄÃ¡p Ã¡n A, B, C, D",
          "index": 6636
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Cá»™t 6: ÄÃ¡p Ã¡n Ä‘Ãºng (A/B/C/D)",
          "index": 6693
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Cá»™t 7: Giáº£i thÃ­ch (tÃ¹y chá»n)",
          "index": 6752
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Cá»™t 8: Äiá»ƒm (máº·c Ä‘á»‹nh 10)",
          "index": 6811
        },
        {
          "kind": "JSXText",
          "text": "downloadTemplate('csv')}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm\"\r\n                >\r\n                  ðŸ“„ Táº£i máº«u CSV",
          "index": 7038
        },
        {
          "kind": "JSXText",
          "text": "downloadTemplate('excel')}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm\"\r\n                >\r\n                  ðŸ“Š Táº£i máº«u Excel",
          "index": 7327
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“„ Chá»n file CSV:",
          "index": 7778
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“Š Chá»n file Excel:",
          "index": 8335
        },
        {
          "kind": "JSXText",
          "text": "Äang xá»­ lÃ½ file...",
          "index": 9082
        },
        {
          "kind": "JSXText",
          "text": "Máº¹o:",
          "index": 9353
        },
        {
          "kind": "JSXText",
          "text": "Sá»­ dá»¥ng template Ä‘á»ƒ Ä‘áº£m báº£o Ä‘á»‹nh dáº¡ng Ä‘Ãºng. \r\n                  File cÃ³ thá»ƒ chá»©a nhiá»u cÃ¢u há»i, má»—i cÃ¢u há»i trÃªn má»™t dÃ²ng.",
          "index": 9366
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng tÃ¬m tháº¥y cÃ¢u há»i há»£p lá»‡ trong file",
          "index": 1293
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi Ä‘á»c file. Vui lÃ²ng kiá»ƒm tra Ä‘á»‹nh dáº¡ng file.",
          "index": 1637
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ¢u há»i",
          "index": 4522
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n A",
          "index": 4533
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n B",
          "index": 4545
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n C",
          "index": 4557
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n D",
          "index": 4569
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ¡p Ã¡n Ä‘Ãºng (A/B/C/D)",
          "index": 4581
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i thÃ­ch (tÃ¹y chá»n)",
          "index": 4606
        },
        {
          "kind": "StringLiteral",
          "text": "Äiá»ƒm (máº·c Ä‘á»‹nh 10)",
          "index": 4631
        },
        {
          "kind": "StringLiteral",
          "text": "JavaScript lÃ  ngÃ´n ngá»¯ gÃ¬?",
          "index": 4686
        },
        {
          "kind": "StringLiteral",
          "text": "NgÃ´n ngá»¯ láº­p trÃ¬nh",
          "index": 4723
        },
        {
          "kind": "StringLiteral",
          "text": "NgÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u",
          "index": 4752
        },
        {
          "kind": "StringLiteral",
          "text": "Há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u",
          "index": 4780
        },
        {
          "kind": "StringLiteral",
          "text": "Há»‡ Ä‘iá»u hÃ nh",
          "index": 4816
        },
        {
          "kind": "StringLiteral",
          "text": "JavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n",
          "index": 4851
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\QuestionsStep.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "Danh sÃ¡ch cÃ¢u há»i",
          "index": 2798
        },
        {
          "kind": "JSXText",
          "text": "+ ThÃªm cÃ¢u há»i",
          "index": 2957
        },
        {
          "kind": "JSXText",
          "text": "ChÆ°a cÃ³ cÃ¢u há»i nÃ o.",
          "index": 3514
        },
        {
          "kind": "JSXText",
          "text": "setShowGeminiAI(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 text-3xl font-bold transition-colors\"\r\n              >\r\n                Ã—",
          "index": 4907
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\QuestionEditor.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "= ({ question, onChange, onDelete }) => {\n  const { t } = useTranslation();\n\r\n  \r\n  // Xá»­ lÃ½ thay Ä‘á»•i loáº¡i cÃ¢u há»i\r\n  const handleTypeChange = (newType: Question['type']) => {\r\n    let newAnswers: Answer[] = [];\r\n    let newQuestion = { ...question, type: newType };\r\n    \r\n    switch (newType) {\r\n      case 'multiple':\r\n        // Tráº¯c nghiá»‡m: táº¡o 4 Ä‘Ã¡p Ã¡n máº·c Ä‘á»‹nh\r\n        newAnswers = Array.from({ length: 4 }, (_, i) => ({\r\n          id: generateId(),\r\n          text: '',\r\n          isCorrect: i === 0,\r\n        }));\r\n        break;\r\n      case 'boolean':\r\n        // ÄÃºng/Sai: táº¡o 2 Ä‘Ã¡p Ã¡n vá»›i isCorrect logic\r\n        newAnswers = [\r\n          { id: generateId(), text: 'ÄÃºng', isCorrect: true },\r\n          { id: generateId(), text: 'Sai', isCorrect: false }\r\n        ];\r\n        break;\r\n      case 'short_answer':\r\n        // Äiá»n tá»«: khÃ´ng cáº§n answers array, dÃ¹ng correctAnswer vÃ  acceptedAnswers\r\n        newAnswers = [];\r\n        newQuestion.correctAnswer = '';\r\n        newQuestion.acceptedAnswers = [];\r\n        break;\r\n      case 'image':\r\n        // Chá»n áº£nh: táº¡o 4 Ä‘Ã¡p Ã¡n cÃ³ imageUrl\r\n        newAnswers = Array.from({ length: 4 }, (_, i) => ({\r\n          id: generateId(),\r\n          text: `áº¢nh ${i + 1}`,\r\n          isCorrect: i === 0,\r\n          imageUrl: '',\r\n        }));\r\n        break;\r\n    }\r\n    \r\n    onChange({ ...newQuestion, answers: newAnswers });\r\n  };\r\n\r\n  const handleAnswerChange = (idx: number, field: keyof Answer, value: any) => {\r\n    const newAnswers = question.answers.map((a, i) =>\r\n      i === idx ? { ...a, [field]: value } : a\r\n    );\r\n    onChange({ ...question, answers: newAnswers });\r\n  };\r\n\r\n  const handleAddAnswer = () => {\r\n    if (question.type === 'multiple' || question.type === 'image') {\r\n      const newAnswer: Answer = {\r\n        id: generateId(),\r\n        text: question.type === 'image' ? `áº¢nh ${question.answers.length + 1}` : '',\r\n        isCorrect: false,\r\n        ...(question.type === 'image' && { imageUrl: '' }),\r\n      };\r\n      onChange({\r\n        ...question,\r\n        answers: [...question.answers, newAnswer],\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRemoveAnswer = (idx: number) => {\r\n    if (question.type === 'boolean') return; // Boolean khÃ´ng dÃ¹ng answers array\r\n    if ((question.type === 'multiple' || question.type === 'image') && question.answers.length",
          "index": 402
        },
        {
          "kind": "JSXText",
          "text": "i !== idx),\r\n    });\r\n  };\r\n\r\n  const handleSetCorrect = (idx: number) => {\r\n    if (question.type === 'boolean') {\r\n      // Vá»›i Boolean: náº¿u chá»n \"ÄÃºng\" (idx=0) thÃ¬ Ä‘Ã¡p Ã¡n Ä‘Ãºng lÃ  true, ngÆ°á»£c láº¡i false  \r\n      onChange({\r\n        ...question,\r\n        answers: question.answers.map((a, i) => ({ \r\n          ...a, \r\n          isCorrect: i === 0 ? idx === 0 : idx === 1 \r\n        })),\r\n      });\r\n    } else {\r\n      // Vá»›i Multiple Choice: chá»‰ cÃ³ 1 Ä‘Ã¡p Ã¡n Ä‘Ãºng\r\n      onChange({\r\n        ...question,\r\n        answers: question.answers.map((a, i) => ({ ...a, isCorrect: i === idx })),\r\n      });\r\n    }\r\n  };\r\n\r\n  // Xá»­ lÃ½ Ä‘iá»n tá»«\r\n  const handleCorrectAnswerChange = (value: string) => {\r\n    // Tá»± Ä‘á»™ng táº¡o acceptedAnswers tá»« correctAnswer\r\n    const accepted = [\r\n      value, // NguyÃªn vÄƒn\r\n      value.toLowerCase(), // Chá»¯ thÆ°á»ng\r\n      value.toUpperCase(), // Chá»¯ hoa\r\n      value.charAt(0).toUpperCase() + value.slice(1).toLowerCase(), // Capitalize\r\n    ].filter((v, i, arr) => arr.indexOf(v) === i && v.trim() !== ''); // Loáº¡i bá» trÃ¹ng láº·p vÃ  rá»—ng\r\n    \r\n    onChange({\r\n      ...question,\r\n      correctAnswer: value,\r\n      acceptedAnswers: accepted,\r\n    });\r\n  };\r\n\r\n  const addAcceptedAnswer = () => {\r\n    const newAnswer = prompt('Nháº­p tá»« Ä‘á»“ng nghÄ©a hoáº·c cÃ¡ch viáº¿t khÃ¡c:');\r\n    if (newAnswer && newAnswer.trim()) {\r\n      onChange({\r\n        ...question,\r\n        acceptedAnswers: [...(question.acceptedAnswers || []), newAnswer.trim()],\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeAcceptedAnswer = (idx: number) => {\r\n    onChange({\r\n      ...question,\r\n      acceptedAnswers: question.acceptedAnswers?.filter((_, i) => i !== idx) || [],\r\n    });\r\n  };\r\n\r\n  return (",
          "index": 2869
        },
        {
          "kind": "JSXText",
          "text": "{/* Header cÃ¢u há»i */}",
          "index": 4615
        },
        {
          "kind": "JSXText",
          "text": "Tráº¯c nghiá»‡m",
          "index": 5147
        },
        {
          "kind": "JSXText",
          "text": "ÄÃºng/Sai",
          "index": 5203
        },
        {
          "kind": "JSXText",
          "text": "Äiá»n tá»«",
          "index": 5261
        },
        {
          "kind": "JSXText",
          "text": "Chá»n áº£nh",
          "index": 5311
        },
        {
          "kind": "JSXText",
          "text": "{/* Ná»™i dung theo tá»«ng dáº¡ng */}\r\n      {question.type === 'multiple' && (",
          "index": 5800
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡p Ã¡n tráº¯c nghiá»‡m",
          "index": 6039
        },
        {
          "kind": "JSXText",
          "text": "+ ThÃªm Ä‘Ã¡p Ã¡n",
          "index": 6138
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u há»i ÄÃºng/Sai",
          "index": 7618
        },
        {
          "kind": "JSXText",
          "text": "Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng cho cÃ¢u há»i nÃ y:",
          "index": 7750
        },
        {
          "kind": "JSXText",
          "text": "{answer.text === 'ÄÃºng' ? 'âœ“' : 'âœ—'} {answer.text}",
          "index": 8416
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u há»i Ä‘iá»n tá»«",
          "index": 8763
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡p Ã¡n chÃ­nh xÃ¡c:",
          "index": 8935
        },
        {
          "kind": "JSXText",
          "text": "CÃ¡c cÃ¡ch viáº¿t Ä‘Æ°á»£c cháº¥p nháº­n:",
          "index": 9446
        },
        {
          "kind": "JSXText",
          "text": "+ ThÃªm cÃ¡ch viáº¿t khÃ¡c",
          "index": 10275
        },
        {
          "kind": "JSXText",
          "text": "Chá»n áº£nh Ä‘Ã¡p Ã¡n",
          "index": 10576
        },
        {
          "kind": "JSXText",
          "text": "+ ThÃªm áº£nh",
          "index": 10672
        },
        {
          "kind": "JSXText",
          "text": "ÄÃ¡p Ã¡n Ä‘Ãºng",
          "index": 12970
        },
        {
          "kind": "JSXText",
          "text": ")}\r\n\r\n      {/* Giáº£i thÃ­ch */}",
          "index": 13087
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃºng",
          "index": 1083
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃºng",
          "index": 3019
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p tá»« Ä‘á»“ng nghÄ©a hoáº·c cÃ¡ch viáº¿t khÃ¡c:",
          "index": 4120
        },
        {
          "kind": "StringLiteral",
          "text": "Ná»™i dung cÃ¢u há»i",
          "index": 4776
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃºng",
          "index": 8351
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃºng",
          "index": 8456
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p Ä‘Ã¡p Ã¡n chÃ­nh xÃ¡c...",
          "index": 9068
        },
        {
          "kind": "StringLiteral",
          "text": "MÃ´ táº£ áº£nh (tÃ¹y chá»n)",
          "index": 11614
        },
        {
          "kind": "StringLiteral",
          "text": "URL áº£nh",
          "index": 11912
        },
        {
          "kind": "StringLiteral",
          "text": "Giáº£i thÃ­ch Ä‘Ã¡p Ã¡n (tÃ¹y chá»n)",
          "index": 13248
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\ModernAIQuestionGenerator.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "(null);\r\n\r\n  const providers = aiQuestionService.providers;\r\n\r\n  useEffect(() => {\r\n    if (selectedProvider) {\r\n      const defaultConfig = aiQuestionService.createDefaultConfig(selectedProvider.id);\r\n      setConfig(defaultConfig);\r\n    }\r\n  }, [selectedProvider]);\r\n\r\n  const handleProviderSelect = (provider: AIProvider) => {\r\n    setSelectedProvider(provider);\r\n    setStep('config');\r\n    setConnectionStatus(null);\r\n  };\r\n\r\n  const handleTestConnection = async () => {\r\n    if (!config) return;\r\n    \r\n    setTestingConnection(true);\r\n    const result = await aiQuestionService.testConnection(config);\r\n    setConnectionStatus(result);\r\n    setTestingConnection(false);\r\n    \r\n    if (result.success) {\r\n      toast.success('Káº¿t ná»‘i AI thÃ nh cÃ´ng!');\r\n    } else {\r\n      toast.error(`Lá»—i káº¿t ná»‘i: ${result.message}`);\r\n    }\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    if (!config) return;\r\n\r\n    setGenerating(true);\r\n    try {\r\n      const result = await aiQuestionService.generateQuestions({\r\n        content,\r\n        config\r\n      });\r\n\r\n      if (result.error) {\r\n        toast.error(`Lá»—i táº¡o cÃ¢u há»i: ${result.error}`);\r\n        return;\r\n      }\r\n\r\n      setGeneratedQuestions(result.questions);\r\n      setStep('review');\r\n      toast.success(`ÄÃ£ táº¡o ${result.questions.length} cÃ¢u há»i!`);\r\n    } catch (error) {\r\n      toast.error('CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i');\r\n      console.error(error);\r\n    } finally {\r\n      setGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleAcceptQuestions = () => {\r\n    onQuestionsGenerated(generatedQuestions);\r\n    onClose();\r\n    toast.success('ÄÃ£ thÃªm cÃ¢u há»i vÃ o quiz!');\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (",
          "index": 1421
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o cÃ¢u há»i thÃ´ng minh vá»›i AI",
          "index": 3821
        },
        {
          "kind": "JSXText",
          "text": "Chá»n AI Provider",
          "index": 5283
        },
        {
          "kind": "JSXText",
          "text": "Lá»±a chá»n nhÃ  cung cáº¥p AI phÃ¹ há»£p vá»›i nhu cáº§u cá»§a báº¡n",
          "index": 5351
        },
        {
          "kind": "JSXText",
          "text": "Miá»…n phÃ­",
          "index": 7132
        },
        {
          "kind": "JSXText",
          "text": "Cáº¥u hÃ¬nh AI",
          "index": 8502
        },
        {
          "kind": "JSXText",
          "text": "TÃ¹y chá»‰nh cÃ¡ch AI táº¡o cÃ¢u há»i cho báº¡n",
          "index": 8565
        },
        {
          "kind": "JSXText",
          "text": "setConfig({...config, apiKey: e.target.value})}\r\n                          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                          placeholder=\"Nháº­p API key...\"\r\n                        />",
          "index": 9394
        },
        {
          "kind": "JSXText",
          "text": "Sá»‘ cÃ¢u há»i: {config.maxQuestions}",
          "index": 13405
        },
        {
          "kind": "JSXText",
          "text": "Äa dáº¡ng",
          "index": 14615
        },
        {
          "kind": "JSXText",
          "text": "Loáº¡i cÃ¢u há»i",
          "index": 14801
        },
        {
          "kind": "JSXText",
          "text": "{[\r\n                        { id: 'multiple', label: 'Tráº¯c nghiá»‡m nhiá»u lá»±a chá»n' },\r\n                        { id: 'boolean', label: 'ÄÃºng/Sai' },\r\n                        { id: 'short_answer', label: 'Tráº£ lá»i ngáº¯n' }\r\n                      ].map(type => (",
          "index": 14870
        },
        {
          "kind": "JSXText",
          "text": "NgÃ´n ngá»¯",
          "index": 16493
        },
        {
          "kind": "JSXText",
          "text": "Tiáº¿ng Viá»‡t",
          "index": 16867
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o cÃ¢u há»i vá»›i AI",
          "index": 17982
        },
        {
          "kind": "JSXText",
          "text": "Sáºµn sÃ ng táº¡o cÃ¢u há»i tá»« ná»™i dung cá»§a báº¡n",
          "index": 18052
        },
        {
          "kind": "JSXText",
          "text": "Ná»™i dung nguá»“n:",
          "index": 18269
        },
        {
          "kind": "JSXText",
          "text": "Cáº¥u hÃ¬nh Ä‘Ã£ chá»n:",
          "index": 18526
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Sá»‘ cÃ¢u há»i: {config?.maxQuestions}",
          "index": 18752
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Äá»™ khÃ³: {config?.difficulty}",
          "index": 18815
        },
        {
          "kind": "JSXText",
          "text": "â€¢ Loáº¡i: {config?.questionTypes.join(', ')}",
          "index": 18872
        },
        {
          "kind": "JSXText",
          "text": "AI Ä‘ang táº¡o cÃ¢u há»i cho báº¡n...",
          "index": 19198
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o cÃ¢u há»i",
          "index": 19945
        },
        {
          "kind": "JSXText",
          "text": "Review cÃ¢u há»i Ä‘Ã£ táº¡o",
          "index": 20296
        },
        {
          "kind": "JSXText",
          "text": "Kiá»ƒm tra vÃ  chá»‰nh sá»­a trÆ°á»›c khi thÃªm vÃ o quiz",
          "index": 20369
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u {index + 1}",
          "index": 20810
        },
        {
          "kind": "JSXText",
          "text": "setStep('generate')}\r\n                  className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50\"\r\n                >\r\n                  Táº¡o láº¡i",
          "index": 22290
        },
        {
          "kind": "JSXText",
          "text": "ThÃªm vÃ o Quiz ({generatedQuestions.length} cÃ¢u)",
          "index": 22789
        },
        {
          "kind": "StringLiteral",
          "text": "Káº¿t ná»‘i AI thÃ nh cÃ´ng!",
          "index": 2153
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i",
          "index": 2778
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ thÃªm cÃ¢u há»i vÃ o quiz!",
          "index": 3025
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p API key...",
          "index": 9631
        },
        {
          "kind": "StringLiteral",
          "text": "Tráº¯c nghiá»‡m nhiá»u lá»±a chá»n",
          "index": 14948
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃºng/Sai",
          "index": 15029
        },
        {
          "kind": "StringLiteral",
          "text": "Tráº£ lá»i ngáº¯n",
          "index": 15097
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\FirebaseAIQuestionGenerator.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "({\r\n    content: content,\r\n    numQuestions: 5,\r\n    difficulty: 'mixed',\r\n    language: 'vi',\r\n    questionTypes: ['multiple']\r\n  });\r\n\r\n  const [customPrompt, setCustomPrompt] = useState('');\r\n\r\n  useEffect(() => {\r\n    setOptions(prev => ({ ...prev, content }));\r\n  }, [content]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      checkFirebaseAI();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const checkFirebaseAI = async () => {\r\n    setTestingConnection(true);\r\n    try {\r\n      const isAvailable = await FirebaseAIService.checkAvailability();\r\n      setConnectionStatus({\r\n        success: isAvailable,\r\n        message: isAvailable ? 'Firebase AI Ä‘Ã£ sáºµn sÃ ng' : 'Firebase AI chÆ°a kháº£ dá»¥ng'\r\n      });\r\n    } catch (error) {\r\n      setConnectionStatus({\r\n        success: false,\r\n        message: 'KhÃ´ng thá»ƒ káº¿t ná»‘i Firebase AI'\r\n      });\r\n    } finally {\r\n      setTestingConnection(false);\r\n    }\r\n  };\r\n\r\n  const handleGenerate = async () => {\r\n    if (!content.trim()) {\r\n      toast.error('Vui lÃ²ng cung cáº¥p ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i');\r\n      return;\r\n    }\r\n\r\n    setGenerating(true);\r\n    setStep('generate');\r\n\r\n    try {\r\n      const questions = await FirebaseAIService.generateQuestions(\r\n        {\r\n          model: 'gemini-pro',\r\n          temperature: 0.7,\r\n          maxTokens: 2000\r\n        },\r\n        {\r\n          ...options,\r\n          customPrompt: customPrompt || undefined\r\n        }\r\n      );\r\n\r\n      if (questions.length === 0) {\r\n        throw new Error('KhÃ´ng táº¡o Ä‘Æ°á»£c cÃ¢u há»i nÃ o');\r\n      }\r\n\r\n      setGeneratedQuestions(questions.map(convertToLocalQuestion));\r\n      setStep('review');\r\n      toast.success(`âœ… ÄÃ£ táº¡o ${questions.length} cÃ¢u há»i thÃ nh cÃ´ng!`);\r\n\r\n    } catch (error) {\r\n      console.error('Generate questions error:', error);\r\n      const errorMessage = error instanceof Error ? error.message : 'CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i';\r\n      toast.error(errorMessage);\r\n      setStep('config');\r\n    } finally {\r\n      setGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleUseQuestions = () => {\r\n    onQuestionsGenerated(generatedQuestions);\r\n    onClose();\r\n    setStep('config');\r\n    setGeneratedQuestions([]);\r\n  };\r\n\r\n  const handleRegenerateQuestion = async (index: number) => {\r\n    try {\r\n      const singleQuestion = await FirebaseAIService.generateQuestions(\r\n        { model: 'gemini-pro', temperature: 0.8 },\r\n        { ...options, numQuestions: 1 }\r\n      );\r\n\r\n      if (singleQuestion.length > 0) {\r\n        const newQuestions = [...generatedQuestions];\r\n        newQuestions[index] = convertToLocalQuestion(singleQuestion[0]);\r\n        setGeneratedQuestions(newQuestions);\r\n        toast.success('ÄÃ£ táº¡o láº¡i cÃ¢u há»i');\r\n      }\r\n    } catch (error) {\r\n      toast.error('KhÃ´ng thá»ƒ táº¡o láº¡i cÃ¢u há»i');\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (",
          "index": 1850
        },
        {
          "kind": "JSXText",
          "text": "Sá»­ dá»¥ng Vertex AI/Gemini Ä‘á»ƒ táº¡o cÃ¢u há»i",
          "index": 5381
        },
        {
          "kind": "JSXText",
          "text": "Ã—",
          "index": 5673
        },
        {
          "kind": "JSXText",
          "text": "Äang kiá»ƒm tra káº¿t ná»‘i Firebase AI...",
          "index": 6169
        },
        {
          "kind": "JSXText",
          "text": "Cáº¥u hÃ¬nh táº¡o cÃ¢u há»i",
          "index": 7470
        },
        {
          "kind": "JSXText",
          "text": "Sá»‘ lÆ°á»£ng cÃ¢u há»i",
          "index": 7705
        },
        {
          "kind": "JSXText",
          "text": "3 cÃ¢u há»i",
          "index": 8174
        },
        {
          "kind": "JSXText",
          "text": "5 cÃ¢u há»i",
          "index": 8234
        },
        {
          "kind": "JSXText",
          "text": "10 cÃ¢u há»i",
          "index": 8295
        },
        {
          "kind": "JSXText",
          "text": "15 cÃ¢u há»i",
          "index": 8357
        },
        {
          "kind": "JSXText",
          "text": "20 cÃ¢u há»i",
          "index": 8419
        },
        {
          "kind": "JSXText",
          "text": "Trá»™n láº«n",
          "index": 9297
        },
        {
          "kind": "JSXText",
          "text": "NgÃ´n ngá»¯",
          "index": 9484
        },
        {
          "kind": "JSXText",
          "text": "Tiáº¿ng Viá»‡t",
          "index": 9935
        },
        {
          "kind": "JSXText",
          "text": "Loáº¡i cÃ¢u há»i",
          "index": 10183
        },
        {
          "kind": "JSXText",
          "text": "Tráº¯c nghiá»‡m",
          "index": 10675
        },
        {
          "kind": "JSXText",
          "text": "ÄÃºng/Sai",
          "index": 10746
        },
        {
          "kind": "JSXText",
          "text": "Äiá»n tá»«",
          "index": 10817
        },
        {
          "kind": "JSXText",
          "text": "Prompt tÃ¹y chá»‰nh (tÃ¹y chá»n)",
          "index": 11040
        },
        {
          "kind": "JSXText",
          "text": "setCustomPrompt(e.target.value)}\r\n                    rows={4}\r\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"Nháº­p prompt tÃ¹y chá»‰nh Ä‘á»ƒ Ä‘iá»u chá»‰nh cÃ¡ch AI táº¡o cÃ¢u há»i...\"\r\n                  />",
          "index": 11226
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o cÃ¢u há»i",
          "index": 12352
        },
        {
          "kind": "JSXText",
          "text": "Äang táº¡o cÃ¢u há»i...",
          "index": 12890
        },
        {
          "kind": "JSXText",
          "text": "Firebase AI Ä‘ang phÃ¢n tÃ­ch ná»™i dung vÃ  táº¡o cÃ¢u há»i phÃ¹ há»£p",
          "index": 12959
        },
        {
          "kind": "JSXText",
          "text": "Sá»­ dá»¥ng Vertex AI/Gemini Pro",
          "index": 13252
        },
        {
          "kind": "JSXText",
          "text": "Xem trÆ°á»›c cÃ¢u há»i ({generatedQuestions.length})",
          "index": 13609
        },
        {
          "kind": "JSXText",
          "text": "setStep('config')}\r\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\r\n                  >\r\n                    Cáº¥u hÃ¬nh láº¡i",
          "index": 13812
        },
        {
          "kind": "JSXText",
          "text": "Sá»­ dá»¥ng cÃ¢u há»i",
          "index": 14331
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u {index + 1}",
          "index": 14805
        },
        {
          "kind": "JSXText",
          "text": "Táº¡o láº¡i",
          "index": 15152
        },
        {
          "kind": "JSXText",
          "text": "Giáº£i thÃ­ch:",
          "index": 16483
        },
        {
          "kind": "StringLiteral",
          "text": "Firebase AI Ä‘Ã£ sáºµn sÃ ng",
          "index": 2478
        },
        {
          "kind": "StringLiteral",
          "text": "Firebase AI chÆ°a kháº£ dá»¥ng",
          "index": 2506
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ káº¿t ná»‘i Firebase AI",
          "index": 2640
        },
        {
          "kind": "StringLiteral",
          "text": "Vui lÃ²ng cung cáº¥p ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i",
          "index": 2838
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng táº¡o Ä‘Æ°á»£c cÃ¢u há»i nÃ o",
          "index": 3322
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi táº¡o cÃ¢u há»i",
          "index": 3685
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ táº¡o láº¡i cÃ¢u há»i",
          "index": 4494
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ táº¡o láº¡i cÃ¢u há»i",
          "index": 4568
        },
        {
          "kind": "StringLiteral",
          "text": "Nháº­p prompt tÃ¹y chá»‰nh Ä‘á»ƒ Ä‘iá»u chá»‰nh cÃ¡ch AI táº¡o cÃ¢u há»i...",
          "index": 11460
        }
      ]
    },
    {
      "file": "features\\quiz\\pages\\CreateQuizPage\\components\\AdvancedFileUpload.tsx",
      "matches": [
        {
          "kind": "JSXText",
          "text": "({\r\n    provider: 'openai',\r\n    apiKey: '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', // API key Ä‘Æ°á»£c hardcode\r\n    model: 'gpt-3.5-turbo'\r\n  });\r\n  const [generatedQuestions, setGeneratedQuestions] = useState",
          "index": 1109
        },
        {
          "kind": "JSXText",
          "text": ") => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setProcessing(true);\r\n    setCurrentStep('upload'); // Keep at upload step until processing is done\r\n\r\n    try {\r\n      // Validate file type\r\n      const fileName = file.name.toLowerCase();\r\n      const isSupported = Object.values(supportedTypes).flat().some(ext => fileName.endsWith(ext));\r\n      \r\n      if (!isSupported) {\r\n        toast.error('Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£');\r\n        setProcessing(false);\r\n        return;\r\n      }\r\n\r\n      // Show processing feedback\r\n      toast.info(`Äang xá»­ lÃ½ file: ${file.name}...`);\r\n\r\n      // Extract text from file\r\n      const result = await extractTextFromFile(file);\r\n      \r\n      if (!result.success) {\r\n        toast.error(result.error || 'KhÃ´ng thá»ƒ Ä‘á»c file');\r\n        setProcessing(false);\r\n        return;\r\n      }\r\n\r\n      setExtractedText(result.extractedText);\r\n      toast.success(`ÄÃ£ trÃ­ch xuáº¥t ${result.extractedText.length} kÃ½ tá»± tá»« file!`);\r\n      setCurrentStep('preview'); // Only move to preview step after successful extraction\r\n      \r\n    } catch (error) {\r\n      console.error('Error processing file:', error);\r\n      toast.error('CÃ³ lá»—i xáº£y ra khi xá»­ lÃ½ file');\r\n      \r\n      // Provide fallback content based on file type\r\n      const fileName = file.name.toLowerCase();\r\n      let fallbackText = '';\r\n      \r\n      if (supportedTypes.images.some(ext => fileName.endsWith(ext))) {\r\n        fallbackText = `\r\nNá»™i dung máº«u tá»« áº£nh: ${file.name}\r\n\r\nJavaScript cÆ¡ báº£n:\r\n- Biáº¿n (variables): let, const, var\r\n- HÃ m (functions): function declaration, arrow functions\r\n- VÃ²ng láº·p (loops): for, while, forEach\r\n- Äiá»u kiá»‡n (conditions): if, else, switch\r\n- Máº£ng (arrays): [], push(), pop(), map(), filter()\r\n\r\nReact fundamentals:\r\n- Components: functional, class components\r\n- Props: passing data between components\r\n- State: useState hook, setState\r\n- Events: onClick, onChange, onSubmit\r\n- Lifecycle: useEffect hook\r\n\r\nBáº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ná»™i dung nÃ y Ä‘á»ƒ test tÃ­nh nÄƒng AI.\r\n        `.trim();\r\n      } else {\r\n        fallbackText = `\r\nNá»™i dung máº«u tá»« file: ${file.name}\r\n\r\nWeb Development Topics:\r\n- HTML: structure, elements, attributes\r\n- CSS: styling, layout, responsive design\r\n- JavaScript: programming logic, DOM manipulation\r\n- Frameworks: React, Vue, Angular\r\n- Backend: Node.js, Express, databases\r\n\r\nBáº¡n cÃ³ thá»ƒ chá»‰nh sá»­a ná»™i dung nÃ y vÃ  sá»­ dá»¥ng AI Ä‘á»ƒ táº¡o cÃ¢u há»i.\r\n        `.trim();\r\n      }\r\n      \r\n      setExtractedText(fallbackText);\r\n      setCurrentStep('preview');\r\n      toast.warning('ÄÃ£ táº¡o ná»™i dung máº«u Ä‘á»ƒ báº¡n cÃ³ thá»ƒ test AI');\r\n      \r\n    } finally {\r\n      setProcessing(false);\r\n      // Reset file input\r\n      event.target.value = '';\r\n    }\r\n  };\r\n\r\n  const extractTextFromFile = async (file: File): Promise",
          "index": 1827
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n    const fileName = file.name.toLowerCase();\r\n    \r\n    try {\r\n      // Handle images using OCR\r\n      if (supportedTypes.images.some(ext => fileName.endsWith(ext))) {\r\n        return await extractTextFromImage(file);\r\n      }\r\n      \r\n      // Handle PDFs\r\n      if (fileName.endsWith('.pdf')) {\r\n        return await extractTextFromPDF(file);\r\n      }\r\n      \r\n      // Handle Word documents\r\n      if (fileName.endsWith('.doc') || fileName.endsWith('.docx')) {\r\n        return await extractTextFromWord(file);\r\n      }\r\n      \r\n      // Handle text files\r\n      if (fileName.endsWith('.txt') || fileName.endsWith('.rtf')) {\r\n        return await extractTextFromTextFile(file);\r\n      }\r\n      \r\n      // Handle spreadsheets\r\n      if (supportedTypes.spreadsheets.some(ext => fileName.endsWith(ext))) {\r\n        return await extractTextFromSpreadsheet(file);\r\n      }\r\n      \r\n      return {\r\n        extractedText: '',\r\n        questions: [],\r\n        success: false,\r\n        error: 'Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£'\r\n      };\r\n      \r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        questions: [],\r\n        success: false,\r\n        error: `Lá»—i xá»­ lÃ½ file: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  };\r\n\r\n  // OCR for images using Tesseract.js (client-side)\r\n  const extractTextFromImage = async (file: File): Promise",
          "index": 4640
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n    try {\r\n      // Import Tesseract.js dynamically vá»›i cÃ¡ch import chÃ­nh xÃ¡c\r\n      const { createWorker } = await import('tesseract.js');\r\n      \r\n      console.log('Starting OCR for image:', file.name);\r\n      \r\n      // Create OCR worker vá»›i config\r\n      const worker = await createWorker('eng+vie', 1, {\r\n        logger: (m) => console.log('OCR Progress:', m)\r\n      });\r\n      \r\n      // Convert file to image URL\r\n      const imageUrl = URL.createObjectURL(file);\r\n      \r\n      console.log('Processing image with OCR...');\r\n      \r\n      // Perform OCR\r\n      const { data: { text, confidence } } = await worker.recognize(imageUrl);\r\n      \r\n      console.log('OCR Result:', { \r\n        textLength: text.length, \r\n        confidence: Math.round(confidence), \r\n        preview: text.substring(0, 100) + '...' \r\n      });\r\n      \r\n      // Clean up\r\n      URL.revokeObjectURL(imageUrl);\r\n      await worker.terminate();\r\n      \r\n      // Validate if text was extracted\r\n      if (!text || text.trim().length === 0) {\r\n        return {\r\n          extractedText: '',\r\n          questions: [],\r\n          success: false,\r\n          error: 'KhÃ´ng thá»ƒ trÃ­ch xuáº¥t text tá»« áº£nh. Vui lÃ²ng thá»­ áº£nh khÃ¡c cÃ³ text rÃµ rÃ ng hÆ¡n.'\r\n        };\r\n      }\r\n      \r\n      // Clean up the extracted text\r\n      const cleanedText = text\r\n        .replace(/\\s+/g, ' ') // Replace multiple spaces with single space\r\n        .replace(/\\n+/g, '\\n') // Replace multiple newlines with single newline\r\n        .trim();\r\n      \r\n      return {\r\n        extractedText: cleanedText,\r\n        questions: [],\r\n        success: true\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('OCR Error:', error);\r\n      \r\n      // Fallback: Return mock extracted text for testing\r\n      const mockText = `\r\nNá»™i dung máº«u Ä‘Æ°á»£c trÃ­ch xuáº¥t tá»« áº£nh (OCR Ä‘ang gáº·p váº¥n Ä‘á»).\r\n\r\nÄÃ¢y lÃ  text máº«u Ä‘á»ƒ test chá»©c nÄƒng AI:\r\n- JavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n\r\n- React lÃ  library Ä‘á»ƒ xÃ¢y dá»±ng UI\r\n- Node.js cho phÃ©p cháº¡y JavaScript trÃªn server\r\n- HTML lÃ  ngÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u\r\n- CSS dÃ¹ng Ä‘á»ƒ táº¡o kiá»ƒu cho trang web\r\n\r\nBáº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ná»™i dung nÃ y Ä‘á»ƒ test tÃ­nh nÄƒng táº¡o cÃ¢u há»i vá»›i AI.\r\n      `.trim();\r\n      \r\n      console.log('Using fallback mock text due to OCR error');\r\n      \r\n      return {\r\n        extractedText: mockText,\r\n        questions: [],\r\n        success: true\r\n      };\r\n    }\r\n  };\r\n\r\n  // PDF text extraction\r\n  const extractTextFromPDF = async (file: File): Promise",
          "index": 6058
        },
        {
          "kind": "JSXText",
          "text": "item.str).join(' ');\r\n          fullText += `\\n\\n--- Trang ${pageNum} ---\\n${pageText}`;\r\n        }\r\n        \r\n        if (fullText.trim().length === 0) {\r\n          throw new Error('No text found in PDF');\r\n        }\r\n        \r\n        return {\r\n          extractedText: fullText.trim(),\r\n          questions: [],\r\n          success: true\r\n        };\r\n        \r\n      } catch (pdfError) {\r\n        console.log('Real PDF processing failed, using fallback:', pdfError);\r\n        \r\n        // Fallback vá»›i ná»™i dung mock thÃ´ng minh hÆ¡n\r\n        const mockText = `\r\nNá»™i dung Ä‘Æ°á»£c trÃ­ch xuáº¥t tá»« file PDF: ${file.name}\r\n\r\nChÆ°Æ¡ng 1: Giá»›i thiá»‡u vá» Láº­p trÃ¬nh Web\r\nJavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o tÃ­nh tÆ°Æ¡ng tÃ¡c cho trang web.\r\nHTML (HyperText Markup Language) lÃ  ngÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u cÆ¡ báº£n Ä‘á»ƒ xÃ¢y dá»±ng cáº¥u trÃºc trang web.\r\nCSS (Cascading Style Sheets) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thiáº¿t káº¿ vÃ  táº¡o kiá»ƒu cho cÃ¡c pháº§n tá»­ HTML.\r\n\r\nChÆ°Æ¡ng 2: Framework vÃ  Library\r\nReact lÃ  má»™t JavaScript library Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi Facebook Ä‘á»ƒ xÃ¢y dá»±ng giao diá»‡n ngÆ°á»i dÃ¹ng.\r\nNode.js cho phÃ©p cháº¡y JavaScript trÃªn phÃ­a server, má»Ÿ rá»™ng kháº£ nÄƒng cá»§a JavaScript.\r\nExpress.js lÃ  framework web cho Node.js, giÃºp xÃ¢y dá»±ng API vÃ  web application dá»… dÃ ng.\r\n\r\nChÆ°Æ¡ng 3: Database vÃ  Backend\r\nMongoDB lÃ  database NoSQL phá»• biáº¿n, lÆ°u trá»¯ dá»¯ liá»‡u dÆ°á»›i dáº¡ng document.\r\nMySQL lÃ  há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ (RDBMS) mÃ£ nguá»“n má»Ÿ.\r\nAPI (Application Programming Interface) lÃ  cÃ¡ch Ä‘á»ƒ cÃ¡c á»©ng dá»¥ng giao tiáº¿p vá»›i nhau.\r\n\r\nKáº¿t luáº­n:\r\nLáº­p trÃ¬nh web hiá»‡n Ä‘áº¡i yÃªu cáº§u kiáº¿n thá»©c vá» nhiá»u cÃ´ng nghá»‡ khÃ¡c nhau.\r\n        `.trim();\r\n        \r\n        return {\r\n          extractedText: mockText,\r\n          questions: [],\r\n          success: true\r\n        };\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('PDF processing error:', error);\r\n      return {\r\n        extractedText: '',\r\n        questions: [],\r\n        success: false,\r\n        error: `Lá»—i Ä‘á»c PDF: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  };\r\n\r\n  // Word document extraction\r\n  const extractTextFromWord = async (file: File): Promise",
          "index": 9473
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n    try {\r\n      console.log('Processing Word document:', file.name);\r\n      \r\n      // Try to use mammoth.js for real DOCX processing\r\n      if (file.name.toLowerCase().endsWith('.docx')) {\r\n        try {\r\n          const mammoth = await import('mammoth');\r\n          const arrayBuffer = await file.arrayBuffer();\r\n          const result = await mammoth.extractRawText({ arrayBuffer });\r\n          \r\n          if (result.value && result.value.trim().length > 0) {\r\n            return {\r\n              extractedText: result.value.trim(),\r\n              questions: [],\r\n              success: true\r\n            };\r\n          }\r\n        } catch (mammothError) {\r\n          console.log('Mammoth processing failed, using fallback:', mammothError);\r\n        }\r\n      }\r\n      \r\n      // Fallback vá»›i ná»™i dung mock dá»±a trÃªn tÃªn file\r\n      const mockText = `\r\nNá»™i dung Ä‘Æ°á»£c trÃ­ch xuáº¥t tá»« file Word: ${file.name}\r\n\r\nBÃ i há»c 1: HTML CÆ¡ báº£n\r\nHTML (HyperText Markup Language) lÃ  ngÃ´n ngá»¯ Ä‘Ã¡nh dáº¥u siÃªu vÄƒn báº£n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o cáº¥u trÃºc cho trang web.\r\nCÃ¡c tháº» HTML cÆ¡ báº£n:",
          "index": 11608
        },
        {
          "kind": "JSXText",
          "text": "HTML5 bá»• sung nhiá»u tháº» semantic nhÆ°",
          "index": 12733
        },
        {
          "kind": "JSXText",
          "text": "BÃ i há»c 2: CSS Styling\r\nCSS (Cascading Style Sheets) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o kiá»ƒu vÃ  bá»‘ cá»¥c cho cÃ¡c pháº§n tá»­ HTML.\r\nCSS Selector: element, class, id, attribute, pseudo-class\r\nCSS Properties: color, background, margin, padding, border, font, display, position\r\n\r\nBÃ i há»c 3: JavaScript Interactivity\r\nJavaScript lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thÃªm tÃ­nh tÆ°Æ¡ng tÃ¡c cho trang web.\r\nJavaScript cÆ¡ báº£n: variables, functions, events, DOM manipulation\r\nES6+ features: arrow functions, let/const, template literals, destructuring, modules\r\n\r\nBÃ i há»c 4: Responsive Design\r\nResponsive design Ä‘áº£m báº£o trang web hoáº¡t Ä‘á»™ng tá»‘t trÃªn má»i thiáº¿t bá»‹.\r\nMedia queries trong CSS Ä‘á»ƒ táº¡o breakpoints cho cÃ¡c kÃ­ch thÆ°á»›c mÃ n hÃ¬nh khÃ¡c nhau.\r\nMobile-first approach: thiáº¿t káº¿ cho mobile trÆ°á»›c, sau Ä‘Ã³ má»Ÿ rá»™ng cho desktop.\r\n\r\nThá»±c hÃ nh:\r\n- Táº¡o má»™t trang web Ä‘Æ¡n giáº£n vá»›i HTML\r\n- Ãp dá»¥ng CSS Ä‘á»ƒ táº¡o kiá»ƒu\r\n- ThÃªm JavaScript Ä‘á»ƒ táº¡o tÃ­nh tÆ°Æ¡ng tÃ¡c\r\n- Kiá»ƒm tra responsive trÃªn cÃ¡c thiáº¿t bá»‹ khÃ¡c nhau\r\n      `.trim();\r\n      \r\n      return {\r\n        extractedText: mockText,\r\n        questions: [],\r\n        success: true\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('Word processing error:', error);\r\n      return {\r\n        extractedText: '',\r\n        questions: [],\r\n        success: false,\r\n        error: `Lá»—i Ä‘á»c Word: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  };\r\n\r\n  // Text file extraction\r\n  const extractTextFromTextFile = async (file: File): Promise",
          "index": 12819
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n    try {\r\n      const text = await file.text();\r\n      return {\r\n        extractedText: text,\r\n        questions: [],\r\n        success: true\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        questions: [],\r\n        success: false,\r\n        error: `Lá»—i Ä‘á»c text file: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  };\r\n\r\n  // Spreadsheet extraction (reuse existing CSV logic)\r\n  const extractTextFromSpreadsheet = async (file: File): Promise",
          "index": 14329
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n    try {\r\n      const text = await file.text();\r\n      return {\r\n        extractedText: text,\r\n        questions: [],\r\n        success: true\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        extractedText: '',\r\n        questions: [],\r\n        success: false,\r\n        error: `Lá»—i Ä‘á»c spreadsheet: ${error instanceof Error ? error.message : 'Unknown error'}`\r\n      };\r\n    }\r\n  };\r\n\r\n  const generateQuestionsWithAI = async () => {\r\n    if (!extractedText.trim()) {\r\n      toast.error('KhÃ´ng cÃ³ ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i');\r\n      return;\r\n    }\r\n\r\n    setProcessing(true);\r\n    setCurrentStep('generate');\r\n\r\n    try {\r\n      console.log('ðŸ¤– Starting AI question generation process...');\r\n      console.log('Extracted text length:', extractedText.length);\r\n      console.log('AI Config:', aiConfig);\r\n      \r\n      // Show detailed progress\r\n      toast.info('Äang káº¿t ná»‘i vá»›i AI service...');\r\n      \r\n      const questions = await callAIService(extractedText, customPrompt);\r\n      \r\n      if (!questions || questions.length === 0) {\r\n        throw new Error('AI service khÃ´ng tráº£ vá» cÃ¢u há»i nÃ o');\r\n      }\r\n      \r\n      setGeneratedQuestions(questions);\r\n      setCurrentStep('review');\r\n      toast.success(`âœ… AI Ä‘Ã£ táº¡o ${questions.length} cÃ¢u há»i thÃ nh cÃ´ng!`);\r\n      \r\n    } catch (error) {\r\n      console.error('AI generation error:', error);\r\n      \r\n      // Show specific error message\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      toast.error(`âŒ Lá»—i táº¡o cÃ¢u há»i: ${errorMessage}`);\r\n      \r\n      // Stay on preview step so user can try again\r\n      setCurrentStep('preview');\r\n      \r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  const callAIService = async (content: string, prompt: string): Promise",
          "index": 14869
        },
        {
          "kind": "JSXText",
          "text": "=> {\r\n    try {\r\n      console.log('ðŸ¤– Starting AI question generation...');\r\n      console.log('AI Config:', aiConfig);\r\n      console.log('Content length:', content.length);\r\n      \r\n      // Import AI service\r\n      const { AIService } = await import('../../../services/aiService');\r\n      \r\n      const options = {\r\n        content,\r\n        customPrompt: prompt,\r\n        numQuestions: 5,\r\n        difficulty: 'mixed' as const,\r\n        language: 'vi' as const\r\n      };\r\n      \r\n      console.log('Calling AI Service with options:', options);\r\n      \r\n      // Validate AI config before calling\r\n      const validation = AIService.validateConfig(aiConfig);\r\n      if (!validation.valid) {\r\n        throw new Error(`AI Config invalid: ${validation.error}`);\r\n      }\r\n      \r\n      const questions = await AIService.generateQuestions(aiConfig, options);\r\n      \r\n      console.log('âœ… AI Service returned questions:', questions.length);\r\n      \r\n      if (!questions || questions.length === 0) {\r\n        throw new Error('AI service returned no questions');\r\n      }\r\n      \r\n      // Convert to local Question type\r\n      const convertedQuestions = questions.map((q, index) => ({\r\n        id: q.id || `ai-${Date.now()}-${index}`,\r\n        text: q.text,\r\n        type: 'multiple' as const,\r\n        answers: q.answers || [],\r\n        explanation: q.explanation || '',\r\n        points: q.points || 10\r\n      }));\r\n      \r\n      console.log('âœ… Successfully converted questions:', convertedQuestions.length);\r\n      return convertedQuestions;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ AI Service Error:', error);\r\n      \r\n      // Show specific error to user\r\n      toast.error(`Lá»—i AI: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n      \r\n      // Only use fallback if user explicitly wants it\r\n      const shouldUseFallback = confirm(\r\n        `AI generation failed: ${error instanceof Error ? error.message : 'Unknown error'}\\n\\nDo you want to use sample questions instead?`\r\n      );\r\n      \r\n      if (shouldUseFallback) {\r\n        console.log('ðŸ”„ User chose to use fallback mock questions');\r\n        \r\n        const mockQuestions: Question[] = [\r\n          {\r\n            id: `ai-${Date.now()}-1`,\r\n            text: 'JavaScript Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi cÃ´ng ty nÃ o?',\r\n            type: 'multiple',\r\n            answers: [\r\n              { id: 'a', text: 'Netscape', isCorrect: true },\r\n              { id: 'b', text: 'Microsoft', isCorrect: false },\r\n              { id: 'c', text: 'Google', isCorrect: false },\r\n              { id: 'd', text: 'Apple', isCorrect: false }\r\n            ],\r\n            explanation: 'JavaScript Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi Brendan Eich táº¡i Netscape vÃ o nÄƒm 1995.',\r\n            points: 10\r\n          },\r\n          {\r\n            id: `ai-${Date.now()}-2`,\r\n            text: 'React lÃ  gÃ¬?',\r\n            type: 'multiple',\r\n            answers: [\r\n              { id: 'a', text: 'Framework', isCorrect: false },\r\n              { id: 'b', text: 'Library', isCorrect: true },\r\n              { id: 'c', text: 'Language', isCorrect: false },\r\n              { id: 'd', text: 'Database', isCorrect: false }\r\n            ],\r\n            explanation: 'React lÃ  má»™t JavaScript library Ä‘á»ƒ xÃ¢y dá»±ng user interface.',\r\n            points: 10\r\n          }\r\n        ];\r\n\r\n        toast.warning('Äang sá»­ dá»¥ng cÃ¢u há»i máº«u thay vÃ¬ AI');\r\n        return mockQuestions;\r\n      } else {\r\n        // Re-throw the error to stop the process\r\n        throw error;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleImportQuestions = () => {\r\n    if (generatedQuestions.length > 0) {\r\n      onQuestionsImported(generatedQuestions);\r\n      toast.success(`ÄÃ£ import ${generatedQuestions.length} cÃ¢u há»i!`);\r\n      setIsOpen(false);\r\n      resetState();\r\n    }\r\n  };\r\n\r\n  const resetState = () => {\r\n    setCurrentStep('upload');\r\n    setExtractedText('');\r\n    setGeneratedQuestions([]);\r\n    setCustomPrompt('');\r\n  };\r\n\r\n  const renderCurrentStep = () => {\r\n    switch (currentStep) {\r\n      case 'upload':\r\n        return (",
          "index": 16676
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“ CÃ¡c Ä‘á»‹nh dáº¡ng file Ä‘Æ°á»£c há»— trá»£:",
          "index": 20947
        },
        {
          "kind": "JSXText",
          "text": "ðŸ–¼ï¸ HÃ¬nh áº£nh (OCR):",
          "index": 21142
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“„ TÃ i liá»‡u:",
          "index": 21357
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“Š Báº£ng tÃ­nh:",
          "index": 21565
        },
        {
          "kind": "JSXText",
          "text": "ðŸ“¤ Chá»n file Ä‘á»ƒ táº£i lÃªn:",
          "index": 21860
        },
        {
          "kind": "JSXText",
          "text": "âœ… Ná»™i dung Ä‘Ã£ trÃ­ch xuáº¥t:",
          "index": 22584
        },
        {
          "kind": "JSXText",
          "text": "ðŸ¤– Cáº¥u hÃ¬nh AI Ä‘á»ƒ táº¡o cÃ¢u há»i:",
          "index": 22996
        },
        {
          "kind": "JSXText",
          "text": "API Key Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn",
          "index": 25750
        },
        {
          "kind": "JSXText",
          "text": "Sáºµn sÃ ng sá»­ dá»¥ng AI Ä‘á»ƒ táº¡o cÃ¢u há»i!",
          "index": 25872
        },
        {
          "kind": "JSXText",
          "text": "Prompt tÃ¹y chá»‰nh (tÃ¹y chá»n):",
          "index": 26078
        },
        {
          "kind": "JSXText",
          "text": "setCustomPrompt(e.target.value)}\r\n                  placeholder=\"HÆ°á»›ng dáº«n cá»¥ thá»ƒ cho AI vá» cÃ¡ch táº¡o cÃ¢u há»i...\"\r\n                  className=\"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                  rows={3}\r\n                />",
          "index": 26255
        },
        {
          "kind": "JSXText",
          "text": "setCurrentStep('upload')}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n              >\r\n                â† Quay láº¡i",
          "index": 26670
        },
        {
          "kind": "JSXText",
          "text": "{\r\n                  console.log('ðŸ§ª Debug: Testing AI connection...');\r\n                  try {\r\n                    const response = await fetch('https://api.openai.com/v1/models', {\r\n                      headers: {\r\n                        'Authorization': `Bearer ${aiConfig.apiKey}`,\r\n                        'Content-Type': 'application/json'\r\n                      }\r\n                    });\r\n                    if (response.ok) {\r\n                      toast.success('âœ… API key hoáº¡t Ä‘á»™ng!');\r\n                      console.log('âœ… API key is valid');\r\n                    } else {\r\n                      const errorData = await response.json();\r\n                      toast.error(`âŒ API key lá»—i: ${errorData.error?.message}`);\r\n                      console.error('âŒ API key error:', errorData);\r\n                    }\r\n                  } catch (error) {\r\n                    toast.error(`âŒ Network error: ${error instanceof Error ? error.message : 'Unknown'}`);\r\n                    console.error('âŒ Network error:', error);\r\n                  }\r\n                }}\r\n                className=\"px-4 py-2 border border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50\"\r\n              >\r\n                ðŸ§ª Test API",
          "index": 26917
        },
        {
          "kind": "JSXText",
          "text": "ðŸ¤– Táº¡o cÃ¢u há»i vá»›i AI",
          "index": 28418
        },
        {
          "kind": "JSXText",
          "text": "ðŸ¤– AI Ä‘ang táº¡o cÃ¢u há»i...",
          "index": 28806
        },
        {
          "kind": "JSXText",
          "text": "QuÃ¡ trÃ¬nh nÃ y cÃ³ thá»ƒ máº¥t vÃ i phÃºt",
          "index": 28879
        },
        {
          "kind": "JSXText",
          "text": "âœ¨ AI Ä‘Ã£ táº¡o {generatedQuestions.length} cÃ¢u há»i:",
          "index": 29175
        },
        {
          "kind": "JSXText",
          "text": "CÃ¢u {index + 1}: {question.text}",
          "index": 29572
        },
        {
          "kind": "JSXText",
          "text": "Giáº£i thÃ­ch:",
          "index": 30384
        },
        {
          "kind": "JSXText",
          "text": "setCurrentStep('preview')}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n              >\r\n                â† Táº¡o láº¡i",
          "index": 30643
        },
        {
          "kind": "JSXText",
          "text": "âœ… Import cÃ¢u há»i",
          "index": 31018
        },
        {
          "kind": "StringLiteral",
          "text": "Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£",
          "index": 2257
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ Ä‘á»c file",
          "index": 2608
        },
        {
          "kind": "StringLiteral",
          "text": "CÃ³ lá»—i xáº£y ra khi xá»­ lÃ½ file",
          "index": 3018
        },
        {
          "kind": "StringLiteral",
          "text": "ÄÃ£ táº¡o ná»™i dung máº«u Ä‘á»ƒ báº¡n cÃ³ thá»ƒ test AI",
          "index": 4387
        },
        {
          "kind": "StringLiteral",
          "text": "Äá»‹nh dáº¡ng file khÃ´ng Ä‘Æ°á»£c há»— trá»£",
          "index": 5636
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng thá»ƒ trÃ­ch xuáº¥t text tá»« áº£nh. Vui lÃ²ng thá»­ áº£nh khÃ¡c cÃ³ text rÃµ rÃ ng hÆ¡n.",
          "index": 7209
        },
        {
          "kind": "StringLiteral",
          "text": "KhÃ´ng cÃ³ ná»™i dung Ä‘á»ƒ táº¡o cÃ¢u há»i",
          "index": 15371
        },
        {
          "kind": "StringLiteral",
          "text": "Äang káº¿t ná»‘i vá»›i AI service...",
          "index": 15744
        },
        {
          "kind": "StringLiteral",
          "text": "AI service khÃ´ng tráº£ vá» cÃ¢u há»i nÃ o",
          "index": 15946
        },
        {
          "kind": "StringLiteral",
          "text": "JavaScript Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi cÃ´ng ty nÃ o?",
          "index": 18935
        },
        {
          "kind": "StringLiteral",
          "text": "JavaScript Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi Brendan Eich táº¡i Netscape vÃ o nÄƒm 1995.",
          "index": 19329
        },
        {
          "kind": "StringLiteral",
          "text": "React lÃ  gÃ¬?",
          "index": 19512
        },
        {
          "kind": "StringLiteral",
          "text": "React lÃ  má»™t JavaScript library Ä‘á»ƒ xÃ¢y dá»±ng user interface.",
          "index": 19879
        },
        {
          "kind": "StringLiteral",
          "text": "Äang sá»­ dá»¥ng cÃ¢u há»i máº«u thay vÃ¬ AI",
          "index": 20016
        },
        {
          "kind": "StringLiteral",
          "text": "HÆ°á»›ng dáº«n cá»¥ thá»ƒ cho AI vá» cÃ¡ch táº¡o cÃ¢u há»i...",
          "index": 26321
        },
        {
          "kind": "StringLiteral",
          "text": "âœ… API key hoáº¡t Ä‘á»™ng!",
          "index": 27396
        }
      ]
    }
  ]
}
