node.exe : ESLint found too 
many warnings (maximum: 0).
At line:1 char:1
+ & "C:\Program 
Files\nodejs/node.exe" 
"C:\Program 
Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~
    + CategoryInfo           
   : NotSpecified: (ESLint   
  found to...s (maximum: 0   
 ).:String) [], RemoteExc    
eption
    + FullyQualifiedErrorId  
   : NativeCommandError
 
[{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\ClientSideAIGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\ImageUploader.tsx","messages":[],"suppressedMessages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-xs text-gray-600 mt-1\">200x200</p>","line":320,"column":59,"nodeType":"JSXText","endLine":320,"endColumn":66,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-xs text-gray-600 mt-1\">400x400</p>","line":327,"column":59,"nodeType":"JSXText","endLine":327,"endColumn":66,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-xs text-gray-600 mt-1\">800x800</p>","line":334,"column":59,"nodeType":"JSXText","endLine":334,"endColumn":66,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\rag\\ChatbotButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\rag\\ChatbotModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\rag\\CitationBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\rag\\MessageList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\rag\\QuizRecommendationCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\rag\\TypingIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\components\\rag\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\config\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\config\\gemini.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\config\\routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\AdminLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\AdminLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\AdminProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\AdminSetup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\AdminSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\AdminStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\AdminUtilities.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\BulkActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\QuickActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\components\\QuizPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\Admin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\AdminDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\AdminQuizManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\AdminUserManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\BuildIndexPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\CategoryManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\CreatorManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\MyQuizzesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\admin\\pages\\StatsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\components\\AutoLogoutOnBan.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\components\\ForgotPassword.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\components\\OTPVerification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\components\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\components\\RoleSelection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\pages\\AuthPageNew.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\pages\\Profile.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-600\">\r\n                    Showing results\r\n                  </p>","line":596,"column":56,"nodeType":"JSXText","endLine":598,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button className=\"px-3 py-1 border border-gray-300 rounded text-sm\">\r\n                      Previous\r\n                    </button>","line":600,"column":90,"nodeType":"JSXText","endLine":602,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"px-3 py-1 text-sm text-gray-600\">\r\n                      Page info\r\n                    </span>","line":603,"column":71,"nodeType":"JSXText","endLine":605,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <label className=\"block text-sm font-medium text-gray-700 mb-3\">Avatar</label>","line":640,"column":83,"nodeType":"JSXText","endLine":640,"endColumn":89},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"font-medium\">Avatar hiß╗çn tß║íi</p>","line":651,"column":52,"nodeType":"JSXText","endLine":651,"endColumn":67},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                          onClick={() => setAvatarUrl('')}\r\n                          className=\"text-red-600 hover:text-red-700 text-xs mt-1\"\r\n                        >\r\n                          X├│a avatar\r\n                        </button>","line":655,"column":26,"nodeType":"JSXText","endLine":657,"endColumn":25},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <summary className=\"text-xs text-gray-500 cursor-pointer hover:text-gray-700\">\r\n                      Hoß║╖c nhß║¡p URL avatar thß╗º c├┤ng\r\n                    </summary>","line":688,"column":99,"nodeType":"JSXText","endLine":690,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>ΓÜá∩╕Å {t('profile.currentPasswordRequired')}</p>","line":770,"column":24,"nodeType":"JSXText","endLine":770,"endColumn":27},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>Γ£ô {t('profile.passwordMinLength')}</p>","line":771,"column":24,"nodeType":"JSXText","endLine":771,"endColumn":26},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>Γ£ô {t('profile.passwordMustDiffer')}</p>","line":772,"column":24,"nodeType":"JSXText","endLine":772,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { RootState } from '../../../lib/store';\r\nimport { QuizResult } from '../../quiz/types';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchUserQuizResults } from '../../quiz/store';\r\nimport { updateProfile, updatePassword, reauthenticateWithCredential, EmailAuthProvider } from 'firebase/auth';\r\nimport { auth } from '../../../lib/firebase/config';\r\nimport { toast } from 'react-toastify';\r\nimport { getQuizById } from '../../quiz/api';\r\nimport { \r\n  User, \r\n  Trophy, \r\n  Clock, \r\n  Target, \r\n  TrendingUp, \r\n  Calendar,\r\n  Star,\r\n  ChevronRight,\r\n  Search,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  Eye,\r\n  Edit3,\r\n  RotateCcw\r\n} from 'lucide-react';\r\nimport ImageUploader from '../../../components/ImageUploader';\r\nimport { ImageUploadResult } from '../../../services/imageUploadService';\r\n\r\nconst Profile: React.FC = () => {\r\n  const { t, i18n } = useTranslation();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const userResults = useSelector((state: RootState) => state.quiz.userResults);\r\n  const dispatch = useDispatch();\r\n  \r\n  // State management\r\n  const [results, setResults] = useState<QuizResult[]>([]);\r\n  const [quizTitles, setQuizTitles] = useState<{[key: string]: string}>({});\r\n  // const [loading, setLoading] = useState(true);\r\n  const [stats, setStats] = useState<any>(null);\r\n  const [tab, setTab] = useState<'overview' | 'history' | 'achievements' | 'settings'>('overview');\r\n  \r\n  // Profile edit states\r\n  const [displayName, setDisplayName] = useState(user?.displayName || '');\r\n  const [currentPassword, setCurrentPassword] = useState(''); // Mß║¡t khß║⌐u c┼⌐\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [avatarUrl, setAvatarUrl] = useState(user?.photoURL || '');\r\n  const [saving, setSaving] = useState(false);\r\n  \r\n  // Enhanced pagination and filtering\r\n  const [itemsPerPage, setItemsPerPage] = useState(10);\r\n  const [currentPage, ] = useState(1);\r\n  const [showAll, setShowAll] = useState(false);\r\n  const [sortBy, setSortBy] = useState<'date' | 'score' | 'percentage'>('date');\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterByScore, setFilterByScore] = useState<'all' | 'high' | 'medium' | 'low'>('all');\r\n\r\n  // Load user data\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    // setLoading(true);\r\n    dispatch(fetchUserQuizResults(user.uid) as any);\r\n  }, [user, dispatch]);\r\n\r\n  // Process results and calculate stats\r\n  useEffect(() => {\r\n    if (!user) return;\r\n    \r\n    const loadQuizTitles = async () => {\r\n      const titles: {[key: string]: string} = {};\r\n      \r\n      // Load quiz titles for all results\r\n      for (const result of userResults) {\r\n        if (!titles[result.quizId]) {\r\n          try {\r\n            const quiz = await getQuizById(result.quizId);\r\n            titles[result.quizId] = quiz?.title || t('quiz.untitled');\r\n          } catch (error) {\r\n            console.error('Error fetching quiz:', error);\r\n            titles[result.quizId] = t('quiz.untitled');\r\n          }\r\n        }\r\n      }\r\n      \r\n      setQuizTitles(titles);\r\n      setResults(userResults);\r\n    };\r\n    \r\n    if (userResults.length > 0) {\r\n      loadQuizTitles();\r\n    } else {\r\n      setResults([]);\r\n      setQuizTitles({});\r\n    }\r\n    \r\n    if (userResults.length > 0) {}\r\n    \r\n    // Calculate comprehensive stats with more accurate scoring\r\n    const totalQuizzes = userResults.length;\r\n    \r\n    // Calculate scores more accurately - prioritize correctAnswers/totalQuestions\r\n    const accurateScores = userResults.map(r => {\r\n      // Always prioritize correctAnswers/totalQuestions if available\r\n      if (typeof r.correctAnswers === 'number' && typeof r.totalQuestions === 'number' && r.totalQuestions > 0) {\r\n        return Math.round((r.correctAnswers / r.totalQuestions) * 100);\r\n      } \r\n      // Fallback to score field if it exists and is valid\r\n      else if (typeof r.score === 'number' && !isNaN(r.score)) {\r\n        return r.score <= 1 ? Math.round(r.score * 100) : Math.round(r.score);\r\n      }\r\n      // Last resort: 0\r\n      return 0;\r\n    });\r\n    \r\n    const totalScore = accurateScores.reduce((sum, score) => sum + score, 0);\r\n    const totalCorrect = userResults.reduce((sum, r) => sum + (r.correctAnswers || 0), 0);\r\n    const totalQuestions = userResults.reduce((sum, r) => sum + (r.totalQuestions || 0), 0);\r\n    const totalTime = userResults.reduce((sum, r) => sum + (r.timeSpent || 0), 0);\r\n    \r\n    const averageScore = totalQuizzes > 0 ? totalScore / totalQuizzes : 0;\r\n    const accuracy = totalQuestions > 0 ? (totalCorrect / totalQuestions) * 100 : 0;\r\n    const averageTime = totalQuizzes > 0 ? totalTime / totalQuizzes : 0;\r\n    \r\n    // Performance grades - use accurate scores\r\n    const perfectScores = accurateScores.filter(score => score >= 100).length;\r\n    const highScores = accurateScores.filter(score => score >= 80).length;\r\n    \r\n    console.log('≡ƒôè Calculated Stats:', {\r\n      totalQuizzes,\r\n      averageScore: averageScore.toFixed(1),\r\n      accuracy: accuracy.toFixed(1),\r\n      perfectScores,\r\n      highScores,\r\n      accurateScores: accurateScores.slice(0, 3) // Show first 3 for debugging\r\n    });\r\n    \r\n    setStats({\r\n      totalQuizzes,\r\n      totalScore,\r\n      averageScore,\r\n      accuracy,\r\n      averageTime,\r\n      perfectScores,\r\n      highScores,\r\n      recentActivity: userResults.slice(0, 5)\r\n    });\r\n    \r\n    // setLoading(false);\r\n  }, [userResults, user, t]);\r\n\r\n  // Filter and sort results\r\n  const filteredResults = results\r\n    .filter(result => {\r\n      // Search filter\r\n      if (searchTerm) {\r\n        const quizTitle = quizTitles[result.quizId] || t('quiz.untitled');\r\n        return quizTitle.toLowerCase().includes(searchTerm.toLowerCase());\r\n      }\r\n      return true;\r\n    })\r\n    .filter(result => {\r\n      // Score filter with guard\r\n      const percentage = result.totalQuestions > 0 ? (result.correctAnswers / result.totalQuestions) * 100 : 0;\r\n      switch (filterByScore) {\r\n        case 'high': return percentage >= 80;\r\n        case 'medium': return percentage >= 60 && percentage < 80;\r\n        case 'low': return percentage < 60;\r\n        default: return true;\r\n      }\r\n    })\r\n    .sort((a, b) => {\r\n      let comparison = 0;\r\n      const percentageA = a.totalQuestions > 0 ? (a.correctAnswers / a.totalQuestions) * 100 : 0;\r\n      const percentageB = b.totalQuestions > 0 ? (b.correctAnswers / b.totalQuestions) * 100 : 0;\r\n\r\n      switch (sortBy) {\r\n        case 'date':\r\n          comparison = new Date(b.completedAt).getTime() - new Date(a.completedAt).getTime();\r\n          break;\r\n        case 'score':\r\n          comparison = percentageB - percentageA; // Sort by percentage for score\r\n          break;\r\n        case 'percentage':\r\n          comparison = percentageB - percentageA;\r\n          break;\r\n        default:\r\n          comparison = 0;\r\n      }\r\n      return sortOrder === 'asc' ? -comparison : comparison;\r\n    });\r\n\r\n  // Pagination\r\n  // const totalPages = Math.ceil(filteredResults.length / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const paginatedResults = showAll ? filteredResults : filteredResults.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n  const handleProfileUpdate = async () => {\r\n    if (!user || !auth.currentUser) return;\r\n    \r\n    setSaving(true);\r\n    try {\r\n      await updateProfile(auth.currentUser, {\r\n        displayName: displayName,\r\n        photoURL: avatarUrl\r\n      });\r\n      toast.success(t('profile.profileUpdateSuccess'));\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      toast.error(t('profile.profileUpdateError'));\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handlePasswordUpdate = async () => {\r\n    if (!auth.currentUser || !currentPassword || !newPassword || !confirmPassword) {\r\n      toast.error(t('profile.fillAllFields'));\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      toast.error(t('profile.passwordMismatch'));\r\n      return;\r\n    }\r\n\r\n    if (newPassword.length < 6) {\r\n      toast.error(t('profile.passwordTooShort'));\r\n      return;\r\n    }\r\n\r\n    if (newPassword === currentPassword) {\r\n      toast.error(t('profile.passwordMustDiffer'));\r\n      return;\r\n    }\r\n\r\n    if (!auth.currentUser.email) {\r\n      toast.error(t('profile.emailNotFound'));\r\n      return;\r\n    }\r\n    \r\n    setSaving(true);\r\n    try {\r\n      // Tß║ío credential ─æß╗â reauthenticate\r\n      const credential = EmailAuthProvider.credential(auth.currentUser.email, currentPassword);\r\n      \r\n      // X├üC THß╗░C Lß║áI NG╞»ß╗£I D├ÖNG TR╞»ß╗ÜC KHI ─Éß╗öI Mß║¼T KHß║¿U\r\n      await reauthenticateWithCredential(auth.currentUser, credential);\r\n      \r\n      // Nß║┐u x├íc thß╗▒c th├ánh c├┤ng, ─æß╗òi mß║¡t khß║⌐u mß╗¢i\r\n      await updatePassword(auth.currentUser, newPassword);\r\n      \r\n      // Reset form\r\n      setCurrentPassword('');\r\n      setNewPassword('');\r\n      setConfirmPassword('');\r\n      toast.success(t('profile.passwordChangeSuccess'));\r\n    } catch (error: any) {\r\n      console.error('Error updating password:', error);\r\n      if (error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {\r\n        toast.error(t('profile.wrongPassword'));\r\n      } else if (error.code === 'auth/weak-password') {\r\n        toast.error(t('profile.weakPassword'));\r\n      } else if (error.code === 'auth/requires-recent-login') {\r\n        toast.error(t('profile.requiresRecentLogin'));\r\n      } else {\r\n        toast.error(t('profile.passwordChangeError', {message: error.message}));\r\n      }\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const renderStatCard = (icon: React.ReactNode, title: string, value: string | number, subtitle?: string, color: string = 'bg-blue-500') => (\r\n    <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div className={`p-3 rounded-full ${color}`}>\r\n            {icon}\r\n          </div>\r\n          <div>\r\n            <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\r\n            <p className=\"text-sm text-gray-600\">{title}</p>\r\n            {subtitle && <p className=\"text-xs text-gray-500\">{subtitle}</p>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderQuizHistoryItem = (result: QuizResult) => {\r\n    console.log('≡ƒöì Rendering quiz result (RAW DATA):', {\r\n      id: result.id,\r\n      correctAnswers: result.correctAnswers,\r\n      totalQuestions: result.totalQuestions,\r\n      score: result.score,\r\n      quizId: result.quizId,\r\n      rawResult: result\r\n    });\r\n    \r\n    // Calculate percentage using consistent logic\r\n    let percentage = 0;\r\n    let calculationMethod = 'none';\r\n    \r\n    // Primary: Use correctAnswers/totalQuestions if available\r\n    if (typeof result.correctAnswers === 'number' && typeof result.totalQuestions === 'number' && result.totalQuestions > 0) {\r\n      percentage = Math.round((result.correctAnswers / result.totalQuestions) * 100);\r\n      calculationMethod = 'answers_calculation';\r\n    } \r\n    // Fallback: Use score field\r\n    else if (typeof result.score === 'number' && !isNaN(result.score)) {\r\n      percentage = result.score <= 1 ? Math.round(result.score * 100) : Math.round(result.score);\r\n      calculationMethod = result.score <= 1 ? 'score_decimal' : 'score_percentage';\r\n    } \r\n    // Last resort: 0\r\n    else {\r\n      console.warn('ΓÜá∩╕Å No valid score data found for result:', result.id);\r\n      calculationMethod = 'fallback_zero';\r\n      percentage = 0;\r\n    }\r\n    \r\n    console.log('≡ƒÆ» Score calculation result:', {\r\n      method: calculationMethod,\r\n      finalPercentage: percentage,\r\n      rawScore: result.score,\r\n      correctAnswers: result.correctAnswers,\r\n      totalQuestions: result.totalQuestions\r\n    });\r\n    \r\n    const getScoreColor = (percent: number) => {\r\n      if (percent >= 90) return 'text-green-600 bg-green-50';\r\n      if (percent >= 70) return 'text-blue-600 bg-blue-50';\r\n      if (percent >= 50) return 'text-yellow-600 bg-yellow-50';\r\n      return 'text-red-600 bg-red-50';\r\n    };\r\n\r\n    return (\r\n      <div key={result.id} className=\"bg-white rounded-lg border border-gray-100 p-4 hover:shadow-md transition-shadow\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex-1\">\r\n            <h4 className=\"font-semibold text-gray-900 mb-1\">{quizTitles[result.quizId] || t('quiz.untitled')}</h4>\r\n            <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n              <span className=\"flex items-center space-x-1\">\r\n                <Target className=\"w-4 h-4\" />\r\n                <span>{result.correctAnswers}/{result.totalQuestions}</span>\r\n              </span>\r\n              <span className=\"flex items-center space-x-1\">\r\n                <Clock className=\"w-4 h-4\" />\r\n                <span>{Math.round((result.timeSpent || 0) / 60)} {t('minutes')}</span>\r\n              </span>\r\n              <span className=\"flex items-center space-x-1\">\r\n                <Calendar className=\"w-4 h-4\" />\r\n                <span>{new Date(result.completedAt).toLocaleDateString(i18n.language)}</span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className={`px-3 py-1 rounded-full text-sm font-medium ${getScoreColor(percentage)}`}>\r\n              {percentage}%\r\n            </div>\r\n            <Link\r\n              to={`/quiz/${result.quizId}/reviews`}\r\n              className=\"p-2 text-gray-400 hover:text-purple-600 transition-colors\"\r\n              title={t('profile.viewAgain')}\r\n            >\r\n              <RotateCcw className=\"w-4 h-4\" />\r\n            </Link>\r\n            <Link\r\n              to={`/quiz-result/${result.id}`}\r\n              className=\"p-2 text-gray-400 hover:text-blue-600 transition-colors\"\r\n              title={t('profile.viewDetails')}\r\n            >\r\n              <Eye className=\"w-4 h-4\" />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-gray-600\">{t('profile.loginRequired')}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8\">\r\n          <div className=\"flex items-center space-x-6\">\r\n            <div className=\"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\r\n              {user.photoURL ? (\r\n                <img src={user.photoURL} alt=\"Avatar\" className=\"w-full h-full rounded-full object-cover\" />\r\n              ) : (\r\n                <User className=\"w-10 h-10 text-white\" />\r\n              )}\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">{user.displayName || user.email}</h1>\r\n              <p className=\"text-gray-600\">{user.email}</p>\r\n              <p className=\"text-sm text-gray-500 mt-1\">{t('profile.memberSince')} {new Date().toLocaleDateString(i18n.language)}</p>\r\n            </div>\r\n            <button\r\n              onClick={() => setTab('settings')}\r\n              className=\"p-2 text-gray-400 hover:text-blue-600 transition-colors\"\r\n            >\r\n              <Edit3 className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Navigation Tabs */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 mb-8\">\r\n          <div className=\"flex space-x-8 px-6\">\r\n            {[\r\n              { id: 'overview', label: t('profile.tabs.overview'), icon: TrendingUp },\r\n              { id: 'history', label: t('profile.tabs.history'), icon: Clock },\r\n              { id: 'achievements', label: t('profile.tabs.achievements'), icon: Trophy },\r\n              { id: 'settings', label: t('profile.tabs.settings'), icon: User }\r\n            ].map(({ id, label, icon: Icon }) => (\r\n              <button\r\n                key={id}\r\n                onClick={() => setTab(id as any)}\r\n                className={`flex items-center space-x-2 py-4 border-b-2 transition-colors ${\r\n                  tab === id \r\n                    ? 'border-blue-500 text-blue-600' \r\n                    : 'border-transparent text-gray-600 hover:text-gray-900'\r\n                }`}\r\n              >\r\n                <Icon className=\"w-4 h-4\" />\r\n                <span>{label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        {tab === 'overview' && stats && (\r\n          <div>\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n              {renderStatCard(\r\n                <Trophy className=\"w-6 h-6 text-white\" />,\r\n                t('profile.stats.completedQuizzes'),\r\n                stats.totalQuizzes,\r\n                undefined,\r\n                'bg-yellow-500'\r\n              )}\r\n              {renderStatCard(\r\n                <Star className=\"w-6 h-6 text-white\" />,\r\n                t('profile.stats.averageScore'),\r\n                stats.averageScore.toFixed(1),\r\n                t('profile.stats.onTotal'),\r\n                'bg-blue-500'\r\n              )}\r\n              {renderStatCard(\r\n                <Target className=\"w-6 h-6 text-white\" />,\r\n                t('profile.stats.accuracy'),\r\n                `${stats.accuracy.toFixed(1)}%`,\r\n                t('profile.stats.correctRate'),\r\n                'bg-green-500'\r\n              )}\r\n              {renderStatCard(\r\n                <TrendingUp className=\"w-6 h-6 text-white\" />,\r\n                t('profile.stats.highScores'),\r\n                `${stats.highScores}/${stats.totalQuizzes}`,\r\n                t('profile.stats.over80'),\r\n                'bg-purple-500'\r\n              )}\r\n            </div>\r\n\r\n            {/* Recent Activity */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">{t('profile.recentActivity')}</h3>\r\n              <div className=\"space-y-4\">\r\n                {stats.recentActivity.map((result: QuizResult) => renderQuizHistoryItem(result))}\r\n              </div>\r\n              {stats.totalQuizzes > 5 && (\r\n                <div className=\"mt-6 text-center\">\r\n                  <button\r\n                    onClick={() => setTab('history')}\r\n                    className=\"text-blue-600 hover:text-blue-700 font-medium flex items-center space-x-1 mx-auto\"\r\n                  >\r\n                    <span>{t('profile.viewAllHistory')}</span>\r\n                    <ChevronRight className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {tab === 'history' && (\r\n          <div>\r\n            {/* Filters and Search */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6\">\r\n              <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"relative\">\r\n                    <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder={t('profile.searchPlaceholder')}\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <select\r\n                    value={filterByScore}\r\n                    onChange={(e) => setFilterByScore(e.target.value as any)}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"all\">{t('profile.filters.score.all')}</option>\r\n                    <option value=\"high\">{t('profile.filters.score.high')}</option>\r\n                    <option value=\"medium\">{t('profile.filters.score.medium')}</option>\r\n                    <option value=\"low\">{t('profile.filters.score.low')}</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span className=\"text-sm text-gray-600\">{t('profile.sort.label')}:</span>\r\n                    <select\r\n                      value={sortBy}\r\n                      onChange={(e) => setSortBy(e.target.value as any)}\r\n                      className=\"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500\"\r\n                    >\r\n                      <option value=\"date\">{t('profile.sort.date')}</option>\r\n                      <option value=\"score\">{t('profile.sort.score')}</option>\r\n                      <option value=\"percentage\">{t('profile.sort.percentage')}</option>\r\n                    </select>\r\n                    <button\r\n                      onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\r\n                      className=\"p-1 text-gray-400 hover:text-gray-600\"\r\n                    >\r\n                      {sortOrder === 'asc' ? <ArrowUp className=\"w-4 h-4\" /> : <ArrowDown className=\"w-4 h-4\" />}\r\n                    </button>\r\n                  </div>\r\n\r\n                  <select\r\n                    value={itemsPerPage}\r\n                    onChange={(e) => setItemsPerPage(Number(e.target.value))}\r\n                    className=\"px-3 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value={10}>{t('profile.pagination.perPage10')}</option>\r\n                    <option value={25}>{t('profile.pagination.perPage25')}</option>\r\n                    <option value={50}>{t('profile.pagination.perPage50')}</option>\r\n                    <option value={100}>{t('profile.pagination.perPage100')}</option>\r\n                  </select>\r\n\r\n                  {filteredResults.length > itemsPerPage && (\r\n                    <button\r\n                      onClick={() => setShowAll(!showAll)}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\"\r\n                    >\r\n                      {showAll ? t('profile.pagination.paginate') : t('profile.viewAllCount')}\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              {paginatedResults.length > 0 ? (\r\n                paginatedResults.map(result => renderQuizHistoryItem(result))\r\n              ) : (\r\n                  <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center\">\r\n                    <Trophy className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">{t('profile.noResults')}</h3>\r\n                    <p className=\"text-gray-600 mb-4\">{t('profile.noResultsDesc')}</p>\r\n                    <Link\r\n                      to=\"/quizzes\"\r\n                      className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      {t('quiz.exploreQuizzes')}\r\n                    </Link>\r\n                  </div>\r\n                )}\r\n            </div>\r\n            \r\n            {/* Pagination */}\r\n            {!showAll && filteredResults.length > itemsPerPage && (\r\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    Showing results\r\n                  </p>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <button className=\"px-3 py-1 border border-gray-300 rounded text-sm\">\r\n                      Previous\r\n                    </button>\r\n                    <span className=\"px-3 py-1 text-sm text-gray-600\">\r\n                      Page info\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n        </div>\r\n        )}\r\n\r\n        {tab === 'achievements' && (\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">{t('profile.achievements')}</h3>\r\n              <div className=\"text-center py-8\">\r\n                <Trophy className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n                <h4 className=\"text-lg font-medium text-gray-900 mb-2\">{t('profile.achievementSystem')}</h4>\r\n                <p className=\"text-gray-600\">{t('profile.inDevelopment')}</p>\r\n              </div>\r\n            </div>\r\n        )}\r\n\r\n        {tab === 'settings' && (\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {/* Profile Settings */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">{t('profile.settings.title')}</h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('auth.displayName')}</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={displayName}\r\n                    onChange={(e) => setDisplayName(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-3\">Avatar</label>\r\n                  \r\n                  {/* Current Avatar Preview */}\r\n                  {avatarUrl && (\r\n                    <div className=\"mb-4 flex items-center gap-4\">\r\n                      <img \r\n                        src={avatarUrl} \r\n                        alt=\"Current Avatar\" \r\n                        className=\"w-20 h-20 rounded-full object-cover border-2 border-gray-200\"\r\n                      />\r\n                      <div className=\"text-sm text-gray-600\">\r\n                        <p className=\"font-medium\">Avatar hiß╗çn tß║íi</p>\r\n                        <button\r\n                          onClick={() => setAvatarUrl('')}\r\n                          className=\"text-red-600 hover:text-red-700 text-xs mt-1\"\r\n                        >\r\n                          X├│a avatar\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Image Uploader Component */}\r\n                  <ImageUploader\r\n                    onUploadSuccess={(result: ImageUploadResult) => {\r\n                      if (result.originalUrl) {\r\n                        setAvatarUrl(result.originalUrl);\r\n                        toast.success('Upload avatar th├ánh c├┤ng! Nhß║Ñn \"Cß║¡p nhß║¡t th├┤ng tin\" ─æß╗â l╞░u.');\r\n                      }\r\n                    }}\r\n                    onUploadError={(error) => {\r\n                      toast.error('Lß╗ùi upload avatar: ' + error);\r\n                    }}\r\n                    options={{\r\n                      folder: 'avatars',\r\n                      maxSizeKB: 2048,\r\n                      allowedTypes: ['image/jpeg', 'image/png', 'image/webp'],\r\n                      generateThumbnails: true\r\n                    }}\r\n                    previewUrl={avatarUrl}\r\n                    label=\"\"\r\n                    showThumbnails={true}\r\n                    compressBeforeUpload={true}\r\n                    className=\"mb-4\"\r\n                  />\r\n\r\n                  {/* Fallback: Nhß║¡p URL thß╗º c├┤ng */}\r\n                  <details className=\"mt-2\">\r\n                    <summary className=\"text-xs text-gray-500 cursor-pointer hover:text-gray-700\">\r\n                      Hoß║╖c nhß║¡p URL avatar thß╗º c├┤ng\r\n                    </summary>\r\n                    <input\r\n                      type=\"url\"\r\n                      value={avatarUrl}\r\n                      onChange={(e) => setAvatarUrl(e.target.value)}\r\n                      className=\"w-full mt-2 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      placeholder={t('placeholders.avatarUrl')}\r\n                    />\r\n                  </details>\r\n                </div>\r\n                <button\r\n                  onClick={handleProfileUpdate}\r\n                  disabled={saving}\r\n                  className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors\"\r\n                >\r\n                  {saving ? t('profile.updating') : t('profile.updateProfile')}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Password Settings */}\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">{t('profile.changePassword')}</h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('profile.currentPassword')}</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={currentPassword}\r\n                    onChange={(e) => setCurrentPassword(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder={t('profile.currentPasswordRequired')}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('profile.newPassword')}</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={newPassword}\r\n                    onChange={(e) => setNewPassword(e.target.value)}\r\n                    className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                      newPassword && newPassword.length < 6 ? 'border-red-300' : 'border-gray-300'\r\n                    }`}\r\n                    placeholder={t('profile.passwordTooShort')}\r\n                  />\r\n                  {newPassword && newPassword.length < 6 && (\r\n                    <p className=\"text-xs text-red-500 mt-1\">{t('profile.passwordTooShort')}</p>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">{t('profile.confirmNewPassword')}</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    value={confirmPassword}\r\n                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                    className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\r\n                      confirmPassword && newPassword !== confirmPassword ? 'border-red-300' : 'border-gray-300'\r\n                    }`}\r\n                    placeholder={t('profile.passwordMismatch')}\r\n                  />\r\n                  {confirmPassword && newPassword !== confirmPassword && (\r\n                    <p className=\"text-xs text-red-500 mt-1\">{t('profile.passwordMismatch')}</p>\r\n                  )}\r\n                </div>\r\n                <button\r\n                  onClick={handlePasswordUpdate}\r\n                  disabled={\r\n                    saving || \r\n                    !currentPassword || \r\n                    !newPassword || \r\n                    !confirmPassword ||\r\n                    newPassword.length < 6 ||\r\n                    newPassword !== confirmPassword ||\r\n                    newPassword === currentPassword\r\n                  }\r\n                  className=\"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors\"\r\n                >\r\n                  {saving ? t('profile.authenticating') : t('profile.changePassword')}\r\n                </button>\r\n                  <div className=\"text-xs text-gray-500 space-y-1\">\r\n                    <p>ΓÜá∩╕Å {t('profile.currentPasswordRequired')}</p>\r\n                    <p>Γ£ô {t('profile.passwordMinLength')}</p>\r\n                    <p>Γ£ô {t('profile.passwordMustDiffer')}</p>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\services.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\services\\authService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\services\\otpService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\store\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\auth\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\creator\\components\\CreatorNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\creator\\layouts\\CreatorLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\ConnectionStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\CreateRoomModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\ErrorDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\GameModeSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\GameResults.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600\">\r\n                  {player.correctAnswers}/{player.totalAnswers} {t('common.correct')} ΓÇó \r\n                  {Math.round(player.averageTime)}s {t('common.avgTime')}\r\n                </div>","line":145,"column":51,"nodeType":"JSXText","endLine":145,"endColumn":53},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-2xl font-bold text-gray-900\">\r\n            {Math.round(gameStats.totalTime / 60)}m\r\n          </div>","line":188,"column":51,"nodeType":"JSXText","endLine":189,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Trophy, Medal, Award, Users, Clock, Target } from 'lucide-react';\r\n\r\ninterface Player {\r\n  id: string;\r\n  username: string;\r\n  score: number;\r\n  correctAnswers: number;\r\n  totalAnswers: number;\r\n  averageTime: number;\r\n  rank: number;\r\n}\r\n\r\ninterface GameResultsProps {\r\n  players?: Player[];\r\n  currentUserId?: string;\r\n  gameStats?: {\r\n    totalQuestions: number;\r\n    totalTime: number;\r\n    averageScore: number;\r\n  };\r\n  onPlayAgain?: () => void;\r\n  onBackToLobby?: () => void;\r\n  onLeaveRoom?: () => void;\r\n}\r\n\r\nconst GameResults: React.FC<GameResultsProps> = ({\r\n  players = [],\r\n  currentUserId = '',\r\n  gameStats = { totalQuestions: 0, totalTime: 0, averageScore: 0 },\r\n  onPlayAgain,\r\n  onBackToLobby,\r\n  onLeaveRoom\r\n}) => {\r\n  const { t } = useTranslation();\r\n\r\n  // Memoize expensive computations\r\n  const currentPlayer = useMemo(\r\n    () => players.find(p => p.id === currentUserId),\r\n    [players, currentUserId]\r\n  );\r\n\r\n  const sortedPlayers = useMemo(\r\n    () => [...players].sort((a, b) => b.score - a.score),\r\n    [players]\r\n  );\r\n\r\n  const getRankIcon = (rank: number) => {\r\n    switch (rank) {\r\n      case 1:\r\n        return <Trophy className=\"w-6 h-6 text-yellow-500\" />;\r\n      case 2:\r\n        return <Medal className=\"w-6 h-6 text-gray-400\" />;\r\n      case 3:\r\n        return <Award className=\"w-6 h-6 text-orange-500\" />;\r\n      default:\r\n        return <div className=\"w-6 h-6 flex items-center justify-center text-gray-500 font-bold\">#{rank}</div>;\r\n    }\r\n  };\r\n\r\n  const getRankColor = (rank: number) => {\r\n    switch (rank) {\r\n      case 1:\r\n        return 'bg-gradient-to-r from-yellow-100 to-yellow-200 border-yellow-300';\r\n      case 2:\r\n        return 'bg-gradient-to-r from-gray-100 to-gray-200 border-gray-300';\r\n      case 3:\r\n        return 'bg-gradient-to-r from-orange-100 to-orange-200 border-orange-300';\r\n      default:\r\n        return 'bg-gray-50 border-gray-200';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-4 space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"text-center space-y-4\">\r\n        <div className=\"flex items-center justify-center gap-3\">\r\n          <Trophy className=\"w-8 h-8 text-yellow-500\" />\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">\r\n            {t('multiplayer.game.gameOver')}\r\n          </h1>\r\n        </div>\r\n        \r\n        {currentPlayer && (\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 inline-block\">\r\n            <div className=\"text-lg font-semibold text-blue-900\">\r\n              {t('multiplayer.yourResult')}\r\n            </div>\r\n            <div className=\"flex items-center justify-center gap-6 mt-2 text-blue-800\">\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold\">{currentPlayer.score}</div>\r\n                <div className=\"text-sm\">{t('common.points')}</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold\">#{currentPlayer.rank}</div>\r\n                <div className=\"text-sm\">{t('common.rank')}</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold\">\r\n                  {Math.round((currentPlayer.correctAnswers / currentPlayer.totalAnswers) * 100)}%\r\n                </div>\r\n                <div className=\"text-sm\">{t('common.accuracy')}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Final Leaderboard */}\r\n      <div className=\"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden\">\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4\">\r\n          <h2 className=\"text-xl font-bold flex items-center gap-2\">\r\n            <Trophy className=\"w-6 h-6\" />\r\n            {t('multiplayer.game.finalResults')}\r\n          </h2>\r\n        </div>\r\n        \r\n        <div className=\"divide-y divide-gray-200\">\r\n          {sortedPlayers.map((player, index) => (\r\n            <div\r\n              key={player.id}\r\n              className={`p-4 flex items-center gap-4 ${getRankColor(index + 1)} ${\r\n                player.id === currentUserId ? 'ring-2 ring-blue-500' : ''\r\n              }`}\r\n            >\r\n              {/* Rank */}\r\n              <div className=\"flex items-center justify-center w-12\">\r\n                {getRankIcon(index + 1)}\r\n              </div>\r\n\r\n              {/* Player Info */}\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-semibold text-gray-900 flex items-center gap-2\">\r\n                  {player.username}\r\n                  {player.id === currentUserId && (\r\n                    <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full\">\r\n                      {t('common.you')}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <div className=\"text-sm text-gray-600\">\r\n                  {player.correctAnswers}/{player.totalAnswers} {t('common.correct')} ΓÇó \r\n                  {Math.round(player.averageTime)}s {t('common.avgTime')}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Score */}\r\n              <div className=\"text-right\">\r\n                <div className=\"text-xl font-bold text-gray-900\">\r\n                  {player.score}\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">\r\n                  {t('common.points')}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Accuracy */}\r\n              <div className=\"text-right w-16\">\r\n                <div className=\"text-lg font-semibold text-gray-700\">\r\n                  {Math.round((player.correctAnswers / player.totalAnswers) * 100)}%\r\n                </div>\r\n                <div className=\"text-xs text-gray-500\">\r\n                  {t('common.accuracy')}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Game Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div className=\"bg-white rounded-lg shadow border border-gray-200 p-4 text-center\">\r\n          <Target className=\"w-8 h-8 text-blue-600 mx-auto mb-2\" />\r\n          <div className=\"text-2xl font-bold text-gray-900\">\r\n            {gameStats.totalQuestions}\r\n          </div>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {t('multiplayer.totalQuestions')}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow border border-gray-200 p-4 text-center\">\r\n          <Clock className=\"w-8 h-8 text-green-600 mx-auto mb-2\" />\r\n          <div className=\"text-2xl font-bold text-gray-900\">\r\n            {Math.round(gameStats.totalTime / 60)}m\r\n          </div>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {t('multiplayer.totalTime')}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow border border-gray-200 p-4 text-center\">\r\n          <Users className=\"w-8 h-8 text-purple-600 mx-auto mb-2\" />\r\n          <div className=\"text-2xl font-bold text-gray-900\">\r\n            {Math.round(gameStats.averageScore)}\r\n          </div>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {t('multiplayer.avgScore')}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n        {onPlayAgain && (\r\n          <button\r\n            onClick={onPlayAgain}\r\n            className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium\"\r\n          >\r\n            {t('multiplayer.playAgain')}\r\n          </button>\r\n        )}\r\n        \r\n        {onBackToLobby && (\r\n          <button\r\n            onClick={onBackToLobby}\r\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n          >\r\n            {t('multiplayer.backToLobby')}\r\n          </button>\r\n        )}\r\n        \r\n        {onLeaveRoom && (\r\n          <button\r\n            onClick={onLeaveRoom}\r\n            className=\"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium\"\r\n          >\r\n            {t('multiplayer.leaveRoom')}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameResults;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\JoinRoomModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\LoadingOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\MobileChatModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\MultiplayerChat.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-xs text-blue-100\">\r\n            {messages.length} messages\r\n          </span>","line":66,"column":30,"nodeType":"JSXText","endLine":67,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-400 text-xs mt-1\">\r\n              Start a conversation with your team!\r\n            </p>","line":81,"column":55,"nodeType":"JSXText","endLine":83,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Send, MessageSquare } from 'lucide-react';\r\n\r\ninterface ChatMessage {\r\n  id: string;\r\n  userId: string;\r\n  username: string;\r\n  message: string;\r\n  timestamp: Date;\r\n  type: 'user' | 'system';\r\n}\r\n\r\ninterface MultiplayerChatProps {\r\n  messages: ChatMessage[];\r\n  onSendMessage: (message: string) => void;\r\n  currentUserId: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nconst MultiplayerChat: React.FC<MultiplayerChatProps> = ({\r\n  messages,\r\n  onSendMessage,\r\n  currentUserId,\r\n  disabled = false\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Auto scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!inputMessage.trim() || disabled) return;\r\n    \r\n    onSendMessage(inputMessage.trim());\r\n    setInputMessage('');\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  const formatTime = (date: Date) => {\r\n    return new Intl.DateTimeFormat('vi-VN', {\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-3 p-4 bg-gradient-to-r from-blue-500 to-indigo-500\">\r\n        <div className=\"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center\">\r\n          <MessageSquare className=\"w-5 h-5 text-white\" />\r\n        </div>\r\n        <div className=\"flex-1\">\r\n          <h3 className=\"font-bold text-white text-lg\">\r\n            {t('multiplayer.chat.title')}\r\n          </h3>\r\n          <span className=\"text-xs text-blue-100\">\r\n            {messages.length} messages\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3 bg-gradient-to-b from-gray-50 to-white\" style={{ maxHeight: 'calc(100vh - 300px)' }}>\r\n        {messages.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-center py-8\">\r\n            <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-3\">\r\n              <MessageSquare className=\"w-8 h-8 text-blue-500\" />\r\n            </div>\r\n            <p className=\"text-gray-500 text-sm font-medium\">\r\n              {t('multiplayer.chat.noMessages')}\r\n            </p>\r\n            <p className=\"text-gray-400 text-xs mt-1\">\r\n              Start a conversation with your team!\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          messages.map((message) => (\r\n            <div\r\n              key={message.id}\r\n              className={`flex flex-col ${\r\n                message.type === 'system'\r\n                  ? 'items-center'\r\n                  : message.userId === currentUserId\r\n                  ? 'items-end'\r\n                  : 'items-start'\r\n              }`}\r\n            >\r\n              {message.type === 'system' ? (\r\n                <div className=\"bg-gray-200 text-gray-600 text-xs px-4 py-1.5 rounded-full font-medium shadow-sm\">\r\n                  {message.message}\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-col max-w-[75%]\">\r\n                  {message.userId !== currentUserId && (\r\n                    <span className=\"text-xs text-gray-500 font-semibold mb-1 ml-3\">\r\n                      {message.username}\r\n                    </span>\r\n                  )}\r\n                  <div\r\n                    className={`px-4 py-2.5 rounded-2xl text-sm shadow-sm ${\r\n                      message.userId === currentUserId\r\n                        ? 'bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-br-sm'\r\n                        : 'bg-white border border-gray-200 text-gray-800 rounded-bl-sm'\r\n                    }`}\r\n                  >\r\n                    <div className=\"break-words\">{message.message}</div>\r\n                    <div\r\n                      className={`text-xs mt-1 ${\r\n                        message.userId === currentUserId\r\n                          ? 'text-blue-100'\r\n                          : 'text-gray-400'\r\n                      }`}\r\n                    >\r\n                      {formatTime(message.timestamp)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))\r\n        )}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <form onSubmit={handleSubmit} className=\"p-4 bg-white border-t border-gray-100\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={inputMessage}\r\n            onChange={(e) => setInputMessage(e.target.value)}\r\n            placeholder={\r\n              disabled\r\n                ? t('multiplayer.chat.disabled')\r\n                : t('multiplayer.chat.placeholder')\r\n            }\r\n            className=\"flex-1 px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:bg-white text-sm transition-all disabled:bg-gray-100 disabled:text-gray-400\"\r\n            disabled={disabled}\r\n            maxLength={200}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={!inputMessage.trim() || disabled}\r\n            className=\"px-4 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg disabled:shadow-none\"\r\n          >\r\n            <Send className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n        \r\n        {inputMessage.length > 150 && (\r\n          <div className=\"flex items-center justify-end gap-2 mt-2\">\r\n            <div className={`w-12 h-1.5 rounded-full overflow-hidden bg-gray-200`}>\r\n              <div \r\n                className={`h-full transition-all ${\r\n                  inputMessage.length > 180 ? 'bg-red-500' : 'bg-blue-500'\r\n                }`}\r\n                style={{ width: `${(inputMessage.length / 200) * 100}%` }}\r\n              />\r\n            </div>\r\n            <span className={`text-xs font-medium ${\r\n              inputMessage.length > 180 ? 'text-red-500' : 'text-gray-500'\r\n            }`}>\r\n              {inputMessage.length}/200\r\n            </span>\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultiplayerChat;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\MultiplayerErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\MultiplayerManager.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-purple-200\">\r\n                  ≡ƒÄ» {selectedQuiz.title} ΓÇó {selectedQuiz.questions?.length || 0} c├óu hß╗Åi\r\n                </p>","line":540,"column":82,"nodeType":"JSXText","endLine":541,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { toast } from 'react-toastify';\r\nimport { \r\n  Users, \r\n  Wifi,\r\n  WifiOff,\r\n  AlertCircle\r\n} from 'lucide-react';\r\nimport { logger } from '../utils/logger';\r\n\r\n// Import c├íc components con\r\nimport GameModeSelector from './GameModeSelector';\r\nimport CreateRoomModal from './CreateRoomModal';\r\nimport JoinRoomModal from './JoinRoomModal';\r\nimport RoomLobby from './RoomLobby';\r\nimport MultiplayerQuiz from './MultiplayerQuiz';\r\nimport GameResults from './GameResults';\r\nimport RealtimeChat from './RealtimeChat';\r\nimport MobileChatModal from './MobileChatModal';\r\n\r\n// Import services\r\nimport { getMultiplayerService, MultiplayerServiceInterface } from '../services/enhancedMultiplayerService';\r\n\r\n// Types\r\nimport type { Quiz } from '../types/index';\r\nimport type { GameResults as GameResultsType } from '../types/index';\r\n\r\nexport interface MultiplayerState {\r\n  currentState: 'mode-selection' | 'create-room' | 'join-room' | 'lobby' | 'game' | 'results';\r\n  roomId?: string;\r\n  roomData?: any;\r\n  gameData?: any;\r\n  results?: GameResultsType;\r\n  error?: string;\r\n  isConnecting: boolean;\r\n  isConnected: boolean;\r\n}\r\n\r\ninterface MultiplayerManagerProps {\r\n  selectedQuiz?: Quiz;\r\n  currentUserId: string;\r\n  currentUserName: string;\r\n  onBackToLobby: () => void;\r\n  onQuizComplete: (results: GameResultsType) => void;\r\n  initialRoomId?: string;\r\n}\r\n\r\nconst MultiplayerManager: React.FC<MultiplayerManagerProps> = ({\r\n  selectedQuiz: initialSelectedQuiz,\r\n  currentUserId,\r\n  currentUserName,\r\n  onBackToLobby,\r\n  onQuizComplete,\r\n  initialRoomId\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [selectedQuiz] = useState<Quiz | undefined>(initialSelectedQuiz);\r\n  const [state, setState] = useState<MultiplayerState>({\r\n    currentState: 'mode-selection', // Lu├┤n bß║»t ─æß║ºu tß╗½ mode-selection v├¼ quiz ─æ├ú ─æ╞░ß╗úc chß╗ìn tß╗½ MultiplayerLobby\r\n    isConnecting: false,\r\n    isConnected: false\r\n  });\r\n  \r\n  const [multiplayerService, setMultiplayerService] = useState<MultiplayerServiceInterface | null>(null);\r\n  const [connectionStatus, setConnectionStatus] = useState<'disconnected' | 'connecting' | 'connected' | 'error'>('disconnected');\r\n  const [joinError, setJoinError] = useState<string | undefined>(undefined);\r\n\tconst [createLoading, setCreateLoading] = useState<boolean>(false);\r\n\tconst [joinLoading, setJoinLoading] = useState<boolean>(false);\r\n  const [isMobileChatOpen, setIsMobileChatOpen] = useState<boolean>(false);\r\n  const [isReconnecting, setIsReconnecting] = useState<boolean>(false);\r\n\r\n  // Initialize multiplayer service\r\n  useEffect(() => {\r\n    const service = getMultiplayerService();\r\n    setMultiplayerService(service);\r\n    \r\n    // Connect to service\r\n    const connectToService = async () => {\r\n      try {\r\n        setConnectionStatus('connecting');\r\n        await service.connect(currentUserId, currentUserName);\r\n        setConnectionStatus('connected');\r\n        setState(prev => ({ ...prev, isConnected: true }));\r\n        \r\n        // Set up event listeners\r\n        service.on('room:updated', handleRoomUpdate);\r\n        service.on('players:updated', handlePlayersUpdate);\r\n        // messages:updated listener removed - RealtimeChat handles this directly\r\n        service.on('game:start', handleGameStart);\r\n        service.on('game:next-question', handleNextQuestion);\r\n        service.on('game:finish', handleGameFinish);\r\n        service.on('connection:lost', handleConnectionLost);\r\n        service.on('connection:restored', handleConnectionRestored);\r\n        \r\n      } catch (error) {\r\n        console.error('Failed to connect to multiplayer service:', error);\r\n        setConnectionStatus('error');\r\n        toast.error(t('multiplayer.errors.connectionFailed'));\r\n      }\r\n    };\r\n\r\n    connectToService();\r\n\r\n    return () => {\r\n      service.disconnect();\r\n    };\r\n  }, [currentUserId, currentUserName, t]);\r\n  // Handlers are intentionally omitted from dependencies to prevent infinite loop from re-subscription\r\n\r\n  // Try resuming room from state (if page reload)\r\n  useEffect(() => {\r\n    const previousRoomId = initialRoomId || state.roomId || (state.roomData?.id as string | undefined);\r\n    if (!previousRoomId || !multiplayerService || connectionStatus !== 'connected') return;\r\n    // Mark presence online and resume streams\r\n    multiplayerService.setPresence(previousRoomId, true).catch(() => {});\r\n    multiplayerService.resumeRoom(previousRoomId).catch(() => {});\r\n    // Set UI state to lobby immediately while streams resume\r\n    setState(prev => ({ ...prev, currentState: 'lobby', roomId: previousRoomId }));\r\n  }, [multiplayerService, connectionStatus, initialRoomId, state.roomId, state.roomData?.id]);\r\n\r\n  // Event handlers\r\n  const handleRoomUpdate = useCallback((roomData: any) => {\r\n    logger.debug('Room updated', { \r\n      roomId: roomData?.id, \r\n      status: roomData?.status,\r\n      playerCount: roomData?.players?.length \r\n    });\r\n    \r\n    setState(prev => {\r\n      // Preserve existing players if not in new roomData\r\n      const updatedRoomData = {\r\n        ...roomData,\r\n        players: roomData.players || prev.roomData?.players || []\r\n      };\r\n      \r\n      // Auto-transition to game state when room status changes\r\n      if (roomData?.status === 'playing' && prev.currentState === 'lobby') {\r\n        logger.info('Room status changed to playing, transitioning to game');\r\n        return { ...prev, roomData: updatedRoomData, currentState: 'game' };\r\n      }\r\n      \r\n      return { ...prev, roomData: updatedRoomData };\r\n    });\r\n  }, []);\r\n\r\n  // Auto-reconnect on disconnect\r\n  useEffect(() => {\r\n    if (connectionStatus === 'error' && !isReconnecting && multiplayerService) {\r\n      setIsReconnecting(true);\r\n      const timer = setTimeout(async () => {\r\n        logger.info('Attempting to reconnect...');\r\n        try {\r\n          setConnectionStatus('connecting');\r\n          await multiplayerService.connect(currentUserId, currentUserName);\r\n          setConnectionStatus('connected');\r\n          toast.success(t('multiplayer.success.connectionRestored'));\r\n        } catch (error) {\r\n          logger.error('Reconnection failed:', error);\r\n          setConnectionStatus('error');\r\n        } finally {\r\n          setIsReconnecting(false);\r\n        }\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [connectionStatus, isReconnecting, multiplayerService, currentUserId, currentUserName, t]);\r\n\r\n  const handleGameStart = useCallback((gameData: any) => {\r\n    logger.debug('Game Start Event Received', {\r\n      hasQuestions: gameData?.questions?.length || 0\r\n    });\r\n    \r\n    setState(prev => ({ \r\n      ...prev, \r\n      currentState: 'game', \r\n      gameData \r\n    }));\r\n  }, []);\r\n\r\n  const handleNextQuestion = useCallback((gameData: any) => {\r\n    setState(prev => ({ \r\n      ...prev, \r\n      gameData\r\n    }));\r\n  }, []);\r\n\r\n  const handleGameFinish = useCallback((results: GameResultsType) => {\r\n    setState(prev => ({ \r\n      ...prev, \r\n      currentState: 'results', \r\n      results \r\n    }));\r\n    onQuizComplete(results);\r\n  }, [onQuizComplete]);\r\n\r\n  const handlePlayersUpdate = useCallback((players: any[]) => {\r\n    logger.debug('Players updated', { count: players.length, playerIds: players.map(p => p.id) });\r\n    setState(prev => {\r\n      // Ensure we merge players into existing roomData\r\n      if (!prev.roomData) {\r\n        logger.warn('Received players update but no roomData exists');\r\n        return prev;\r\n      }\r\n      \r\n      return {\r\n        ...prev,\r\n        roomData: { \r\n          ...prev.roomData, \r\n          players \r\n        }\r\n      };\r\n    });\r\n  }, []);\r\n\r\n  // Messages are now handled directly by RealtimeChat component via RTDB listeners\r\n  // No need for handleMessagesUpdate callback\r\n\r\n  // const handleChatMessage = useCallback((message: any) => {\r\n  //   console.log('MultiplayerManager received chat message:', message);\r\n  //   setChatMessages(prev => {\r\n  //     const newMessages = [...prev, message];\r\n  //     console.log('Updated chat messages count:', newMessages.length);\r\n  //     return newMessages;\r\n  //   });\r\n  // }, []);\r\n\r\n  const handleConnectionLost = useCallback(() => {\r\n    setConnectionStatus('disconnected');\r\n    // toast.warning(t('multiplayer.errors.connectionLost'));\r\n  }, []);\r\n\r\n  const handleConnectionRestored = useCallback(() => {\r\n    setConnectionStatus('connected');\r\n    // toast.success(t('multiplayer.success.connectionRestored'));\r\n  }, []);\r\n\r\n  // Navigation handlers\r\n  const handleModeSelection = (mode: 'create' | 'join') => {\r\n    if (mode === 'create') {\r\n      setState(prev => ({ ...prev, currentState: 'create-room' }));\r\n    } else {\r\n      setState(prev => ({ ...prev, currentState: 'join-room' }));\r\n    }\r\n  };\r\n\r\n  const handleBackToModeSelection = () => {\r\n    setState(prev => ({ \r\n      ...prev, \r\n      currentState: 'mode-selection',\r\n      roomId: undefined,\r\n      roomData: undefined,\r\n      gameData: undefined,\r\n      results: undefined\r\n    }));\r\n  };\r\n\r\n  const handleBackToQuizSelection = () => {\r\n    // Navigate back to lobby to select another quiz\r\n    onBackToLobby();\r\n  };\r\n\r\n  const handleRoomCreated = (roomId: string, roomData: any) => {\r\n    setState(prev => ({ \r\n      ...prev, \r\n      currentState: 'lobby',\r\n      roomId,\r\n      roomData\r\n    }));\r\n    // toast.success(t('multiplayer.success.roomCreated')); // Removed - too many notifications\r\n  };\r\n\r\n  const handleRoomJoined = (roomId: string, roomData: any) => {\r\n    setState(prev => ({ \r\n      ...prev, \r\n      currentState: 'lobby',\r\n      roomId,\r\n      roomData\r\n    }));\r\n    // toast.success(t('multiplayer.success.joinedRoom')); // Removed - too many notifications\r\n  };\r\n\r\n  const handleLeaveRoom = () => {\r\n    if (multiplayerService && state.roomId) {\r\n      multiplayerService.leaveRoom(state.roomId);\r\n    }\r\n    setState(prev => ({ \r\n      ...prev, \r\n      currentState: 'mode-selection',\r\n      roomId: undefined,\r\n      roomData: undefined,\r\n      gameData: undefined,\r\n      results: undefined\r\n    }));\r\n    toast.info(t('multiplayer.success.leftRoom'));\r\n  };\r\n\r\n  // Chat message handler - not needed with RealtimeChat component\r\n  // Messages are sent directly from RealtimeChat via RTDB\r\n\r\n  // Render connection status\r\n  const renderConnectionStatus = () => {\r\n    const statusConfig = {\r\n      disconnected: { icon: WifiOff, color: 'text-red-500', text: t('multiplayer.errors.connectionLost') },\r\n      connecting: { icon: Wifi, color: 'text-yellow-500', text: t('multiplayer.errors.reconnecting') },\r\n      connected: { icon: Wifi, color: 'text-green-500', text: t('multiplayer.success.connectionRestored') },\r\n      error: { icon: AlertCircle, color: 'text-red-500', text: t('multiplayer.errors.connectionFailed') }\r\n    } as const;\r\n\r\n    const config = statusConfig[connectionStatus];\r\n    const Icon = config.icon;\r\n\r\n    return (\r\n      <div className={`flex items-center gap-2 ${config.color} text-sm`}>\r\n        <Icon size={16} />\r\n        <span>{config.text}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Render current state\r\n  const renderCurrentState = () => {\r\n    switch (state.currentState) {\r\n      case 'mode-selection':\r\n        return (\r\n          <GameModeSelector\r\n            isOpen={true}\r\n            onClose={handleBackToQuizSelection}\r\n            onSelectMultiplayer={handleModeSelection}\r\n            connectionStatus={connectionStatus}\r\n          />\r\n        );\r\n\r\n      case 'create-room':\r\n        return (\r\n\t\t\t\t<CreateRoomModal\r\n            isOpen={true}\r\n\t\t\t\tonClose={handleBackToModeSelection}\r\n            onCreateRoom={async (roomConfig) => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tsetCreateLoading(true);\r\n\t\t\t\t\t\tif (!multiplayerService || connectionStatus !== 'connected') {\r\n\t\t\t\t\t\t\ttoast.info(t('multiplayer.errors.reconnecting'));\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Pass full quiz object instead of just quizId\r\n\t\t\t\t\t\tconsole.log('≡ƒÄ« Manager: Creating room with quiz', { \r\n\t\t\t\t\t\t\tquizId: selectedQuiz?.id, \r\n\t\t\t\t\t\t\tquizTitle: selectedQuiz?.title,\r\n\t\t\t\t\t\t\thasQuestions: !!selectedQuiz?.questions?.length\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst result = await multiplayerService.createRoom(roomConfig as any, selectedQuiz);\r\n\t\t\t\t\t\tif (result) {\r\n\t\t\t\t\t\t\thandleRoomCreated(result.room.id, result.room);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error: any) {\r\n\t\t\t\t\t\tconsole.error('Γ¥î Manager: Failed to create room:', error);\r\n\t\t\t\t\t\tconst errorMessage = error.message || t('multiplayer.errors.createRoomFailed');\r\n\t\t\t\t\t\ttoast.error(errorMessage);\r\n\t\t\t\t\t\t} finally {\r\n\t\t\t\t\t\t\tsetCreateLoading(false);\r\n\t\t\t\t\t\t}\r\n            }}\r\n            selectedQuiz={selectedQuiz}\r\n\t\t\t\t\tloading={createLoading || connectionStatus !== 'connected'}\r\n          />\r\n        );\r\n\r\n      case 'join-room':\r\n        return (\r\n\t\t\t\t<JoinRoomModal\r\n            isOpen={true}\r\n            onClose={() => {\r\n              setJoinError(undefined);\r\n              handleBackToModeSelection();\r\n            }}\r\n            onJoinRoom={async (roomCode, password) => {\r\n              try {\r\n\t\t\t\t\t\t\tsetJoinError(undefined);\r\n\t\t\t\t\t\t\tsetJoinLoading(true);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconsole.log('≡ƒÄ« Manager: Attempting to join room', { roomCode, hasPassword: !!password });\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!multiplayerService || connectionStatus !== 'connected') {\r\n\t\t\t\t\t\t\t\ttoast.info(t('multiplayer.errors.reconnecting'));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconst result = await multiplayerService.joinRoom(roomCode, password);\r\n                if (result) {\r\n                  console.log('Γ£à Manager: Successfully joined room');\r\n                  handleRoomJoined(result.room.id, result.room);\r\n                }\r\n              } catch (error: any) {\r\n                console.error('Γ¥î Manager: Failed to join room:', error);\r\n                console.log('Error details:', { message: error.message, code: error.code });\r\n                \r\n                // Translate error messages\r\n                let errorMessage = t('multiplayer.errors.joinRoomFailed');\r\n                const errorCode = error.message || '';\r\n                \r\n                if (errorCode === 'room_not_found') {\r\n                  errorMessage = t('multiplayer.errors.roomNotFound', 'Kh├┤ng t├¼m thß║Ñy ph├▓ng');\r\n                } else if (errorCode === 'room_requires_password') {\r\n                  errorMessage = t('multiplayer.errors.passwordRequired', 'Ph├▓ng n├áy y├¬u cß║ºu mß║¡t khß║⌐u');\r\n                } else if (errorCode === 'wrong_password') {\r\n                  errorMessage = t('multiplayer.errors.wrongPassword', 'Mß║¡t khß║⌐u kh├┤ng ─æ├║ng');\r\n                } else if (errorCode === 'room_full') {\r\n                  errorMessage = t('multiplayer.errors.roomFull', 'Ph├▓ng ─æ├ú ─æß║ºy');\r\n                } else if (errorCode === 'game_in_progress') {\r\n                  errorMessage = t('multiplayer.errors.gameInProgress', 'Game ─æang diß╗àn ra');\r\n                } else if (errorCode) {\r\n                  errorMessage = errorCode;\r\n                }\r\n                \r\n                console.log('≡ƒô¿ Manager: Setting error message:', errorMessage);\r\n                setJoinError(errorMessage);\r\n                \r\n                // Don't show toast for password required error - let modal handle it\r\n                if (errorCode !== 'room_requires_password') {\r\n                  toast.error(errorMessage);\r\n                }\r\n\t\t\t\t\t\t} finally {\r\n\t\t\t\t\t\t\tsetJoinLoading(false);\r\n\t\t\t\t\t\t}\r\n            }}\r\n\t\t\t\t\tloading={joinLoading || connectionStatus !== 'connected'}\r\n            error={joinError}\r\n          />\r\n        );\r\n\r\n      case 'lobby':\r\n        return (\r\n          <div className=\"flex flex-col lg:flex-row min-h-screen bg-gray-50\">\r\n            {/* Main Lobby - Full width on mobile, flex-1 on desktop */}\r\n            <div className=\"flex-1 overflow-y-auto\">\r\n              <RoomLobby\r\n                roomData={state.roomData}\r\n                currentUserId={currentUserId}\r\n                onLeaveRoom={handleLeaveRoom}\r\n                multiplayerService={multiplayerService ?? undefined}\r\n              />\r\n            </div>\r\n            \r\n            {/* Chat Sidebar - Hidden on mobile, show on lg+ */}\r\n            <div className=\"hidden lg:block lg:w-80 xl:w-96 border-l border-gray-200 bg-white\">\r\n              <div className=\"h-screen sticky top-0\">\r\n                <RealtimeChat\r\n                  roomId={state.roomId || ''}\r\n                  currentUserId={currentUserId}\r\n                  currentUsername={currentUserName}\r\n                  isMobile={false}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Mobile Chat Button - Show only on mobile */}\r\n            <button \r\n              className=\"lg:hidden fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-full shadow-2xl flex items-center justify-center z-50 hover:scale-110 transition-transform\"\r\n              onClick={() => setIsMobileChatOpen(true)}\r\n            >\r\n              <Users className=\"w-6 h-6\" />\r\n            </button>\r\n\r\n            {/* Mobile Chat Modal */}\r\n            <MobileChatModal\r\n              isOpen={isMobileChatOpen}\r\n              onClose={() => setIsMobileChatOpen(false)}\r\n              roomId={state.roomId || ''}\r\n              currentUserId={currentUserId}\r\n              currentUsername={currentUserName}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      case 'game':\r\n        return (\r\n          <div className=\"flex flex-col lg:flex-row min-h-screen bg-gray-50\">\r\n            {/* Game Area - Full width on mobile */}\r\n            <div className=\"flex-1 overflow-y-auto\">\r\n              <MultiplayerQuiz\r\n                gameData={state.gameData ?? null}\r\n                roomData={state.roomData ?? null}\r\n                currentUserId={currentUserId}\r\n                currentUserName={currentUserName}\r\n                multiplayerService={multiplayerService}\r\n              />\r\n            </div>\r\n            \r\n            {/* Chat Sidebar - Hidden on mobile during game */}\r\n            <div className=\"hidden lg:block lg:w-80 xl:w-96 border-l border-gray-200 bg-white\">\r\n              <div className=\"h-screen sticky top-0\">\r\n                <RealtimeChat\r\n                  roomId={state.roomId || ''}\r\n                  currentUserId={currentUserId}\r\n                  currentUsername={currentUserName}\r\n                  isMobile={false}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case 'results':\r\n        return (\r\n          <GameResults\r\n            players={state.results?.players as any || []}\r\n            currentUserId={currentUserId}\r\n            onPlayAgain={handleBackToModeSelection}\r\n            onBackToLobby={onBackToLobby}\r\n            onLeaveRoom={handleLeaveRoom}\r\n          />\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900\">\r\n      {/* Header with connection status */}\r\n      <div className=\"bg-white/10 backdrop-blur-md border-b border-white/20 p-4\">\r\n        <div className=\"max-w-7xl mx-auto flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <button\r\n              onClick={handleBackToQuizSelection}\r\n              className=\"text-white hover:text-gray-200 transition-colors\"\r\n            >\r\n              ΓåÉ {t('common.back')}\r\n            </button>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold text-white\">\r\n                {t('multiplayer.title')}\r\n              </h1>\r\n              {selectedQuiz && (\r\n                <p className=\"text-sm text-purple-200\">\r\n                  ≡ƒÄ» {selectedQuiz.title} ΓÇó {selectedQuiz.questions?.length || 0} c├óu hß╗Åi\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            {renderConnectionStatus()}\r\n            {state.roomData && (\r\n              <div className=\"flex items-center gap-2 text-white\">\r\n                <Users size={16} />\r\n                <span>{state.roomData.players?.length || 0}/{state.roomData.settings?.maxPlayers || 10}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex-1\">\r\n        {renderCurrentState()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultiplayerManager;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\MultiplayerQuiz.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Game Starting Soon!</h2>","line":587,"column":67,"nodeType":"JSXText","endLine":587,"endColumn":86},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600\">Get ready to answer questions!</p>","line":589,"column":42,"nodeType":"JSXText","endLine":589,"endColumn":72},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-800 mb-4 text-center\">Question Results</h3>","line":596,"column":78,"nodeType":"JSXText","endLine":596,"endColumn":94},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n                  You earned <span className=\"font-bold text-blue-600\">+{questionResults.points}</span> points\r\n                </div>","line":604,"column":61,"nodeType":"JSXText","endLine":605,"endColumn":30},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n                  You earned <span className=\"font-bold text-blue-600\">+{questionResults.points}</span> points\r\n                </div>","line":605,"column":104,"nodeType":"JSXText","endLine":606,"endColumn":17},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600\">\r\n                  Correct Answer: <span className=\"font-semibold\">{finalQuestion.options?.[questionResults.correctAnswer] || 'N/A'}</span>\r\n                </div>","line":607,"column":56,"nodeType":"JSXText","endLine":608,"endColumn":35},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h4 className=\"font-semibold text-gray-700 mb-3 text-center\">Current Standings</h4>","line":618,"column":76,"nodeType":"JSXText","endLine":618,"endColumn":93},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-1 text-xs\">(You)</span>","line":648,"column":80,"nodeType":"JSXText","endLine":648,"endColumn":85},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-xs text-gray-500\">\r\n                              {correctAnswersCount} ─æ├║ng ΓÇó {player.score} ─æiß╗âm\r\n                              {currentAnswer && (\r\n                                <span className={`ml-2 ${currentAnswer.isCorrect ? 'text-green-600' : 'text-red-600'}`}>\r\n                                  {currentAnswer.isCorrect ? 'Γ£ô' : 'Γ£ù'} +{currentAnswer.points}\r\n                                </span>\r\n                              )}\r\n                            </div>","line":651,"column":52,"nodeType":"JSXText","endLine":651,"endColumn":60},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-xs text-gray-500\">\r\n                              {correctAnswersCount} ─æ├║ng ΓÇó {player.score} ─æiß╗âm\r\n                              {currentAnswer && (\r\n                                <span className={`ml-2 ${currentAnswer.isCorrect ? 'text-green-600' : 'text-red-600'}`}>\r\n                                  {currentAnswer.isCorrect ? 'Γ£ô' : 'Γ£ù'} +{currentAnswer.points}\r\n                                </span>\r\n                              )}\r\n                            </div>","line":651,"column":74,"nodeType":"JSXText","endLine":652,"endColumn":31},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-xs text-gray-500\">pts</div>","line":662,"column":66,"nodeType":"JSXText","endLine":662,"endColumn":69},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600\">C├óu hß╗Åi tiß║┐p theo trong: <span className=\"font-bold text-blue-600\">{nextQuestionCountdown}s</span></p>","line":673,"column":48,"nodeType":"JSXText","endLine":673,"endColumn":73},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-bold text-blue-600\">{nextQuestionCountdown}s</span>","line":673,"column":138,"nodeType":"JSXText","endLine":673,"endColumn":139},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h1 className=\"text-5xl font-black text-white mb-2 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent\">\r\n                  GAME COMPLETE!\r\n                </h1>","line":692,"column":146,"nodeType":"JSXText","endLine":694,"endColumn":17},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-xl text-blue-200\">Amazing performance by all players</p>","line":695,"column":54,"nodeType":"JSXText","endLine":695,"endColumn":88},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-blue-600 font-medium\">(You)</div>","line":754,"column":100,"nodeType":"JSXText","endLine":754,"endColumn":105},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Correct</div>","line":767,"column":64,"nodeType":"JSXText","endLine":767,"endColumn":71},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Accuracy</div>","line":771,"column":64,"nodeType":"JSXText","endLine":771,"endColumn":72},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-3xl font-black text-gray-800 mb-6 text-center\">\r\n                  ≡ƒÅà COMPLETE RANKINGS\r\n                </h2>","line":783,"column":84,"nodeType":"JSXText","endLine":785,"endColumn":17},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600\">\r\n                                  {correctAnswers}/{totalQuestions} correct ΓÇó {accuracy}% accuracy ΓÇó Avg: {avgTimePerQuestion}s\r\n                                </div>","line":836,"column":68,"nodeType":"JSXText","endLine":836,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600\">\r\n                                  {correctAnswers}/{totalQuestions} correct ΓÇó {accuracy}% accuracy ΓÇó Avg: {avgTimePerQuestion}s\r\n                                </div>","line":836,"column":89,"nodeType":"JSXText","endLine":836,"endColumn":107},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600\">\r\n                                  {correctAnswers}/{totalQuestions} correct ΓÇó {accuracy}% accuracy ΓÇó Avg: {avgTimePerQuestion}s\r\n                                </div>","line":836,"column":127,"nodeType":"JSXText","endLine":837,"endColumn":33},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600 font-medium\">Total Questions</div>","line":860,"column":70,"nodeType":"JSXText","endLine":860,"endColumn":85},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600 font-medium\">Players</div>","line":865,"column":70,"nodeType":"JSXText","endLine":865,"endColumn":77},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600 font-medium\">Your Correct</div>","line":872,"column":70,"nodeType":"JSXText","endLine":872,"endColumn":82},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600 font-medium\">Your Score</div>","line":879,"column":70,"nodeType":"JSXText","endLine":879,"endColumn":80},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-xl text-blue-200 mb-6\">Thanks for playing! ≡ƒÄë</p>","line":885,"column":59,"nodeType":"JSXText","endLine":885,"endColumn":81},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button \r\n                    onClick={() => window.location.href = '/multiplayer'}\r\n                    className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-purple-700 hover:to-blue-700 transform hover:scale-105 transition-all duration-200 shadow-2xl hover:shadow-purple-500/25\"\r\n                  >\r\n                    ≡ƒÄ« Play Again\r\n                  </button>","line":890,"column":20,"nodeType":"JSXText","endLine":892,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button \r\n                    onClick={() => window.location.href = '/profile'}\r\n                    className=\"bg-gradient-to-r from-gray-600 to-gray-700 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-gray-700 hover:to-gray-800 transform hover:scale-105 transition-all duration-200 shadow-2xl\"\r\n                  >\r\n                    ≡ƒæñ View Profile\r\n                  </button>","line":896,"column":20,"nodeType":"JSXText","endLine":898,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button \r\n                    onClick={() => window.location.href = '/leaderboard'}\r\n                    className=\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-green-700 hover:to-teal-700 transform hover:scale-105 transition-all duration-200 shadow-2xl\"\r\n                  >\r\n                    ≡ƒÅå Global Leaderboard\r\n                  </button>","line":902,"column":20,"nodeType":"JSXText","endLine":904,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"bg-gradient-to-r from-purple-500 to-blue-600 text-white px-3 sm:px-4 py-2 rounded-xl font-bold text-sm sm:text-base text-center\">\r\n                Question {currentQuestionIndex + 1} of {processedQuestions.length}\r\n              </div>","line":922,"column":160,"nodeType":"JSXText","endLine":923,"endColumn":26},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"bg-gradient-to-r from-purple-500 to-blue-600 text-white px-3 sm:px-4 py-2 rounded-xl font-bold text-sm sm:text-base text-center\">\r\n                Question {currentQuestionIndex + 1} of {processedQuestions.length}\r\n              </div>","line":923,"column":52,"nodeType":"JSXText","endLine":923,"endColumn":56},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm sm:text-base\">{currentRoomData?.players?.length || 0} players</span>","line":927,"column":95,"nodeType":"JSXText","endLine":927,"endColumn":103},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Submitted!</span>","line":935,"column":25,"nodeType":"JSXText","endLine":935,"endColumn":35},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>{timeLeft}s</span>","line":944,"column":35,"nodeType":"JSXText","endLine":944,"endColumn":36},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium\">Time is running out!</span>","line":974,"column":47,"nodeType":"JSXText","endLine":974,"endColumn":67},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-500 mt-2\">\r\n                Questions available: {processedQuestions.length} | Current index: {currentQuestionIndex}\r\n              </p>","line":1002,"column":57,"nodeType":"JSXText","endLine":1003,"endColumn":38},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-500 mt-2\">\r\n                Questions available: {processedQuestions.length} | Current index: {currentQuestionIndex}\r\n              </p>","line":1003,"column":65,"nodeType":"JSXText","endLine":1003,"endColumn":83},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-red-700\">Γ¥î No options available for this question</p>","line":1042,"column":43,"nodeType":"JSXText","endLine":1042,"endColumn":83},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Submitted!</span>","line":1056,"column":25,"nodeType":"JSXText","endLine":1056,"endColumn":35},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-3xl font-bold text-blue-600 mb-4\">\r\n                  +{questionResults.points} points\r\n                </div>","line":1086,"column":44,"nodeType":"JSXText","endLine":1087,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":41,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useRef, useState, useEffect, useCallback } from 'react';\r\nimport { MultiplayerServiceInterface } from '../services/enhancedMultiplayerService';\r\nimport { Clock, Users, CheckCircle, AlertCircle } from 'lucide-react';\r\nimport { doc, onSnapshot, collection, addDoc, serverTimestamp } from 'firebase/firestore';\r\nimport { db } from '../../../firebase/config';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../lib/store';\r\nimport { toast } from 'react-toastify';\r\nimport SafeHTML from '../../../shared/components/ui/SafeHTML';\r\nimport { logger } from '../utils/logger';\r\n\r\n\r\n// Type definitions\r\ninterface Answer {\r\n  text: string;\r\n  isCorrect: boolean;\r\n}\r\n\r\ninterface Question {\r\n  id: string;\r\n  text?: string;\r\n  title?: string;\r\n  answers?: Answer[];\r\n  options?: string[];\r\n  type?: string;\r\n  points?: number;\r\n}\r\n\r\ninterface Player {\r\n  id: string;\r\n  username: string;\r\n  name?: string; // Alias for username\r\n  displayName?: string; // Alternative name field\r\n  isReady: boolean;\r\n  isOnline: boolean;\r\n  joinedAt: Date;\r\n}\r\n\r\ninterface PlayerAnswer {\r\n  questionId?: string;\r\n  selectedAnswer: number;\r\n  answer?: string;\r\n  timeToAnswer: number;\r\n  timeSpent?: number;\r\n  pointsEarned: number;\r\n  points?: number; // Alias for pointsEarned\r\n  isCorrect: boolean;\r\n  timestamp: number;\r\n}\r\n\r\ninterface PlayerResult {\r\n  playerId: string;\r\n  playerName: string;\r\n  isCorrect: boolean;\r\n  selectedAnswer: number | null;\r\n  points: number;\r\n  timeSpent: number;\r\n}\r\n\r\ninterface GameData {\r\n  currentQuestionIndex: number;\r\n  questions: Question[];\r\n  timePerQuestion: number;\r\n  showingResults?: boolean;\r\n  nextQuestionAt?: { seconds: number };\r\n  questionEndAt?: { seconds: number };\r\n  phase?: 'countdown' | 'question' | 'results' | 'finished';\r\n  questionResults?: {\r\n    [questionId: string]: PlayerResult[];\r\n  };\r\n}\r\n\r\ninterface RoomData {\r\n  id: string;\r\n  status: 'waiting' | 'starting' | 'playing' | 'finished';\r\n  gameData?: GameData;\r\n  gameStartAt?: { seconds: number };\r\n  gameStartDelay?: number;\r\n  settings?: {\r\n    timePerQuestion?: number;\r\n  };\r\n  quiz?: {\r\n    id?: string;\r\n    title?: string;\r\n    questions: Question[];\r\n  };\r\n  players?: Player[];\r\n  questionAnswers?: {\r\n    [questionIndex: number]: {\r\n      [playerId: string]: PlayerAnswer;\r\n    };\r\n  };\r\n}\r\n\r\ninterface ProcessedQuestion {\r\n  id: string;\r\n  title: string;\r\n  options: string[];\r\n  correct: number;\r\n  type?: string;\r\n  points?: number;\r\n  explanation?: string;\r\n}\r\n\r\ninterface QuestionResults {\r\n  isCorrect: boolean;\r\n  correctAnswer: number;\r\n  selectedAnswer: number | null;\r\n  points: number;\r\n  explanation: string;\r\n}\r\n\r\ninterface MultiplayerQuizProps {\r\n  gameData: GameData | null;\r\n  roomData: RoomData | null;\r\n  currentUserId: string;\r\n  currentUserName: string;\r\n  multiplayerService: MultiplayerServiceInterface | null;\r\n}\r\n\r\nconst MultiplayerQuiz: React.FC<MultiplayerQuizProps> = ({\r\n  gameData,\r\n  roomData,\r\n  currentUserName,\r\n  multiplayerService\r\n}) => {\r\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(null);\r\n  const [locked, setLocked] = useState(false);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [questionResults, setQuestionResults] = useState<QuestionResults | null>(null);\r\n  const [nextQuestionCountdown, setNextQuestionCountdown] = useState<number | null>(null);\r\n  const [gameStartCountdown, setGameStartCountdown] = useState<number | null>(null);\r\n  const [questionTimeLeft, setQuestionTimeLeft] = useState<number>(0);\r\n  const [realtimeGameData, setRealtimeGameData] = useState<GameData | null>(gameData);\r\n  const [realtimeRoomData, setRealtimeRoomData] = useState<RoomData | null>(roomData);\r\n  \r\n  // Client-side game state for fast performance\r\n  const [playerScores, setPlayerScores] = useState<{[playerId: string]: number}>({});\r\n  const [playerAnswers, setPlayerAnswers] = useState<{[playerId: string]: PlayerAnswer[]}>({});\r\n  const [currentQuestionAnswers, setCurrentQuestionAnswers] = useState<{[playerId: string]: PlayerAnswer}>({});\r\n\r\n  const [waitingForOthers, setWaitingForOthers] = useState<boolean>(false);\r\n  \r\n  const timerRef = useRef<number | null>(null);\r\n  const countdownRef = useRef<number | null>(null);\r\n  const gameStartRef = useRef<number | null>(null);\r\n  const previousQuestionIndexRef = useRef<number>(-1);\r\n\r\n  // Use real-time data consistently\r\n  const currentGameData = realtimeGameData || gameData;\r\n  const currentRoomData = realtimeRoomData || roomData;\r\n  \r\n  const timePerQuestion = currentGameData?.timePerQuestion ?? currentRoomData?.settings?.timePerQuestion ?? 30;\r\n  const [timeLeft, setTimeLeft] = useState<number>(timePerQuestion);\r\n  \r\n  // Get current user from Redux store\r\n  const currentUser = useSelector((state: RootState) => state.auth.user);\r\n  \r\n  // Get current game phase\r\n  const gamePhase = currentGameData?.phase || 'question';\r\n  const roomStatus = currentRoomData?.status || 'waiting';\r\n\r\n  // Real-time Firestore listener\r\n  useEffect(() => {\r\n    if (!roomData?.id) return;\r\n\r\n    const roomRef = doc(db, 'multiplayer_rooms', roomData.id);\r\n    \r\n    const unsubscribe = onSnapshot(roomRef, (doc) => {\r\n      if (doc.exists()) {\r\n        const data = { id: doc.id, ...doc.data() } as RoomData;\r\n        \r\n        setRealtimeRoomData(data);\r\n        if (data.gameData) {\r\n          setRealtimeGameData(data.gameData as GameData);\r\n        }\r\n        \r\n        // Handle game starting phase\r\n        if (data.status === 'starting') {\r\n          if (data.gameStartAt && data.gameStartDelay) {\r\n            const startTime = new Date(data.gameStartAt.seconds * 1000);\r\n            const now = new Date();\r\n            const elapsedTime = Math.floor((now.getTime() - startTime.getTime()) / 1000);\r\n            const secondsLeft = Math.max(0, Math.floor(data.gameStartDelay / 1000) - elapsedTime);\r\n            \r\n            setGameStartCountdown(secondsLeft > 0 ? secondsLeft : 0);\r\n          } else {\r\n            setGameStartCountdown(5);\r\n          }\r\n        }\r\n        \r\n        // Clear countdown when game actually starts OR countdown reaches 0\r\n        if ((data.status === 'playing' && data.gameData?.phase === 'question') || \r\n            (data.status === 'starting' && gameStartCountdown === 0)) {\r\n          setGameStartCountdown(null);\r\n        }\r\n        \r\n        // Handle question timing\r\n        if (data.gameData?.questionEndAt && data.gameData?.phase === 'question') {\r\n          const endTime = new Date(data.gameData.questionEndAt.seconds * 1000);\r\n          const now = new Date();\r\n          const secondsLeft = Math.max(0, Math.ceil((endTime.getTime() - now.getTime()) / 1000));\r\n          \r\n          if (secondsLeft > 0) {\r\n            setQuestionTimeLeft(secondsLeft);\r\n            setTimeLeft(secondsLeft);\r\n          }\r\n        }\r\n        \r\n        // Detect question change\r\n        const newIndex = data.gameData?.currentQuestionIndex ?? 0;\r\n        if (newIndex !== previousQuestionIndexRef.current) {\r\n          previousQuestionIndexRef.current = newIndex;\r\n          \r\n          // Reset UI state for new question\r\n          setSelectedIndex(null);\r\n          setLocked(false);\r\n          setShowResults(false);\r\n          setQuestionResults(null);\r\n          setTimeLeft(timePerQuestion);\r\n          setWaitingForOthers(false);\r\n          setCurrentQuestionAnswers({});\r\n          \r\n          // Clear existing timers\r\n          if (timerRef.current) {\r\n            window.clearTimeout(timerRef.current);\r\n            timerRef.current = null;\r\n          }\r\n          if (countdownRef.current) {\r\n            window.clearTimeout(countdownRef.current);\r\n            countdownRef.current = null;\r\n          }\r\n        }\r\n        \r\n        // Handle results phase\r\n        if (data.gameData?.phase === 'results' && data.gameData?.nextQuestionAt) {\r\n          const nextTime = new Date(data.gameData.nextQuestionAt.seconds * 1000);\r\n          const now = new Date();\r\n          const secondsLeft = Math.max(0, Math.ceil((nextTime.getTime() - now.getTime()) / 1000));\r\n          \r\n          if (secondsLeft > 0) {\r\n            setShowResults(true);\r\n            setNextQuestionCountdown(secondsLeft);\r\n          }\r\n        }\r\n        \r\n        // Handle game finished\r\n        if (data.gameData?.phase === 'finished') {\r\n          setShowResults(true);\r\n          setNextQuestionCountdown(null);\r\n        }\r\n      }\r\n    });\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      unsubscribe();\r\n      if (timerRef.current) {\r\n        window.clearTimeout(timerRef.current);\r\n        timerRef.current = null;\r\n      }\r\n      if (countdownRef.current) {\r\n        window.clearTimeout(countdownRef.current);\r\n        countdownRef.current = null;\r\n      }\r\n      if (gameStartRef.current) {\r\n        window.clearTimeout(gameStartRef.current);\r\n        gameStartRef.current = null;\r\n      }\r\n    };\r\n  }, [roomData?.id, gameStartCountdown, timePerQuestion]);\r\n\r\n  // Sync all players' scores and answers from server data\r\n  useEffect(() => {\r\n    if (!currentRoomData?.questionAnswers) return;\r\n\r\n    const serverPlayerScores: {[playerId: string]: number} = {};\r\n    const serverPlayerAnswers: {[playerId: string]: PlayerAnswer[]} = {};\r\n\r\n    // Calculate scores and answers from server data for ALL players\r\n    Object.values(currentRoomData.questionAnswers).forEach(questionData => {\r\n      Object.entries(questionData).forEach(([playerId, answerData]: [string, PlayerAnswer]) => {\r\n        // Calculate scores\r\n        serverPlayerScores[playerId] = (serverPlayerScores[playerId] || 0) + (answerData.pointsEarned || 0);\r\n        \r\n        // Track answer history\r\n        if (!serverPlayerAnswers[playerId]) {\r\n          serverPlayerAnswers[playerId] = [];\r\n        }\r\n        serverPlayerAnswers[playerId].push({\r\n          questionId: answerData.questionId,\r\n          selectedAnswer: answerData.selectedAnswer,\r\n          isCorrect: answerData.isCorrect,\r\n          timeSpent: answerData.timeToAnswer || answerData.timeSpent,\r\n          timeToAnswer: answerData.timeToAnswer || answerData.timeSpent || 0,\r\n          pointsEarned: answerData.pointsEarned || 0,\r\n          points: answerData.pointsEarned || 0,\r\n          timestamp: answerData.timestamp || Date.now()\r\n        });\r\n      });\r\n    });\r\n    \r\n    // Update state with server data for all players\r\n    setPlayerScores(serverPlayerScores);\r\n    setPlayerAnswers(serverPlayerAnswers);\r\n  }, [currentRoomData?.questionAnswers]);\r\n\r\n  // Game start countdown effect\r\n  useEffect(() => {\r\n    if (gameStartCountdown !== null && gameStartCountdown > 0) {\r\n      gameStartRef.current = window.setTimeout(() => {\r\n        setGameStartCountdown(prev => {\r\n          const newCount = (prev ?? 0) - 1;\r\n          return newCount;\r\n        });\r\n      }, 1000);\r\n    } else if (gameStartCountdown === 0) {\r\n      // Countdown finished - game should start\r\n      setGameStartCountdown(null);\r\n    }\r\n    \r\n    return () => {\r\n      if (gameStartRef.current) {\r\n        window.clearTimeout(gameStartRef.current);\r\n        gameStartRef.current = null;\r\n      }\r\n    };\r\n  }, [gameStartCountdown]);\r\n\r\n  // Question timer countdown effect\r\n  useEffect(() => {\r\n    if (questionTimeLeft !== null && questionTimeLeft > 0 && realtimeGameData?.phase === 'question') {\r\n      const timer = window.setTimeout(() => {\r\n        setQuestionTimeLeft(prev => {\r\n          const newTime = (prev ?? 0) - 1;\r\n          return newTime;\r\n        });\r\n      }, 1000);\r\n      \r\n      return () => window.clearTimeout(timer);\r\n    }\r\n  }, [questionTimeLeft, realtimeGameData?.phase]);\r\n\r\n  // Get current game phase from room data\r\n  const currentGamePhase = realtimeGameData?.phase || gamePhase;\r\n  const currentRoomStatus = realtimeRoomData?.status || roomStatus;\r\n\r\n  // Save final results to server when game finishes\r\n  // Convert quiz format from Firestore to multiplayer format (using index-based answers)\r\n  const processedQuestions = useMemo((): ProcessedQuestion[] => {\r\n    const rawQuestions = currentGameData?.questions || [];\r\n    \r\n    return rawQuestions.map((q: Question): ProcessedQuestion => {\r\n      let options: string[] = [];\r\n      let correctIndex = 0;\r\n\r\n      if (q.answers && Array.isArray(q.answers)) {\r\n        options = q.answers.map(a => a.text);\r\n        correctIndex = q.answers.findIndex(a => a.isCorrect);\r\n      } else if (q.options && Array.isArray(q.options)) {\r\n        options = q.options;\r\n        correctIndex = 0;\r\n      }\r\n\r\n      return {\r\n        id: q.id || `q${rawQuestions.indexOf(q)}`,\r\n        title: q.text || q.title || '',\r\n        options,\r\n        correct: correctIndex,\r\n        type: q.type || 'multiple',\r\n        points: q.points || 10,\r\n        explanation: ''\r\n      };\r\n    });\r\n  }, [currentGameData?.questions]);\r\n\r\n  useEffect(() => {\r\n    const saveFinalResults = async () => {\r\n      if (currentGamePhase === 'finished' && currentUser?.uid && currentRoomData?.id) {\r\n        try {\r\n          const myAnswers = playerAnswers[currentUser.uid] || [];\r\n          const myScore = playerScores[currentUser.uid] || 0;\r\n          const correctAnswers = myAnswers.filter(a => a.isCorrect).length;\r\n          const totalQuestions = processedQuestions.length;\r\n          const percentage = totalQuestions > 0 ? (correctAnswers / totalQuestions) * 100 : 0;\r\n\r\n          // Save to quiz_results collection\r\n          await addDoc(collection(db, 'quiz_results'), {\r\n            userId: currentUser.uid,\r\n            quizId: currentRoomData.quiz?.id || currentRoomData.id,\r\n            quizTitle: currentRoomData.quiz?.title || 'Multiplayer Quiz',\r\n            mode: 'multiplayer',\r\n            roomId: currentRoomData.id,\r\n            score: myScore,\r\n            correctAnswers,\r\n            totalQuestions,\r\n            percentage: Math.round(percentage * 10) / 10,\r\n            timeSpent: myAnswers.reduce<number>((sum, a) => sum + (a.timeSpent || 0), 0),\r\n            completedAt: serverTimestamp(),\r\n            answers: myAnswers.map((a, index) => ({\r\n              questionId: processedQuestions[index]?.id || `q${index}`,\r\n              questionText: processedQuestions[index]?.title || '',\r\n              selectedAnswer: a.selectedAnswer,\r\n              isCorrect: a.isCorrect,\r\n              timeSpent: a.timeSpent || 0,\r\n              points: a.points || 0\r\n            }))\r\n          });\r\n\r\n          logger.success('Multiplayer results saved successfully');\r\n        } catch (error) {\r\n          logger.error('Failed to save multiplayer results', error);\r\n          toast.error('Failed to save your results');\r\n        }\r\n      }\r\n    };\r\n    \r\n    saveFinalResults();\r\n  }, [currentGamePhase, currentUser?.uid, currentRoomData?.id, currentRoomData?.quiz, playerAnswers, playerScores, processedQuestions]);\r\n\r\n  // Get current question\r\n  const currentQuestionIndex = currentGameData?.currentQuestionIndex || 0;\r\n  const currentQuestion = processedQuestions[currentQuestionIndex];\r\n\r\n  // Fallback for missing question data\r\n  const finalQuestion: ProcessedQuestion = useMemo(() => currentQuestion || {\r\n    id: 'error',\r\n    title: 'No question available',\r\n    options: ['Please wait...'],\r\n    correct: 0,\r\n    explanation: 'Question loading...'\r\n  }, [currentQuestion]);\r\n\r\n  // Countdown timer (optimized - minimal dependencies)\r\n  useEffect(() => {\r\n    if (locked || showResults || timeLeft <= 0) return;\r\n    \r\n    timerRef.current = window.setTimeout(() => {\r\n      setTimeLeft(prev => prev - 1);\r\n    }, 1000);\r\n\r\n    return () => {\r\n      if (timerRef.current) {\r\n        window.clearTimeout(timerRef.current);\r\n        timerRef.current = null;\r\n      }\r\n    };\r\n  }, [timeLeft, locked, showResults]);\r\n\r\n  // Submit answer function - defined before useEffect that uses it\r\n  const handleSubmit = useCallback(async (answerIndex?: number) => {\r\n    const indexToSubmit = answerIndex !== undefined ? answerIndex : selectedIndex;\r\n    if (locked) return; // Prevent double submission\r\n    \r\n    setLocked(true);\r\n    \r\n    if (!multiplayerService || !currentRoomData?.id || !finalQuestion?.id || !currentUser?.uid) {\r\n      console.warn('Cannot submit answer - missing data:', { \r\n        hasService: !!multiplayerService, \r\n        roomId: currentRoomData?.id, \r\n        questionId: finalQuestion?.id,\r\n        userId: currentUser?.uid\r\n      });\r\n      setLocked(false); // Allow retry\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const timeSpent = timePerQuestion - timeLeft;\r\n      const isCorrect = indexToSubmit !== null ? indexToSubmit === finalQuestion.correct : false;\r\n      const points = isCorrect ? Math.max(10, Math.floor(100 - (timeSpent * 2))) : 0; // 10-100 points based on speed\r\n      \r\n      // Update client-side scores immediately for fast UI response\r\n      setPlayerScores(prev => ({\r\n        ...prev,\r\n        [currentUser.uid]: (prev[currentUser.uid] || 0) + points\r\n      }));\r\n      \r\n      // Store current question answer for real-time leaderboard during results\r\n      setCurrentQuestionAnswers(prev => ({\r\n        ...prev,\r\n        [currentUser.uid]: {\r\n          selectedAnswer: indexToSubmit ?? -1,\r\n          answer: `${indexToSubmit ?? -1}`,\r\n          timeToAnswer: timeSpent,\r\n          timeSpent,\r\n          isCorrect,\r\n          pointsEarned: points,\r\n          points,\r\n          timestamp: Date.now()\r\n        }\r\n      }));\r\n      \r\n      // Update player's answer history\r\n      setPlayerAnswers(prev => ({\r\n        ...prev,\r\n        [currentUser.uid]: [\r\n          ...(prev[currentUser.uid] || []),\r\n          {\r\n            questionId: finalQuestion.id,\r\n            selectedAnswer: indexToSubmit ?? -1,\r\n            answer: `${indexToSubmit ?? -1}`,\r\n            timeToAnswer: timeSpent,\r\n            timeSpent,\r\n            isCorrect,\r\n            pointsEarned: points,\r\n            points,\r\n            timestamp: Date.now()\r\n          }\r\n        ]\r\n      }));\r\n      \r\n      // Submit to server (for sync with other players) - only if answer was selected\r\n      if (indexToSubmit !== null) {\r\n        await multiplayerService.submitAnswer(currentRoomData.id, finalQuestion.id, indexToSubmit, timeSpent);\r\n      }\r\n      \r\n      // Set waiting state\r\n      setWaitingForOthers(true);\r\n      \r\n      // Show results after 1 second\r\n      setTimeout(() => {\r\n        setQuestionResults({\r\n          isCorrect,\r\n          correctAnswer: finalQuestion.correct,\r\n          selectedAnswer: indexToSubmit ?? -1,\r\n          points,\r\n          explanation: finalQuestion.explanation || ''\r\n        });\r\n        setShowResults(true);\r\n      }, 1000);\r\n      \r\n    } catch (error) {\r\n      console.error('Error submitting answer:', error);\r\n      setLocked(false); // Allow retry on error\r\n    }\r\n  }, [selectedIndex, locked, multiplayerService, currentRoomData, finalQuestion, currentUser, timePerQuestion, timeLeft]);\r\n\r\n  // Handle time up\r\n  useEffect(() => {\r\n    if (timeLeft <= 0 && !locked) {\r\n      // Auto-submit with selected answer, or undefined if no selection\r\n      handleSubmit(selectedIndex ?? undefined);\r\n    }\r\n  }, [timeLeft, locked, handleSubmit, selectedIndex]);\r\n\r\n  // Next question countdown (server-controlled)\r\n  useEffect(() => {\r\n    if (nextQuestionCountdown === null || nextQuestionCountdown <= 0) return;\r\n    \r\n    countdownRef.current = window.setTimeout(() => {\r\n      setNextQuestionCountdown(prev => prev !== null ? prev - 1 : null);\r\n    }, 1000);\r\n\r\n    return () => {\r\n      if (countdownRef.current) {\r\n        window.clearTimeout(countdownRef.current);\r\n        countdownRef.current = null;\r\n      }\r\n    };\r\n  }, [nextQuestionCountdown]);\r\n\r\n  const handleSelect = (answerIndex: number) => {\r\n    if (locked) return;\r\n    setSelectedIndex(answerIndex);\r\n    // Auto-submit immediately after selection (like MultiplayerGameSimple)\r\n    setTimeout(() => handleSubmit(answerIndex), 100);\r\n  };\r\n  \r\n  // Calculate progress percentage with proper pathLength\r\n  const progressPercent = useMemo(() => {\r\n    return Math.max(0, Math.min(100, Math.round((timeLeft / timePerQuestion) * 100)));\r\n  }, [timeLeft, timePerQuestion]);\r\n\r\n  // SVG circle properties for accurate progress\r\n  const radius = 16;\r\n  const circumference = 2 * Math.PI * radius;\r\n  const strokeDashoffset = circumference - (progressPercent / 100) * circumference;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-blue-100 p-2 sm:p-4 lg:p-6\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        \r\n        {/* Game Start Countdown Phase */}\r\n        {currentRoomStatus === 'starting' && gameStartCountdown !== null && gameStartCountdown >= 0 && (\r\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 text-center mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Game Starting Soon!</h2>\r\n            <div className=\"text-6xl font-bold text-purple-600 mb-4\">{gameStartCountdown}</div>\r\n            <p className=\"text-gray-600\">Get ready to answer questions!</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Question Results Phase */}\r\n        {currentGamePhase === 'results' && questionResults && (\r\n          <div className=\"bg-white rounded-2xl shadow-xl p-6 mb-6\">\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-4 text-center\">Question Results</h3>\r\n            \r\n            {/* Your Result */}\r\n            <div className=\"mb-6 p-4 bg-blue-50 rounded-xl border border-blue-200\">\r\n              <div className=\"text-center\">\r\n                <div className={`text-2xl font-bold mb-2 ${questionResults.isCorrect ? 'text-green-600' : 'text-red-600'}`}>\r\n                  {questionResults.isCorrect ? 'Γ£à Correct!' : 'Γ¥î Wrong!'}\r\n                </div>\r\n                <div className=\"text-lg text-gray-700 mb-2\">\r\n                  You earned <span className=\"font-bold text-blue-600\">+{questionResults.points}</span> points\r\n                </div>\r\n                <div className=\"text-sm text-gray-600\">\r\n                  Correct Answer: <span className=\"font-semibold\">{finalQuestion.options?.[questionResults.correctAnswer] || 'N/A'}</span>\r\n                </div>\r\n                {questionResults.explanation && (\r\n                  <SafeHTML content={questionResults.explanation} className=\"text-xs text-gray-500 mt-2\" />\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Live Leaderboard */}\r\n            <div className=\"mb-4\">\r\n              <h4 className=\"font-semibold text-gray-700 mb-3 text-center\">Current Standings</h4>\r\n              <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n                {(currentRoomData?.players || [])\r\n                  .map((player: Player) => ({\r\n                    ...player,\r\n                    score: playerScores[player.id] || 0\r\n                  }))\r\n                  .sort((a, b) => b.score - a.score)\r\n                  .map((player, index) => {\r\n                    const isCurrentUser = player.id === currentUser?.uid;\r\n                    const position = index + 1;\r\n                    const trophy = position === 1 ? '≡ƒææ' : position === 2 ? '≡ƒÑê' : position === 3 ? '≡ƒÑë' : '≡ƒÅà';\r\n                    const currentAnswer = currentQuestionAnswers[player.id];\r\n                    const correctAnswersCount = playerAnswers[player.id]?.filter(a => a.isCorrect).length || 0;\r\n                    \r\n                    return (\r\n                      <div \r\n                        key={player.id} \r\n                        className={`flex items-center justify-between p-3 rounded-lg ${\r\n                          isCurrentUser ? 'bg-blue-100 border border-blue-300' : 'bg-gray-50'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-lg\">{trophy}</span>\r\n                          <div>\r\n                            <div className={`font-medium text-sm ${isCurrentUser ? 'text-blue-700' : 'text-gray-800'}`}>\r\n                              #{position} {isCurrentUser \r\n                                ? (currentUserName || player?.username || player?.name || 'You')\r\n                                : (player?.username || player?.name || player?.displayName || `Player ${position}`)\r\n                              }\r\n                              {isCurrentUser && <span className=\"ml-1 text-xs\">(You)</span>}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500\">\r\n                              {correctAnswersCount} ─æ├║ng ΓÇó {player.score} ─æiß╗âm\r\n                              {currentAnswer && (\r\n                                <span className={`ml-2 ${currentAnswer.isCorrect ? 'text-green-600' : 'text-red-600'}`}>\r\n                                  {currentAnswer.isCorrect ? 'Γ£ô' : 'Γ£ù'} +{currentAnswer.points}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className={`text-right ${isCurrentUser ? 'text-blue-700' : 'text-gray-700'}`}>\r\n                          <div className=\"font-bold text-sm\">{player.score}</div>\r\n                          <div className=\"text-xs text-gray-500\">pts</div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </div>\r\n            \r\n            {nextQuestionCountdown !== null && (\r\n              <div className=\"mt-4 text-center\">\r\n                {nextQuestionCountdown > 0 ? (\r\n                  <p className=\"text-gray-600\">C├óu hß╗Åi tiß║┐p theo trong: <span className=\"font-bold text-blue-600\">{nextQuestionCountdown}s</span></p>\r\n                ) : (\r\n                  <p className=\"text-gray-600\">─Éang chß╗¥ ng╞░ß╗¥i ch╞íi kh├íc...</p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Final Results Phase - Ultra Modern Leaderboard */}\r\n        {currentGamePhase === 'finished' && (\r\n          <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n              \r\n              {/* Trophy Header */}\r\n              <div className=\"text-center mb-8\">\r\n                <div className=\"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full mb-4 shadow-2xl\">\r\n                  <span className=\"text-4xl\">≡ƒÅå</span>\r\n                </div>\r\n                <h1 className=\"text-5xl font-black text-white mb-2 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent\">\r\n                  GAME COMPLETE!\r\n                </h1>\r\n                <p className=\"text-xl text-blue-200\">Amazing performance by all players</p>\r\n              </div>\r\n\r\n              {/* Champion Podium */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                {Object.entries(playerScores)\r\n                  .sort(([,a], [,b]) => b - a)\r\n                  .slice(0, 3)\r\n                  .map(([playerId, score], index) => {\r\n                    const player = currentRoomData?.players?.find((p: Player) => p.id === playerId);\r\n                    const isCurrentUser = playerId === currentUser?.uid;\r\n                    const position = index + 1;\r\n                    const playerAnswerHistory = playerAnswers[playerId] || [];\r\n                    const correctAnswers = playerAnswerHistory.filter(a => a.isCorrect).length;\r\n                    const totalQuestions = processedQuestions.length;\r\n                    const accuracy = totalQuestions > 0 ? Math.round((correctAnswers/totalQuestions)*100) : 0;\r\n                    \r\n                    const podiumData = {\r\n                      1: { \r\n                        trophy: '≡ƒÑç', \r\n                        color: 'from-yellow-400 to-yellow-600', \r\n                        bgColor: 'from-yellow-50 to-orange-50',\r\n                        borderColor: 'border-yellow-400',\r\n                        height: 'h-32'\r\n                      },\r\n                      2: { \r\n                        trophy: '≡ƒÑê', \r\n                        color: 'from-gray-400 to-gray-600', \r\n                        bgColor: 'from-gray-50 to-slate-50',\r\n                        borderColor: 'border-gray-400',\r\n                        height: 'h-24'\r\n                      },\r\n                      3: { \r\n                        trophy: '≡ƒÑë', \r\n                        color: 'from-amber-600 to-amber-800', \r\n                        bgColor: 'from-amber-50 to-yellow-50',\r\n                        borderColor: 'border-amber-500',\r\n                        height: 'h-20'\r\n                      }\r\n                    };\r\n                    \r\n                    const podium = podiumData[position as keyof typeof podiumData];\r\n                    \r\n                    return (\r\n                      <div key={playerId} className=\"text-center\">\r\n                        <div className={`bg-white rounded-2xl shadow-2xl border-4 ${podium.borderColor} overflow-hidden transform hover:scale-105 transition-all duration-300 ${isCurrentUser ? 'ring-4 ring-blue-400' : ''}`}>\r\n                          \r\n                          {/* Podium Height Indicator */}\r\n                          <div className={`bg-gradient-to-r ${podium.color} ${podium.height} flex items-end justify-center pb-4`}>\r\n                            <span className=\"text-6xl\">{podium.trophy}</span>\r\n                          </div>\r\n                          \r\n                          {/* Player Info */}\r\n                          <div className={`bg-gradient-to-r ${podium.bgColor} p-6`}>\r\n                            <div className=\"text-2xl font-bold text-gray-800 mb-1\">\r\n                              #{position}\r\n                            </div>\r\n                            <div className={`text-lg font-semibold mb-2 ${isCurrentUser ? 'text-blue-700' : 'text-gray-700'}`}>\r\n                              {player?.username || player?.name || 'Player'}\r\n                              {isCurrentUser && <div className=\"text-sm text-blue-600 font-medium\">(You)</div>}\r\n                            </div>\r\n                            \r\n                            {/* Score Display */}\r\n                            <div className=\"bg-white rounded-xl p-4 mb-3 shadow-inner\">\r\n                              <div className=\"text-3xl font-black text-gray-800\">{score}</div>\r\n                              <div className=\"text-sm text-gray-600 font-medium\">POINTS</div>\r\n                            </div>\r\n                            \r\n                            {/* Stats */}\r\n                            <div className=\"grid grid-cols-2 gap-2 text-xs\">\r\n                              <div className=\"bg-white rounded-lg p-2\">\r\n                                <div className=\"font-bold text-green-600\">{correctAnswers}</div>\r\n                                <div className=\"text-gray-600\">Correct</div>\r\n                              </div>\r\n                              <div className=\"bg-white rounded-lg p-2\">\r\n                                <div className=\"font-bold text-blue-600\">{accuracy}%</div>\r\n                                <div className=\"text-gray-600\">Accuracy</div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n\r\n              {/* Complete Leaderboard */}\r\n              <div className=\"bg-white rounded-3xl shadow-2xl p-8 mb-8\">\r\n                <h2 className=\"text-3xl font-black text-gray-800 mb-6 text-center\">\r\n                  ≡ƒÅà COMPLETE RANKINGS\r\n                </h2>\r\n                \r\n                <div className=\"space-y-3\">\r\n                  {Object.entries(playerScores)\r\n                    .sort(([,a], [,b]) => b - a)\r\n                    .map(([playerId, score], index) => {\r\n                      const player = currentRoomData?.players?.find((p: Player) => p.id === playerId);\r\n                      const isCurrentUser = playerId === currentUser?.uid;\r\n                      const position = index + 1;\r\n                      const playerAnswerHistory = playerAnswers[playerId] || [];\r\n                      const correctAnswers = playerAnswerHistory.filter(a => a.isCorrect).length;\r\n                      const totalQuestions = processedQuestions.length;\r\n                      const accuracy = totalQuestions > 0 ? Math.round((correctAnswers/totalQuestions)*100) : 0;\r\n                      const avgTimePerQuestion = playerAnswerHistory.length > 0 ? \r\n                        Math.round(playerAnswerHistory.reduce((sum, a) => sum + (a.timeSpent || 0), 0) / playerAnswerHistory.length) : 0;\r\n                      \r\n                      const positionColors = {\r\n                        1: 'bg-gradient-to-r from-yellow-100 to-orange-100 border-yellow-400',\r\n                        2: 'bg-gradient-to-r from-gray-100 to-slate-100 border-gray-400', \r\n                        3: 'bg-gradient-to-r from-amber-100 to-yellow-100 border-amber-400'\r\n                      };\r\n                      \r\n                      const defaultColor = isCurrentUser ? \r\n                        'bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-400' : \r\n                        'bg-white border-gray-200';\r\n                      \r\n                      const cardColor = positionColors[position as keyof typeof positionColors] || defaultColor;\r\n                      \r\n                      return (\r\n                        <div \r\n                          key={playerId}\r\n                          className={`${cardColor} border-2 rounded-2xl p-4 transform hover:scale-102 transition-all duration-200 shadow-lg hover:shadow-xl`}\r\n                        >\r\n                          <div className=\"flex items-center justify-between\">\r\n                            \r\n                            {/* Left: Rank & Player Info */}\r\n                            <div className=\"flex items-center gap-4\">\r\n                              <div className=\"text-center\">\r\n                                <div className={`w-12 h-12 rounded-full flex items-center justify-center font-black text-lg ${\r\n                                  position <= 3 ? 'bg-gradient-to-r from-purple-500 to-blue-600 text-white' : 'bg-gray-200 text-gray-700'\r\n                                }`}>\r\n                                  #{position}\r\n                                </div>\r\n                              </div>\r\n                              \r\n                              <div>\r\n                                <div className={`text-xl font-bold ${isCurrentUser ? 'text-blue-700' : 'text-gray-800'}`}>\r\n                                  {player?.username || player?.name || 'Player'}\r\n                                  {isCurrentUser && <span className=\"ml-2 text-sm bg-blue-500 text-white px-2 py-1 rounded-full\">YOU</span>}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-600\">\r\n                                  {correctAnswers}/{totalQuestions} correct ΓÇó {accuracy}% accuracy ΓÇó Avg: {avgTimePerQuestion}s\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            \r\n                            {/* Right: Score */}\r\n                            <div className=\"text-right\">\r\n                              <div className={`text-3xl font-black ${isCurrentUser ? 'text-blue-700' : 'text-gray-800'}`}>\r\n                                {score}\r\n                              </div>\r\n                              <div className=\"text-sm text-gray-600 font-medium\">POINTS</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Game Statistics */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\r\n                <div className=\"bg-white rounded-2xl p-6 text-center shadow-xl\">\r\n                  <div className=\"text-3xl mb-2\">≡ƒô¥</div>\r\n                  <div className=\"text-2xl font-bold text-gray-800\">{processedQuestions.length}</div>\r\n                  <div className=\"text-sm text-gray-600 font-medium\">Total Questions</div>\r\n                </div>\r\n                <div className=\"bg-white rounded-2xl p-6 text-center shadow-xl\">\r\n                  <div className=\"text-3xl mb-2\">≡ƒæÑ</div>\r\n                  <div className=\"text-2xl font-bold text-gray-800\">{Object.keys(playerScores).length}</div>\r\n                  <div className=\"text-sm text-gray-600 font-medium\">Players</div>\r\n                </div>\r\n                <div className=\"bg-white rounded-2xl p-6 text-center shadow-xl\">\r\n                  <div className=\"text-3xl mb-2\">Γ£à</div>\r\n                  <div className=\"text-2xl font-bold text-gray-800\">\r\n                    {playerAnswers[currentUser?.uid || '']?.filter(a => a.isCorrect).length || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-600 font-medium\">Your Correct</div>\r\n                </div>\r\n                <div className=\"bg-white rounded-2xl p-6 text-center shadow-xl\">\r\n                  <div className=\"text-3xl mb-2\">≡ƒÄ»</div>\r\n                  <div className=\"text-2xl font-bold text-gray-800\">\r\n                    {playerScores[currentUser?.uid || ''] || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-600 font-medium\">Your Score</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"text-center\">\r\n                <p className=\"text-xl text-blue-200 mb-6\">Thanks for playing! ≡ƒÄë</p>\r\n                <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n                  <button \r\n                    onClick={() => window.location.href = '/multiplayer'}\r\n                    className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-purple-700 hover:to-blue-700 transform hover:scale-105 transition-all duration-200 shadow-2xl hover:shadow-purple-500/25\"\r\n                  >\r\n                    ≡ƒÄ« Play Again\r\n                  </button>\r\n                  <button \r\n                    onClick={() => window.location.href = '/profile'}\r\n                    className=\"bg-gradient-to-r from-gray-600 to-gray-700 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-gray-700 hover:to-gray-800 transform hover:scale-105 transition-all duration-200 shadow-2xl\"\r\n                  >\r\n                    ≡ƒæñ View Profile\r\n                  </button>\r\n                  <button \r\n                    onClick={() => window.location.href = '/leaderboard'}\r\n                    className=\"bg-gradient-to-r from-green-600 to-teal-600 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-green-700 hover:to-teal-700 transform hover:scale-105 transition-all duration-200 shadow-2xl\"\r\n                  >\r\n                    ≡ƒÅå Global Leaderboard\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Regular Game UI - show when ready to play */}\r\n        {((currentRoomStatus === 'playing' && currentGamePhase === 'question') || \r\n          (currentRoomStatus === 'starting' && gameStartCountdown === 0)) && \r\n         currentGamePhase !== 'finished' && \r\n         processedQuestions.length > 0 && (\r\n          <>\r\n        {/* Header */}\r\n        <div className=\"bg-white rounded-2xl shadow-xl p-4 sm:p-6 mb-4 sm:mb-6\">\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4\">\r\n              <div className=\"bg-gradient-to-r from-purple-500 to-blue-600 text-white px-3 sm:px-4 py-2 rounded-xl font-bold text-sm sm:text-base text-center\">\r\n                Question {currentQuestionIndex + 1} of {processedQuestions.length}\r\n              </div>\r\n              <div className=\"flex items-center gap-2 text-gray-600 justify-center sm:justify-start\">\r\n                <Users size={18} />\r\n                <span className=\"text-sm sm:text-base\">{currentRoomData?.players?.length || 0} players</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex flex-col sm:flex-row items-center gap-2 sm:gap-4\">\r\n              {locked && (\r\n                <div className=\"flex items-center gap-2 bg-green-100 text-green-700 px-3 py-2 rounded-xl font-medium text-sm\">\r\n                  <CheckCircle size={16} />\r\n                  <span>Submitted!</span>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"flex items-center gap-2 sm:gap-3\">\r\n                <div className={`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl font-bold text-sm sm:text-base ${\r\n                  timeLeft <= 5 ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'\r\n                }`}>\r\n                  <Clock size={16} />\r\n                  <span>{timeLeft}s</span>\r\n                </div>\r\n                \r\n                <div className=\"relative w-12 h-12 sm:w-16 sm:h-16\">\r\n                  <svg className=\"w-12 h-12 sm:w-16 sm:h-16 transform -rotate-90\" viewBox=\"0 0 36 36\">\r\n                    <circle cx=\"18\" cy=\"18\" r=\"16\" fill=\"none\" stroke=\"#e5e7eb\" strokeWidth=\"3\"/>\r\n                    <circle \r\n                      cx=\"18\" cy=\"18\" r=\"16\" fill=\"none\" \r\n                      stroke={timeLeft <= 5 ? \"#ef4444\" : \"#3b82f6\"}\r\n                      strokeWidth=\"3\" \r\n                      strokeLinecap=\"round\"\r\n                      strokeDasharray={circumference}\r\n                      strokeDashoffset={strokeDashoffset}\r\n                      className=\"transition-all duration-1000\"\r\n                    />\r\n                  </svg>\r\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                    <span className={`text-xs font-bold ${timeLeft <= 5 ? 'text-red-600' : 'text-blue-600'}`}>\r\n                      {progressPercent}%\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {timeLeft <= 10 && !locked && (\r\n            <div className=\"bg-orange-100 border-l-4 border-orange-500 p-4 rounded-r-lg mb-4\">\r\n              <div className=\"flex items-center gap-2 text-orange-700\">\r\n                <AlertCircle size={18} />\r\n                <span className=\"font-medium\">Time is running out!</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {waitingForOthers && (\r\n            <div className=\"bg-blue-100 border-l-4 border-blue-500 p-4 rounded-r-lg mb-4\">\r\n              <div className=\"flex items-center gap-2 text-blue-700\">\r\n                <Clock size={18} />\r\n                <span className=\"font-medium\">Waiting for other players...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Question */}\r\n        <div className=\"bg-white rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8\">\r\n          <div className=\"text-center mb-6 sm:mb-8\">\r\n            <h2 className=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800 mb-4\">\r\n              {finalQuestion.title || 'No question available'}\r\n            </h2>\r\n            <div className=\"w-12 sm:w-16 h-1 bg-gradient-to-r from-purple-500 to-blue-600 mx-auto rounded-full\"></div>\r\n          </div>\r\n          \r\n          {/* Show message if no options */}\r\n          {(!finalQuestion.options || finalQuestion.options.length === 0) && (\r\n            <div className=\"text-center p-8 bg-gray-50 rounded-xl\">\r\n              <p className=\"text-gray-600\">Waiting for question options to load...</p>\r\n              <p className=\"text-sm text-gray-500 mt-2\">\r\n                Questions available: {processedQuestions.length} | Current index: {currentQuestionIndex}\r\n              </p>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Show options if available */}\r\n          {finalQuestion.options && finalQuestion.options.length > 0 ? (\r\n            <div className=\"grid gap-3 sm:gap-4 mb-6 sm:mb-8\">\r\n              {finalQuestion.options.map((option: string, idx: number) => {\r\n                const isSelected = selectedIndex === idx;\r\n                const optionLabels = ['A', 'B', 'C', 'D'];\r\n                \r\n                return (\r\n                  <button\r\n                    key={idx}\r\n                    onClick={() => handleSelect(idx)}\r\n                    className={`group relative px-4 sm:px-6 py-3 sm:py-4 rounded-2xl text-left transition-all duration-200 transform hover:scale-105 ${\r\n                      isSelected \r\n                        ? 'border-2 border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50 shadow-lg' \r\n                        : 'border-2 border-gray-200 bg-white hover:border-gray-300 hover:shadow-md'\r\n                    } ${locked ? 'opacity-60 cursor-not-allowed transform-none' : ''}`}\r\n                    disabled={locked}\r\n                  >\r\n                    <div className=\"flex items-center gap-3 sm:gap-4\">\r\n                      <div className={`w-8 h-8 sm:w-10 sm:h-10 rounded-xl flex items-center justify-center font-bold text-xs sm:text-sm ${\r\n                        isSelected \r\n                          ? 'bg-blue-500 text-white' \r\n                          : 'bg-gray-100 text-gray-600 group-hover:bg-gray-200'\r\n                      }`}>\r\n                        {optionLabels[idx] || idx + 1}\r\n                      </div>\r\n                      <span className=\"font-medium text-gray-800 text-sm sm:text-base\">{option}</span>\r\n                    </div>\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-red-100 p-4 rounded-lg\">\r\n              <p className=\"text-red-700\">Γ¥î No options available for this question</p>\r\n            </div>\r\n          )}\r\n\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n              <div className=\"text-sm text-gray-500 text-center sm:text-left\">\r\n                {locked ? 'Answer submitted' : \r\n                 selectedIndex !== null ? 'Answer selected' : \r\n                 'Choose your answer'}\r\n              </div>\r\n              \r\n              {locked && (\r\n                <div className=\"flex items-center gap-2 bg-green-100 text-green-700 px-4 py-2 rounded-xl font-medium\">\r\n                  <CheckCircle size={16} />\r\n                  <span>Submitted!</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n        </div>\r\n\r\n        {/* Question Results Modal */}\r\n        {showResults && questionResults && (\r\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 transform animate-in fade-in zoom-in-95 duration-300\">\r\n              <div className=\"text-center mb-6\">\r\n                <div className={`w-20 h-20 mx-auto rounded-full flex items-center justify-center mb-4 ${\r\n                  questionResults.isCorrect \r\n                    ? 'bg-green-100 text-green-600' \r\n                    : 'bg-red-100 text-red-600'\r\n                }`}>\r\n                  {questionResults.isCorrect ? (\r\n                    <CheckCircle size={40} />\r\n                  ) : (\r\n                    <AlertCircle size={40} />\r\n                  )}\r\n                </div>\r\n                \r\n                <h3 className={`text-2xl font-bold mb-2 ${\r\n                  questionResults.isCorrect ? 'text-green-600' : 'text-red-600'\r\n                }`}>\r\n                  {questionResults.isCorrect ? '≡ƒÄë Correct!' : 'Γ¥î Incorrect'}\r\n                </h3>\r\n                \r\n                <div className=\"text-3xl font-bold text-blue-600 mb-4\">\r\n                  +{questionResults.points} points\r\n                </div>\r\n                \r\n                <SafeHTML content={questionResults.explanation} className=\"text-gray-600 mb-4\" />\r\n                \r\n                {nextQuestionCountdown !== null && (\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\r\n                    <div className=\"flex items-center justify-center gap-2 text-blue-700\">\r\n                      <Clock size={20} />\r\n                      <span className=\"font-semibold\">\r\n                        {nextQuestionCountdown > 0 \r\n                          ? `C├óu hß╗Åi tiß║┐p theo trong ${nextQuestionCountdown} gi├óy...`\r\n                          : \"─Éang chß╗¥ ng╞░ß╗¥i ch╞íi kh├íc...\"\r\n                        }\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultiplayerQuiz;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\QuizSelector.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h1 className=\"text-3xl font-bold text-white mb-2\">\r\n                  ≡ƒÄ« Chß╗ìn Quiz ─æß╗â ch╞íi Multiplayer\r\n                </h1>","line":166,"column":68,"nodeType":"JSXText","endLine":168,"endColumn":17},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-purple-200\">\r\n                  Chß╗ìn mß╗Öt quiz ─æß╗â tß║ío ph├▓ng hoß║╖c tham gia ch╞íi vß╗¢i bß║ín b├¿\r\n                </p>","line":169,"column":48,"nodeType":"JSXText","endLine":171,"endColumn":17},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={onBack}\r\n                className=\"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors\"\r\n              >\r\n                ΓåÉ Quay lß║íi\r\n              </button>","line":176,"column":16,"nodeType":"JSXText","endLine":178,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-white font-bold mb-2\">≡ƒöì Debug Information:</h3>","line":223,"column":61,"nodeType":"JSXText","endLine":223,"endColumn":82},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>Γ£à Auth User: {debugInfo.authUser}</p>","line":225,"column":24,"nodeType":"JSXText","endLine":225,"endColumn":37},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>≡ƒôè Total Quizzes in DB: {debugInfo.totalFromDb}</p>","line":226,"column":24,"nodeType":"JSXText","endLine":226,"endColumn":48},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>Γ£à Valid Quizzes (with questions): {debugInfo.validQuizzes}</p>","line":227,"column":24,"nodeType":"JSXText","endLine":227,"endColumn":58},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>ΓÅ░ Last Fetch: {new Date(debugInfo.timestamp).toLocaleTimeString()}</p>","line":228,"column":24,"nodeType":"JSXText","endLine":228,"endColumn":38},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                      onClick={onBack}\r\n                      className=\"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg transition-all\"\r\n                    >\r\n                      ΓåÉ Quay lß║íi\r\n                    </button>","line":249,"column":22,"nodeType":"JSXText","endLine":251,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>{quiz.questions?.length || 0} c├óu</span>","line":293,"column":60,"nodeType":"JSXText","endLine":293,"endColumn":64},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>{quiz.duration || 15} ph├║t</span>","line":297,"column":52,"nodeType":"JSXText","endLine":297,"endColumn":57},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button className=\"mt-4 w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform group-hover:scale-105\">\r\n                      ≡ƒÄ« Chß╗ìn Quiz n├áy\r\n                    </button>","line":319,"column":244,"nodeType":"JSXText","endLine":321,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-purple-200\">\r\n                Hiß╗ân thß╗ï {filteredQuizzes.length} quiz\r\n              </p>","line":333,"column":46,"nodeType":"JSXText","endLine":334,"endColumn":26},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-purple-200\">\r\n                Hiß╗ân thß╗ï {filteredQuizzes.length} quiz\r\n              </p>","line":334,"column":50,"nodeType":"JSXText","endLine":335,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db, auth } from '../../../firebase/config';\r\nimport { Search, BookOpen, Clock, Loader2 } from 'lucide-react';\r\nimport { logger } from '../utils/logger';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface QuizSelectorProps {\r\n  onSelectQuiz: (quiz: any) => void;\r\n  onBack: () => void;\r\n}\r\n\r\nconst QuizSelector: React.FC<QuizSelectorProps> = ({ onSelectQuiz, onBack }) => {\r\n  const { t } = useTranslation();\r\n  const [quizzes, setQuizzes] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\r\n  const [debugInfo, setDebugInfo] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchQuizzes = async () => {\r\n      try {\r\n        logger.debug('[QuizSelector] Starting to fetch quizzes...', {\r\n          userId: auth.currentUser?.uid,\r\n          isAuthenticated: !!auth.currentUser\r\n        });\r\n        \r\n        // Wait for auth to be ready\r\n        if (!auth.currentUser) {\r\n          logger.warn('[QuizSelector] Waiting for authentication...');\r\n          // Wait for auth state to initialize\r\n          const unsubscribe = auth.onAuthStateChanged((user) => {\r\n            if (user) {\r\n              logger.success('[QuizSelector] Auth ready', { userId: user.uid });\r\n              unsubscribe();\r\n              // Retry fetch after auth is ready\r\n              fetchQuizzesData();\r\n            } else {\r\n              logger.error('[QuizSelector] User not authenticated after waiting!');\r\n              setLoading(false);\r\n              unsubscribe();\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        \r\n        await fetchQuizzesData();\r\n      } catch (error) {\r\n        logger.error('[QuizSelector] Error in main fetch', error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    const fetchQuizzesData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const quizzesRef = query(\r\n          collection(db, 'quizzes'),\r\n          where('status', '==', 'approved')\r\n        );\r\n        \r\n        logger.debug('[QuizSelector] Fetching APPROVED quizzes...', { userId: auth.currentUser?.uid });\r\n        \r\n        // Fetch ONLY APPROVED quizzes (can be accessed by users)\r\n        const snapshot = await getDocs(quizzesRef);\r\n        \r\n        logger.debug('[QuizSelector] Total approved quizzes found', { count: snapshot.size });\r\n        \r\n        if (snapshot.empty) {\r\n          logger.warn('[QuizSelector] No approved quizzes found in database!');\r\n          setQuizzes([]);\r\n          return;\r\n        }\r\n        \r\n        const quizzesData = snapshot.docs.map(doc => {\r\n          const data = doc.data();\r\n          return {\r\n            id: doc.id,\r\n            ...data\r\n          };\r\n        });\r\n        \r\n        logger.debug('[QuizSelector] Total quizzes loaded', { count: quizzesData.length });\r\n        \r\n        // Filter quizzes that have questions array with length > 0\r\n        const validQuizzes = quizzesData.filter((quiz: any) => {\r\n          const isValid = Array.isArray(quiz.questions) && quiz.questions.length > 0;\r\n          if (!isValid) {\r\n            logger.debug(`[QuizSelector] Quiz \"${quiz.title}\" (${quiz.id}) INVALID - no questions`);\r\n          }\r\n          return isValid;\r\n        });\r\n        \r\n        logger.success('[QuizSelector] Valid quizzes for multiplayer', { \r\n          count: validQuizzes.length \r\n        });\r\n        \r\n        // Set debug info\r\n        setDebugInfo({\r\n          totalFromDb: quizzesData.length,\r\n          validQuizzes: validQuizzes.length,\r\n          authUser: auth.currentUser?.uid,\r\n          timestamp: new Date().toISOString()\r\n        });\r\n        \r\n        setQuizzes(validQuizzes);\r\n      } catch (error: any) {\r\n        logger.error('[QuizSelector] Error fetching quizzes', {\r\n          name: error.name,\r\n          message: error.message,\r\n          code: error.code\r\n        });\r\n      } finally {\r\n        setLoading(false);\r\n        logger.debug('[QuizSelector] Fetch completed');\r\n      }\r\n    };\r\n\r\n    fetchQuizzes();\r\n  }, []);\r\n\r\n  const categories = [\r\n    { value: 'all', label: 'Tß║Ñt cß║ú' },\r\n    { value: 'programming', label: 'Lß║¡p tr├¼nh' },\r\n    { value: 'math', label: 'To├ín hß╗ìc' },\r\n    { value: 'science', label: 'Khoa hß╗ìc' },\r\n    { value: 'history', label: 'Lß╗ïch sß╗¡' },\r\n    { value: 'language', label: 'Ng├┤n ngß╗»' },\r\n    { value: 'general', label: 'Tß╗òng hß╗úp' },\r\n  ];\r\n\r\n  const filteredQuizzes = quizzes.filter(quiz => {\r\n    const matchesSearch = quiz.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         quiz.description?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesCategory = selectedCategory === 'all' || quiz.category === selectedCategory;\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  const getDifficultyColor = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'text-green-600 bg-green-100';\r\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\r\n      case 'hard': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getDifficultyLabel = (difficulty: string) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'Dß╗à';\r\n      case 'medium': return 'Trung b├¼nh';\r\n      case 'hard': return 'Kh├│';\r\n      default: return difficulty;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 z-50 overflow-y-auto\">\r\n      <div className=\"min-h-screen p-4\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          {/* Header */}\r\n          <div className=\"bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 p-6 mb-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-white mb-2\">\r\n                  ≡ƒÄ« Chß╗ìn Quiz ─æß╗â ch╞íi Multiplayer\r\n                </h1>\r\n                <p className=\"text-purple-200\">\r\n                  Chß╗ìn mß╗Öt quiz ─æß╗â tß║ío ph├▓ng hoß║╖c tham gia ch╞íi vß╗¢i bß║ín b├¿\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={onBack}\r\n                className=\"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-colors\"\r\n              >\r\n                ΓåÉ Quay lß║íi\r\n              </button>\r\n            </div>\r\n\r\n            {/* Search and Filter */}\r\n            <div className=\"flex flex-col sm:flex-row gap-4\">\r\n              {/* Search */}\r\n              <div className=\"flex-1 relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  placeholder={t('placeholders.searchQuizzes')}\r\n                  className=\"w-full pl-10 pr-4 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-400\"\r\n                />\r\n              </div>\r\n\r\n              {/* Category Filter */}\r\n              <select\r\n                value={selectedCategory}\r\n                onChange={(e) => setSelectedCategory(e.target.value)}\r\n                className=\"px-4 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-400\"\r\n              >\r\n                {categories.map(cat => (\r\n                  <option key={cat.value} value={cat.value} className=\"bg-gray-800\">\r\n                    {cat.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quiz Grid */}\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center py-20\">\r\n              <div className=\"text-center\">\r\n                <Loader2 className=\"w-12 h-12 text-white animate-spin mx-auto mb-4\" />\r\n                <p className=\"text-white\">─Éang tß║úi danh s├ích quiz...</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Debug Info Panel */}\r\n              {debugInfo && (\r\n                <div className=\"bg-yellow-500/20 backdrop-blur-md rounded-lg border border-yellow-500/40 p-4 mb-6\">\r\n                  <h3 className=\"text-white font-bold mb-2\">≡ƒöì Debug Information:</h3>\r\n                  <div className=\"text-sm text-yellow-100 space-y-1\">\r\n                    <p>Γ£à Auth User: {debugInfo.authUser}</p>\r\n                    <p>≡ƒôè Total Quizzes in DB: {debugInfo.totalFromDb}</p>\r\n                    <p>Γ£à Valid Quizzes (with questions): {debugInfo.validQuizzes}</p>\r\n                    <p>ΓÅ░ Last Fetch: {new Date(debugInfo.timestamp).toLocaleTimeString()}</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              \r\n              {filteredQuizzes.length === 0 ? (\r\n                <div className=\"bg-white/10 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 p-12 text-center\">\r\n                  <BookOpen className=\"w-16 h-16 text-white/50 mx-auto mb-4\" />\r\n                  <h3 className=\"text-xl font-semibold text-white mb-2\">\r\n                    {quizzes.length === 0 ? 'Ch╞░a c├│ quiz n├áo' : 'Kh├┤ng t├¼m thß║Ñy quiz'}\r\n                  </h3>\r\n                  <p className=\"text-purple-200 mb-4\">\r\n                    {quizzes.length === 0 \r\n                      ? 'Hiß╗çn tß║íi ch╞░a c├│ quiz n├áo ─æ╞░ß╗úc duyß╗çt. Vui l├▓ng quay lß║íi sau hoß║╖c tß║ío quiz mß╗¢i!'\r\n                      : 'Thß╗¡ thay ─æß╗òi bß╗Ö lß╗ìc hoß║╖c tß╗½ kh├│a t├¼m kiß║┐m'\r\n                    }\r\n                  </p>\r\n                  {quizzes.length === 0 && (\r\n                    <button\r\n                      onClick={onBack}\r\n                      className=\"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-lg transition-all\"\r\n                    >\r\n                      ΓåÉ Quay lß║íi\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {filteredQuizzes.map((quiz) => (\r\n                <div\r\n                  key={quiz.id}\r\n                  onClick={() => onSelectQuiz(quiz)}\r\n                  className=\"group bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 hover:border-white/40 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 cursor-pointer overflow-hidden transform hover:scale-105\"\r\n                >\r\n                  {/* Quiz Image */}\r\n                  {quiz.imageUrl ? (\r\n                    <div className=\"h-40 overflow-hidden\">\r\n                      <img\r\n                        src={quiz.imageUrl}\r\n                        alt={quiz.title}\r\n                        className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"h-40 bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center\">\r\n                      <BookOpen className=\"w-16 h-16 text-white/50\" />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Quiz Info */}\r\n                  <div className=\"p-6\">\r\n                    <h3 className=\"text-xl font-bold text-white mb-2 line-clamp-2 group-hover:text-purple-200 transition-colors\">\r\n                      {quiz.title}\r\n                    </h3>\r\n                    \r\n                    {quiz.description && (\r\n                      <p className=\"text-purple-200 text-sm mb-4 line-clamp-2\">\r\n                        {quiz.description}\r\n                      </p>\r\n                    )}\r\n\r\n                    {/* Stats */}\r\n                    <div className=\"flex items-center gap-4 text-sm text-purple-200 mb-4\">\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <BookOpen className=\"w-4 h-4\" />\r\n                        <span>{quiz.questions?.length || 0} c├óu</span>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        <Clock className=\"w-4 h-4\" />\r\n                        <span>{quiz.duration || 15} ph├║t</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Tags */}\r\n                    <div className=\"flex items-center gap-2 flex-wrap\">\r\n                      <span className={`px-2 py-1 rounded-lg text-xs font-medium ${getDifficultyColor(quiz.difficulty)}`}>\r\n                        {getDifficultyLabel(quiz.difficulty)}\r\n                      </span>\r\n                      {quiz.category && (\r\n                        <span className=\"px-2 py-1 rounded-lg text-xs font-medium bg-blue-100 text-blue-600\">\r\n                          {categories.find(c => c.value === quiz.category)?.label || quiz.category}\r\n                        </span>\r\n                      )}\r\n                      {quiz.quizType && (\r\n                        <span className=\"px-2 py-1 rounded-lg text-xs font-medium bg-purple-100 text-purple-600\">\r\n                          {quiz.quizType === 'with-materials' ? '≡ƒôÜ C├│ t├ái liß╗çu' : 'ΓÜí Nhanh'}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Play Button */}\r\n                    <button className=\"mt-4 w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform group-hover:scale-105\">\r\n                      ≡ƒÄ« Chß╗ìn Quiz n├áy\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* Results Count */}\r\n          {!loading && filteredQuizzes.length > 0 && (\r\n            <div className=\"mt-6 text-center\">\r\n              <p className=\"text-purple-200\">\r\n                Hiß╗ân thß╗ï {filteredQuizzes.length} quiz\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizSelector;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\RealtimeChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\RoomLobby.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\pages\\MultiplayerLobby.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium\">Quay lß║íi</span>","line":136,"column":47,"nodeType":"JSXText","endLine":136,"endColumn":55},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h1 className=\"text-4xl font-bold text-gray-900 mb-2 flex items-center gap-3\">\r\n                <Gamepad2 className=\"w-10 h-10 text-purple-600\" />\r\n                Multiplayer - Ch╞íi vß╗¢i bß║ín b├¿\r\n              </h1>","line":139,"column":67,"nodeType":"JSXText","endLine":141,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 text-lg\">Chß╗ìn quiz v├á tß║ío ph├▓ng ─æß╗â cß║ính tranh trß╗▒c tiß║┐p!</p>","line":142,"column":52,"nodeType":"JSXText","endLine":142,"endColumn":99},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"font-bold text-red-900 mb-1\">Lß╗ùi tß║úi dß╗» liß╗çu</h3>","line":153,"column":61,"nodeType":"JSXText","endLine":153,"endColumn":76},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                  onClick={fetchQuizzes}\r\n                  className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors\"\r\n                >\r\n                  Thß╗¡ lß║íi\r\n                </button>","line":158,"column":18,"nodeType":"JSXText","endLine":160,"endColumn":17},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"font-bold text-gray-900 mb-2 text-lg\">Real-time Competition</h3>","line":172,"column":66,"nodeType":"JSXText","endLine":172,"endColumn":87},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-600 leading-relaxed\">Cß║ính tranh trß╗▒c tiß║┐p vß╗¢i bß║ín b├¿ v├á xem kß║┐t quß║ú ngay lß║¡p tß╗⌐c</p>","line":173,"column":66,"nodeType":"JSXText","endLine":173,"endColumn":125},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"font-bold text-gray-900 mb-2 text-lg\">Private Rooms</h3>","line":180,"column":66,"nodeType":"JSXText","endLine":180,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-600 leading-relaxed\">Tß║ío ph├▓ng ri├¬ng vß╗¢i room code ─æß╗â ch╞íi vß╗¢i ng╞░ß╗¥i bß║ín muß╗æn</p>","line":181,"column":66,"nodeType":"JSXText","endLine":181,"endColumn":122},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"font-bold text-gray-900 mb-2 text-lg\">Live Leaderboard</h3>","line":188,"column":66,"nodeType":"JSXText","endLine":188,"endColumn":82},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-600 leading-relaxed\">Theo d├╡i bß║úng xß║┐p hß║íng trß╗▒c tiß║┐p trong khi ch╞íi</p>","line":189,"column":66,"nodeType":"JSXText","endLine":189,"endColumn":113},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <option value=\"all\">≡ƒÅ╖∩╕Å Tß║Ñt cß║ú danh mß╗Ñc</option>","line":228,"column":35,"nodeType":"JSXText","endLine":228,"endColumn":54},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <option value=\"all\">≡ƒôè Tß║Ñt cß║ú ─æß╗Ö kh├│</option>","line":238,"column":35,"nodeType":"JSXText","endLine":238,"endColumn":51},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm text-gray-600\">Hiß╗ân thß╗ï:</span>","line":250,"column":57,"nodeType":"JSXText","endLine":250,"endColumn":66},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"mt-4 text-sm text-gray-600\">\r\n            T├¼m thß║Ñy <span className=\"font-semibold text-purple-600\">{filteredQuizzes.length}</span> quiz\r\n            {searchTerm && <span> cho \"{searchTerm}\"</span>}\r\n            {categoryFilter !== 'all' && <span> trong danh mß╗Ñc \"{categoryFilter}\"</span>}\r\n            {difficultyFilter !== 'all' && <span> vß╗¢i ─æß╗Ö kh├│ \"{difficultyFilter}\"</span>}\r\n          </div>","line":276,"column":55,"nodeType":"JSXText","endLine":277,"endColumn":22},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"mt-4 text-sm text-gray-600\">\r\n            T├¼m thß║Ñy <span className=\"font-semibold text-purple-600\">{filteredQuizzes.length}</span> quiz\r\n            {searchTerm && <span> cho \"{searchTerm}\"</span>}\r\n            {categoryFilter !== 'all' && <span> trong danh mß╗Ñc \"{categoryFilter}\"</span>}\r\n            {difficultyFilter !== 'all' && <span> vß╗¢i ─æß╗Ö kh├│ \"{difficultyFilter}\"</span>}\r\n          </div>","line":277,"column":101,"nodeType":"JSXText","endLine":278,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span> cho \"{searchTerm}\"</span>","line":278,"column":34,"nodeType":"JSXText","endLine":278,"endColumn":40},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span> trong danh mß╗Ñc \"{categoryFilter}\"</span>","line":279,"column":48,"nodeType":"JSXText","endLine":279,"endColumn":65},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span> vß╗¢i ─æß╗Ö kh├│ \"{difficultyFilter}\"</span>","line":280,"column":50,"nodeType":"JSXText","endLine":280,"endColumn":63},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-medium text-gray-900 mb-2\">Kh├┤ng t├¼m thß║Ñy quiz</h3>","line":295,"column":72,"nodeType":"JSXText","endLine":295,"endColumn":91},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-6\">Kh├┤ng c├│ quiz n├áo ph├╣ hß╗úp vß╗¢i bß╗Ö lß╗ìc hiß╗çn tß║íi.</p>","line":296,"column":51,"nodeType":"JSXText","endLine":296,"endColumn":97},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button \r\n                  onClick={() => {\r\n                    setSearchTerm('');\r\n                    setCategoryFilter('all');\r\n                    setDifficultyFilter('all');\r\n                  }}\r\n                  className=\"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\r\n                >\r\n                  ≡ƒöä X├│a bß╗Ö lß╗ìc\r\n                </button>","line":304,"column":18,"nodeType":"JSXText","endLine":306,"endColumn":17},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600\">\r\n                    {selectedQuiz.questions.length} c├óu hß╗Åi ΓÇó {selectedQuiz.difficulty === 'easy' ? 'Dß╗à' : selectedQuiz.difficulty === 'medium' ? 'Trung b├¼nh' : 'Kh├│'}\r\n                  </div>","line":350,"column":52,"nodeType":"JSXText","endLine":350,"endColumn":63},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={handleStartMultiplayer}\r\n                className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 via-pink-600 to-indigo-600 text-white px-8 py-3 rounded-xl hover:shadow-xl hover:scale-105 transition-all duration-300 font-bold\"\r\n              >\r\n                <Gamepad2 className=\"w-5 h-5\" />\r\n                Bß║»t ─æß║ºu Multiplayer\r\n              </button>","line":358,"column":49,"nodeType":"JSXText","endLine":360,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { RootState } from '../../../lib/store';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db, auth } from '../../../lib/firebase/config';\r\nimport QuizCard, { QuizCardSkeleton } from '../../quiz/components/QuizCard';\r\nimport { Quiz } from '../../quiz/types';\r\nimport { \r\n  Gamepad2, \r\n  Users, \r\n  Zap, \r\n  Trophy, \r\n  ArrowLeft, \r\n  AlertCircle\r\n} from 'lucide-react';\r\n\r\nconst MultiplayerLobby: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const [quizzes, setQuizzes] = useState<Quiz[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedQuiz, setSelectedQuiz] = useState<Quiz | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [difficultyFilter, setDifficultyFilter] = useState<string>('all');\r\n  const [categoryFilter, setCategoryFilter] = useState<string>('all');\r\n  const [fetchError, setFetchError] = useState<string | null>(null);\r\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\r\n\r\n  const fetchQuizzes = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setFetchError(null);\r\n      \r\n      // Wait for auth to be ready if needed\r\n      if (!auth.currentUser) {\r\n        await new Promise<void>((resolve) => {\r\n          const unsubscribe = auth.onAuthStateChanged((authUser) => {\r\n            if (authUser) {\r\n              unsubscribe();\r\n              resolve();\r\n            }\r\n          });\r\n          // Timeout after 5 seconds\r\n          setTimeout(() => {\r\n            unsubscribe();\r\n            resolve();\r\n          }, 5000);\r\n        });\r\n      }\r\n      \r\n      // Fetch ONLY APPROVED quizzes with status filter\r\n      const allQuizzesRef = query(\r\n        collection(db, 'quizzes'),\r\n        where('status', '==', 'approved')\r\n      );\r\n      const allSnapshot = await getDocs(allQuizzesRef);\r\n      \r\n      const allQuizData = allSnapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      } as Quiz));\r\n      \r\n      // Filter quizzes - Chß╗ë cß║ºn 1 c├óu hß╗Åi trß╗ƒ l├¬n (─æ├ú approved tß╗½ query)\r\n      const validQuizzes = allQuizData.filter(quiz => {\r\n        const hasQuestions = quiz.questions && quiz.questions.length >= 1;\r\n        return hasQuestions;\r\n      });\r\n      \r\n      setQuizzes(validQuizzes);\r\n    } catch (error: any) {\r\n      console.error('Error fetching quizzes:', error);\r\n      setFetchError(error.message || 'Kh├┤ng thß╗â tß║úi danh s├ích quiz');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    fetchQuizzes();\r\n  }, [user, navigate, fetchQuizzes]);\r\n\r\n  const filteredQuizzes = quizzes.filter(quiz => {\r\n    const matchesSearch = quiz.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         quiz.description.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesDifficulty = difficultyFilter === 'all' || quiz.difficulty === difficultyFilter;\r\n    const matchesCategory = categoryFilter === 'all' || quiz.category === categoryFilter;\r\n    \r\n    return matchesSearch && matchesDifficulty && matchesCategory;\r\n  });\r\n\r\n  const handleQuizSelect = (quiz: Quiz) => {\r\n    setSelectedQuiz(quiz);\r\n    // Tß╗▒ ─æß╗Öng scroll ─æß║┐n n├║t bß║»t ─æß║ºu\r\n    setTimeout(() => {\r\n      const startButton = document.getElementById('multiplayer-start-button');\r\n      startButton?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\r\n    }, 100);\r\n  };\r\n\r\n  const handleStartMultiplayer = () => {\r\n    if (selectedQuiz) {\r\n      navigate('/multiplayer/game', { state: { selectedQuiz } });\r\n    }\r\n  };\r\n\r\n  const categories = Array.from(new Set(quizzes.map(q => q.category).filter(Boolean)));\r\n  const difficulties = Array.from(new Set(quizzes.map(q => q.difficulty)));\r\n\r\n  // Stats for potential future use\r\n  // const stats = {\r\n  //   total: filteredQuizzes.length,\r\n  //   easy: filteredQuizzes.filter(q => q.difficulty === 'easy').length,\r\n  //   medium: filteredQuizzes.filter(q => q.difficulty === 'medium').length,\r\n  //   hard: filteredQuizzes.filter(q => q.difficulty === 'hard').length,\r\n  // };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4\">\r\n        {/* Header Section - Giß╗æng QuizList */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <button\r\n                onClick={() => navigate('/quizzes')}\r\n                className=\"group flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-all duration-300 hover:gap-3\"\r\n              >\r\n                <ArrowLeft className=\"w-5 h-5 group-hover:animate-bounce-x\" />\r\n                <span className=\"font-medium\">Quay lß║íi</span>\r\n              </button>\r\n              <h1 className=\"text-4xl font-bold text-gray-900 mb-2 flex items-center gap-3\">\r\n                <Gamepad2 className=\"w-10 h-10 text-purple-600\" />\r\n                Multiplayer - Ch╞íi vß╗¢i bß║ín b├¿\r\n              </h1>\r\n              <p className=\"text-gray-600 text-lg\">Chß╗ìn quiz v├á tß║ío ph├▓ng ─æß╗â cß║ính tranh trß╗▒c tiß║┐p!</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Error Display */}\r\n        {fetchError && (\r\n          <div className=\"bg-red-50 border-l-4 border-red-500 rounded-xl p-6 mb-6 shadow-lg animate-shake\">\r\n            <div className=\"flex items-start gap-4\">\r\n              <AlertCircle className=\"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5\" />\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"font-bold text-red-900 mb-1\">Lß╗ùi tß║úi dß╗» liß╗çu</h3>\r\n                <p className=\"text-sm text-red-700 mb-3\">{fetchError}</p>\r\n                <button\r\n                  onClick={fetchQuizzes}\r\n                  className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors\"\r\n                >\r\n                  Thß╗¡ lß║íi\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Features Banner - Giß╗æng QuizList */}\r\n        <div className=\"grid md:grid-cols-3 gap-6 mb-8\">\r\n          <div className=\"group bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:border-purple-300 hover:shadow-md transition-all\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center mb-4 group-hover:rotate-12 transition-transform\">\r\n              <Zap className=\"w-6 h-6 text-white\" />\r\n            </div>\r\n            <h3 className=\"font-bold text-gray-900 mb-2 text-lg\">Real-time Competition</h3>\r\n            <p className=\"text-sm text-gray-600 leading-relaxed\">Cß║ính tranh trß╗▒c tiß║┐p vß╗¢i bß║ín b├¿ v├á xem kß║┐t quß║ú ngay lß║¡p tß╗⌐c</p>\r\n          </div>\r\n          \r\n          <div className=\"group bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:border-pink-300 hover:shadow-md transition-all\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-500 rounded-xl flex items-center justify-center mb-4 group-hover:rotate-12 transition-transform\">\r\n              <Users className=\"w-6 h-6 text-white\" />\r\n            </div>\r\n            <h3 className=\"font-bold text-gray-900 mb-2 text-lg\">Private Rooms</h3>\r\n            <p className=\"text-sm text-gray-600 leading-relaxed\">Tß║ío ph├▓ng ri├¬ng vß╗¢i room code ─æß╗â ch╞íi vß╗¢i ng╞░ß╗¥i bß║ín muß╗æn</p>\r\n          </div>\r\n          \r\n          <div className=\"group bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-indigo-500 to-blue-500 rounded-xl flex items-center justify-center mb-4 group-hover:rotate-12 transition-transform\">\r\n              <Trophy className=\"w-6 h-6 text-white\" />\r\n            </div>\r\n            <h3 className=\"font-bold text-gray-900 mb-2 text-lg\">Live Leaderboard</h3>\r\n            <p className=\"text-sm text-gray-600 leading-relaxed\">Theo d├╡i bß║úng xß║┐p hß║íng trß╗▒c tiß║┐p trong khi ch╞íi</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Enhanced Filter Section - Giß╗æng QuizList */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n            {/* Enhanced Search */}\r\n            <div className=\"lg:col-span-2 relative\">\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder={t('placeholders.searchQuiz')}\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"w-full border border-gray-300 rounded-lg p-3 pl-10 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\r\n                />\r\n                <svg className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                </svg>\r\n                {searchTerm && (\r\n                  <button\r\n                    onClick={() => setSearchTerm('')}\r\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 hover:text-gray-600\"\r\n                  >\r\n                    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Category Filter */}\r\n            <select \r\n              className=\"border border-gray-300 rounded-lg p-3 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500\" \r\n              value={categoryFilter} \r\n              onChange={e => setCategoryFilter(e.target.value)}\r\n            >\r\n              <option value=\"all\">≡ƒÅ╖∩╕Å Tß║Ñt cß║ú danh mß╗Ñc</option>\r\n              {categories.map(c => <option key={c} value={c}>{c}</option>)}\r\n            </select>\r\n            \r\n            {/* Difficulty Filter */}\r\n            <select \r\n              className=\"border border-gray-300 rounded-lg p-3 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500\" \r\n              value={difficultyFilter} \r\n              onChange={e => setDifficultyFilter(e.target.value)}\r\n            >\r\n              <option value=\"all\">≡ƒôè Tß║Ñt cß║ú ─æß╗Ö kh├│</option>\r\n              {difficulties.map(d => <option key={d} value={d}>\r\n                {d === 'easy' ? '≡ƒÿè Dß╗à' : d === 'medium' ? '≡ƒÿÉ Trung b├¼nh' : '≡ƒÿñ Kh├│'}\r\n              </option>)}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Advanced Controls */}\r\n          <div className=\"flex flex-wrap items-center justify-between gap-4 pt-4 border-t border-gray-100\">\r\n            <div className=\"flex items-center gap-4\">\r\n              {/* View Mode Toggle */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-sm text-gray-600\">Hiß╗ân thß╗ï:</span>\r\n                <div className=\"flex border border-gray-300 rounded-lg overflow-hidden\">\r\n                  <button\r\n                    onClick={() => setViewMode('grid')}\r\n                    className={`p-2 ${viewMode === 'grid' ? 'bg-purple-500 text-white' : 'bg-white text-gray-600 hover:bg-gray-50'}`}\r\n                    title=\"L╞░ß╗¢i\"\r\n                  >\r\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path d=\"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\" />\r\n                    </svg>\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setViewMode('list')}\r\n                    className={`p-2 ${viewMode === 'list' ? 'bg-purple-500 text-white' : 'bg-white text-gray-600 hover:bg-gray-50'}`}\r\n                    title=\"Danh s├ích\"\r\n                  >\r\n                    <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Results Summary */}\r\n          <div className=\"mt-4 text-sm text-gray-600\">\r\n            T├¼m thß║Ñy <span className=\"font-semibold text-purple-600\">{filteredQuizzes.length}</span> quiz\r\n            {searchTerm && <span> cho \"{searchTerm}\"</span>}\r\n            {categoryFilter !== 'all' && <span> trong danh mß╗Ñc \"{categoryFilter}\"</span>}\r\n            {difficultyFilter !== 'all' && <span> vß╗¢i ─æß╗Ö kh├│ \"{difficultyFilter}\"</span>}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quiz Grid/List - Giß╗æng QuizList sß╗¡ dß╗Ñng QuizCard */}\r\n        <div className={viewMode === 'grid' \r\n          ? \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\" \r\n          : \"space-y-4\"\r\n        }>\r\n          {loading ? (\r\n            Array.from({length: 8}).map((_,i) => <QuizCardSkeleton key={i} />)\r\n          ) : filteredQuizzes.length === 0 ? (\r\n            <div className=\"col-span-full text-center\">\r\n              <div className=\"bg-gray-50 border border-gray-200 rounded-xl p-12\">\r\n                <Gamepad2 className='w-16 h-16 mx-auto text-gray-300 mb-4' />\r\n                <h3 className=\"text-xl font-medium text-gray-900 mb-2\">Kh├┤ng t├¼m thß║Ñy quiz</h3>\r\n                <p className=\"text-gray-600 mb-6\">Kh├┤ng c├│ quiz n├áo ph├╣ hß╗úp vß╗¢i bß╗Ö lß╗ìc hiß╗çn tß║íi.</p>\r\n                <button \r\n                  onClick={() => {\r\n                    setSearchTerm('');\r\n                    setCategoryFilter('all');\r\n                    setDifficultyFilter('all');\r\n                  }}\r\n                  className=\"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\r\n                >\r\n                  ≡ƒöä X├│a bß╗Ö lß╗ìc\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            filteredQuizzes.map(quiz => (\r\n              <div \r\n                key={quiz.id}\r\n                onClick={() => handleQuizSelect(quiz)}\r\n                className={`cursor-pointer transition-all ${\r\n                  selectedQuiz?.id === quiz.id \r\n                    ? 'ring-4 ring-purple-500 ring-offset-2' \r\n                    : ''\r\n                }`}\r\n              >\r\n                <QuizCard \r\n                  quiz={quiz} \r\n                  viewMode={viewMode}\r\n                  onStartQuiz={() => handleQuizSelect(quiz)}\r\n                />\r\n                {selectedQuiz?.id === quiz.id && (\r\n                  <div className=\"absolute top-4 left-4 z-30\">\r\n                    <div className=\"w-8 h-8 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center animate-bounce shadow-lg\">\r\n                      <svg className=\"w-5 h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                        <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* Start Button - Fixed at bottom khi ─æ├ú chß╗ìn quiz */}\r\n        {selectedQuiz && (\r\n          <div id=\"multiplayer-start-button\" className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg p-4 z-50 animate-slide-up\">\r\n            <div className=\"max-w-7xl mx-auto flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\r\n                  <Gamepad2 className=\"w-6 h-6 text-purple-600\" />\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-bold text-gray-900\">{selectedQuiz.title}</div>\r\n                  <div className=\"text-sm text-gray-600\">\r\n                    {selectedQuiz.questions.length} c├óu hß╗Åi ΓÇó {selectedQuiz.difficulty === 'easy' ? 'Dß╗à' : selectedQuiz.difficulty === 'medium' ? 'Trung b├¼nh' : 'Kh├│'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={handleStartMultiplayer}\r\n                className=\"flex items-center gap-2 bg-gradient-to-r from-purple-600 via-pink-600 to-indigo-600 text-white px-8 py-3 rounded-xl hover:shadow-xl hover:scale-105 transition-all duration-300 font-bold\"\r\n              >\r\n                <Gamepad2 className=\"w-5 h-5\" />\r\n                Bß║»t ─æß║ºu Multiplayer\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultiplayerLobby;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\pages\\MultiplayerPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\services\\enhancedMultiplayerService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\services\\firestoreMultiplayerService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\services\\realtimeMultiplayerService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\multiplayer\\utils\\logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\api\\admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\api\\ai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\api\\base.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\api\\creator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\api\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\api\\shared.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\api\\user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\GeminiAIQuestionGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ModernGeminiAIGenerator_new.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\QuestionEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\QuizBulkImport.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\QuizCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\QuizFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\QuizPreviewModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n                ≡ƒæü∩╕Å {t('quiz.preview.title') || 'Preview Quiz'}\r\n              </h2>","line":34,"column":74,"nodeType":"JSXText","endLine":35,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h4 className=\"font-semibold text-gray-900 mb-3\">\r\n              ΓÜÖ∩╕Å {t('quiz.settings') || 'Settings'}\r\n            </h4>","line":90,"column":62,"nodeType":"JSXText","endLine":91,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-yellow-800 flex items-center gap-2\">\r\n                ΓÜá∩╕Å <span className=\"font-medium\">\r\n                  {t('quiz.validation.minQuestions') || 'Recommended: At least 3 questions for a good quiz'}\r\n                </span>\r\n              </p>","line":173,"column":70,"nodeType":"JSXText","endLine":174,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\QuizPublishModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"font-medium text-blue-900\">\r\n                  ≡ƒæ¿ΓÇì≡ƒÆ╝ {t('quiz.publish.requireReview') || 'Submit for Admin Review'}\r\n                </p>","line":151,"column":58,"nodeType":"JSXText","endLine":152,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium\">Γä╣∩╕Å {t('quiz.publish.info') || 'What happens next'}:</span>","line":201,"column":45,"nodeType":"JSXText","endLine":201,"endColumn":48,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\QuizStats.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>{averageQuestions} c├óu hß╗Åi trung b├¼nh</span>","line":54,"column":35,"nodeType":"JSXText","endLine":54,"endColumn":54},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Tiß║┐n ─æß╗Ö</span>","line":73,"column":19,"nodeType":"JSXText","endLine":73,"endColumn":26},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>\r\n            {totalQuizzes > 0 ? Math.round(totalPlayers / totalQuizzes) : 0} trung b├¼nh/quiz\r\n          </span>","line":100,"column":77,"nodeType":"JSXText","endLine":101,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Chß║Ñt l╞░ß╗úng tß╗æt</span>","line":119,"column":17,"nodeType":"JSXText","endLine":119,"endColumn":31},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Ph├ón bß╗æ ─æß╗Ö kh├│</h3>","line":125,"column":66,"nodeType":"JSXText","endLine":125,"endColumn":80},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Danh mß╗Ñc phß╗ò biß║┐n</h3>","line":177,"column":66,"nodeType":"JSXText","endLine":177,"endColumn":83},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm text-gray-600\">{count} quiz</span>","line":188,"column":64,"nodeType":"JSXText","endLine":188,"endColumn":69},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-center text-gray-500 py-4\">\r\n              Ch╞░a c├│ dß╗» liß╗çu danh mß╗Ñc\r\n            </div>","line":199,"column":61,"nodeType":"JSXText","endLine":201,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Quiz } from '../types';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\ninterface QuizStatsProps {\r\n  quizzes: Quiz[];\r\n}\r\n\r\nconst QuizStats: React.FC<QuizStatsProps> = ({ quizzes }) => {\r\n  const { t } = useTranslation();\r\n\r\n  // Calculate statistics\r\n  const totalQuizzes = quizzes.length;\r\n  const completedQuizzes = quizzes.filter(q => q.isCompleted).length;\r\n  const totalQuestions = quizzes.reduce((sum, q) => sum + q.questions.length, 0);\r\n  const averageQuestions = totalQuizzes > 0 ? Math.round(totalQuestions / totalQuizzes) : 0;\r\n  \r\n  const difficultyCount = {\r\n    easy: quizzes.filter(q => q.difficulty === 'easy').length,\r\n    medium: quizzes.filter(q => q.difficulty === 'medium').length,\r\n    hard: quizzes.filter(q => q.difficulty === 'hard').length\r\n  };\r\n\r\n  const categoryCount = quizzes.reduce((acc, quiz) => {\r\n    acc[quiz.category] = (acc[quiz.category] || 0) + 1;\r\n    return acc;\r\n  }, {} as Record<string, number>);\r\n\r\n  const topCategories = Object.entries(categoryCount)\r\n    .sort(([,a], [,b]) => b - a)\r\n    .slice(0, 5);\r\n\r\n  const totalPlayers = quizzes.reduce((sum, q) => sum + (q.totalPlayers || 0), 0);\r\n  const averageScore = quizzes.filter(q => q.averageScore).reduce((sum, q) => sum + (q.averageScore || 0), 0) / quizzes.filter(q => q.averageScore).length || 0;\r\n\r\n  const progressPercentage = totalQuizzes > 0 ? Math.round((completedQuizzes / totalQuizzes) * 100) : 0;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n      {/* Total Quizzes */}\r\n      <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-blue-100 text-sm font-medium\">{t(\"admin.quizManagement.cards.totalQuizzes\")}</p>\r\n            <p className=\"text-3xl font-bold\">{totalQuizzes}</p>\r\n          </div>\r\n          <div className=\"p-3 bg-white/20 rounded-lg\">\r\n            <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-4 flex items-center text-blue-100 text-sm\">\r\n          <span>{averageQuestions} c├óu hß╗Åi trung b├¼nh</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Completed Progress */}\r\n      <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-green-100 text-sm font-medium\">{t(\"admin.quickActions.stats.completions\")}</p>\r\n            <p className=\"text-3xl font-bold\">{completedQuizzes}</p>\r\n          </div>\r\n          <div className=\"p-3 bg-white/20 rounded-lg\">\r\n            <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-4\">\r\n          <div className=\"flex items-center justify-between text-green-100 text-sm mb-1\">\r\n            <span>Tiß║┐n ─æß╗Ö</span>\r\n            <span>{progressPercentage}%</span>\r\n          </div>\r\n          <div className=\"w-full bg-white/20 rounded-full h-2\">\r\n            <div \r\n              className=\"bg-white rounded-full h-2 transition-all duration-300\"\r\n              style={{ width: `${progressPercentage}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Total Players */}\r\n      <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-purple-100 text-sm font-medium\">{t(\"leaderboard.plays\")}</p>\r\n            <p className=\"text-3xl font-bold\">{totalPlayers.toLocaleString()}</p>\r\n          </div>\r\n          <div className=\"p-3 bg-white/20 rounded-lg\">\r\n            <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path d=\"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z\"/>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-4 flex items-center text-purple-100 text-sm\">\r\n          <span>\r\n            {totalQuizzes > 0 ? Math.round(totalPlayers / totalQuizzes) : 0} trung b├¼nh/quiz\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Average Score */}\r\n      <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <p className=\"text-orange-100 text-sm font-medium\">{t(\"leaderboard.avgScore\")}</p>\r\n            <p className=\"text-3xl font-bold\">{Math.round(averageScore)}%</p>\r\n          </div>\r\n          <div className=\"p-3 bg-white/20 rounded-lg\">\r\n            <svg className=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n              <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"/>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-4 flex items-center text-orange-100 text-sm\">\r\n          <span>Chß║Ñt l╞░ß╗úng tß╗æt</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Difficulty Distribution */}\r\n      <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200 md:col-span-2\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Ph├ón bß╗æ ─æß╗Ö kh├│</h3>\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-4 h-4 bg-green-500 rounded\"></div>\r\n              <span className=\"text-sm text-gray-600\">{t(\"difficulty.easy\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <span className=\"text-sm font-medium\">{difficultyCount.easy}</span>\r\n              <div className=\"w-20 bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-green-500 h-2 rounded-full\"\r\n                  style={{ width: `${totalQuizzes > 0 ? (difficultyCount.easy / totalQuizzes) * 100 : 0}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-4 h-4 bg-yellow-500 rounded\"></div>\r\n              <span className=\"text-sm text-gray-600\">{t(\"difficulty.medium\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <span className=\"text-sm font-medium\">{difficultyCount.medium}</span>\r\n              <div className=\"w-20 bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-yellow-500 h-2 rounded-full\"\r\n                  style={{ width: `${totalQuizzes > 0 ? (difficultyCount.medium / totalQuizzes) * 100 : 0}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-4 h-4 bg-red-500 rounded\"></div>\r\n              <span className=\"text-sm text-gray-600\">{t(\"difficulty.hard\")}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <span className=\"text-sm font-medium\">{difficultyCount.hard}</span>\r\n              <div className=\"w-20 bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-red-500 h-2 rounded-full\"\r\n                  style={{ width: `${totalQuizzes > 0 ? (difficultyCount.hard / totalQuizzes) * 100 : 0}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Top Categories */}\r\n      <div className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200 md:col-span-2\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Danh mß╗Ñc phß╗ò biß║┐n</h3>\r\n        <div className=\"space-y-3\">\r\n          {topCategories.map(([category, count], index) => (\r\n            <div key={category} className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-600 rounded-full text-xs font-medium\">\r\n                  {index + 1}\r\n                </div>\r\n                <span className=\"text-sm text-gray-900 font-medium\">{category}</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-3\">\r\n                <span className=\"text-sm text-gray-600\">{count} quiz</span>\r\n                <div className=\"w-16 bg-gray-200 rounded-full h-2\">\r\n                  <div \r\n                    className=\"bg-blue-500 h-2 rounded-full\"\r\n                    style={{ width: `${totalQuizzes > 0 ? (count / totalQuizzes) * 100 : 0}%` }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {topCategories.length === 0 && (\r\n            <div className=\"text-center text-gray-500 py-4\">\r\n              Ch╞░a c├│ dß╗» liß╗çu danh mß╗Ñc\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizStats;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ResourceViewers\\ImageSlidesViewer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-400\">\r\n            Slide {currentIndex + 1} / {urls.length}\r\n          </p>","line":98,"column":48,"nodeType":"JSXText","endLine":99,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>\r\n            ≡ƒôè ─É├ú xem: {imagesViewed.size}/{urls.length} slides ({progressPercent}%)\r\n          </span>","line":124,"column":17,"nodeType":"JSXText","endLine":125,"endColumn":24},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>\r\n            ≡ƒôè ─É├ú xem: {imagesViewed.size}/{urls.length} slides ({progressPercent}%)\r\n          </span>","line":125,"column":57,"nodeType":"JSXText","endLine":125,"endColumn":66},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-400\">\r\n            ΓÅ▒∩╕Å Thß╗¥i gian slide n├áy: {imageViewTimes[currentIndex] || 0}s\r\n          </span>","line":127,"column":43,"nodeType":"JSXText","endLine":128,"endColumn":37},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-400\">\r\n            ΓÅ▒∩╕Å Thß╗¥i gian slide n├áy: {imageViewTimes[currentIndex] || 0}s\r\n          </span>","line":128,"column":72,"nodeType":"JSXText","endLine":129,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { ChevronLeft, ChevronRight, Maximize2, Grid } from 'lucide-react';\r\n\r\ninterface ImageSlidesViewerProps {\r\n  urls: string[]; // Array of image URLs\r\n  title: string;\r\n  onProgressUpdate: (progress: {\r\n    imagesViewed: number[];\r\n    imageViewTimes: Record<number, number>;\r\n  }) => void;\r\n  initialProgress?: {\r\n    imagesViewed?: number[];\r\n    imageViewTimes?: Record<number, number>;\r\n  };\r\n}\r\n\r\nexport const ImageSlidesViewer: React.FC<ImageSlidesViewerProps> = ({\r\n  urls,\r\n  title,\r\n  onProgressUpdate,\r\n  initialProgress\r\n}) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [imagesViewed, setImagesViewed] = useState<Set<number>>(\r\n    new Set(initialProgress?.imagesViewed || [])\r\n  );\r\n  const [imageViewTimes, setImageViewTimes] = useState<Record<number, number>>(\r\n    initialProgress?.imageViewTimes || {}\r\n  );\r\n  const [imageStartTime, setImageStartTime] = useState<number>(Date.now());\r\n  const [showGrid, setShowGrid] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Track image view time\r\n    const interval = setInterval(() => {\r\n      const newImageViewTimes = {\r\n        ...imageViewTimes,\r\n        [currentIndex]: (imageViewTimes[currentIndex] || 0) + 1\r\n      };\r\n      setImageViewTimes(newImageViewTimes);\r\n      \r\n      const newImagesViewed = new Set(imagesViewed).add(currentIndex);\r\n      setImagesViewed(newImagesViewed);\r\n      \r\n      onProgressUpdate({\r\n        imagesViewed: Array.from(newImagesViewed),\r\n        imageViewTimes: newImageViewTimes\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [currentIndex, imageStartTime, imageViewTimes, imagesViewed, onProgressUpdate]);\r\n\r\n  useEffect(() => {\r\n    // Reset timer when image changes\r\n    setImageStartTime(Date.now());\r\n    \r\n    // Mark image as viewed\r\n    const newImagesViewed = new Set(imagesViewed).add(currentIndex);\r\n    setImagesViewed(newImagesViewed);\r\n  }, [currentIndex, imagesViewed]);\r\n\r\n  const handlePrevious = useCallback(() => {\r\n    setCurrentIndex((prev) => Math.max(0, prev - 1));\r\n  }, []);\r\n\r\n  const handleNext = useCallback(() => {\r\n    setCurrentIndex((prev) => Math.min(urls.length - 1, prev + 1));\r\n  }, [urls.length]);\r\n\r\n  const handleImageClick = (index: number) => {\r\n    setCurrentIndex(index);\r\n    setShowGrid(false);\r\n  };\r\n\r\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\r\n    if (e.key === 'ArrowLeft') handlePrevious();\r\n    if (e.key === 'ArrowRight') handleNext();\r\n    if (e.key === 'Escape') setIsFullscreen(false);\r\n  }, [handlePrevious, handleNext]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [handleKeyDown]);\r\n\r\n  const progressPercent = urls.length > 0 ? Math.round((imagesViewed.size / urls.length) * 100) : 0;\r\n\r\n  return (\r\n    <div className={`flex flex-col bg-gray-900 rounded-lg overflow-hidden ${\r\n      isFullscreen ? 'fixed inset-0 z-50' : 'h-full'\r\n    }`}>\r\n      {/* Header */}\r\n      <div className=\"bg-gray-800 text-white p-4 flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"font-semibold\">{title}</h3>\r\n          <p className=\"text-sm text-gray-400\">\r\n            Slide {currentIndex + 1} / {urls.length}\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setShowGrid(!showGrid)}\r\n            className=\"p-2 rounded hover:bg-gray-700 transition-colors\"\r\n            title={showGrid ? 'Xem slide' : 'Xem tß╗òng quan'}\r\n          >\r\n            <Grid className=\"w-5 h-5\" />\r\n          </button>\r\n          <button\r\n            onClick={() => setIsFullscreen(!isFullscreen)}\r\n            className=\"p-2 rounded hover:bg-gray-700 transition-colors\"\r\n            title=\"To├án m├án h├¼nh\"\r\n          >\r\n            <Maximize2 className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"bg-gray-800 px-4 py-2 border-t border-gray-700\">\r\n        <div className=\"flex items-center justify-between text-sm text-white mb-1\">\r\n          <span>\r\n            ≡ƒôè ─É├ú xem: {imagesViewed.size}/{urls.length} slides ({progressPercent}%)\r\n          </span>\r\n          <span className=\"text-gray-400\">\r\n            ΓÅ▒∩╕Å Thß╗¥i gian slide n├áy: {imageViewTimes[currentIndex] || 0}s\r\n          </span>\r\n        </div>\r\n        <div className=\"w-full bg-gray-700 rounded-full h-2\">\r\n          <div\r\n            className=\"bg-blue-500 h-2 rounded-full transition-all\"\r\n            style={{ width: `${progressPercent}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      {showGrid ? (\r\n        // Grid View\r\n        <div className=\"flex-1 overflow-auto p-4 bg-gray-900\">\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n            {urls.map((url, index) => (\r\n              <button\r\n                key={index}\r\n                onClick={() => handleImageClick(index)}\r\n                className={`relative aspect-video rounded-lg overflow-hidden border-2 transition-all ${\r\n                  index === currentIndex\r\n                    ? 'border-blue-500 ring-2 ring-blue-500'\r\n                    : imagesViewed.has(index)\r\n                    ? 'border-green-500'\r\n                    : 'border-gray-600 hover:border-gray-500'\r\n                }`}\r\n              >\r\n                <img\r\n                  src={url}\r\n                  alt={`Slide ${index + 1}`}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n                <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center text-white font-semibold\">\r\n                  {index + 1}\r\n                </div>\r\n                {imagesViewed.has(index) && (\r\n                  <div className=\"absolute top-2 right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\r\n                    <svg className=\"w-4 h-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                      <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        // Slide View\r\n        <div className=\"flex-1 flex items-center justify-center bg-black relative\">\r\n          {/* Navigation Arrows */}\r\n          <button\r\n            onClick={handlePrevious}\r\n            disabled={currentIndex === 0}\r\n            className=\"absolute left-4 z-10 p-3 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\r\n          >\r\n            <ChevronLeft className=\"w-8 h-8\" />\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleNext}\r\n            disabled={currentIndex === urls.length - 1}\r\n            className=\"absolute right-4 z-10 p-3 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\r\n          >\r\n            <ChevronRight className=\"w-8 h-8\" />\r\n          </button>\r\n\r\n          {/* Current Image */}\r\n          <img\r\n            src={urls[currentIndex]}\r\n            alt={`Slide ${currentIndex + 1}`}\r\n            className=\"max-w-full max-h-full object-contain\"\r\n          />\r\n\r\n          {/* Slide Number Overlay */}\r\n          <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/70 text-white px-4 py-2 rounded-full text-sm\">\r\n            {currentIndex + 1} / {urls.length}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Thumbnail Strip */}\r\n      {!showGrid && (\r\n        <div className=\"bg-gray-800 p-2 overflow-x-auto\">\r\n          <div className=\"flex gap-2\">\r\n            {urls.map((url, index) => (\r\n              <button\r\n                key={index}\r\n                onClick={() => setCurrentIndex(index)}\r\n                className={`relative flex-shrink-0 w-20 h-14 rounded overflow-hidden border-2 transition-all ${\r\n                  index === currentIndex\r\n                    ? 'border-blue-500 ring-2 ring-blue-500'\r\n                    : imagesViewed.has(index)\r\n                    ? 'border-green-500'\r\n                    : 'border-gray-600 hover:border-gray-500'\r\n                }`}\r\n              >\r\n                <img\r\n                  src={url}\r\n                  alt={`Slide ${index + 1}`}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n                {imagesViewed.has(index) && (\r\n                  <div className=\"absolute top-0 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-800\" />\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ResourceViewers\\LinkViewer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Thß╗¥i gian ─æß╗ìc: ~{estimatedTime} ph├║t</span>","line":77,"column":21,"nodeType":"JSXText","endLine":77,"endColumn":37},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Thß╗¥i gian ─æß╗ìc: ~{estimatedTime} ph├║t</span>","line":77,"column":52,"nodeType":"JSXText","endLine":77,"endColumn":57},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>─É├ú xem: {formatTime(timeSpent)}</span>","line":82,"column":19,"nodeType":"JSXText","endLine":82,"endColumn":27},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n              Kh├┤ng thß╗â xem trß╗▒c tiß║┐p\r\n            </h4>","line":100,"column":70,"nodeType":"JSXText","endLine":102,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-6 max-w-md\">\r\n              Trang web n├áy kh├┤ng hß╗ù trß╗ú xem nh├║ng. Vui l├▓ng nhß║Ñn n├║t b├¬n d╞░ß╗¢i ─æß╗â mß╗ƒ trong tab mß╗¢i.\r\n            </p>","line":103,"column":56,"nodeType":"JSXText","endLine":105,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n              onClick={handleOpenExternal}\r\n              className=\"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              <ExternalLink className=\"w-5 h-5\" />\r\n              Mß╗ƒ trong tab mß╗¢i\r\n            </button>","line":110,"column":51,"nodeType":"JSXText","endLine":112,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-700 mb-1\">\r\n                ≡ƒôû ─É├ú ─æß╗ìc xong t├ái liß╗çu n├áy?\r\n              </p>","line":122,"column":57,"nodeType":"JSXText","endLine":124,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-xs text-gray-500\">\r\n                X├íc nhß║¡n ─æß╗â tiß║┐p tß╗Ñc (hoß║╖c mß╗ƒ trong tab mß╗¢i ─æß╗â ─æß╗ìc)\r\n              </p>","line":125,"column":52,"nodeType":"JSXText","endLine":127,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={handleOpenExternal}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm\"\r\n              >\r\n                Mß╗ƒ tab mß╗¢i\r\n              </button>","line":133,"column":16,"nodeType":"JSXText","endLine":135,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={handleConfirm}\r\n                className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium\"\r\n              >\r\n                Γ£ô ─É├ú ─æß╗ìc xong\r\n              </button>","line":139,"column":16,"nodeType":"JSXText","endLine":141,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium\">─É├ú x├íc nhß║¡n ho├án th├ánh</span>","line":147,"column":43,"nodeType":"JSXText","endLine":147,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { ExternalLink, CheckCircle, Clock } from 'lucide-react';\r\n\r\ninterface LinkViewerProps {\r\n  url: string;\r\n  title: string;\r\n  description?: string;\r\n  estimatedTime?: number;\r\n  onProgressUpdate: (progress: {\r\n    confirmed: boolean;\r\n    timeSpent: number;\r\n  }) => void;\r\n  initialProgress?: {\r\n    confirmed?: boolean;\r\n    timeSpent?: number;\r\n  };\r\n}\r\n\r\nexport const LinkViewer: React.FC<LinkViewerProps> = ({\r\n  url,\r\n  title,\r\n  description,\r\n  estimatedTime,\r\n  onProgressUpdate,\r\n  initialProgress\r\n}) => {\r\n  const [confirmed, setConfirmed] = useState(initialProgress?.confirmed || false);\r\n  const [timeSpent, setTimeSpent] = useState(initialProgress?.timeSpent || 0);\r\n  const [isIframeSupported, setIsIframeSupported] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Track time spent\r\n    const interval = setInterval(() => {\r\n      const newTimeSpent = timeSpent + 1;\r\n      setTimeSpent(newTimeSpent);\r\n      \r\n      onProgressUpdate({\r\n        confirmed,\r\n        timeSpent: newTimeSpent\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [timeSpent, confirmed, onProgressUpdate]);\r\n\r\n  const handleConfirm = () => {\r\n    setConfirmed(true);\r\n    onProgressUpdate({\r\n      confirmed: true,\r\n      timeSpent\r\n    });\r\n  };\r\n\r\n  const handleOpenExternal = () => {\r\n    window.open(url, '_blank', 'noopener,noreferrer');\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white rounded-lg overflow-hidden border border-gray-200\">\r\n      {/* Header */}\r\n      <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 p-6 border-b border-gray-200\">\r\n        <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{title}</h3>\r\n        {description && (\r\n          <p className=\"text-gray-600 mb-4\">{description}</p>\r\n        )}\r\n        \r\n        <div className=\"flex items-center gap-4 text-sm text-gray-700\">\r\n          {estimatedTime && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <Clock className=\"w-4 h-4\" />\r\n              <span>Thß╗¥i gian ─æß╗ìc: ~{estimatedTime} ph├║t</span>\r\n            </div>\r\n          )}\r\n          <div className=\"flex items-center gap-2\">\r\n            <Clock className=\"w-4 h-4\" />\r\n            <span>─É├ú xem: {formatTime(timeSpent)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-hidden relative\">\r\n        {isIframeSupported ? (\r\n          <iframe\r\n            src={url}\r\n            className=\"w-full h-full border-0\"\r\n            title={title}\r\n            sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\r\n            onError={() => setIsIframeSupported(false)}\r\n          />\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center h-full p-8 text-center\">\r\n            <ExternalLink className=\"w-16 h-16 text-gray-400 mb-4\" />\r\n            <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n              Kh├┤ng thß╗â xem trß╗▒c tiß║┐p\r\n            </h4>\r\n            <p className=\"text-gray-600 mb-6 max-w-md\">\r\n              Trang web n├áy kh├┤ng hß╗ù trß╗ú xem nh├║ng. Vui l├▓ng nhß║Ñn n├║t b├¬n d╞░ß╗¢i ─æß╗â mß╗ƒ trong tab mß╗¢i.\r\n            </p>\r\n            <button\r\n              onClick={handleOpenExternal}\r\n              className=\"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              <ExternalLink className=\"w-5 h-5\" />\r\n              Mß╗ƒ trong tab mß╗¢i\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Confirmation Footer */}\r\n      <div className=\"bg-gray-50 border-t border-gray-200 p-4\">\r\n        {!confirmed ? (\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex-1\">\r\n              <p className=\"text-sm text-gray-700 mb-1\">\r\n                ≡ƒôû ─É├ú ─æß╗ìc xong t├ái liß╗çu n├áy?\r\n              </p>\r\n              <p className=\"text-xs text-gray-500\">\r\n                X├íc nhß║¡n ─æß╗â tiß║┐p tß╗Ñc (hoß║╖c mß╗ƒ trong tab mß╗¢i ─æß╗â ─æß╗ìc)\r\n              </p>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={handleOpenExternal}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm\"\r\n              >\r\n                Mß╗ƒ tab mß╗¢i\r\n              </button>\r\n              <button\r\n                onClick={handleConfirm}\r\n                className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium\"\r\n              >\r\n                Γ£ô ─É├ú ─æß╗ìc xong\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center justify-center gap-2 text-green-600 py-2\">\r\n            <CheckCircle className=\"w-5 h-5\" />\r\n            <span className=\"font-medium\">─É├ú x├íc nhß║¡n ho├án th├ánh</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ResourceViewers\\PDFViewer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-700\">\r\n            ≡ƒôû ─É├ú xem: {pagesViewed.size}/{totalPages} trang ({progressPercent}%)\r\n          </span>","line":164,"column":43,"nodeType":"JSXText","endLine":165,"endColumn":24},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-700\">\r\n            ≡ƒôû ─É├ú xem: {pagesViewed.size}/{totalPages} trang ({progressPercent}%)\r\n          </span>","line":165,"column":55,"nodeType":"JSXText","endLine":165,"endColumn":63},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">\r\n            ΓÅ▒∩╕Å Thß╗¥i gian trang n├áy: {pageViewTimes[currentPage] || 0}s\r\n          </span>","line":167,"column":43,"nodeType":"JSXText","endLine":168,"endColumn":37},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">\r\n            ΓÅ▒∩╕Å Thß╗¥i gian trang n├áy: {pageViewTimes[currentPage] || 0}s\r\n          </span>","line":168,"column":70,"nodeType":"JSXText","endLine":169,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { ChevronLeft, ChevronRight, ZoomIn, ZoomOut, Download } from 'lucide-react';\r\n\r\ninterface PDFViewerProps {\r\n  url: string;\r\n  title: string;\r\n  onProgressUpdate: (progress: {\r\n    pagesViewed: number[];\r\n    pageViewTimes: Record<number, number>;\r\n  }) => void;\r\n  initialProgress?: {\r\n    pagesViewed?: number[];\r\n    pageViewTimes?: Record<number, number>;\r\n  };\r\n}\r\n\r\nexport const PDFViewer: React.FC<PDFViewerProps> = ({\r\n  url,\r\n  title,\r\n  onProgressUpdate,\r\n  initialProgress\r\n}) => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [zoom, setZoom] = useState(1);\r\n  const [pagesViewed, setPagesViewed] = useState<Set<number>>(\r\n    new Set(initialProgress?.pagesViewed || [])\r\n  );\r\n  const [pageViewTimes, setPageViewTimes] = useState<Record<number, number>>(\r\n    initialProgress?.pageViewTimes || {}\r\n  );\r\n  const [pageStartTime] = useState<number>(Date.now());\r\n\r\n  useEffect(() => {\r\n    // Track page view time\r\n    const interval = setInterval(() => {\r\n      const newPageViewTimes = {\r\n        ...pageViewTimes,\r\n        [currentPage]: (pageViewTimes[currentPage] || 0) + 1\r\n      };\r\n      setPageViewTimes(newPageViewTimes);\r\n      \r\n      const newPagesViewed = new Set(pagesViewed).add(currentPage);\r\n      setPagesViewed(newPagesViewed);\r\n      \r\n      onProgressUpdate({\r\n        pagesViewed: Array.from(newPagesViewed),\r\n        pageViewTimes: newPageViewTimes\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [currentPage, pageStartTime, onProgressUpdate, pageViewTimes, pagesViewed]);\r\n\r\n  useEffect(() => {\r\n    // Mark page as viewed\r\n    const newPagesViewed = new Set(pagesViewed).add(currentPage);\r\n    setPagesViewed(newPagesViewed);\r\n  }, [currentPage, pagesViewed]);\r\n\r\n  const handlePrevPage = () => {\r\n    if (currentPage > 1) {\r\n      setCurrentPage(currentPage - 1);\r\n    }\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    if (currentPage < totalPages) {\r\n      setCurrentPage(currentPage + 1);\r\n    }\r\n  };\r\n\r\n  const handleZoomIn = () => {\r\n    setZoom(Math.min(zoom + 0.25, 3));\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    setZoom(Math.max(zoom - 0.25, 0.5));\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = title || 'document.pdf';\r\n    link.click();\r\n  };\r\n\r\n  const progressPercent = totalPages > 0 ? Math.round((pagesViewed.size / totalPages) * 100) : 0;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gray-100 rounded-lg overflow-hidden\">\r\n      {/* Toolbar */}\r\n      <div className=\"bg-white border-b border-gray-200 p-3 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-3\">\r\n          {/* Navigation */}\r\n          <button\r\n            onClick={handlePrevPage}\r\n            disabled={currentPage === 1}\r\n            className=\"p-2 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronLeft className=\"w-5 h-5\" />\r\n          </button>\r\n          \r\n          <div className=\"flex items-center gap-2\">\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max={totalPages}\r\n              value={currentPage}\r\n              onChange={(e) => {\r\n                const page = parseInt(e.target.value);\r\n                if (page >= 1 && page <= totalPages) {\r\n                  setCurrentPage(page);\r\n                }\r\n              }}\r\n              className=\"w-16 px-2 py-1 border border-gray-300 rounded text-center\"\r\n            />\r\n            <span className=\"text-gray-600\">/ {totalPages || '?'}</span>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleNextPage}\r\n            disabled={currentPage === totalPages}\r\n            className=\"p-2 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronRight className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3\">\r\n          {/* Zoom */}\r\n          <button\r\n            onClick={handleZoomOut}\r\n            className=\"p-2 rounded hover:bg-gray-100\"\r\n            disabled={zoom <= 0.5}\r\n          >\r\n            <ZoomOut className=\"w-5 h-5\" />\r\n          </button>\r\n          <span className=\"text-sm text-gray-600 w-12 text-center\">\r\n            {Math.round(zoom * 100)}%\r\n          </span>\r\n          <button\r\n            onClick={handleZoomIn}\r\n            className=\"p-2 rounded hover:bg-gray-100\"\r\n            disabled={zoom >= 3}\r\n          >\r\n            <ZoomIn className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Download */}\r\n          <button\r\n            onClick={handleDownload}\r\n            className=\"p-2 rounded hover:bg-gray-100\"\r\n            title=\"Tß║úi xuß╗æng\"\r\n          >\r\n            <Download className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"bg-blue-50 px-4 py-2 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between text-sm mb-1\">\r\n          <span className=\"text-gray-700\">\r\n            ≡ƒôû ─É├ú xem: {pagesViewed.size}/{totalPages} trang ({progressPercent}%)\r\n          </span>\r\n          <span className=\"text-gray-600\">\r\n            ΓÅ▒∩╕Å Thß╗¥i gian trang n├áy: {pageViewTimes[currentPage] || 0}s\r\n          </span>\r\n        </div>\r\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n          <div\r\n            className=\"bg-blue-600 h-2 rounded-full transition-all\"\r\n            style={{ width: `${progressPercent}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* PDF Viewer */}\r\n      <div className=\"flex-1 overflow-auto p-4 flex items-center justify-center\">\r\n        <div\r\n          style={{\r\n            transform: `scale(${zoom})`,\r\n            transformOrigin: 'top center',\r\n            transition: 'transform 0.2s'\r\n          }}\r\n        >\r\n          <iframe\r\n            src={`${url}#page=${currentPage}&toolbar=0&navpanes=0`}\r\n            className=\"w-full h-screen border border-gray-300 rounded shadow-lg\"\r\n            title={title}\r\n            onLoad={() => {\r\n              // Try to detect total pages (not always possible with iframe)\r\n              // This is a simplified version\r\n              if (!totalPages) {\r\n                setTotalPages(10); // Default fallback\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Page Thumbnails/Navigator */}\r\n      <div className=\"bg-white border-t border-gray-200 p-2 overflow-x-auto\">\r\n        <div className=\"flex gap-2\">\r\n          {Array.from({ length: totalPages || 10 }, (_, i) => i + 1).map(pageNum => (\r\n            <button\r\n              key={pageNum}\r\n              onClick={() => setCurrentPage(pageNum)}\r\n              className={`relative flex-shrink-0 w-12 h-16 border-2 rounded transition-all ${\r\n                pageNum === currentPage\r\n                  ? 'border-blue-500 bg-blue-50'\r\n                  : pagesViewed.has(pageNum)\r\n                  ? 'border-green-300 bg-green-50'\r\n                  : 'border-gray-300 bg-white'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center justify-center h-full text-xs font-medium\">\r\n                {pageNum}\r\n              </div>\r\n              {pagesViewed.has(pageNum) && (\r\n                <div className=\"absolute top-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white\" />\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ResourceViewers\\VideoViewer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"absolute bottom-4 left-4 right-4 bg-black/70 text-white text-sm px-3 py-2 rounded\">\r\n          ΓÅ▒∩╕Å ─É├ú xem: {formatTime(totalWatchedSeconds)} | \r\n          ≡ƒôè Tiß║┐n ─æß╗Ö: {Math.round((totalWatchedSeconds / (duration || 1)) * 100)}%\r\n        </div>","line":153,"column":108,"nodeType":"JSXText","endLine":154,"endColumn":22},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"absolute bottom-4 left-4 right-4 bg-black/70 text-white text-sm px-3 py-2 rounded\">\r\n          ΓÅ▒∩╕Å ─É├ú xem: {formatTime(totalWatchedSeconds)} | \r\n          ≡ƒôè Tiß║┐n ─æß╗Ö: {Math.round((totalWatchedSeconds / (duration || 1)) * 100)}%\r\n        </div>","line":154,"column":55,"nodeType":"JSXText","endLine":155,"endColumn":23},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm\">{playbackRate}x</span>","line":237,"column":57,"nodeType":"JSXText","endLine":237,"endColumn":58},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                    key={rate}\r\n                    onClick={() => handlePlaybackRateChange(rate)}\r\n                    className={`block w-full text-left px-3 py-1 rounded hover:bg-gray-700 text-sm ${\r\n                      rate === playbackRate ? 'text-blue-400' : ''\r\n                    }`}\r\n                  >\r\n                    {rate}x\r\n                  </button>","line":248,"column":27,"nodeType":"JSXText","endLine":249,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"mt-2 text-xs text-gray-300\">\r\n          ΓÅ▒∩╕Å Tß╗òng thß╗¥i gian xem: {formatTime(totalWatchedSeconds)} | \r\n          ≡ƒôè Tiß║┐n ─æß╗Ö: {Math.round((currentTime / duration) * 100)}%\r\n        </div>","line":265,"column":53,"nodeType":"JSXText","endLine":266,"endColumn":34},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"mt-2 text-xs text-gray-300\">\r\n          ΓÅ▒∩╕Å Tß╗òng thß╗¥i gian xem: {formatTime(totalWatchedSeconds)} | \r\n          ≡ƒôè Tiß║┐n ─æß╗Ö: {Math.round((currentTime / duration) * 100)}%\r\n        </div>","line":266,"column":67,"nodeType":"JSXText","endLine":267,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useEffect, useState } from 'react';\r\nimport { Play, Pause, Volume2, VolumeX, Maximize, Settings } from 'lucide-react';\r\n\r\ninterface VideoViewerProps {\r\n  url: string;\r\n  title: string;\r\n  onProgressUpdate: (progress: {\r\n    secondsWatched: number;\r\n    watchPercent: number;\r\n    lastWatchPosition: number;\r\n  }) => void;\r\n  initialProgress?: {\r\n    lastWatchPosition?: number;\r\n    secondsWatched?: number;\r\n  };\r\n}\r\n\r\nexport const VideoViewer: React.FC<VideoViewerProps> = ({\r\n  url,\r\n  title,\r\n  onProgressUpdate,\r\n  initialProgress\r\n}) => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const progressIntervalRef = useRef<NodeJS.Timeout>();\r\n  \r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(1);\r\n  const [playbackRate, setPlaybackRate] = useState(1);\r\n  const [showControls, setShowControls] = useState(false);\r\n  const [totalWatchedSeconds, setTotalWatchedSeconds] = useState(\r\n    initialProgress?.secondsWatched || 0\r\n  );\r\n\r\n  // Extract video ID from YouTube URL\r\n  const getYouTubeVideoId = (url: string) => {\r\n    const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/;\r\n    const match = url.match(regExp);\r\n    return match && match[2].length === 11 ? match[2] : null;\r\n  };\r\n\r\n  const videoId = getYouTubeVideoId(url);\r\n  const isYouTube = !!videoId;\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current && initialProgress?.lastWatchPosition) {\r\n      videoRef.current.currentTime = initialProgress.lastWatchPosition;\r\n    }\r\n  }, [initialProgress?.lastWatchPosition]);\r\n\r\n  useEffect(() => {\r\n    // Track progress every second when playing\r\n    if (isPlaying) {\r\n      progressIntervalRef.current = setInterval(() => {\r\n        if (videoRef.current) {\r\n          const current = videoRef.current.currentTime;\r\n          const total = videoRef.current.duration;\r\n          const watched = totalWatchedSeconds + 1;\r\n          \r\n          setTotalWatchedSeconds(watched);\r\n          setCurrentTime(current);\r\n          \r\n          onProgressUpdate({\r\n            secondsWatched: watched,\r\n            watchPercent: total > 0 ? Math.round((current / total) * 100) : 0,\r\n            lastWatchPosition: current\r\n          });\r\n        }\r\n      }, 1000);\r\n    } else {\r\n      if (progressIntervalRef.current) {\r\n        clearInterval(progressIntervalRef.current);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (progressIntervalRef.current) {\r\n        clearInterval(progressIntervalRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying, totalWatchedSeconds, onProgressUpdate]);\r\n\r\n  const handlePlayPause = () => {\r\n    if (videoRef.current) {\r\n      if (isPlaying) {\r\n        videoRef.current.pause();\r\n      } else {\r\n        videoRef.current.play();\r\n      }\r\n      setIsPlaying(!isPlaying);\r\n    }\r\n  };\r\n\r\n  const handleMuteToggle = () => {\r\n    if (videoRef.current) {\r\n      videoRef.current.muted = !isMuted;\r\n      setIsMuted(!isMuted);\r\n    }\r\n  };\r\n\r\n  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newVolume = parseFloat(e.target.value);\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = newVolume;\r\n      setVolume(newVolume);\r\n      setIsMuted(newVolume === 0);\r\n    }\r\n  };\r\n\r\n  const handleSeek = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newTime = parseFloat(e.target.value);\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = newTime;\r\n      setCurrentTime(newTime);\r\n    }\r\n  };\r\n\r\n  const handlePlaybackRateChange = (rate: number) => {\r\n    if (videoRef.current) {\r\n      videoRef.current.playbackRate = rate;\r\n      setPlaybackRate(rate);\r\n    }\r\n  };\r\n\r\n  const handleFullscreen = () => {\r\n    if (videoRef.current) {\r\n      if (videoRef.current.requestFullscreen) {\r\n        videoRef.current.requestFullscreen();\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  if (isYouTube) {\r\n    // YouTube embed with API for tracking\r\n    return (\r\n      <div className=\"relative w-full\" style={{ paddingBottom: '56.25%' }}>\r\n        <iframe\r\n          src={`https://www.youtube.com/embed/${videoId}?enablejsapi=1&start=${Math.floor(initialProgress?.lastWatchPosition || 0)}`}\r\n          title={title}\r\n          className=\"absolute top-0 left-0 w-full h-full rounded-lg\"\r\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n          allowFullScreen\r\n        />\r\n        <div className=\"absolute bottom-4 left-4 right-4 bg-black/70 text-white text-sm px-3 py-2 rounded\">\r\n          ΓÅ▒∩╕Å ─É├ú xem: {formatTime(totalWatchedSeconds)} | \r\n          ≡ƒôè Tiß║┐n ─æß╗Ö: {Math.round((totalWatchedSeconds / (duration || 1)) * 100)}%\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Direct video player\r\n  return (\r\n    <div \r\n      className=\"relative w-full bg-black rounded-lg overflow-hidden\"\r\n      onMouseEnter={() => setShowControls(true)}\r\n      onMouseLeave={() => setShowControls(false)}\r\n    >\r\n      <video\r\n        ref={videoRef}\r\n        src={url}\r\n        className=\"w-full\"\r\n        onLoadedMetadata={(e) => setDuration(e.currentTarget.duration)}\r\n        onTimeUpdate={(e) => setCurrentTime(e.currentTarget.currentTime)}\r\n        onPlay={() => setIsPlaying(true)}\r\n        onPause={() => setIsPlaying(false)}\r\n      />\r\n\r\n      {/* Custom Controls */}\r\n      <div \r\n        className={`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4 transition-opacity ${\r\n          showControls ? 'opacity-100' : 'opacity-0'\r\n        }`}\r\n      >\r\n        {/* Progress Bar */}\r\n        <input\r\n          type=\"range\"\r\n          min=\"0\"\r\n          max={duration}\r\n          value={currentTime}\r\n          onChange={handleSeek}\r\n          className=\"w-full mb-2 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer\"\r\n          style={{\r\n            background: `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${(currentTime / duration) * 100}%, #4b5563 ${(currentTime / duration) * 100}%, #4b5563 100%)`\r\n          }}\r\n        />\r\n\r\n        <div className=\"flex items-center justify-between text-white\">\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* Play/Pause */}\r\n            <button\r\n              onClick={handlePlayPause}\r\n              className=\"hover:text-blue-400 transition-colors\"\r\n            >\r\n              {isPlaying ? <Pause className=\"w-6 h-6\" /> : <Play className=\"w-6 h-6\" />}\r\n            </button>\r\n\r\n            {/* Volume */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <button\r\n                onClick={handleMuteToggle}\r\n                className=\"hover:text-blue-400 transition-colors\"\r\n              >\r\n                {isMuted ? <VolumeX className=\"w-5 h-5\" /> : <Volume2 className=\"w-5 h-5\" />}\r\n              </button>\r\n              <input\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max=\"1\"\r\n                step=\"0.1\"\r\n                value={volume}\r\n                onChange={handleVolumeChange}\r\n                className=\"w-20 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer\"\r\n              />\r\n            </div>\r\n\r\n            {/* Time */}\r\n            <span className=\"text-sm\">\r\n              {formatTime(currentTime)} / {formatTime(duration)}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* Playback Speed */}\r\n            <div className=\"relative group\">\r\n              <button className=\"hover:text-blue-400 transition-colors flex items-center gap-1\">\r\n                <Settings className=\"w-5 h-5\" />\r\n                <span className=\"text-sm\">{playbackRate}x</span>\r\n              </button>\r\n              <div className=\"absolute bottom-full right-0 mb-2 bg-gray-800 rounded-lg p-2 hidden group-hover:block\">\r\n                {[0.5, 0.75, 1, 1.25, 1.5, 2].map(rate => (\r\n                  <button\r\n                    key={rate}\r\n                    onClick={() => handlePlaybackRateChange(rate)}\r\n                    className={`block w-full text-left px-3 py-1 rounded hover:bg-gray-700 text-sm ${\r\n                      rate === playbackRate ? 'text-blue-400' : ''\r\n                    }`}\r\n                  >\r\n                    {rate}x\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Fullscreen */}\r\n            <button\r\n              onClick={handleFullscreen}\r\n              className=\"hover:text-blue-400 transition-colors\"\r\n            >\r\n              <Maximize className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats */}\r\n        <div className=\"mt-2 text-xs text-gray-300\">\r\n          ΓÅ▒∩╕Å Tß╗òng thß╗¥i gian xem: {formatTime(totalWatchedSeconds)} | \r\n          ≡ƒôè Tiß║┐n ─æß╗Ö: {Math.round((currentTime / duration) * 100)}%\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ResourceViewers\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ReviewForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\components\\ReviewList.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Ch╞░a c├│ ─æ├ính gi├í n├áo</h3>","line":96,"column":64,"nodeType":"JSXText","endLine":96,"endColumn":84},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600\">H├úy l├á ng╞░ß╗¥i ─æß║ºu ti├¬n ─æ├ính gi├í quiz n├áy!</p>","line":97,"column":38,"nodeType":"JSXText","endLine":97,"endColumn":78},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm text-gray-500\">\r\n                ({review.rating}/5 sao)\r\n              </span>","line":150,"column":33,"nodeType":"JSXText","endLine":151,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Hß╗»u ├¡ch ({review.helpful?.length || 0})</span>","line":179,"column":25,"nodeType":"JSXText","endLine":179,"endColumn":34},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>B├ío c├ío</span>","line":187,"column":25,"nodeType":"JSXText","endLine":187,"endColumn":32},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-xs text-gray-500\">\r\n                  ─É├ú chß╗ënh sß╗¡a {formatDate(review.updatedAt)}\r\n                </span>","line":192,"column":57,"nodeType":"JSXText","endLine":193,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Star, ThumbsUp, Flag, Calendar, User, MoreVertical } from 'lucide-react';\r\nimport { QuizReview } from '../types/review';\r\n\r\ninterface ReviewListProps {\r\n  reviews: QuizReview[];\r\n  loading: boolean;\r\n  onHelpfulClick?: (reviewId: string) => void;\r\n  onReportClick?: (reviewId: string) => void;\r\n}\r\n\r\nconst ReviewList: React.FC<ReviewListProps> = ({\r\n  reviews,\r\n  loading,\r\n  onHelpfulClick,\r\n  onReportClick\r\n}) => {\r\n  const [expandedReviews, setExpandedReviews] = useState<Set<string>>(new Set());\r\n\r\n  const toggleExpanded = (reviewId: string) => {\r\n    const newExpanded = new Set(expandedReviews);\r\n    if (newExpanded.has(reviewId)) {\r\n      newExpanded.delete(reviewId);\r\n    } else {\r\n      newExpanded.add(reviewId);\r\n    }\r\n    setExpandedReviews(newExpanded);\r\n  };\r\n\r\n  const formatDate = (date: any) => {\r\n    if (!date) return '';\r\n    const d = date.toDate ? date.toDate() : new Date(date);\r\n    return d.toLocaleDateString('vi-VN', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  const renderStars = (rating: number) => {\r\n    return (\r\n      <div className=\"flex items-center space-x-1\">\r\n        {[1, 2, 3, 4, 5].map((star) => (\r\n          <Star\r\n            key={star}\r\n            className={`w-4 h-4 ${\r\n              star <= rating\r\n                ? 'fill-yellow-400 text-yellow-400'\r\n                : 'text-gray-300'\r\n            }`}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const getRatingText = (rating: number) => {\r\n    switch (rating) {\r\n      case 1: return 'Rß║Ñt tß╗ç';\r\n      case 2: return 'Tß╗ç';\r\n      case 3: return 'B├¼nh th╞░ß╗¥ng';\r\n      case 4: return 'Tß╗æt';\r\n      case 5: return 'Rß║Ñt tß╗æt';\r\n      default: return '';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {[1, 2, 3].map((i) => (\r\n          <div key={i} className=\"animate-pulse\">\r\n            <div className=\"bg-gray-100 rounded-lg p-4\">\r\n              <div className=\"flex items-center space-x-3 mb-3\">\r\n                <div className=\"w-10 h-10 bg-gray-300 rounded-full\"></div>\r\n                <div className=\"flex-1\">\r\n                  <div className=\"h-4 bg-gray-300 rounded w-1/4 mb-1\"></div>\r\n                  <div className=\"h-3 bg-gray-300 rounded w-1/3\"></div>\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"h-4 bg-gray-300 rounded w-full\"></div>\r\n                <div className=\"h-4 bg-gray-300 rounded w-3/4\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (reviews.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <Star className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Ch╞░a c├│ ─æ├ính gi├í n├áo</h3>\r\n        <p className=\"text-gray-600\">H├úy l├á ng╞░ß╗¥i ─æß║ºu ti├¬n ─æ├ính gi├í quiz n├áy!</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {reviews.map((review) => {\r\n        const isExpanded = expandedReviews.has(review.id);\r\n        const shouldShowExpand = review.comment && review.comment.length > 200;\r\n        const displayComment = shouldShowExpand && !isExpanded \r\n          ? review.comment.substring(0, 200) + '...'\r\n          : review.comment;\r\n\r\n        return (\r\n          <div key={review.id} className=\"bg-white rounded-lg border border-gray-100 p-6 hover:shadow-md transition-shadow\">\r\n            {/* Header */}\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\r\n                  {review.userAvatar ? (\r\n                    <img\r\n                      src={review.userAvatar}\r\n                      alt={review.userName}\r\n                      className=\"w-full h-full rounded-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <User className=\"w-5 h-5 text-white\" />\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-semibold text-gray-900\">{review.userName || 'Ng╞░ß╗¥i d├╣ng ß║⌐n danh'}</h4>\r\n                  <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\r\n                    <Calendar className=\"w-3 h-3\" />\r\n                    <span>{formatDate(review.createdAt)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                <button className=\"p-1 text-gray-400 hover:text-gray-600 rounded\">\r\n                  <MoreVertical className=\"w-4 h-4\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Rating */}\r\n            <div className=\"flex items-center space-x-3 mb-4\">\r\n              {renderStars(review.rating)}\r\n              <span className=\"text-sm font-medium text-gray-700\">\r\n                {getRatingText(review.rating)}\r\n              </span>\r\n              <span className=\"text-sm text-gray-500\">\r\n                ({review.rating}/5 sao)\r\n              </span>\r\n            </div>\r\n\r\n            {/* Comment */}\r\n            {review.comment && (\r\n              <div className=\"mb-4\">\r\n                <p className=\"text-gray-700 leading-relaxed\">\r\n                  {displayComment}\r\n                </p>\r\n                {shouldShowExpand && (\r\n                  <button\r\n                    onClick={() => toggleExpanded(review.id)}\r\n                    className=\"mt-2 text-blue-600 hover:text-blue-700 text-sm font-medium\"\r\n                  >\r\n                    {isExpanded ? 'Thu gß╗ìn' : 'Xem th├¬m'}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex items-center justify-between pt-3 border-t border-gray-100\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <button\r\n                  onClick={() => onHelpfulClick?.(review.id)}\r\n                  className=\"flex items-center space-x-2 text-sm text-gray-600 hover:text-green-600 transition-colors\"\r\n                >\r\n                  <ThumbsUp className=\"w-4 h-4\" />\r\n                  <span>Hß╗»u ├¡ch ({review.helpful?.length || 0})</span>\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={() => onReportClick?.(review.id)}\r\n                  className=\"flex items-center space-x-2 text-sm text-gray-600 hover:text-red-600 transition-colors\"\r\n                >\r\n                  <Flag className=\"w-4 h-4\" />\r\n                  <span>B├ío c├ío</span>\r\n                </button>\r\n              </div>\r\n\r\n              {review.updatedAt && review.updatedAt !== review.createdAt && (\r\n                <span className=\"text-xs text-gray-500\">\r\n                  ─É├ú chß╗ënh sß╗¡a {formatDate(review.updatedAt)}\r\n                </span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReviewList;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\hooks\\useAutoSaveDraft.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\AdvancedAIGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\FileUploadDemo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\FileUploadSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\HavePasswordStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\PrivacyStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\QuestionEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\QuestionsStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\QuizBulkImport.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\QuizInfoStep.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm font-medium text-gray-700 mb-2\">Preview:</p>","line":208,"column":71,"nodeType":"JSXText","endLine":208,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-green-600\">Γ£ô</span>","line":280,"column":54,"nodeType":"JSXText","endLine":280,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { QuizFormData } from '../types';\r\nimport { categories, difficulties } from '../constants';\r\nimport RichTextEditor from '../../../../../shared/components/ui/RichTextEditor';\r\nimport RichTextViewer from '../../../../../shared/components/ui/RichTextViewer';\r\nimport ImageUploader from '../../../../../components/ImageUploader';\r\nimport { BookOpen, Clock, Tag, Star, FileText, ImageIcon, Lock, Key } from 'lucide-react';\r\n\r\ninterface QuizInfoStepProps {\r\n  quiz: QuizFormData;\r\n  setQuiz: React.Dispatch<React.SetStateAction<QuizFormData>>;\r\n}\r\n\r\nconst QuizInfoStep: React.FC<QuizInfoStepProps> = ({ quiz, setQuiz }) => {\r\n  const { t } = useTranslation();\r\n  \r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Header */}\r\n      <div className=\"text-center space-y-2\">\r\n        <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto\">\r\n          <BookOpen className=\"w-8 h-8 text-white\" />\r\n        </div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">{t('createQuiz.info.basicInfo')}</h2>\r\n        <p className=\"text-gray-600\">{t('createQuiz.info.fillInfo')}</p>\r\n      </div>\r\n\r\n      {/* Form */}\r\n      <div className=\"space-y-6\">\r\n        {/* Title */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <FileText className=\"w-4 h-4\" />\r\n            {t('createQuiz.info.titleLabel')}\r\n          </label>\r\n          <input\r\n            className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg\"\r\n            placeholder={t('createQuiz.info.titlePlaceholder')}\r\n            value={quiz.title}\r\n            onChange={e => setQuiz(q => ({ ...q, title: e.target.value }))}\r\n          />\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <FileText className=\"w-4 h-4\" />\r\n            {t('createQuiz.info.descriptionLabel')}\r\n          </label>\r\n          <RichTextEditor\r\n            value={quiz.description}\r\n            onChange={(value: string) => setQuiz(q => ({ ...q, description: value }))}\r\n            placeholder={t('createQuiz.info.descriptionPlaceholder')}\r\n            height={200}\r\n          />\r\n        </div>\r\n\r\n        {/* Category & Difficulty */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div className=\"space-y-2\">\r\n            <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n              <Tag className=\"w-4 h-4\" />\r\n              {t('createQuiz.info.categoryLabel')}\r\n            </label>\r\n            <select\r\n              className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n              value={quiz.category}\r\n              onChange={e => setQuiz(q => ({ ...q, category: e.target.value }))}\r\n            >\r\n              <option value=\"\">{t('createQuiz.info.categoryPlaceholder')}</option>\r\n              {categories.map(c => (\r\n                <option key={c.value} value={c.value}>{t(c.labelKey)}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n              <Star className=\"w-4 h-4\" />\r\n              {t('createQuiz.info.difficultyLabel')}\r\n            </label>\r\n            <select\r\n              className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n              value={quiz.difficulty}\r\n              onChange={e => setQuiz(q => ({ ...q, difficulty: e.target.value }))}\r\n            >\r\n              <option value=\"\">{t('createQuiz.info.difficultyPlaceholder')}</option>\r\n              {difficulties.map(d => (\r\n                <option key={d.value} value={d.value}>{t(d.labelKey)}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Duration only */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <Clock className=\"w-4 h-4\" />\r\n            {t('createQuiz.info.durationLabel')}\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n            min={5}\r\n            max={120}\r\n            value={quiz.duration}\r\n            onChange={e => setQuiz(q => ({ ...q, duration: parseInt(e.target.value) || 15 }))}\r\n            placeholder={t('createQuiz.info.durationPlaceholder')}\r\n          />\r\n          <p className=\"text-sm text-gray-500\">{t('quizCreation.from5to120minutes')}</p>\r\n        </div>\r\n\r\n        {/* Tags */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <Tag className=\"w-4 h-4\" />\r\n            {t('quizCreation.tagsOptional')}\r\n          </label>\r\n          <input\r\n            className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n            placeholder={t('placeholders.enterTags')}\r\n            value={quiz.tags?.join(', ') || ''}\r\n            onChange={e => setQuiz(q => ({ \r\n              ...q, \r\n              tags: e.target.value.split(',').map(tag => tag.trim()).filter(tag => tag) \r\n            }))}\r\n          />\r\n          <p className=\"text-sm text-gray-500\">{t('quizCreation.tagsExample')}</p>\r\n        </div>\r\n\r\n        {/* Cover Image Upload */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <ImageIcon className=\"w-4 h-4\" />\r\n            {t('quizCreation.coverImage')}\r\n          </label>\r\n          \r\n          {/* Tab chß╗ìn Upload hoß║╖c URL */}\r\n          <div className=\"flex gap-2 mb-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const uploadMode = document.getElementById('upload-mode');\r\n                const urlMode = document.getElementById('url-mode');\r\n                if (uploadMode && urlMode) {\r\n                  uploadMode.classList.remove('hidden');\r\n                  urlMode.classList.add('hidden');\r\n                }\r\n              }}\r\n              className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors\"\r\n            >\r\n              {t('quizCreation.uploadImage')}\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const uploadMode = document.getElementById('upload-mode');\r\n                const urlMode = document.getElementById('url-mode');\r\n                if (uploadMode && urlMode) {\r\n                  uploadMode.classList.add('hidden');\r\n                  urlMode.classList.remove('hidden');\r\n                }\r\n              }}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors\"\r\n            >\r\n              {t('quizCreation.enterUrl')}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Upload Mode */}\r\n          <div id=\"upload-mode\">\r\n            <ImageUploader\r\n              onUploadSuccess={(result) => {\r\n                if (result.success && result.originalUrl) {\r\n                  setQuiz(q => ({ ...q, imageUrl: result.originalUrl! }));\r\n                }\r\n              }}\r\n              onUploadError={(error) => {\r\n                console.error('Upload error:', error);\r\n              }}\r\n              options={{\r\n                folder: 'covers',\r\n                maxSizeKB: 3072, // 3MB\r\n                allowedTypes: ['image/jpeg', 'image/png', 'image/webp'],\r\n                generateThumbnails: true\r\n              }}\r\n              previewUrl={quiz.imageUrl || undefined}\r\n              label=\"\"\r\n              showThumbnails={false}\r\n              compressBeforeUpload={true}\r\n              instantUpload={true}\r\n              ultraFast={true}\r\n            />\r\n          </div>\r\n\r\n          {/* URL Mode */}\r\n          <div id=\"url-mode\" className=\"hidden\">\r\n            <input\r\n              type=\"url\"\r\n              value={quiz.imageUrl || ''}\r\n              onChange={(e) => setQuiz(q => ({ ...q, imageUrl: e.target.value }))}\r\n              placeholder={t('placeholders.imageUrl')}\r\n              className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n            />\r\n            {quiz.imageUrl && (\r\n              <div className=\"mt-3\">\r\n                <p className=\"text-sm font-medium text-gray-700 mb-2\">Preview:</p>\r\n                <img \r\n                  src={quiz.imageUrl} \r\n                  alt={t('createQuiz.info.previewImageAlt')} \r\n                  className=\"w-full h-48 object-cover rounded-lg border-2 border-gray-200\"\r\n                  onError={(e) => {\r\n                    (e.target as HTMLImageElement).src = 'https://via.placeholder.com/400x200?text=Invalid+Image+URL';\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <p className=\"text-xs text-gray-500\">\r\n            {t('quizCreation.coverImageHint')}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Password Protection */}\r\n        <div className=\"space-y-3\">\r\n          <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <Lock className=\"w-4 h-4\" />\r\n            {t('quizCreation.quizSecurity')}\r\n          </label>\r\n          \r\n          {/* Have Password Checkbox */}\r\n          <div className=\"flex items-center gap-3 p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-200\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"havePassword\"\r\n              checked={quiz.havePassword === 'password'}\r\n              onChange={(e) => {\r\n                setQuiz(q => ({\r\n                  ...q,\r\n                  havePassword: e.target.checked ? 'password' : 'public',\r\n                  password: e.target.checked ? q.password : ''\r\n                }));\r\n              }}\r\n              className=\"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500\"\r\n            />\r\n            <label htmlFor=\"havePassword\" className=\"flex-1 cursor-pointer\">\r\n              <div className=\"font-semibold text-purple-900 flex items-center gap-2\">\r\n                {t('quizCreation.requirePassword')}\r\n              </div>\r\n              <p className=\"text-sm text-purple-700 mt-1\">\r\n                {t('quizCreation.quizVisibleNeedPassword')}\r\n              </p>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Password Input - Show when checkbox is checked */}\r\n          {quiz.havePassword === 'password' && (\r\n            <div className=\"ml-4 space-y-2 animate-in fade-in duration-300\">\r\n              <label className=\"flex items-center gap-2 text-sm font-medium text-gray-700\">\r\n                <Key className=\"w-4 h-4\" />\r\n                {t('quizCreation.passwordRequired')}\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"password\"\r\n                  value={quiz.password || ''}\r\n                  onChange={(e) => setQuiz(q => ({ ...q, password: e.target.value }))}\r\n                  placeholder={t('placeholders.minPasswordLength')}\r\n                  minLength={6}\r\n                  className={`w-full px-4 py-3 pr-12 border-2 rounded-xl focus:outline-none focus:ring-2 transition-all ${\r\n                    quiz.password && quiz.password.length >= 6\r\n                      ? 'border-green-300 focus:border-green-500 focus:ring-green-500/20'\r\n                      : 'border-purple-200 focus:border-purple-500 focus:ring-purple-500/20'\r\n                  }`}\r\n                />\r\n                <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\r\n                  {quiz.password && quiz.password.length >= 6 ? (\r\n                    <span className=\"text-green-600\">Γ£ô</span>\r\n                  ) : (\r\n                    <Lock className=\"w-5 h-5 text-gray-400\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n              {quiz.password && quiz.password.length < 6 && (\r\n                <p className=\"text-sm text-red-600 flex items-center gap-2\">\r\n                  <span className=\"w-1 h-1 bg-red-600 rounded-full\" />\r\n                  {t('quizCreation.passwordMinLength')}\r\n                </p>\r\n              )}\r\n              <p className=\"text-xs text-gray-600\">\r\n                {t('quizCreation.passwordHint')}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Additional Settings */}\r\n        <div className=\"space-y-3\">\r\n          <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <Star className=\"w-4 h-4\" />\r\n            {t('quizCreation.additionalSettings')}\r\n          </label>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {/* Allow Retake */}\r\n            <div className=\"flex items-center gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"allowRetake\"\r\n                checked={quiz.allowRetake !== false}\r\n                onChange={(e) => setQuiz(q => ({ ...q, allowRetake: e.target.checked }))}\r\n                className=\"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n              <label htmlFor=\"allowRetake\" className=\"flex-1 cursor-pointer\">\r\n                <div className=\"font-medium text-gray-900\">{t('quizCreation.allowRetake')}</div>\r\n                <p className=\"text-sm text-gray-600 mt-0.5\">\r\n                  {t('quizCreation.allowRetakeDesc')}\r\n                </p>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Preview */}\r\n      <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-200\">\r\n        <h3 className=\"font-semibold text-blue-900 mb-3\">≡ƒôï {t('createQuiz.info.preview')}</h3>\r\n        <div className=\"space-y-2 text-sm\">\r\n          <p><strong>{t('createQuiz.info.previewLabels.title')}:</strong> {quiz.title || t('createQuiz.info.noTitle')}</p>\r\n          <div>\r\n            <strong>{t('createQuiz.info.previewLabels.description')}:</strong>{' '}\r\n            {quiz.description ? (\r\n              <RichTextViewer content={quiz.description} />\r\n            ) : (\r\n              <span>{t('createQuiz.info.noDescription')}</span>\r\n            )}\r\n          </div>\r\n          <p><strong>{t('createQuiz.info.previewLabels.category')}:</strong> {quiz.category ? t(`createQuiz.info.categoryOptions.${quiz.category}`) : t('createQuiz.info.noCategory')}</p>\r\n          <p><strong>{t('createQuiz.info.previewLabels.difficulty')}:</strong> {quiz.difficulty ? t(`difficulty.${quiz.difficulty as 'easy' | 'medium' | 'hard'}`) : t('createQuiz.info.noDifficulty')}</p>\r\n          <p><strong>{t('createQuiz.info.previewLabels.duration')}:</strong> {t('createQuiz.info.durationValue', { count: quiz.duration })}</p>\r\n          <p>\r\n            <strong>{t('createQuiz.info.previewLabels.privacy')}</strong>{' '}\r\n            <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded ${\r\n              quiz.isPublic === true \r\n                ? 'bg-blue-100 text-blue-700' \r\n                : 'bg-purple-100 text-purple-700'\r\n            }`}>\r\n              {quiz.isPublic === true ? (\r\n                <>\r\n                  {t('quizCreation.public')}\r\n                </>\r\n              ) : (\r\n                <>{t('quizCreation.private')}</>\r\n              )}\r\n            </span>\r\n          </p>\r\n          <p>\r\n            <strong>{t('createQuiz.info.previewLabels.retake')}:</strong>{' '}\r\n            {quiz.allowRetake !== false ? t('createQuiz.info.retakeAllowed') : t('createQuiz.info.retakeDisabled')}\r\n          </p>\r\n          {quiz.tags && quiz.tags.length > 0 && (\r\n            <p><strong>{t('createQuiz.info.previewLabels.tags')}:</strong> {quiz.tags.join(', ')}</p>\r\n          )}\r\n          {quiz.imageUrl && (\r\n            <div className=\"mt-3\">\r\n              <p><strong>{t('createQuiz.info.previewImage')}</strong></p>\r\n              <img src={quiz.imageUrl} alt={t('createQuiz.info.previewImageAlt')} className=\"mt-2 w-32 h-20 object-cover rounded-lg\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizInfoStep;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\QuizInfoStep_new.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\QuizTypeStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\ResourcesStep.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>ΓÅ▒∩╕Å {resource.estimatedTime} ph├║t</span>","line":346,"column":33,"nodeType":"JSXText","endLine":346,"endColumn":36},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>ΓÅ▒∩╕Å {resource.estimatedTime} ph├║t</span>","line":346,"column":60,"nodeType":"JSXText","endLine":346,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ResourcesStep - Step 3: Th├¬m t├ái liß╗çu hß╗ìc tß║¡p (video/PDF/image/audio/YouTube)\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { \r\n  Upload, \r\n  Video, \r\n  FileText, \r\n  Image as ImageIcon, \r\n  Music, \r\n  Link as LinkIcon,\r\n  Trash2,\r\n  Edit2,\r\n  Plus,\r\n  X\r\n} from 'lucide-react';\r\nimport { LearningResource, ResourceType } from '../../../types/learning';\r\nimport { uploadImage } from '../../../../../services/imageUploadService';\r\nimport { storage } from '../../../../../lib/firebase/config';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { toast } from 'react-toastify';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface ResourcesStepProps {\r\n  resources: LearningResource[];\r\n  onResourcesChange: (resources: LearningResource[]) => void;\r\n}\r\n\r\nconst ResourcesStep: React.FC<ResourcesStepProps> = ({ resources, onResourcesChange }) => {\r\n  const { t } = useTranslation();\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState<Partial<LearningResource>>({\r\n    type: 'video',\r\n    title: '',\r\n    description: '',\r\n    url: '',\r\n    required: false,\r\n    threshold: {},\r\n    learningOutcomes: [],\r\n    order: resources.length\r\n  });\r\n\r\n  const handleAddResource = () => {\r\n    setShowForm(true);\r\n    setEditingId(null);\r\n    setFormData({\r\n      type: 'video',\r\n      title: '',\r\n      description: '',\r\n      url: '',\r\n      required: false,\r\n      threshold: {},\r\n      learningOutcomes: [],\r\n      order: resources.length\r\n    });\r\n  };\r\n\r\n  const handleEditResource = (resource: LearningResource) => {\r\n    setShowForm(true);\r\n    setEditingId(resource.id);\r\n    setFormData(resource);\r\n  };\r\n\r\n  const handleDeleteResource = (id: string) => {\r\n    if (confirm(t('resources.confirmDelete'))) {\r\n      onResourcesChange(resources.filter(r => r.id !== id));\r\n      toast.success(t('resources.success.deleted'));\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (file: File, type: ResourceType) => {\r\n    setUploading(true);\r\n    try {\r\n      // Validate file size based on type\r\n      const maxSizes = {\r\n        video: 50 * 1024 * 1024, // 50MB\r\n        pdf: 10 * 1024 * 1024,   // 10MB\r\n        audio: 10 * 1024 * 1024, // 10MB\r\n        image: 5 * 1024 * 1024,  // 5MB\r\n        link: 0,\r\n        slides: 5 * 1024 * 1024\r\n      };\r\n\r\n      if (file.size > maxSizes[type]) {\r\n        const sizeMB = (maxSizes[type] / (1024 * 1024)).toFixed(0);\r\n        toast.error(t('resources.errors.fileTooLarge', { size: sizeMB, type }));\r\n        setUploading(false);\r\n        return;\r\n      }\r\n\r\n      // Validate file type strictly\r\n      const validTypes: Record<ResourceType, string[]> = {\r\n        video: ['video/mp4', 'video/webm', 'video/ogg', 'video/quicktime', 'video/x-msvideo'],\r\n        pdf: ['application/pdf'],\r\n        audio: ['audio/mpeg', 'audio/mp3', 'audio/wav', 'audio/ogg', 'audio/m4a'],\r\n        image: ['image/jpeg', 'image/png', 'image/webp', 'image/gif'],\r\n        link: [],\r\n        slides: ['image/jpeg', 'image/png', 'image/webp']\r\n      };\r\n\r\n      if (validTypes[type] && !validTypes[type].includes(file.type) && type !== 'link') {\r\n        toast.error(t('resources.errors.invalidFormat', { type }));\r\n        setUploading(false);\r\n        return;\r\n      }\r\n\r\n      // Use uploadImage for images, otherwise use direct Firebase upload\r\n      if (type === 'image') {\r\n        const result = await uploadImage(file, {\r\n          folder: 'temp' as any,\r\n          maxSizeKB: 5120,\r\n          generateThumbnails: true\r\n        });\r\n\r\n        if (result.success) {\r\n          setFormData(prev => ({\r\n            ...prev,\r\n            url: result.originalUrl,\r\n            thumbnailUrl: result.thumbnailUrls?.medium\r\n          }));\r\n          toast.success(t('resources.success.imageUploaded'));\r\n        } else {\r\n          toast.error(result.error || t('resources.errors.uploadFailed'));\r\n        }\r\n      } else {\r\n        // For video, pdf, audio - upload to Firebase Storage directly\r\n        console.log('≡ƒôñ Starting upload for:', type, file.name);\r\n        \r\n        // Tß║ío quizId tß║ím thß╗¥i nß║┐u ch╞░a c├│ (d├╣ng timestamp)\r\n        const tempQuizId = 'draft_' + Date.now();\r\n        \r\n        // Cß║Ñu tr├║c th╞░ mß╗Ñc r├╡ r├áng theo chß╗⌐c n─âng\r\n        const folder = type === 'video' ? `learning-resources/videos/${tempQuizId}` : \r\n                      type === 'pdf' ? `learning-resources/pdfs/${tempQuizId}` : \r\n                      type === 'audio' ? `learning-resources/audios/${tempQuizId}` :\r\n                      `learning-resources/images/${tempQuizId}`;\r\n        \r\n        const timestamp = Date.now();\r\n        const fileName = `${timestamp}_${file.name}`;\r\n        const fullPath = `${folder}/${fileName}`;\r\n        \r\n        console.log('∩┐╜ Upload path:', fullPath);\r\n        console.log('≡ƒôª File info:', {\r\n          name: file.name,\r\n          type: file.type,\r\n          size: `${(file.size / 1024 / 1024).toFixed(2)} MB`\r\n        });\r\n        \r\n        const storageRef = ref(storage, fullPath);\r\n        \r\n        // Upload file with metadata\r\n        const metadata = {\r\n          contentType: file.type,\r\n          customMetadata: {\r\n            uploadedBy: 'user',\r\n            originalName: file.name,\r\n            uploadedAt: new Date().toISOString()\r\n          }\r\n        };\r\n        \r\n        console.log('Γ¼å∩╕Å Uploading to Firebase Storage...');\r\n        \r\n        await uploadBytes(storageRef, file, metadata);\r\n        \r\n        console.log('Γ£à Upload complete, getting download URL...');\r\n        \r\n        // Get download URL\r\n        const downloadURL = await getDownloadURL(storageRef);\r\n        \r\n        console.log('≡ƒöù Download URL:', downloadURL);\r\n        \r\n        setFormData(prev => ({\r\n          ...prev,\r\n          url: downloadURL\r\n        }));\r\n        \r\n        const successKey = type === 'video' ? 'resources.success.videoUploaded' :\r\n                          type === 'pdf' ? 'resources.success.pdfUploaded' :\r\n                          'resources.success.audioUploaded';\r\n        toast.success(t(successKey));\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Upload error:', error);\r\n      toast.error(t('resources.errors.uploadError', { error: error.message }));\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveResource = () => {\r\n    // Validation\r\n    if (!formData.title?.trim()) {\r\n      toast.error(t('resources.errors.titleRequired'));\r\n      return;\r\n    }\r\n    if (!formData.url?.trim()) {\r\n      toast.error(t('resources.errors.urlRequired'));\r\n      return;\r\n    }\r\n\r\n    const newResource: LearningResource = {\r\n      id: editingId || `res_${Date.now()}`,\r\n      type: formData.type!,\r\n      title: formData.title!,\r\n      description: formData.description || '',\r\n      url: formData.url!,\r\n      required: formData.required || false,\r\n      threshold: formData.threshold || {},\r\n      learningOutcomes: formData.learningOutcomes || [],\r\n      order: formData.order || resources.length,\r\n      thumbnailUrl: formData.thumbnailUrl,\r\n      whyWatch: formData.whyWatch,\r\n      estimatedTime: formData.estimatedTime,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date()\r\n    };\r\n\r\n    if (editingId) {\r\n      // Update existing\r\n      onResourcesChange(resources.map(r => r.id === editingId ? newResource : r));\r\n      toast.success(t('resources.success.updated'));\r\n    } else {\r\n      // Add new\r\n      onResourcesChange([...resources, newResource]);\r\n      toast.success(t('resources.success.added'));\r\n    }\r\n\r\n    setShowForm(false);\r\n    setEditingId(null);\r\n  };\r\n\r\n  const getResourceIcon = (type: ResourceType) => {\r\n    switch (type) {\r\n      case 'video': return <Video className=\"w-5 h-5\" />;\r\n      case 'pdf': return <FileText className=\"w-5 h-5\" />;\r\n      case 'image': return <ImageIcon className=\"w-5 h-5\" />;\r\n      case 'link': return <LinkIcon className=\"w-5 h-5\" />;\r\n      default: return <Music className=\"w-5 h-5\" />;\r\n    }\r\n  };\r\n\r\n  const getTypeLabel = (type: ResourceType) => {\r\n    const labels: Record<ResourceType, string> = {\r\n      video: t('resources.types.video'),\r\n      pdf: t('resources.types.pdf'),\r\n      image: t('resources.types.image'),\r\n      audio: t('resources.types.audio'),\r\n      link: t('resources.types.link'),\r\n      slides: t('resources.types.slides')\r\n    };\r\n    return labels[type];\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">\r\n            ≡ƒôÜ {t('resources.title')} <span className=\"text-red-500\">*</span>\r\n          </h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            {t('resources.subtitle')}\r\n          </p>\r\n        </div>\r\n        <button\r\n          onClick={handleAddResource}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          {t('resources.addResource')}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Resources List */}\r\n      {resources.length === 0 ? (\r\n        <div className=\"text-center py-12 bg-red-50 rounded-lg border-2 border-dashed border-red-300\">\r\n          <Upload className=\"w-12 h-12 mx-auto text-red-400 mb-3\" />\r\n          <p className=\"text-red-600 font-semibold mb-2\">{t('resources.emptyState.warning')}</p>\r\n          <p className=\"text-sm text-gray-600 mb-4\">\r\n            {t('resources.emptyState.description')}<br/>\r\n            {t('resources.emptyState.cannotContinue')}\r\n          </p>\r\n          <button\r\n            onClick={handleAddResource}\r\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n          >\r\n            + {t('resources.firstResource')}\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {resources.map((resource, index) => (\r\n            <div\r\n              key={resource.id}\r\n              className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n            >\r\n              <div className=\"flex items-start gap-4\">\r\n                {/* Icon */}\r\n                <div className={`p-3 rounded-lg ${\r\n                  resource.type === 'video' ? 'bg-purple-100 text-purple-600' :\r\n                  resource.type === 'pdf' ? 'bg-red-100 text-red-600' :\r\n                  resource.type === 'image' ? 'bg-blue-100 text-blue-600' :\r\n                  'bg-green-100 text-green-600'\r\n                }`}>\r\n                  {getResourceIcon(resource.type)}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-start justify-between gap-2\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <h4 className=\"font-semibold text-gray-900\">\r\n                          {index + 1}. {resource.title}\r\n                        </h4>\r\n                        {resource.required && (\r\n                          <span className=\"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded\">\r\n                            {t('resources.required')}\r\n                          </span>\r\n                        )}\r\n                        {!resource.required && (\r\n                          <span className=\"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs font-medium rounded\">\r\n                            {t('resources.recommended')}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      {resource.description && (\r\n                        <p className=\"text-sm text-gray-600 mb-2\">\r\n                          {resource.description}\r\n                        </p>\r\n                      )}\r\n\r\n                      <div className=\"flex items-center gap-4 text-xs text-gray-500\">\r\n                        <span className=\"flex items-center gap-1\">\r\n                          {getResourceIcon(resource.type)}\r\n                          {getTypeLabel(resource.type)}\r\n                        </span>\r\n                        {resource.estimatedTime && (\r\n                          <span>ΓÅ▒∩╕Å {resource.estimatedTime} ph├║t</span>\r\n                        )}\r\n                        {resource.whyWatch && (\r\n                          <span className=\"truncate max-w-xs\">\r\n                            ≡ƒÆí {resource.whyWatch}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <button\r\n                        onClick={() => handleEditResource(resource)}\r\n                        className=\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors\"\r\n                        title={t('resources.editButton')}\r\n                      >\r\n                        <Edit2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDeleteResource(resource.id)}\r\n                        className=\"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors\"\r\n                        title={t('resources.deleteButton')}\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Add/Edit Form Modal */}\r\n      {showForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b\">\r\n              <h3 className=\"text-xl font-bold text-gray-900\">\r\n                {editingId ? t('resources.editResource') : t('resources.newResource')}\r\n              </h3>\r\n              <button\r\n                onClick={() => setShowForm(false)}\r\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Form Content */}\r\n            <div className=\"p-6 space-y-4\">\r\n              {/* Resource Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  {t('resources.form.typeLabel')}\r\n                </label>\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-5 gap-2\">\r\n                  {(['video', 'pdf', 'image', 'audio', 'link'] as ResourceType[]).map(type => (\r\n                    <button\r\n                      key={type}\r\n                      type=\"button\"\r\n                      onClick={() => setFormData(prev => ({ ...prev, type }))}\r\n                      className={`p-3 rounded-lg border-2 transition-all ${\r\n                        formData.type === type\r\n                          ? 'border-blue-600 bg-blue-50 text-blue-700'\r\n                          : 'border-gray-200 hover:border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex flex-col items-center gap-1\">\r\n                        {getResourceIcon(type)}\r\n                        <span className=\"text-xs font-medium\">\r\n                          {getTypeLabel(type)}\r\n                        </span>\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Title */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  {t('resources.form.titleLabel')}\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.title || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n                  placeholder={t('resources.form.titlePlaceholder')}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  {t('resources.form.descriptionLabel')}\r\n                </label>\r\n                <textarea\r\n                  value={formData.description || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                  placeholder={t('resources.form.descriptionPlaceholder')}\r\n                  rows={2}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              {/* URL or Upload - CHIA LUß╗ÆNG R├ò R├ÇNG */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  {formData.type === 'link' ? t('resources.form.urlLabel.link') : \r\n                   formData.type === 'video' ? t('resources.form.urlLabel.video') :\r\n                   formData.type === 'pdf' ? t('resources.form.urlLabel.pdf') :\r\n                   formData.type === 'audio' ? t('resources.form.urlLabel.audio') :\r\n                   t('resources.form.urlLabel.image')}\r\n                </label>\r\n                \r\n                {formData.type === 'link' ? (\r\n                  // LINK - CHß╗ê NHß║¼P URL\r\n                  <div>\r\n                    <input\r\n                      type=\"url\"\r\n                      value={formData.url || ''}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, url: e.target.value }))}\r\n                      placeholder={t('resources.form.urlPlaceholder.link')}\r\n                      className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 mt-2\">\r\n                      {t('resources.form.linkHint')}\r\n                    </p>\r\n                  </div>\r\n                ) : formData.type === 'video' ? (\r\n                  // VIDEO - CHß╗ê CHß║ñP NHß║¼N VIDEO FILES\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"border-2 border-dashed border-blue-300 rounded-lg p-4 bg-blue-50\">\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"video/mp4,video/webm,video/ogg,video/quicktime,video/x-msvideo\"\r\n                        onChange={(e) => {\r\n                          const file = e.target.files?.[0];\r\n                          if (file) {\r\n                            // Validate file type\r\n                            if (!file.type.startsWith('video/')) {\r\n                              toast.error(t('resources.errors.videoOnly'));\r\n                              e.target.value = '';\r\n                              return;\r\n                            }\r\n                            handleFileUpload(file, 'video');\r\n                          }\r\n                        }}\r\n                        disabled={uploading}\r\n                        className=\"w-full text-sm\"\r\n                      />\r\n                      <p className=\"text-xs text-blue-600 mt-2 font-medium\">\r\n                        {t('resources.form.acceptedFormats.video')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-center text-sm text-gray-500\">{t('resources.form.orDivider')}</div>\r\n                    <input\r\n                      type=\"url\"\r\n                      value={formData.url || ''}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, url: e.target.value }))}\r\n                      placeholder={t('resources.form.urlPlaceholder.video')}\r\n                      disabled={uploading}\r\n                      className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                ) : formData.type === 'pdf' ? (\r\n                  // PDF - CHß╗ê CHß║ñP NHß║¼N PDF FILES\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"border-2 border-dashed border-red-300 rounded-lg p-4 bg-red-50\">\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\".pdf,application/pdf\"\r\n                        onChange={(e) => {\r\n                          const file = e.target.files?.[0];\r\n                          if (file) {\r\n                            // Validate file type\r\n                            if (file.type !== 'application/pdf' && !file.name.endsWith('.pdf')) {\r\n                              toast.error(t('resources.errors.pdfOnly'));\r\n                              e.target.value = '';\r\n                              return;\r\n                            }\r\n                            handleFileUpload(file, 'pdf');\r\n                          }\r\n                        }}\r\n                        disabled={uploading}\r\n                        className=\"w-full text-sm\"\r\n                      />\r\n                      <p className=\"text-xs text-red-600 mt-2 font-medium\">\r\n                        {t('resources.form.acceptedFormats.pdf')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-center text-sm text-gray-500\">{t('resources.form.orDivider')}</div>\r\n                    <input\r\n                      type=\"url\"\r\n                      value={formData.url || ''}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, url: e.target.value }))}\r\n                      placeholder={t('resources.form.urlPlaceholder.pdf')}\r\n                      disabled={uploading}\r\n                      className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                ) : formData.type === 'audio' ? (\r\n                  // AUDIO - CHß╗ê CHß║ñP NHß║¼N AUDIO FILES\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"border-2 border-dashed border-green-300 rounded-lg p-4 bg-green-50\">\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"audio/mp3,audio/mpeg,audio/wav,audio/ogg,audio/m4a\"\r\n                        onChange={(e) => {\r\n                          const file = e.target.files?.[0];\r\n                          if (file) {\r\n                            // Validate file type\r\n                            if (!file.type.startsWith('audio/')) {\r\n                              toast.error(t('resources.errors.audioOnly'));\r\n                              e.target.value = '';\r\n                              return;\r\n                            }\r\n                            handleFileUpload(file, 'audio');\r\n                          }\r\n                        }}\r\n                        disabled={uploading}\r\n                        className=\"w-full text-sm\"\r\n                      />\r\n                      <p className=\"text-xs text-green-600 mt-2 font-medium\">\r\n                        {t('resources.form.acceptedFormats.audio')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-center text-sm text-gray-500\">{t('resources.form.orDivider')}</div>\r\n                    <input\r\n                      type=\"url\"\r\n                      value={formData.url || ''}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, url: e.target.value }))}\r\n                      placeholder={t('resources.form.urlPlaceholder.audio')}\r\n                      disabled={uploading}\r\n                      className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  // IMAGE - CHß╗ê CHß║ñP NHß║¼N IMAGE FILES\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"border-2 border-dashed border-purple-300 rounded-lg p-4 bg-purple-50\">\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\r\n                        onChange={(e) => {\r\n                          const file = e.target.files?.[0];\r\n                          if (file) {\r\n                            // Validate file type\r\n                            if (!file.type.startsWith('image/')) {\r\n                              toast.error(t('resources.errors.imageOnly'));\r\n                              e.target.value = '';\r\n                              return;\r\n                            }\r\n                            handleFileUpload(file, 'image');\r\n                          }\r\n                        }}\r\n                        disabled={uploading}\r\n                        className=\"w-full text-sm\"\r\n                      />\r\n                      <p className=\"text-xs text-purple-600 mt-2 font-medium\">\r\n                        {t('resources.form.acceptedFormats.image')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"text-center text-sm text-gray-500\">{t('resources.form.orDivider')}</div>\r\n                    <input\r\n                      type=\"url\"\r\n                      value={formData.url || ''}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, url: e.target.value }))}\r\n                      placeholder={t('resources.form.urlPlaceholder.image')}\r\n                      disabled={uploading}\r\n                      className=\"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                )}\r\n                \r\n                {uploading && (\r\n                  <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent\"></div>\r\n                      <span className=\"text-sm text-blue-600 font-medium\">{t('resources.form.uploading')}</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {formData.url && !uploading && (\r\n                  <div className=\"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n                    <p className=\"text-sm text-green-700 font-medium\">{t('resources.form.urlReady')}</p>\r\n                    <p className=\"text-xs text-green-600 truncate\">{formData.url}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Required */}\r\n              <div className=\"flex items-center gap-3 p-4 bg-gray-50 rounded-lg\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"required\"\r\n                  checked={formData.required || false}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, required: e.target.checked }))}\r\n                  className=\"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n                <label htmlFor=\"required\" className=\"flex-1 text-sm text-gray-700\">\r\n                  <span className=\"font-medium\">{t('resources.form.requiredLabel')}</span>\r\n                  <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                    {t('resources.form.requiredDescription')}\r\n                  </p>\r\n                </label>\r\n              </div>\r\n\r\n              {/* Why Watch */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  {t('resources.form.whyWatchLabel')}\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.whyWatch || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, whyWatch: e.target.value }))}\r\n                  placeholder={t('resources.form.whyWatchPlaceholder')}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              {/* Estimated Time */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  {t('resources.form.estimatedTimeLabel')}\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={formData.estimatedTime || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, estimatedTime: parseInt(e.target.value) || undefined }))}\r\n                  placeholder={t('resources.form.estimatedTimePlaceholder')}\r\n                  min=\"1\"\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"flex items-center justify-end gap-3 p-6 border-t bg-gray-50\">\r\n              <button\r\n                onClick={() => setShowForm(false)}\r\n                className=\"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors\"\r\n              >\r\n                {t('resources.cancelButton')}\r\n              </button>\r\n              <button\r\n                onClick={handleSaveResource}\r\n                disabled={uploading}\r\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\r\n              >\r\n                {uploading ? t('resources.form.uploading') : editingId ? t('resources.updateButton') : t('resources.saveButton')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResourcesStep;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\ReviewStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\SimpleAIGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\components\\SortableItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\CreateQuizPage\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\EditQuizPage.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n            onClick={() => navigate('/admin')}\r\n            className=\"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n            Quay lß║íi Admin\r\n          </button>","line":124,"column":51,"nodeType":"JSXText","endLine":126,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n              Γ£Å∩╕Å Chß╗ënh sß╗¡a Quiz\r\n            </h1>","line":129,"column":67,"nodeType":"JSXText","endLine":131,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600\">\r\n              ID: <code className=\"bg-gray-100 px-2 py-1 rounded\">{id}</code>\r\n            </p>","line":132,"column":42,"nodeType":"JSXText","endLine":133,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Ti├¬u ─æß╗ü Quiz\r\n              </label>","line":143,"column":79,"nodeType":"JSXText","endLine":145,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">≡ƒôè Th├┤ng tin Quiz</h3>","line":238,"column":68,"nodeType":"JSXText","endLine":238,"endColumn":85},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-gray-700\">Sß╗æ c├óu hß╗Åi:</span>","line":242,"column":59,"nodeType":"JSXText","endLine":242,"endColumn":70},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-gray-700\">Ng╞░ß╗¥i tß║ío:</span>","line":247,"column":59,"nodeType":"JSXText","endLine":247,"endColumn":69},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-gray-700\">Ng├áy tß║ío:</span>","line":252,"column":59,"nodeType":"JSXText","endLine":252,"endColumn":68},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-gray-700\">Lß║ºn sß╗¡a cuß╗æi:</span>","line":259,"column":59,"nodeType":"JSXText","endLine":259,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getQuizById } from '../api';\r\nimport { updateQuiz } from '../api';\r\nimport { Quiz } from '../types';\r\nimport { toast } from 'react-toastify';\r\nimport { ArrowLeft, Save, Loader2 } from 'lucide-react';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\nconst EditQuizPage: React.FC = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const [quiz, setQuiz] = useState<Quiz | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    category: '',\r\n    difficulty: 'medium' as 'easy' | 'medium' | 'hard',\r\n    status: 'pending' as 'pending' | 'approved' | 'rejected' | 'draft'\r\n  });\r\n\r\n  const loadQuiz = useCallback(async () => {\r\n    if (!id) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const quizData = await getQuizById(id);\r\n      if (quizData) {\r\n        setQuiz(quizData);\r\n        setFormData({\r\n          title: quizData.title || '',\r\n          description: quizData.description || '',\r\n          category: quizData.category || '',\r\n          difficulty: quizData.difficulty || 'medium',\r\n          status: quizData.status || 'pending'\r\n        });\r\n      } else {\r\n        toast.error('Kh├┤ng t├¼m thß║Ñy quiz n├áy');\r\n        navigate('/admin');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading quiz:', error);\r\n      toast.error('Lß╗ùi khi tß║úi quiz');\r\n      navigate('/admin');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      loadQuiz();\r\n    }\r\n  }, [id, loadQuiz]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!id || !quiz) return;\r\n\r\n    setSaving(true);\r\n    try {\r\n      const updatedQuiz = {\r\n        ...quiz,\r\n        ...formData,\r\n        updatedAt: new Date()\r\n      };\r\n\r\n      await updateQuiz(id, updatedQuiz);\r\n      toast.success('Cß║¡p nhß║¡t quiz th├ánh c├┤ng!');\r\n      navigate('/admin');\r\n    } catch (error) {\r\n      console.error('Error updating quiz:', error);\r\n      toast.error('Lß╗ùi khi cß║¡p nhß║¡t quiz');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field: string, value: string) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 py-8\">\r\n        <div className=\"max-w-4xl mx-auto px-4\">\r\n          <div className=\"flex items-center justify-center py-12\">\r\n            <Loader2 className=\"w-8 h-8 animate-spin text-blue-600 mr-3\" />\r\n            <span className=\"text-lg text-gray-600\">─Éang tß║úi quiz...</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!quiz) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 py-8\">\r\n        <div className=\"max-w-4xl mx-auto px-4\">\r\n          <div className=\"text-center py-12\">\r\n            <p className=\"text-gray-500\">{t(\"quizList.empty.noQuizFound\")}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-4xl mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <button\r\n            onClick={() => navigate('/admin')}\r\n            className=\"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n            Quay lß║íi Admin\r\n          </button>\r\n          \r\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n              Γ£Å∩╕Å Chß╗ënh sß╗¡a Quiz\r\n            </h1>\r\n            <p className=\"text-gray-600\">\r\n              ID: <code className=\"bg-gray-100 px-2 py-1 rounded\">{id}</code>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Edit Form */}\r\n        <div className=\"bg-white rounded-lg shadow-sm\">\r\n          <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n            {/* Title */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Ti├¬u ─æß╗ü Quiz\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.title}\r\n                onChange={(e) => handleInputChange('title', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Description */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">{t(\"admin.preview.description\")}\r\n              </label>\r\n              <textarea\r\n                value={formData.description}\r\n                onChange={(e) => handleInputChange('description', e.target.value)}\r\n                rows={4}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Category */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">{t(\"admin.preview.category\")}\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.category}\r\n                onChange={(e) => handleInputChange('category', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Difficulty */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">{t(\"admin.preview.difficulty\")}\r\n              </label>\r\n              <select\r\n                value={formData.difficulty}\r\n                onChange={(e) => handleInputChange('difficulty', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"easy\">{t(\"difficulty.easy\")}</option>\r\n                <option value=\"medium\">{t(\"difficulty.medium\")}</option>\r\n                <option value=\"hard\">{t(\"difficulty.hard\")}</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Status */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">{t(\"admin.preview.status\")}\r\n              </label>\r\n              <select\r\n                value={formData.status}\r\n                onChange={(e) => handleInputChange('status', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"pending\">{t(\"admin.quizManagement.filter.pending\")}</option>\r\n                <option value=\"approved\">{t(\"admin.quizManagement.filter.approved\")}</option>\r\n                <option value=\"rejected\">{t(\"status.rejected\")}</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex items-center justify-between pt-6 border-t border-gray-200\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => navigate('/admin')}\r\n                className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200\"\r\n              >{t(\"common.cancel\")}\r\n              </button>\r\n              \r\n              <button\r\n                type=\"submit\"\r\n                disabled={saving}\r\n                className=\"inline-flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\r\n              >\r\n                {saving ? (\r\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                ) : (\r\n                  <Save className=\"w-4 h-4 mr-2\" />\r\n                )}\r\n                {saving ? '─Éang l╞░u...' : 'L╞░u thay ─æß╗òi'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        {/* Quiz Info */}\r\n        <div className=\"mt-8 bg-white rounded-lg p-6 shadow-sm\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">≡ƒôè Th├┤ng tin Quiz</h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n            <div>\r\n              <span className=\"font-medium text-gray-700\">Sß╗æ c├óu hß╗Åi:</span>\r\n              <span className=\"ml-2 text-gray-600\">{quiz.questions?.length || 0}</span>\r\n            </div>\r\n            \r\n            <div>\r\n              <span className=\"font-medium text-gray-700\">Ng╞░ß╗¥i tß║ío:</span>\r\n              <span className=\"ml-2 text-gray-600\">{quiz.createdBy || 'N/A'}</span>\r\n            </div>\r\n            \r\n            <div>\r\n              <span className=\"font-medium text-gray-700\">Ng├áy tß║ío:</span>\r\n              <span className=\"ml-2 text-gray-600\">\r\n                {quiz.createdAt ? new Date(quiz.createdAt).toLocaleDateString('vi-VN') : 'N/A'}\r\n              </span>\r\n            </div>\r\n            \r\n            <div>\r\n              <span className=\"font-medium text-gray-700\">Lß║ºn sß╗¡a cuß╗æi:</span>\r\n              <span className=\"ml-2 text-gray-600\">\r\n                {quiz.updatedAt ? new Date(quiz.updatedAt).toLocaleDateString('vi-VN') : 'Ch╞░a sß╗¡a'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditQuizPage;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\EditQuizPageAdvanced.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600\">Chß╗ënh sß╗¡a th├┤ng tin quiz cß╗ºa bß║ín</p>","line":313,"column":48,"nodeType":"JSXText","endLine":313,"endColumn":80},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                      <FileText className=\"w-4 h-4\" />\r\n                      M├┤ tß║ú quiz *\r\n                    </label>","line":334,"column":55,"nodeType":"JSXText","endLine":336,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-3xl font-bold text-gray-900\">Questions ({questions.length})</h2>","line":421,"column":68,"nodeType":"JSXText","endLine":421,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                    onClick={addQuestion}\r\n                    className=\"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-2xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg font-semibold\"\r\n                  >\r\n                    <Plus className=\"w-6 h-6\" />\r\n                    Add Question\r\n                  </button>","line":426,"column":49,"nodeType":"JSXText","endLine":428,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">No Questions Yet</h3>","line":433,"column":75,"nodeType":"JSXText","endLine":433,"endColumn":91},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-8 text-lg\">Start building your quiz by adding questions.</p>","line":434,"column":63,"nodeType":"JSXText","endLine":434,"endColumn":108},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                      onClick={addQuestion}\r\n                      className=\"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all font-semibold\"\r\n                    >\r\n                      Add First Question\r\n                    </button>","line":438,"column":22,"nodeType":"JSXText","endLine":440,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-3xl font-bold text-gray-900 mb-8\">Quiz Settings</h2>","line":463,"column":69,"nodeType":"JSXText","endLine":463,"endColumn":82},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <label className=\"block text-sm font-semibold text-gray-700\">Time Limit (minutes)</label>","line":466,"column":80,"nodeType":"JSXText","endLine":466,"endColumn":100},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <label className=\"block text-sm font-semibold text-gray-700\">Passing Score (%)</label>","line":477,"column":80,"nodeType":"JSXText","endLine":477,"endColumn":97}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getQuizById, updateQuiz } from '../api';\r\nimport { Quiz, Question } from '../types';\r\nimport { QuestionEditor } from '../components/QuestionEditor';\r\nimport { toast } from 'react-toastify';\r\nimport { \r\n  ArrowLeft, Save, Loader2, Plus, \r\n  BookOpen, Target, MessageSquare, AlertCircle,\r\n  FileText, Tag, Star, Clock\r\n} from 'lucide-react';\r\nimport { db } from '../../../firebase/config';\r\nimport { addDoc, collection, serverTimestamp } from 'firebase/firestore';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../lib/store';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n// Import categories and difficulties from CreateQuizPage\r\nconst categories = [\r\n  { value: 'general', label: '' },\r\n  { value: 'science', label: '' },\r\n  { value: 'history', label: '' },\r\n  { value: 'geography', label: '' },\r\n  { value: 'literature', label: '' },\r\n  { value: 'math', label: '' },\r\n  { value: 'technology', label: '' },\r\n  { value: 'sports', label: '' },\r\n  { value: 'entertainment', label: '' },\r\n  { value: 'food', label: '' }\r\n];\r\n\r\nconst difficulties = [\r\n  { value: 'easy', label: '', color: 'bg-green-100 text-green-800' },\r\n  { value: 'medium', label: '', color: 'bg-yellow-100 text-yellow-800' },\r\n  { value: 'hard', label: '', color: 'bg-red-100 text-red-800' }\r\n];\r\n\r\nconst EditQuizPageAdvanced: React.FC = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const [quiz, setQuiz] = useState<Quiz | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [activeTab, setActiveTab] = useState<'info' | 'questions' | 'settings'>('info');\r\n  const [editingQuestionId, setEditingQuestionId] = useState<string | null>(null);\r\n\r\n  const [quizInfo, setQuizInfo] = useState({\r\n    title: '',\r\n    description: '',\r\n    category: '',\r\n    difficulty: 'medium' as 'easy' | 'medium' | 'hard',\r\n    status: 'pending' as 'pending' | 'approved' | 'rejected' | 'draft',\r\n    timeLimit: 30,\r\n    passingScore: 70,\r\n    tags: [] as string[],\r\n    isPublished: false\r\n  });\r\n\r\n  const [questions, setQuestions] = useState<Question[]>([]);\r\n\r\n  const loadQuiz = useCallback(async () => {\r\n    if (!id) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const quizData = await getQuizById(id);\r\n      if (quizData) {\r\n        setQuiz(quizData);\r\n        setQuizInfo({\r\n          title: quizData.title || '',\r\n          description: quizData.description || '',\r\n          category: quizData.category || '',\r\n          difficulty: quizData.difficulty || 'medium',\r\n          status: quizData.status || 'pending',\r\n          timeLimit: quizData.duration || 30,\r\n          passingScore: 70,\r\n          tags: quizData.tags || [],\r\n          isPublished: quizData.isPublished || false\r\n        });\r\n        setQuestions(quizData.questions || []);\r\n      } else {\r\n        toast.error(t('editQuiz.notFound'));\r\n        navigate('/admin/stats-test');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading quiz:', error);\r\n      toast.error(t('editQuiz.loadFailed'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id, t, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (id) loadQuiz();\r\n  }, [id, loadQuiz]);\r\n\r\n  const handleSave = async () => {\r\n    if (!id || !quiz) return;\r\n\r\n    if (!quizInfo.title.trim()) {\r\n      toast.error(t('editQuiz.titleRequired'));\r\n      return;\r\n    }\r\n\r\n    if (questions.length === 0) {\r\n      toast.error(t('editQuiz.questionRequired'));\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const updatedQuiz: Quiz = {\r\n        ...quiz,\r\n        ...quizInfo,\r\n        duration: quizInfo.timeLimit,\r\n        questions,\r\n        updatedAt: new Date()\r\n      };\r\n\r\n      // Γ£à HANDLE RESUBMISSION AFTER EDIT APPROVAL\r\n      if (quiz.needsReApproval) {\r\n        // Quiz was edited after admin approval, resubmit for approval\r\n        updatedQuiz.status = 'pending';\r\n        updatedQuiz.canEdit = false;\r\n        updatedQuiz.isApproved = false;\r\n        updatedQuiz.needsReApproval = false;\r\n        updatedQuiz.resubmittedAt = new Date();\r\n        \r\n        // Create notification for admin about resubmission\r\n        await addDoc(collection(db, 'notifications'), {\r\n          userId: 'admin', // Or get actual admin IDs\r\n          type: 'quiz_resubmitted',\r\n          title: t('editQuiz.notifications.resubmitted'),\r\n          message: t('editQuiz.notifications.resubmittedMessage', { title: updatedQuiz.title }),\r\n          quizId: id,\r\n          createdBy: user?.uid,\r\n          createdByName: user?.displayName || user?.email,\r\n          createdAt: serverTimestamp(),\r\n          read: false\r\n        });\r\n        \r\n        toast.success(t('editQuiz.resubmitSuccess'));\r\n      } else {\r\n        toast.success(t('editQuiz.updateSuccess'));\r\n      }\r\n\r\n      await updateQuiz(id, updatedQuiz);\r\n      navigate('/admin/stats-test');\r\n    } catch (error) {\r\n      console.error('Error updating quiz:', error);\r\n      toast.error(t('editQuiz.updateFailed'));\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const addQuestion = () => {\r\n    const newQuestion: Question = {\r\n      id: `q_${Date.now()}`,\r\n      text: '',\r\n      type: 'multiple',\r\n      answers: [\r\n        { id: 'a1', text: '', isCorrect: true },\r\n        { id: 'a2', text: '', isCorrect: false },\r\n        { id: 'a3', text: '', isCorrect: false },\r\n        { id: 'a4', text: '', isCorrect: false }\r\n      ],\r\n      explanation: '',\r\n      points: 10,\r\n      difficulty: 'medium'\r\n    };\r\n    setQuestions([...questions, newQuestion]);\r\n    setEditingQuestionId(newQuestion.id);\r\n  };\r\n\r\n  const deleteQuestion = (questionId: string) => {\r\n    if (window.confirm(t('editQuiz.confirmDeleteQuestion'))) {\r\n      setQuestions(questions.filter(q => q.id !== questionId));\r\n      if (editingQuestionId === questionId) {\r\n        setEditingQuestionId(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const updateQuestion = (questionId: string, updatedQuestion: Partial<Question>) => {\r\n    setQuestions(questions.map(q => \r\n      q.id === questionId ? { ...q, ...updatedQuestion } : q\r\n    ));\r\n  };\r\n\r\n  const moveQuestion = (index: number, direction: 'up' | 'down') => {\r\n    const newQuestions = [...questions];\r\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\r\n    \r\n    if (targetIndex >= 0 && targetIndex < newQuestions.length) {\r\n      [newQuestions[index], newQuestions[targetIndex]] = [newQuestions[targetIndex], newQuestions[index]];\r\n      setQuestions(newQuestions);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-600 mx-auto\" />\r\n          <p className=\"mt-4 text-gray-600\">{t('editQuiz.loading')}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!quiz) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <AlertCircle className=\"w-16 h-16 text-red-500 mx-auto mb-4\" />\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">{t('editQuiz.notFoundTitle')}</h2>\r\n          <p className=\"text-gray-600 mb-6\">{t('editQuiz.notFoundDesc')}</p>\r\n          <button\r\n            onClick={() => navigate('/admin/stats-test')}\r\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors\"\r\n          >\r\n            {t('editQuiz.backToAdmin')}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const tabs = [\r\n    { id: 'info', label: t('editQuiz.tabs.info'), icon: BookOpen },\r\n    { id: 'questions', label: t('editQuiz.tabs.questions'), icon: MessageSquare, count: questions.length },\r\n    { id: 'settings', label: t('editQuiz.tabs.settings'), icon: Target }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <button\r\n              onClick={() => navigate('/admin/stats-test')}\r\n              className=\"p-3 text-gray-600 hover:text-gray-900 hover:bg-white rounded-2xl transition-all shadow-sm\"\r\n            >\r\n              <ArrowLeft className=\"w-6 h-6\" />\r\n            </button>\r\n            <div>\r\n              <h1 className=\"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\r\n                {t('editQuiz.title')}\r\n              </h1>\r\n              <p className=\"text-gray-600 text-lg\">{t('editQuiz.subtitle')}</p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className=\"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 font-semibold\"\r\n          >\r\n            {saving ? (\r\n              <Loader2 className=\"w-6 h-6 animate-spin\" />\r\n            ) : (\r\n              <Save className=\"w-6 h-6\" />\r\n            )}\r\n            {saving ? t('editQuiz.buttons.saving') : t('editQuiz.buttons.save')}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"mb-8\">\r\n          <nav className=\"flex space-x-2 bg-white/80 backdrop-blur-sm rounded-3xl p-2 shadow-lg border border-white/20\">\r\n            {tabs.map((tab) => {\r\n              const Icon = tab.icon;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id as any)}\r\n                  className={`flex items-center gap-3 px-8 py-4 rounded-2xl font-semibold transition-all ${\r\n                    activeTab === tab.id\r\n                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg'\r\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-white/60'\r\n                  }`}\r\n                >\r\n                  <Icon className=\"w-6 h-6\" />\r\n                  {tab.label}\r\n                  {'count' in tab && tab.count !== undefined && (\r\n                    <span className={`px-3 py-1 text-sm rounded-full font-bold ${\r\n                      activeTab === tab.id ? 'bg-white text-blue-600' : 'bg-blue-100 text-blue-600'\r\n                    }`}>\r\n                      {tab.count}\r\n                    </span>\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        <div>\r\n          {activeTab === 'info' && (\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-8 border border-white/20\">\r\n              <div className=\"space-y-8\">\r\n                {/* Header */}\r\n                <div className=\"text-center space-y-2\">\r\n                  <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto\">\r\n                    <BookOpen className=\"w-8 h-8 text-white\" />\r\n                  </div>\r\n                  <h2 className=\"text-2xl font-bold text-gray-900\">{t(\"createQuiz.info.basicInfo\")}</h2>\r\n                  <p className=\"text-gray-600\">Chß╗ënh sß╗¡a th├┤ng tin quiz cß╗ºa bß║ín</p>\r\n                </div>\r\n\r\n                {/* Form */}\r\n                <div className=\"space-y-6\">\r\n                  {/* Title */}\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                      <FileText className=\"w-4 h-4\" />{t(\"createQuiz.info.titleLabel\")}\r\n                    </label>\r\n                    <input\r\n                      className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg\"\r\n                      placeholder={t(\"createQuiz.info.titlePlaceholder\")}\r\n                      value={quizInfo.title}\r\n                      onChange={(e) => setQuizInfo({ ...quizInfo, title: e.target.value })}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Description */}\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                      <FileText className=\"w-4 h-4\" />\r\n                      M├┤ tß║ú quiz *\r\n                    </label>\r\n                    <textarea\r\n                      className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none\"\r\n                      placeholder={t('placeholders.quizDescription')}\r\n                      rows={4}\r\n                      value={quizInfo.description}\r\n                      onChange={(e) => setQuizInfo({ ...quizInfo, description: e.target.value })}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Category & Difficulty */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                        <Tag className=\"w-4 h-4\" />{t(\"createQuiz.info.categoryLabel\")}\r\n                      </label>\r\n                      <select\r\n                        className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                        value={quizInfo.category}\r\n                        onChange={(e) => setQuizInfo({ ...quizInfo, category: e.target.value })}\r\n                      >\r\n                        <option value=\"\">{t(\"createQuiz.info.categoryPlaceholder\")}</option>\r\n                        {categories.map(c => (\r\n                          <option key={c.value} value={c.value}>{c.label}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                        <Star className=\"w-4 h-4\" />{t(\"createQuiz.info.difficultyLabel\")}\r\n                      </label>\r\n                      <select\r\n                        className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                        value={quizInfo.difficulty}\r\n                        onChange={(e) => setQuizInfo({ ...quizInfo, difficulty: e.target.value as any })}\r\n                      >\r\n                        {difficulties.map(d => (\r\n                          <option key={d.value} value={d.value}>{d.label}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Time Limit & Status */}\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                        <Clock className=\"w-4 h-4\" />\r\n                        {t('quizCreation.timeMinutes')}\r\n                      </label>\r\n                      <input\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        max=\"180\"\r\n                        className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                        value={quizInfo.timeLimit}\r\n                        onChange={(e) => setQuizInfo({ ...quizInfo, timeLimit: parseInt(e.target.value) || 30 })}\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                        <Target className=\"w-4 h-4\" />{t(\"admin.preview.status\")}\r\n                      </label>\r\n                      <select\r\n                        className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                        value={quizInfo.status}\r\n                        onChange={(e) => setQuizInfo({ ...quizInfo, status: e.target.value as any })}\r\n                      >\r\n                        <option value=\"pending\">{t('quizCreation.pending')}</option>\r\n                        <option value=\"approved\">{t('quizCreation.approved')}</option>\r\n                        <option value=\"rejected\">{t('quizCreation.rejected')}</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'questions' && (\r\n            <div className=\"space-y-8\">\r\n              <div className=\"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-8 border border-white/20\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h2 className=\"text-3xl font-bold text-gray-900\">Questions ({questions.length})</h2>\r\n                  <button\r\n                    onClick={addQuestion}\r\n                    className=\"flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-2xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg font-semibold\"\r\n                  >\r\n                    <Plus className=\"w-6 h-6\" />\r\n                    Add Question\r\n                  </button>\r\n                </div>\r\n                {questions.length === 0 && (\r\n                  <div className=\"text-center py-16\">\r\n                    <MessageSquare className=\"w-20 h-20 text-gray-300 mx-auto mb-6\" />\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">No Questions Yet</h3>\r\n                    <p className=\"text-gray-600 mb-8 text-lg\">Start building your quiz by adding questions.</p>\r\n                    <button\r\n                      onClick={addQuestion}\r\n                      className=\"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all font-semibold\"\r\n                    >\r\n                      Add First Question\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {questions.map((question, index) => (\r\n                <QuestionEditor\r\n                  key={question.id}\r\n                  question={question}\r\n                  index={index}\r\n                  isEditing={editingQuestionId === question.id}\r\n                  onEdit={setEditingQuestionId}\r\n                  onUpdate={updateQuestion}\r\n                  onDelete={deleteQuestion}\r\n                  onMove={moveQuestion}\r\n                  totalQuestions={questions.length}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'settings' && (\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-8 border border-white/20\">\r\n              <h2 className=\"text-3xl font-bold text-gray-900 mb-8\">Quiz Settings</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"block text-sm font-semibold text-gray-700\">Time Limit (minutes)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={quizInfo.timeLimit}\r\n                    onChange={(e) => setQuizInfo({ ...quizInfo, timeLimit: parseInt(e.target.value) || 30 })}\r\n                    min=\"1\"\r\n                    max=\"180\"\r\n                    className=\"w-full p-4 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"block text-sm font-semibold text-gray-700\">Passing Score (%)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={quizInfo.passingScore}\r\n                    onChange={(e) => setQuizInfo({ ...quizInfo, passingScore: parseInt(e.target.value) || 70 })}\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    className=\"w-full p-4 border-2 border-gray-200 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"mt-8\">\r\n                <label className=\"flex items-center gap-4\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={quizInfo.isPublished}\r\n                    onChange={(e) => setQuizInfo({ ...quizInfo, isPublished: e.target.checked })}\r\n                    className=\"w-6 h-6 text-blue-600 rounded-lg focus:ring-blue-500\"\r\n                  />\r\n                  <span className=\"text-lg font-semibold text-gray-700\">{t('quizCreation.published')}</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditQuizPageAdvanced;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\FavoritesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\LeaderboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\LearningMaterialsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\MyQuizzesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizDetailedStats.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-4\">Kh├┤ng t├¼m thß║Ñy quiz</p>","line":380,"column":45,"nodeType":"JSXText","endLine":380,"endColumn":64},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n            onClick={() => navigate(ROUTES.CREATOR_MY_QUIZZES)}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          >\r\n            Quay lß║íi\r\n          </button>","line":384,"column":12,"nodeType":"JSXText","endLine":386,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium\">Quay lß║íi My Quizzes</span>","line":457,"column":43,"nodeType":"JSXText","endLine":457,"endColumn":62},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium flex items-center gap-1\">\r\n                      <Lock className=\"w-4 h-4\" />\r\n                      Password\r\n                    </span>","line":467,"column":51,"nodeType":"JSXText","endLine":469,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium flex items-center gap-1\">\r\n                      <BookOpen className=\"w-4 h-4\" />\r\n                      With Materials\r\n                    </span>","line":473,"column":55,"nodeType":"JSXText","endLine":475,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">\r\n                    <Brain className=\"w-4 h-4 inline mr-1\" />\r\n                    {quiz.questions.length} c├óu hß╗Åi\r\n                  </span>","line":492,"column":44,"nodeType":"JSXText","endLine":493,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={() => navigate(`/quiz-preview/${quiz.id}`)}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 font-medium\"\r\n              >\r\n                <Eye className=\"w-4 h-4\" />\r\n                Xem Quiz\r\n              </button>","line":511,"column":44,"nodeType":"JSXText","endLine":513,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={handleExport}\r\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                Xuß║Ñt b├ío c├ío\r\n              </button>","line":518,"column":49,"nodeType":"JSXText","endLine":520,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <option value=\"7days\">7 ng├áy qua</option>","line":526,"column":39,"nodeType":"JSXText","endLine":526,"endColumn":49},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <option value=\"30days\">30 ng├áy qua</option>","line":527,"column":40,"nodeType":"JSXText","endLine":527,"endColumn":51},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <option value=\"all\">Tß║Ñt cß║ú thß╗¥i gian</option>","line":528,"column":37,"nodeType":"JSXText","endLine":528,"endColumn":53},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-blue-100 text-sm font-medium\">L╞░ß╗út xem</p>","line":543,"column":62,"nodeType":"JSXText","endLine":543,"endColumn":70},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-purple-100 text-sm font-medium\">L╞░ß╗út l├ám b├ái</p>","line":553,"column":64,"nodeType":"JSXText","endLine":553,"endColumn":76},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-green-100 text-sm font-medium\">Tß╗╖ lß╗ç ho├án th├ánh</p>","line":563,"column":63,"nodeType":"JSXText","endLine":563,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-orange-100 text-sm font-medium\">─Éiß╗âm trung b├¼nh</p>","line":573,"column":64,"nodeType":"JSXText","endLine":573,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-teal-100 text-sm font-medium\">Tß╗╖ lß╗ç ─æß║ít (ΓëÑ60%)</p>","line":583,"column":62,"nodeType":"JSXText","endLine":583,"endColumn":78},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-pink-100 text-sm font-medium\">─Éiß╗âm cao nhß║Ñt</p>","line":593,"column":62,"nodeType":"JSXText","endLine":593,"endColumn":75},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-indigo-100 text-sm font-medium\">Thß╗¥i gian TB</p>","line":603,"column":64,"nodeType":"JSXText","endLine":603,"endColumn":76},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-cyan-100 text-sm font-medium\">Ho├án th├ánh</p>","line":613,"column":62,"nodeType":"JSXText","endLine":613,"endColumn":72},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <TrendingUp className=\"w-6 h-6 text-blue-600\" />\r\n              Xu h╞░ß╗¢ng l├ám b├ái theo ng├áy\r\n            </h3>","line":622,"column":63,"nodeType":"JSXText","endLine":624,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <PieChart className=\"w-6 h-6 text-purple-600\" />\r\n              Ph├ón bß╗æ ─æiß╗âm sß╗æ\r\n            </h3>","line":650,"column":63,"nodeType":"JSXText","endLine":652,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <BarChart3 className=\"w-6 h-6 text-green-600\" />\r\n              ─Éß╗Ö kh├│ c├óu hß╗Åi (Top 10 kh├│ nhß║Ñt)\r\n            </h3>","line":693,"column":63,"nodeType":"JSXText","endLine":695,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-blue-600 font-bold\">C├óu {index + 1}:</span>","line":702,"column":67,"nodeType":"JSXText","endLine":702,"endColumn":71},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>Ch╞░a c├│ dß╗» liß╗çu ph├ón t├¡ch c├óu hß╗Åi</p>","line":729,"column":22,"nodeType":"JSXText","endLine":729,"endColumn":55},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <Trophy className=\"w-6 h-6 text-yellow-600\" />\r\n              Top 10 hß╗ìc vi├¬n xuß║Ñt sß║»c\r\n            </h3>","line":738,"column":61,"nodeType":"JSXText","endLine":740,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-center text-gray-500 py-8\">Ch╞░a c├│ dß╗» liß╗çu</p>","line":768,"column":63,"nodeType":"JSXText","endLine":768,"endColumn":78},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n            <Calendar className=\"w-6 h-6 text-blue-600\" />\r\n            20 kß║┐t quß║ú gß║ºn nhß║Ñt\r\n          </h3>","line":777,"column":59,"nodeType":"JSXText","endLine":779,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-700\">Hß╗ìc vi├¬n</th>","line":784,"column":91,"nodeType":"JSXText","endLine":784,"endColumn":99},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">─Éiß╗âm</th>","line":785,"column":93,"nodeType":"JSXText","endLine":785,"endColumn":97},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">─É├║ng/Tß╗òng</th>","line":786,"column":93,"nodeType":"JSXText","endLine":786,"endColumn":102},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">Thß╗¥i gian</th>","line":787,"column":93,"nodeType":"JSXText","endLine":787,"endColumn":102},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">Ng├áy l├ám</th>","line":788,"column":93,"nodeType":"JSXText","endLine":788,"endColumn":101},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">Kß║┐t quß║ú</th>","line":789,"column":93,"nodeType":"JSXText","endLine":789,"endColumn":100},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold\">\r\n                              <CheckCircle className=\"w-3.5 h-3.5\" />\r\n                              ─Éß║ít\r\n                            </span>","line":825,"column":70,"nodeType":"JSXText","endLine":827,"endColumn":29},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold\">\r\n                              <XCircle className=\"w-3.5 h-3.5\" />\r\n                              Ch╞░a ─æß║ít\r\n                            </span>","line":830,"column":66,"nodeType":"JSXText","endLine":832,"endColumn":29},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <td colSpan={6} className=\"px-4 py-8 text-center text-gray-500\">\r\n                      Ch╞░a c├│ kß║┐t quß║ú n├áo\r\n                    </td>","line":840,"column":85,"nodeType":"JSXText","endLine":842,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":36,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../lib/store';\r\nimport { ROUTES } from '../../../config/routes';\r\nimport { doc, getDoc, collection, query, where, getDocs, orderBy } from 'firebase/firestore';\r\nimport { db } from '../../../lib/firebase/config';\r\nimport { \r\n  TrendingUp, \r\n  Users, \r\n  Target, \r\n  Clock, \r\n  Award, \r\n  BarChart3,\r\n  PieChart,\r\n  Calendar,\r\n  Eye,\r\n  CheckCircle,\r\n  XCircle,\r\n  ArrowLeft,\r\n  Download,\r\n  Lock,\r\n  BookOpen,\r\n  Brain,\r\n  Star,\r\n  Trophy,\r\n  Activity\r\n} from 'lucide-react';\r\n/* \r\nimport { Line, Bar, Doughnut } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler\r\n} from 'chart.js';\r\n\r\n// Register ChartJS components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  ArcElement,\r\n  RadialLinearScale,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n  Filler\r\n);\r\n*/\r\n\r\ninterface Quiz {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  difficulty: string;\r\n  questions: any[];\r\n  createdBy: string;\r\n  createdAt: any;\r\n  status: string;\r\n  havePassword?: 'public' | 'password';\r\n  quizType?: 'with-materials' | 'standard';\r\n  imageUrl?: string;\r\n  views?: number;\r\n  attempts?: number;\r\n  completions?: number;\r\n  averageScore?: number;\r\n}\r\n\r\ninterface QuizResult {\r\n  id: string;\r\n  userId: string;\r\n  userName?: string;\r\n  score: number;\r\n  totalQuestions: number;\r\n  correctAnswers: number;\r\n  timeSpent: number;\r\n  completedAt: any;\r\n  answers: any[];\r\n}\r\n\r\ninterface Stats {\r\n  totalViews: number;\r\n  totalAttempts: number;\r\n  totalCompletions: number;\r\n  completionRate: number;\r\n  averageScore: number;\r\n  averageTimeSpent: number;\r\n  highestScore: number;\r\n  lowestScore: number;\r\n  passRate: number;\r\n  recentResults: QuizResult[];\r\n  scoreDistribution: { range: string; count: number }[];\r\n  dailyAttempts: { date: string; count: number }[];\r\n  questionStats: { questionId: string; correctRate: number; question: string }[];\r\n  topPerformers: { userName: string; score: number; date: string }[];\r\n}\r\n\r\nconst QuizDetailedStats: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  \r\n  const [quiz, setQuiz] = useState<Quiz | null>(null);\r\n  const [stats, setStats] = useState<Stats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [timeRange, setTimeRange] = useState<'7days' | '30days' | 'all'>('30days');\r\n\r\n  const fetchQuizAndStats = useCallback(async () => {\r\n    if (!id || !user) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // Fetch quiz\r\n      const quizDoc = await getDoc(doc(db, 'quizzes', id));\r\n      if (!quizDoc.exists()) {\r\n        throw new Error('Quiz not found');\r\n      }\r\n      \r\n      const quizData = { id: quizDoc.id, ...quizDoc.data() } as Quiz;\r\n      \r\n      // Check if user owns this quiz\r\n      if (quizData.createdBy !== user.uid) {\r\n        throw new Error('Unauthorized');\r\n      }\r\n      \r\n      setQuiz(quizData);\r\n\r\n      // Fetch results - with fallback if index is still building\r\n      let results: QuizResult[] = [];\r\n      \r\n      try {\r\n        let resultsQuery;\r\n        \r\n        if (timeRange !== 'all') {\r\n          const days = timeRange === '7days' ? 7 : 30;\r\n          const startDate = new Date();\r\n          startDate.setDate(startDate.getDate() - days);\r\n          \r\n          resultsQuery = query(\r\n            collection(db, 'quizResults'),\r\n            where('quizId', '==', id),\r\n            where('completedAt', '>=', startDate),\r\n            orderBy('completedAt', 'desc')\r\n          );\r\n        } else {\r\n          resultsQuery = query(\r\n            collection(db, 'quizResults'),\r\n            where('quizId', '==', id),\r\n            orderBy('completedAt', 'desc')\r\n          );\r\n        }\r\n\r\n        const resultsSnapshot = await getDocs(resultsQuery);\r\n        results = resultsSnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data()\r\n        })) as QuizResult[];\r\n        \r\n      } catch (indexError: any) {\r\n        // If index is still building, fall back to fetching all results and filtering client-side\r\n        console.warn('Index still building, using fallback query:', indexError.message);\r\n        \r\n        const fallbackQuery = query(\r\n          collection(db, 'quizResults'),\r\n          where('quizId', '==', id)\r\n        );\r\n        \r\n        const resultsSnapshot = await getDocs(fallbackQuery);\r\n        let allResults = resultsSnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data()\r\n        })) as QuizResult[];\r\n        \r\n        // Filter by time range client-side\r\n        if (timeRange !== 'all') {\r\n          const days = timeRange === '7days' ? 7 : 30;\r\n          const startDate = new Date();\r\n          startDate.setDate(startDate.getDate() - days);\r\n          \r\n          allResults = allResults.filter(result => \r\n            result.completedAt && new Date(result.completedAt) >= startDate\r\n          );\r\n        }\r\n        \r\n        // Sort client-side\r\n        results = allResults.sort((a, b) => {\r\n          const dateA = a.completedAt ? new Date(a.completedAt).getTime() : 0;\r\n          const dateB = b.completedAt ? new Date(b.completedAt).getTime() : 0;\r\n          return dateB - dateA;\r\n        });\r\n      }\r\n\r\n      // Calculate stats\r\n      const calculatedStats = calculateStats(results, quizData);\r\n      setStats(calculatedStats);\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching quiz stats:', error);\r\n      navigate(ROUTES.CREATOR_MY_QUIZZES);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id, user, timeRange, navigate]);\r\n  // calculateStats is a stable function defined below, doesn't need to be in dependencies\r\n\r\n  useEffect(() => {\r\n    if (id && user) {\r\n      fetchQuizAndStats();\r\n    }\r\n  }, [id, user, timeRange, fetchQuizAndStats]);\r\n\r\n  const calculateStats = (results: QuizResult[], quizData: Quiz): Stats => {\r\n    // Default score ranges\r\n    const defaultScoreDistribution = [\r\n      { range: '0-20%', count: 0 },\r\n      { range: '21-40%', count: 0 },\r\n      { range: '41-60%', count: 0 },\r\n      { range: '61-80%', count: 0 },\r\n      { range: '81-100%', count: 0 }\r\n    ];\r\n\r\n    // Default daily attempts (last 30 days)\r\n    const defaultDailyAttempts: { date: string; count: number }[] = [];\r\n    for (let i = 29; i >= 0; i--) {\r\n      const date = new Date();\r\n      date.setDate(date.getDate() - i);\r\n      const dateStr = date.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit' });\r\n      defaultDailyAttempts.push({ date: dateStr, count: 0 });\r\n    }\r\n\r\n    if (results.length === 0) {\r\n      return {\r\n        totalViews: quizData.views || 0,\r\n        totalAttempts: 0,\r\n        totalCompletions: 0,\r\n        completionRate: 0,\r\n        averageScore: 0,\r\n        averageTimeSpent: 0,\r\n        highestScore: 0,\r\n        lowestScore: 0,\r\n        passRate: 0,\r\n        recentResults: [],\r\n        scoreDistribution: defaultScoreDistribution,\r\n        dailyAttempts: defaultDailyAttempts,\r\n        questionStats: [],\r\n        topPerformers: []\r\n      };\r\n    }\r\n\r\n    const totalAttempts = results.length;\r\n    const completedResults = results.filter(r => r.score !== undefined);\r\n    const totalCompletions = completedResults.length;\r\n    \r\n    const scores = completedResults.map(r => (r.score / r.totalQuestions) * 100);\r\n    const averageScore = scores.reduce((a, b) => a + b, 0) / scores.length || 0;\r\n    const highestScore = Math.max(...scores, 0);\r\n    const lowestScore = Math.min(...scores, 100);\r\n    \r\n    const passRate = (scores.filter(s => s >= 60).length / scores.length) * 100 || 0;\r\n    \r\n    const timeSpents = completedResults.map(r => r.timeSpent || 0).filter(t => t > 0);\r\n    const averageTimeSpent = timeSpents.reduce((a, b) => a + b, 0) / timeSpents.length || 0;\r\n\r\n    // Score distribution\r\n    const scoreRanges = [\r\n      { range: '0-20%', min: 0, max: 20 },\r\n      { range: '21-40%', min: 21, max: 40 },\r\n      { range: '41-60%', min: 41, max: 60 },\r\n      { range: '61-80%', min: 61, max: 80 },\r\n      { range: '81-100%', min: 81, max: 100 }\r\n    ];\r\n    \r\n    const scoreDistribution = scoreRanges.map(range => ({\r\n      range: range.range,\r\n      count: scores.filter(s => s >= range.min && s <= range.max).length\r\n    }));\r\n\r\n    // Daily attempts (last 7 or 30 days)\r\n    const days = timeRange === '7days' ? 7 : timeRange === '30days' ? 30 : 90;\r\n    const dailyAttempts: { date: string; count: number }[] = [];\r\n    \r\n    for (let i = days - 1; i >= 0; i--) {\r\n      const date = new Date();\r\n      date.setDate(date.getDate() - i);\r\n      const dateStr = date.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit' });\r\n      \r\n      const count = results.filter(r => {\r\n        const resultDate = r.completedAt?.toDate ? r.completedAt.toDate() : new Date(r.completedAt);\r\n        return resultDate.toDateString() === date.toDateString();\r\n      }).length;\r\n      \r\n      dailyAttempts.push({ date: dateStr, count });\r\n    }\r\n\r\n    // Question stats\r\n    const questionStats = quizData.questions.map((q, index) => {\r\n      const questionId = q.id || `q${index}`;\r\n      const answersForQuestion = results.flatMap(r => \r\n        r.answers?.filter((a: any) => a.questionId === questionId) || []\r\n      );\r\n      \r\n      const correctCount = answersForQuestion.filter((a: any) => a.isCorrect).length;\r\n      const correctRate = answersForQuestion.length > 0 \r\n        ? (correctCount / answersForQuestion.length) * 100 \r\n        : 0;\r\n      \r\n      return {\r\n        questionId,\r\n        question: q.text || 'Untitled Question',\r\n        correctRate: Math.round(correctRate)\r\n      };\r\n    }).sort((a, b) => a.correctRate - b.correctRate);\r\n\r\n    // Top performers\r\n    const topPerformers = completedResults\r\n      .sort((a, b) => b.score - a.score)\r\n      .slice(0, 10)\r\n      .map(r => ({\r\n        userName: r.userName || 'Anonymous',\r\n        score: Math.round((r.score / r.totalQuestions) * 100),\r\n        date: r.completedAt?.toDate ? r.completedAt.toDate().toLocaleDateString('vi-VN') : 'N/A'\r\n      }));\r\n\r\n    return {\r\n      totalViews: quizData.views || 0,\r\n      totalAttempts,\r\n      totalCompletions,\r\n      completionRate: (totalCompletions / totalAttempts) * 100 || 0,\r\n      averageScore: Math.round(averageScore),\r\n      averageTimeSpent: Math.round(averageTimeSpent),\r\n      highestScore: Math.round(highestScore),\r\n      lowestScore: Math.round(lowestScore),\r\n      passRate: Math.round(passRate),\r\n      recentResults: results.slice(0, 20),\r\n      scoreDistribution,\r\n      dailyAttempts,\r\n      questionStats,\r\n      topPerformers\r\n    };\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const handleExport = () => {\r\n    // TODO: Implement export to CSV/Excel\r\n    alert('T├¡nh n─âng xuß║Ñt b├ío c├ío ─æang ─æ╞░ß╗úc ph├ít triß╗ân');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600 font-medium\">─Éang tß║úi thß╗æng k├¬...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!quiz || !stats) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-gray-600 mb-4\">Kh├┤ng t├¼m thß║Ñy quiz</p>\r\n          <button\r\n            onClick={() => navigate(ROUTES.CREATOR_MY_QUIZZES)}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          >\r\n            Quay lß║íi\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Chart data (commented - using tables instead)\r\n  /*\r\n  const lineChartData = {\r\n    labels: stats.dailyAttempts.map(d => d.date),\r\n    datasets: [\r\n      {\r\n        label: 'L╞░ß╗út l├ám b├ái',\r\n        data: stats.dailyAttempts.map(d => d.count),\r\n        borderColor: 'rgb(59, 130, 246)',\r\n        backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n        tension: 0.4,\r\n        fill: true,\r\n      }\r\n    ]\r\n  };\r\n\r\n  const scoreDistributionData = {\r\n    labels: stats.scoreDistribution.map(d => d.range),\r\n    datasets: [\r\n      {\r\n        label: 'Sß╗æ hß╗ìc vi├¬n',\r\n        data: stats.scoreDistribution.map(d => d.count),\r\n        backgroundColor: [\r\n          'rgba(239, 68, 68, 0.8)',\r\n          'rgba(249, 115, 22, 0.8)',\r\n          'rgba(234, 179, 8, 0.8)',\r\n          'rgba(34, 197, 94, 0.8)',\r\n          'rgba(59, 130, 246, 0.8)',\r\n        ],\r\n        borderColor: [\r\n          'rgb(239, 68, 68)',\r\n          'rgb(249, 115, 22)',\r\n          'rgb(234, 179, 8)',\r\n          'rgb(34, 197, 94)',\r\n          'rgb(59, 130, 246)',\r\n        ],\r\n        borderWidth: 2\r\n      }\r\n    ]\r\n  };\r\n\r\n  const questionDifficultyData = {\r\n    labels: stats.questionStats.slice(0, 10).map(q => `C├óu ${stats.questionStats.indexOf(q) + 1}`),\r\n    datasets: [\r\n      {\r\n        label: 'Tß╗╖ lß╗ç ─æ├║ng (%)',\r\n        data: stats.questionStats.slice(0, 10).map(q => q.correctRate),\r\n        backgroundColor: 'rgba(139, 92, 246, 0.8)',\r\n        borderColor: 'rgb(139, 92, 246)',\r\n        borderWidth: 2\r\n      }\r\n    ]\r\n  };\r\n  */\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <button\r\n            onClick={() => navigate(ROUTES.CREATOR_MY_QUIZZES)}\r\n            className=\"mb-4 flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors group\"\r\n          >\r\n            <ArrowLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\r\n            <span className=\"font-medium\">Quay lß║íi My Quizzes</span>\r\n          </button>\r\n\r\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n            <div className=\"flex items-start justify-between\">\r\n              <div className=\"flex-1\">\r\n                <div className=\"flex items-center gap-3 mb-3\">\r\n                  <h1 className=\"text-3xl font-bold text-gray-900\">{quiz.title}</h1>\r\n                  {quiz.havePassword === 'password' && (\r\n                    <span className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium flex items-center gap-1\">\r\n                      <Lock className=\"w-4 h-4\" />\r\n                      Password\r\n                    </span>\r\n                  )}\r\n                  {quiz.quizType === 'with-materials' && (\r\n                    <span className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium flex items-center gap-1\">\r\n                      <BookOpen className=\"w-4 h-4\" />\r\n                      With Materials\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-gray-600 mb-4\">{quiz.description}</p>\r\n                <div className=\"flex items-center gap-4 text-sm\">\r\n                  <span className=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg font-medium\">\r\n                    ≡ƒôÜ {quiz.category}\r\n                  </span>\r\n                  <span className={`px-3 py-1 rounded-lg font-medium ${\r\n                    quiz.difficulty === 'easy' ? 'bg-green-100 text-green-700' :\r\n                    quiz.difficulty === 'medium' ? 'bg-yellow-100 text-yellow-700' :\r\n                    'bg-red-100 text-red-700'\r\n                  }`}>\r\n                    {quiz.difficulty === 'easy' ? 'Γ¡É Dß╗à' : quiz.difficulty === 'medium' ? 'Γ¡ÉΓ¡É Trung b├¼nh' : 'Γ¡ÉΓ¡ÉΓ¡É Kh├│'}\r\n                  </span>\r\n                  <span className=\"text-gray-600\">\r\n                    <Brain className=\"w-4 h-4 inline mr-1\" />\r\n                    {quiz.questions.length} c├óu hß╗Åi\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              {quiz.imageUrl && (\r\n                <img\r\n                  src={quiz.imageUrl}\r\n                  alt={quiz.title}\r\n                  className=\"w-32 h-32 rounded-xl object-cover ml-6\"\r\n                />\r\n              )}\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"flex gap-3 mt-6 pt-6 border-t border-gray-200\">\r\n              <button\r\n                onClick={() => navigate(`/quiz-preview/${quiz.id}`)}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 font-medium\"\r\n              >\r\n                <Eye className=\"w-4 h-4\" />\r\n                Xem Quiz\r\n              </button>\r\n              <button\r\n                onClick={handleExport}\r\n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                Xuß║Ñt b├ío c├ío\r\n              </button>\r\n              <select\r\n                value={timeRange}\r\n                onChange={(e) => setTimeRange(e.target.value as any)}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n              >\r\n                <option value=\"7days\">7 ng├áy qua</option>\r\n                <option value=\"30days\">30 ng├áy qua</option>\r\n                <option value=\"all\">Tß║Ñt cß║ú thß╗¥i gian</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n          {/* Total Views */}\r\n          <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Eye className=\"w-8 h-8 opacity-80\" />\r\n              <Activity className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{stats.totalViews.toLocaleString()}</h3>\r\n            <p className=\"text-blue-100 text-sm font-medium\">L╞░ß╗út xem</p>\r\n          </div>\r\n\r\n          {/* Total Attempts */}\r\n          <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Users className=\"w-8 h-8 opacity-80\" />\r\n              <TrendingUp className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{stats.totalAttempts.toLocaleString()}</h3>\r\n            <p className=\"text-purple-100 text-sm font-medium\">L╞░ß╗út l├ám b├ái</p>\r\n          </div>\r\n\r\n          {/* Completion Rate */}\r\n          <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <CheckCircle className=\"w-8 h-8 opacity-80\" />\r\n              <Target className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{stats.completionRate.toFixed(1)}%</h3>\r\n            <p className=\"text-green-100 text-sm font-medium\">Tß╗╖ lß╗ç ho├án th├ánh</p>\r\n          </div>\r\n\r\n          {/* Average Score */}\r\n          <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Award className=\"w-8 h-8 opacity-80\" />\r\n              <Star className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{stats.averageScore}%</h3>\r\n            <p className=\"text-orange-100 text-sm font-medium\">─Éiß╗âm trung b├¼nh</p>\r\n          </div>\r\n\r\n          {/* Pass Rate */}\r\n          <div className=\"bg-gradient-to-br from-teal-500 to-teal-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Trophy className=\"w-8 h-8 opacity-80\" />\r\n              <CheckCircle className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{stats.passRate}%</h3>\r\n            <p className=\"text-teal-100 text-sm font-medium\">Tß╗╖ lß╗ç ─æß║ít (ΓëÑ60%)</p>\r\n          </div>\r\n\r\n          {/* Highest Score */}\r\n          <div className=\"bg-gradient-to-br from-pink-500 to-pink-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <TrendingUp className=\"w-8 h-8 opacity-80\" />\r\n              <Star className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{stats.highestScore}%</h3>\r\n            <p className=\"text-pink-100 text-sm font-medium\">─Éiß╗âm cao nhß║Ñt</p>\r\n          </div>\r\n\r\n          {/* Average Time */}\r\n          <div className=\"bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <Clock className=\"w-8 h-8 opacity-80\" />\r\n              <Activity className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{formatTime(stats.averageTimeSpent)}</h3>\r\n            <p className=\"text-indigo-100 text-sm font-medium\">Thß╗¥i gian TB</p>\r\n          </div>\r\n\r\n          {/* Completions */}\r\n          <div className=\"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-6 text-white shadow-lg\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <BarChart3 className=\"w-8 h-8 opacity-80\" />\r\n              <CheckCircle className=\"w-6 h-6 opacity-60\" />\r\n            </div>\r\n            <h3 className=\"text-3xl font-bold mb-1\">{stats.totalCompletions.toLocaleString()}</h3>\r\n            <p className=\"text-cyan-100 text-sm font-medium\">Ho├án th├ánh</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Visualization */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* Daily Attempts Bar Chart */}\r\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <TrendingUp className=\"w-6 h-6 text-blue-600\" />\r\n              Xu h╞░ß╗¢ng l├ám b├ái theo ng├áy\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {stats.dailyAttempts.map((day, index) => {\r\n                const maxCount = Math.max(...stats.dailyAttempts.map(d => d.count), 1);\r\n                const widthPercent = day.count > 0 ? Math.max((day.count / maxCount) * 100, 10) : 0;\r\n                \r\n                return (\r\n                  <div key={index} className=\"flex items-center gap-3\">\r\n                    <span className=\"text-sm font-medium text-gray-600 w-16\">{day.date}</span>\r\n                    <div className=\"flex-1 bg-gray-100 rounded-full h-8 overflow-hidden\">\r\n                      <div \r\n                        className=\"bg-gradient-to-r from-blue-500 to-blue-600 h-full flex items-center justify-end px-3 text-white text-sm font-semibold transition-all duration-500\"\r\n                        style={{ width: `${widthPercent}%` }}\r\n                      >\r\n                        {day.count > 0 && day.count}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Score Distribution */}\r\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <PieChart className=\"w-6 h-6 text-purple-600\" />\r\n              Ph├ón bß╗æ ─æiß╗âm sß╗æ\r\n            </h3>\r\n            <div className=\"space-y-4\">\r\n              {stats.scoreDistribution.map((range, index) => {\r\n                const colors = [\r\n                  { bg: 'bg-red-500', text: 'text-red-700', light: 'bg-red-100' },\r\n                  { bg: 'bg-orange-500', text: 'text-orange-700', light: 'bg-orange-100' },\r\n                  { bg: 'bg-yellow-500', text: 'text-yellow-700', light: 'bg-yellow-100' },\r\n                  { bg: 'bg-green-500', text: 'text-green-700', light: 'bg-green-100' },\r\n                  { bg: 'bg-blue-500', text: 'text-blue-700', light: 'bg-blue-100' }\r\n                ];\r\n                const color = colors[index];\r\n                const percentage = stats.totalCompletions > 0 ? (range.count / stats.totalCompletions * 100).toFixed(1) : 0;\r\n                const maxCount = Math.max(...stats.scoreDistribution.map(r => r.count), 1);\r\n                const widthPercent = range.count > 0 ? Math.max((range.count / maxCount) * 100, 15) : 0;\r\n                \r\n                return (\r\n                  <div key={range.range} className=\"flex items-center gap-3\">\r\n                    <span className={`text-sm font-medium w-20 px-3 py-1 rounded-lg ${color.light} ${color.text}`}>\r\n                      {range.range}\r\n                    </span>\r\n                    <div className=\"flex-1 bg-gray-100 rounded-full h-10 overflow-hidden\">\r\n                      <div \r\n                        className={`${color.bg} h-full flex items-center justify-between px-4 text-white text-sm font-semibold transition-all duration-500`}\r\n                        style={{ width: `${widthPercent}%` }}\r\n                      >\r\n                        <span>{range.count} HV</span>\r\n                        <span>{percentage}%</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Analysis Row 2 */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* Question Difficulty Analysis */}\r\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <BarChart3 className=\"w-6 h-6 text-green-600\" />\r\n              ─Éß╗Ö kh├│ c├óu hß╗Åi (Top 10 kh├│ nhß║Ñt)\r\n            </h3>\r\n            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n              {stats.questionStats.length > 0 ? (\r\n                stats.questionStats.slice(0, 10).map((q, index) => (\r\n                  <div key={q.questionId} className=\"border-b border-gray-100 pb-3 last:border-0\">\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <p className=\"text-sm text-gray-700 font-medium flex-1 pr-4\">\r\n                        <span className=\"text-blue-600 font-bold\">C├óu {index + 1}:</span> {q.question}\r\n                      </p>\r\n                      <span className={`text-sm font-bold px-3 py-1 rounded-lg ${\r\n                        q.correctRate >= 80 ? 'bg-green-100 text-green-700' :\r\n                        q.correctRate >= 60 ? 'bg-blue-100 text-blue-700' :\r\n                        q.correctRate >= 40 ? 'bg-yellow-100 text-yellow-700' :\r\n                        'bg-red-100 text-red-700'\r\n                      }`}>\r\n                        {q.correctRate}%\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                      <div \r\n                        className={`h-full rounded-full transition-all duration-500 ${\r\n                          q.correctRate >= 80 ? 'bg-green-500' :\r\n                          q.correctRate >= 60 ? 'bg-blue-500' :\r\n                          q.correctRate >= 40 ? 'bg-yellow-500' :\r\n                          'bg-red-500'\r\n                        }`}\r\n                        style={{ width: `${q.correctRate}%` }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  <BarChart3 className=\"w-12 h-12 mx-auto mb-3 text-gray-400\" />\r\n                  <p>Ch╞░a c├│ dß╗» liß╗çu ph├ón t├¡ch c├óu hß╗Åi</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Top Performers */}\r\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <Trophy className=\"w-6 h-6 text-yellow-600\" />\r\n              Top 10 hß╗ìc vi├¬n xuß║Ñt sß║»c\r\n            </h3>\r\n            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n              {stats.topPerformers.length > 0 ? (\r\n                stats.topPerformers.map((performer, index) => (\r\n                  <div \r\n                    key={index}\r\n                    className=\"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl border border-yellow-200 hover:shadow-md transition-shadow\"\r\n                  >\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${\r\n                        index === 0 ? 'bg-yellow-500' :\r\n                        index === 1 ? 'bg-gray-400' :\r\n                        index === 2 ? 'bg-orange-600' :\r\n                        'bg-blue-500'\r\n                      }`}>\r\n                        {index === 0 ? '≡ƒÑç' : index === 1 ? '≡ƒÑê' : index === 2 ? '≡ƒÑë' : index + 1}\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"font-semibold text-gray-900\">{performer.userName}</p>\r\n                        <p className=\"text-sm text-gray-600\">{performer.date}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-2xl font-bold text-gray-900\">{performer.score}%</p>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p className=\"text-center text-gray-500 py-8\">Ch╞░a c├│ dß╗» liß╗çu</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Results Table */}\r\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-200 p-6\">\r\n          <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n            <Calendar className=\"w-6 h-6 text-blue-600\" />\r\n            20 kß║┐t quß║ú gß║ºn nhß║Ñt\r\n          </h3>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead>\r\n                <tr className=\"border-b-2 border-gray-200\">\r\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-700\">Hß╗ìc vi├¬n</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">─Éiß╗âm</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">─É├║ng/Tß╗òng</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">Thß╗¥i gian</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">Ng├áy l├ám</th>\r\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold text-gray-700\">Kß║┐t quß║ú</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {stats.recentResults.length > 0 ? (\r\n                  stats.recentResults.map((result, index) => {\r\n                    const scorePercent = Math.round((result.score / result.totalQuestions) * 100);\r\n                    const passed = scorePercent >= 60;\r\n                    \r\n                    return (\r\n                      <tr key={result.id} className={`border-b border-gray-100 hover:bg-gray-50 transition-colors ${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>\r\n                        <td className=\"px-4 py-4 text-sm text-gray-900 font-medium\">\r\n                          {result.userName || 'Anonymous'}\r\n                        </td>\r\n                        <td className=\"px-4 py-4 text-center\">\r\n                          <span className={`px-3 py-1 rounded-full text-sm font-bold ${\r\n                            scorePercent >= 80 ? 'bg-green-100 text-green-700' :\r\n                            scorePercent >= 60 ? 'bg-blue-100 text-blue-700' :\r\n                            scorePercent >= 40 ? 'bg-yellow-100 text-yellow-700' :\r\n                            'bg-red-100 text-red-700'\r\n                          }`}>\r\n                            {scorePercent}%\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-4 py-4 text-center text-sm text-gray-600\">\r\n                          {result.correctAnswers}/{result.totalQuestions}\r\n                        </td>\r\n                        <td className=\"px-4 py-4 text-center text-sm text-gray-600\">\r\n                          {formatTime(result.timeSpent || 0)}\r\n                        </td>\r\n                        <td className=\"px-4 py-4 text-center text-sm text-gray-600\">\r\n                          {result.completedAt?.toDate ? result.completedAt.toDate().toLocaleString('vi-VN') : 'N/A'}\r\n                        </td>\r\n                        <td className=\"px-4 py-4 text-center\">\r\n                          {passed ? (\r\n                            <span className=\"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold\">\r\n                              <CheckCircle className=\"w-3.5 h-3.5\" />\r\n                              ─Éß║ít\r\n                            </span>\r\n                          ) : (\r\n                            <span className=\"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold\">\r\n                              <XCircle className=\"w-3.5 h-3.5\" />\r\n                              Ch╞░a ─æß║ít\r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan={6} className=\"px-4 py-8 text-center text-gray-500\">\r\n                      Ch╞░a c├│ kß║┐t quß║ú n├áo\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizDetailedStats;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\components\\ConfirmationModals.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              C├▓n c├óu hß╗Åi ch╞░a trß║ú lß╗¥i\r\n            </h3>","line":60,"column":70,"nodeType":"JSXText","endLine":62,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-4\">\r\n              Bß║ín c├▓n {unansweredQuestions.length} c├óu hß╗Åi ch╞░a trß║ú lß╗¥i:\r\n            </p>","line":63,"column":47,"nodeType":"JSXText","endLine":64,"endColumn":23},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-4\">\r\n              Bß║ín c├▓n {unansweredQuestions.length} c├óu hß╗Åi ch╞░a trß║ú lß╗¥i:\r\n            </p>","line":64,"column":51,"nodeType":"JSXText","endLine":65,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                  key={question.id}\r\n                  onClick={() => {\r\n                    modalControls.setShowUnansweredModal(false);\r\n                    onGoToQuestion(index);\r\n                  }}\r\n                  className=\"block w-full text-left p-2 hover:bg-gray-100 rounded text-blue-600 hover:text-blue-800\"\r\n                >\r\n                  C├óu {index + 1}: {question.text.slice(0, 50)}...\r\n                </button>","line":75,"column":18,"nodeType":"JSXText","endLine":76,"endColumn":23},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={() => modalControls.setShowUnansweredModal(false)}\r\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n              >\r\n                Tiß║┐p tß╗Ñc l├ám b├ái\r\n              </button>","line":84,"column":16,"nodeType":"JSXText","endLine":86,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={onConfirmSubmit}\r\n                className=\"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors\"\r\n              >\r\n                Nß╗Öp b├ái lu├┤n\r\n              </button>","line":90,"column":16,"nodeType":"JSXText","endLine":92,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Question } from '../../../types';\r\nimport { useTranslation } from 'react-i18next';\r\nimport ConfirmDialog from '../../../../../shared/components/ui/ConfirmDialog';\r\n\r\ninterface ConfirmationModalsProps {\r\n  modalControls: {\r\n    showExitModal: boolean;\r\n    setShowExitModal: React.Dispatch<React.SetStateAction<boolean>>;\r\n    showSubmitModal: boolean;\r\n    setShowSubmitModal: React.Dispatch<React.SetStateAction<boolean>>;\r\n    showUnansweredModal: boolean;\r\n    setShowUnansweredModal: React.Dispatch<React.SetStateAction<boolean>>;\r\n  };\r\n  onConfirmExit: () => void;\r\n  onConfirmSubmit: () => void;\r\n  unansweredQuestions: Question[];\r\n  onGoToQuestion: (index: number) => void;\r\n}\r\n\r\nconst ConfirmationModals: React.FC<ConfirmationModalsProps> = ({\r\n  modalControls,\r\n  onConfirmExit,\r\n  onConfirmSubmit,\r\n  unansweredQuestions,\r\n  onGoToQuestion,\r\n}) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <>\r\n      {/* Exit Confirmation Modal */}\r\n      <ConfirmDialog\r\n        isOpen={modalControls.showExitModal}\r\n        onClose={() => modalControls.setShowExitModal(false)}\r\n        onConfirm={onConfirmExit}\r\n        title=\"ΓÜá∩╕Å Tho├ít khß╗Åi b├ái Quiz?\"\r\n        message=\"Tiß║┐n ─æß╗Ö l├ám b├ái cß╗ºa bß║ín sß║╜ bß╗ï mß║Ñt nß║┐u tho├ít b├óy giß╗¥. Bß║ín c├│ chß║»c chß║»n muß╗æn tiß║┐p tß╗Ñc?\"\r\n        confirmText=\"Tho├ít\"\r\n        cancelText=\"Tiß║┐p tß╗Ñc l├ám b├ái\"\r\n        type=\"danger\"\r\n      />\r\n\r\n      {/* Submit Confirmation Modal */}\r\n      <ConfirmDialog\r\n        isOpen={modalControls.showSubmitModal}\r\n        onClose={() => modalControls.setShowSubmitModal(false)}\r\n        onConfirm={onConfirmSubmit}\r\n        title=\"Γ£à Nß╗Öp b├ái Quiz?\"\r\n        message=\"Bß║ín c├│ chß║»c chß║»n muß╗æn nß╗Öp b├ái? Sau khi nß╗Öp sß║╜ kh├┤ng thß╗â thay ─æß╗òi ─æ├íp ├ín.\"\r\n        confirmText=\"Nß╗Öp b├ái\"\r\n        cancelText={t(\"common.cancel\")}\r\n        type=\"info\"\r\n      />\r\n\r\n      {/* Unanswered Questions Modal */}\r\n      {modalControls.showUnansweredModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-lg mx-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              C├▓n c├óu hß╗Åi ch╞░a trß║ú lß╗¥i\r\n            </h3>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              Bß║ín c├▓n {unansweredQuestions.length} c├óu hß╗Åi ch╞░a trß║ú lß╗¥i:\r\n            </p>\r\n            <div className=\"max-h-40 overflow-y-auto mb-6\">\r\n              {unansweredQuestions.map((question, index) => (\r\n                <button\r\n                  key={question.id}\r\n                  onClick={() => {\r\n                    modalControls.setShowUnansweredModal(false);\r\n                    onGoToQuestion(index);\r\n                  }}\r\n                  className=\"block w-full text-left p-2 hover:bg-gray-100 rounded text-blue-600 hover:text-blue-800\"\r\n                >\r\n                  C├óu {index + 1}: {question.text.slice(0, 50)}...\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={() => modalControls.setShowUnansweredModal(false)}\r\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n              >\r\n                Tiß║┐p tß╗Ñc l├ám b├ái\r\n              </button>\r\n              <button\r\n                onClick={onConfirmSubmit}\r\n                className=\"flex-1 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors\"\r\n              >\r\n                Nß╗Öp b├ái lu├┤n\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ConfirmationModals;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\components\\LearningResourcesView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\components\\ProgressIndicator.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm font-medium text-gray-600\">Tiß║┐n ─æß╗Ö</span>","line":17,"column":61,"nodeType":"JSXText","endLine":17,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface ProgressIndicatorProps {\r\n  current: number;\r\n  total: number;\r\n  percentage: number;\r\n}\r\n\r\nconst ProgressIndicator: React.FC<ProgressIndicatorProps> = ({ \r\n  current, \r\n  total, \r\n  percentage\r\n}) => {\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-4\">\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <span className=\"text-sm font-medium text-gray-600\">Tiß║┐n ─æß╗Ö</span>\r\n        <span className=\"text-sm font-bold text-gray-900\">\r\n          {current} / {total}\r\n        </span>\r\n      </div>\r\n      \r\n      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n        <div \r\n          className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\r\n          style={{ width: `${percentage}%` }}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressIndicator;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\components\\QuestionRenderer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\components\\QuickNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\components\\Timer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-xs font-medium text-gray-600 flex items-center\">\r\n          <svg className=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n          </svg>\r\n          Thß╗¥i gian c├▓n lß║íi\r\n        </span>","line":35,"column":17,"nodeType":"JSXText","endLine":37,"endColumn":9},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-xs text-red-600 font-medium mt-1 flex items-center\">\r\n          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n          Sß║»p hß║┐t giß╗¥!\r\n        </div>","line":56,"column":17,"nodeType":"JSXText","endLine":58,"endColumn":9},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-xs text-amber-600 font-medium mt-1 flex items-center\">\r\n          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n          C├▓n ├¡t thß╗¥i gian\r\n        </div>","line":65,"column":17,"nodeType":"JSXText","endLine":67,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface TimerProps {\r\n  timeLeft: string;\r\n  isWarning: boolean;\r\n  isCritical: boolean;\r\n  percentage?: number;\r\n}\r\n\r\nconst Timer: React.FC<TimerProps> = ({ timeLeft, isWarning, isCritical, percentage = 0 }) => {\r\n  const getTimerColor = () => {\r\n    if (isCritical) return 'text-red-600';\r\n    if (isWarning) return 'text-amber-600';\r\n    return 'text-blue-600'; // Changed to blue for better aesthetics\r\n  };\r\n\r\n  const getBackgroundColor = () => {\r\n    if (isCritical) return 'bg-red-50 border-red-200';\r\n    if (isWarning) return 'bg-amber-50 border-amber-200';\r\n    return 'bg-blue-50 border-blue-200'; // Changed to blue theme\r\n  };\r\n\r\n  const getProgressColor = () => {\r\n    if (isCritical) return 'bg-red-500';\r\n    if (isWarning) return 'bg-amber-500';\r\n    return 'bg-blue-500'; // Changed to blue for consistency\r\n  };\r\n\r\n  return (\r\n    <div className={`rounded-md border p-3 transition-all duration-300 ${getBackgroundColor()} ${isCritical ? 'animate-pulse' : ''}`}>\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <span className=\"text-xs font-medium text-gray-600 flex items-center\">\r\n          <svg className=\"w-3 h-3 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n          </svg>\r\n          Thß╗¥i gian c├▓n lß║íi\r\n        </span>\r\n        <span className={`text-lg font-bold font-mono ${getTimerColor()}`}>\r\n          {timeLeft}\r\n        </span>\r\n      </div>\r\n      \r\n      {/* Compact progress bar */}\r\n      <div className=\"w-full bg-gray-200 rounded-full h-1.5\">\r\n        <div \r\n          className={`h-1.5 rounded-full transition-all duration-1000 ${getProgressColor()}`}\r\n          style={{ width: `${Math.min(percentage, 100)}%` }}\r\n        ></div>\r\n      </div>\r\n      \r\n      {/* Subtle warning messages */}\r\n      {isCritical && (\r\n        <div className=\"text-xs text-red-600 font-medium mt-1 flex items-center\">\r\n          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n          Sß║»p hß║┐t giß╗¥!\r\n        </div>\r\n      )}\r\n      \r\n      {isWarning && !isCritical && (\r\n        <div className=\"text-xs text-amber-600 font-medium mt-1 flex items-center\">\r\n          <svg className=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n            <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n          C├▓n ├¡t thß╗¥i gian\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timer;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\hooks\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\hooks\\useQuizData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\hooks\\useQuizNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\hooks\\useQuizSession.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\hooks\\useQuizTimer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\index.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-red-500 text-6xl mb-4\">ΓÜá∩╕Å</div>","line":81,"column":55,"nodeType":"JSXText","endLine":81,"endColumn":57},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Kh├┤ng thß╗â tß║úi quiz</h2>","line":82,"column":65,"nodeType":"JSXText","endLine":82,"endColumn":83},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Tho├ít</span>","line":180,"column":23,"nodeType":"JSXText","endLine":180,"endColumn":28},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>C├óu tr╞░ß╗¢c</span>","line":240,"column":25,"nodeType":"JSXText","endLine":240,"endColumn":34},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Nß╗Öp b├ái</span>","line":252,"column":29,"nodeType":"JSXText","endLine":252,"endColumn":36},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>C├óu tiß║┐p</span>","line":259,"column":29,"nodeType":"JSXText","endLine":259,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../../lib/store';\r\nimport { useQuizData, useQuizSession, useQuizTimer, useQuizNavigation } from './hooks';\r\nimport Timer from './components/Timer';\r\nimport ProgressIndicator from './components/ProgressIndicator';\r\nimport QuestionRenderer from './components/QuestionRenderer';\r\nimport QuickNavigation from './components/QuickNavigation';\r\nimport ConfirmationModals from './components/ConfirmationModals';\r\nimport LearningResourcesView from './components/LearningResourcesView';\r\nimport QuizPasswordModal from '../../../../shared/components/ui/QuizPasswordModal';\r\nimport { unlockQuiz } from '../../../../lib/services/quizAccessService';\r\nimport { toast } from 'react-toastify';\r\nimport { Quiz, AnswerValue } from '../../types';\r\n\r\nconst QuizPage: React.FC = () => {\r\n  const { quiz, loading, error, needsPassword, quizMetadata, retryLoad } = useQuizData();\r\n  const user = useSelector((state: RootState) => state.auth.user);\r\n  const [showResources, setShowResources] = useState(true);\r\n  const [hasViewedResources, setHasViewedResources] = useState(false);\r\n\r\n  // Handle password submission\r\n  const handlePasswordSubmit = async (password: string): Promise<boolean> => {\r\n    if (!quizMetadata || !user) {\r\n      toast.error('Vui l├▓ng ─æ─âng nhß║¡p ─æß╗â truy cß║¡p quiz');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const success = await unlockQuiz(\r\n        quizMetadata.id,\r\n        user.uid,\r\n        password,\r\n        quizMetadata\r\n      );\r\n\r\n      if (success) {\r\n        toast.success('≡ƒÄë ─É├ú mß╗ƒ kh├│a quiz th├ánh c├┤ng!');\r\n        // Retry loading questions\r\n        retryLoad();\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    } catch (err) {\r\n      console.error('Error unlocking quiz:', err);\r\n      toast.error('C├│ lß╗ùi xß║úy ra khi mß╗ƒ kh├│a quiz');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">─Éang tß║úi quiz...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show password modal if needed\r\n  if (needsPassword && quizMetadata) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\">\r\n        <QuizPasswordModal\r\n          isOpen={true}\r\n          quizTitle={quizMetadata.title}\r\n          onClose={() => window.history.back()}\r\n          onSubmit={handlePasswordSubmit}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !quiz) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-red-500 text-6xl mb-4\">ΓÜá∩╕Å</div>\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Kh├┤ng thß╗â tß║úi quiz</h2>\r\n          <p className=\"text-gray-600\">{error || 'Quiz kh├┤ng tß╗ôn tß║íi'}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Check if quiz has learning resources\r\n  const hasResources = quiz.resources && quiz.resources.length > 0;\r\n\r\n  // Show resources view first if available and not viewed yet\r\n  if (hasResources && showResources && !hasViewedResources) {\r\n    return (\r\n      <LearningResourcesView\r\n        resources={quiz.resources || []}\r\n        onComplete={() => {\r\n          setHasViewedResources(true);\r\n          setShowResources(false);\r\n        }}\r\n        onSkip={() => {\r\n          setShowResources(false);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return <QuizPageContent quiz={quiz} />;\r\n};\r\n\r\ninterface QuizPageContentProps {\r\n  quiz: Quiz;\r\n}\r\n\r\nconst QuizPageContent: React.FC<QuizPageContentProps> = ({ quiz }) => {\r\n  // const navigate = useNavigate();\r\n  const {\r\n    session,\r\n    updateAnswer,\r\n    setCurrentQuestion,\r\n    completeQuiz,\r\n    getUnansweredQuestions,\r\n    progress\r\n  } = useQuizSession({ quiz });\r\n\r\n  const {\r\n    formattedTime,\r\n    isTimeRunningOut,\r\n    isTimeCritical,\r\n    percentage\r\n  } = useQuizTimer({\r\n    onTimeUp: completeQuiz,\r\n    isActive: !session.isCompleted\r\n  });\r\n\r\n  const {\r\n    goToNextQuestion,\r\n    goToPreviousQuestion,\r\n    goToQuestion,\r\n    handleExitQuiz,\r\n    confirmExitQuiz,\r\n    handleSubmitQuiz,\r\n    isFirstQuestion,\r\n    isLastQuestion,\r\n    modalControls\r\n  } = useQuizNavigation({\r\n    questions: quiz.questions,\r\n    currentQuestionIndex: session.currentQuestionIndex,\r\n    onQuestionChange: setCurrentQuestion,\r\n    answers: session.answers\r\n  });\r\n\r\n  const currentQuestion = quiz.questions[session.currentQuestionIndex];\r\n\r\n  if (session.isCompleted) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">─Éang xß╗¡ l├╜ kß║┐t quß║ú...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8\">\r\n      {/* Header vß╗¢i Timer v├á Progress */}\r\n      <div className=\"bg-white shadow-sm border-b\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={handleExitQuiz}\r\n                className=\"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                </svg>\r\n                <span>Tho├ít</span>\r\n              </button>\r\n              <div className=\"h-6 w-px bg-gray-300\"></div>\r\n              <h1 className=\"text-xl font-semibold text-gray-800\">{quiz.title}</h1>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-3\">\r\n\r\n              <ProgressIndicator\r\n                current={session.currentQuestionIndex + 1}\r\n                total={quiz.questions.length}\r\n                percentage={progress}\r\n              />\r\n              <Timer\r\n                timeLeft={formattedTime}\r\n                isWarning={isTimeRunningOut}\r\n                isCritical={isTimeCritical}\r\n                percentage={percentage}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n          {/* Navigation Panel */}\r\n          <div className=\"lg:col-span-1\">\r\n            <QuickNavigation\r\n              questions={quiz.questions}\r\n              currentQuestionIndex={session.currentQuestionIndex}\r\n              answers={session.answers}\r\n              onQuestionSelect={goToQuestion}\r\n            />\r\n          </div>\r\n\r\n          {/* Main Quiz Content */}\r\n          <div className=\"lg:col-span-3\">\r\n            <div className=\"bg-white rounded-lg shadow-sm border p-8\">\r\n              <QuestionRenderer\r\n                question={currentQuestion}\r\n                questionNumber={session.currentQuestionIndex + 1}\r\n                value={session.answers[currentQuestion.id]}\r\n                onChange={(answer: AnswerValue) => updateAnswer(currentQuestion.id, answer)}\r\n              />\r\n\r\n              {/* Navigation Buttons */}\r\n              <div className=\"flex items-center justify-between mt-8 pt-6 border-t\">\r\n                <button\r\n                  onClick={goToPreviousQuestion}\r\n                  disabled={isFirstQuestion}\r\n                  className={`flex items-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all ${\r\n                    isFirstQuestion\r\n                      ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                      : 'bg-gray-600 text-white hover:bg-gray-700 shadow-sm hover:shadow-md'\r\n                  }`}\r\n                >\r\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                  </svg>\r\n                  <span>C├óu tr╞░ß╗¢c</span>\r\n                </button>\r\n\r\n                <div className=\"flex space-x-3\">\r\n                  {isLastQuestion ? (\r\n                    <button\r\n                      onClick={handleSubmitQuiz}\r\n                      className=\"flex items-center space-x-2 px-8 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 shadow-sm hover:shadow-md transition-all\"\r\n                    >\r\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                      </svg>\r\n                      <span>Nß╗Öp b├ái</span>\r\n                    </button>\r\n                  ) : (\r\n                    <button\r\n                      onClick={goToNextQuestion}\r\n                      className=\"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 shadow-sm hover:shadow-md transition-all\"\r\n                    >\r\n                      <span>C├óu tiß║┐p</span>\r\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                      </svg>\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <ConfirmationModals\r\n        modalControls={modalControls}\r\n        onConfirmExit={confirmExitQuiz}\r\n        onConfirmSubmit={completeQuiz}\r\n        unansweredQuestions={getUnansweredQuestions()}\r\n        onGoToQuestion={goToQuestion}\r\n      />\r\n\r\n      {/* Th├¬m cß║únh b├ío hß║┐t giß╗¥ nß║┐u cß║ºn thiß║┐t - hiß╗çn khi c├▓n <= 10% tß╗òng thß╗¥i gian */}\r\n      {isTimeRunningOut && (\r\n        <div className=\"mb-4 p-3 bg-red-100 border border-red-300 text-red-600 rounded-lg flex items-center gap-2\">\r\n          <span className=\"text-xl\">ΓÅ░</span>\r\n          <span className=\"font-medium\">\r\n            {isTimeCritical \r\n              ? \"Chß╗ë c├▓n ├¡t h╞ín 1 ph├║t! H├úy ho├án th├ánh ngay.\" \r\n              : \"Sß║»p hß║┐t giß╗¥! Chß╗ë c├▓n 10% thß╗¥i gian.\"}\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizPage;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPage\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizPreviewPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizResultViewer\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizResultViewer\\index.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Kh├┤ng t├¼m thß║Ñy kß║┐t quß║ú</h2>","line":127,"column":65,"nodeType":"JSXText","endLine":127,"endColumn":87},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n            onClick={() => navigate('/profile')}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          >\r\n            Quay lß║íi Profile\r\n          </button>","line":131,"column":12,"nodeType":"JSXText","endLine":133,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getQuizResultById } from '../../api/base';\r\nimport { getQuizById } from '../../services/quiz';\r\nimport { QuizResult, Quiz } from '../../types';\r\nimport { toast } from 'react-toastify';\r\nimport QuizReviewSystem from '../../../../shared/components/QuizReviewSystem';\r\nimport {\r\n  Confetti,\r\n  LoadingSpinner,\r\n  ResultSummary,\r\n  StatsGrid,\r\n  PerformanceAnalysis,\r\n  AnswerReview,\r\n  ActionButtons\r\n} from '../ResultPage/components';\r\nimport { useLeaderboard } from '../ResultPage/hooks';\r\nimport { Leaderboard } from '../ResultPage/components';\r\n\r\ninterface QuizResultViewerProps {}\r\n\r\nexport const QuizResultViewer: React.FC<QuizResultViewerProps> = () => {\r\n  const { resultId } = useParams<{ resultId: string }>();\r\n  const navigate = useNavigate();\r\n  \r\n  const [result, setResult] = useState<QuizResult | null>(null);\r\n  const [quiz, setQuiz] = useState<Quiz | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      if (!resultId) {\r\n        console.error('Γ¥î No resultId provided');\r\n        navigate('/profile');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        console.log('≡ƒöì Loading quiz result:', resultId);\r\n\r\n        // Fetch quiz result\r\n        const resultData = await getQuizResultById(resultId);\r\n        if (!resultData) {\r\n          console.error('Γ¥î Quiz result not found:', resultId);\r\n          toast.error('Kh├┤ng t├¼m thß║Ñy kß║┐t quß║ú quiz!');\r\n          navigate('/profile');\r\n          return;\r\n        }\r\n\r\n        console.log('Γ£à Loaded quiz result:', resultData);\r\n        setResult(resultData as QuizResult);\r\n\r\n        // Fetch quiz details\r\n        if (resultData.quizId) {\r\n          console.log('≡ƒöì Loading quiz details:', resultData.quizId);\r\n          const quizData = await getQuizById(resultData.quizId);\r\n          if (quizData) {\r\n            console.log('Γ£à Loaded quiz details:', quizData.title);\r\n            setQuiz(quizData);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Γ¥î Error loading data:', error);\r\n        toast.error('Kh├┤ng thß╗â tß║úi kß║┐t quß║ú quiz!');\r\n        navigate('/profile');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, [resultId, navigate]);\r\n\r\n  // Calculate percentage with unified logic (same as before)\r\n  const getPercentage = () => {\r\n    if (!result) return 0;\r\n    \r\n    // Primary: Use correctAnswers/totalQuestions if available\r\n    if (typeof result.correctAnswers === 'number' && typeof result.totalQuestions === 'number' && result.totalQuestions > 0) {\r\n      return Math.round((result.correctAnswers / result.totalQuestions) * 100);\r\n    } \r\n    // Fallback: Use score field\r\n    else if (typeof result.score === 'number' && !isNaN(result.score)) {\r\n      return result.score <= 1 ? Math.round(result.score * 100) : Math.round(result.score);\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  const percentage = getPercentage();\r\n  const correct = result?.correctAnswers || 0;\r\n  const total = result?.totalQuestions || 0;\r\n\r\n  // Transform result to match ResultPage format\r\n  const transformedResult = result ? {\r\n    score: percentage, // Use calculated percentage as score\r\n    correct: correct,\r\n    total: total,\r\n    timeSpent: result.timeSpent,\r\n    answers: result.answers?.reduce((acc, answer) => {\r\n      acc[answer.questionId] = answer.selectedAnswerId || '';\r\n      return acc;\r\n    }, {} as Record<string, string>) || {},\r\n    completedAt: result.completedAt,\r\n    isTimeUp: false, // Can add this field if needed\r\n    quizId: result.quizId\r\n  } : null;\r\n\r\n  // Pass current result to leaderboard\r\n  const currentResult = transformedResult ? {\r\n    score: { percentage },\r\n    correct,\r\n    total,\r\n    timeSpent: transformedResult.timeSpent\r\n  } : undefined;\r\n  \r\n  const { leaderboard, userRank, loadingStats } = useLeaderboard(quiz?.id || null, currentResult);\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  if (!result || !quiz || !transformedResult) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Kh├┤ng t├¼m thß║Ñy kß║┐t quß║ú</h2>\r\n          <button\r\n            onClick={() => navigate('/profile')}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\r\n          >\r\n            Quay lß║íi Profile\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const isExcellent = percentage >= 80;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8\">\r\n      {isExcellent && <Confetti />}\r\n      \r\n      <div className=\"max-w-4xl mx-auto px-4\">\r\n        {/* Kß║┐t quß║ú tß╗òng quan */}\r\n        <ResultSummary \r\n          result={transformedResult} \r\n          percentage={percentage} \r\n          correct={correct} \r\n          total={total} \r\n        />\r\n\r\n        {/* Stats Grid */}\r\n        <StatsGrid \r\n          correct={correct} \r\n          total={total} \r\n          percentage={percentage} \r\n        />\r\n\r\n        {/* Performance Analysis */}\r\n        <PerformanceAnalysis \r\n          quiz={quiz} \r\n          result={transformedResult} \r\n          percentage={percentage} \r\n        />\r\n\r\n        {/* Review Answers Section */}\r\n        <AnswerReview \r\n          quiz={quiz} \r\n          result={transformedResult} \r\n        />\r\n\r\n        {/* Leaderboard */}\r\n        <Leaderboard \r\n          leaderboard={leaderboard} \r\n          userRank={userRank} \r\n          loadingStats={loadingStats} \r\n        />\r\n\r\n        {/* Quiz Review System */}\r\n        <QuizReviewSystem \r\n          quizId={quiz.id}\r\n          quizTitle={quiz.title}\r\n          showSubmitForm={true}\r\n        />\r\n\r\n        {/* Action Buttons */}\r\n        <ActionButtons \r\n          quiz={quiz} \r\n          percentage={percentage} \r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuizResultViewer;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\QuizReviewsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\RealQuizListPage.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"flex items-center gap-1\">ID: <code className=\"bg-gray-100 px-2 py-0.5 rounded\">{quiz.id}</code></span>","line":103,"column":65,"nodeType":"JSXText","endLine":103,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { getRealQuizData } from '../services/realDataService';\r\nimport { Link } from 'react-router-dom';\r\nimport { ArrowLeft, RefreshCw, Eye, MessageSquare } from 'lucide-react';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\nimport SafeHTML from '../../../shared/components/ui/SafeHTML';\r\nconst RealQuizListPage: React.FC = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const [quizzes, setQuizzes] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadRealQuizzes();\r\n  }, []);\r\n\r\n  const loadRealQuizzes = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const realQuizzes = await getRealQuizData();\r\n      setQuizzes(realQuizzes);\r\n      console.log('Loaded real quizzes:', realQuizzes);\r\n    } catch (error) {\r\n      console.error('Error loading real quizzes:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 py-8\">\r\n        <div className=\"max-w-4xl mx-auto px-4\">\r\n          <div className=\"flex items-center justify-center py-12\">\r\n            <RefreshCw className=\"w-8 h-8 animate-spin text-blue-600 mr-3\" />\r\n            <span className=\"text-lg text-gray-600\">{t('quiz.loadingRealQuizzes')}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-5xl mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <Link\r\n            to=\"/admin\"\r\n            className=\"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n            {t('back')}\r\n          </Link>\r\n          \r\n          <div className=\"relative overflow-hidden rounded-2xl p-6 shadow-sm bg-gradient-to-r from-indigo-50 via-blue-50 to-sky-50 border border-gray-100\">\r\n            <div className=\"absolute inset-0 pointer-events-none opacity-40\" style={{backgroundImage:'radial-gradient(circle at 20% 20%, rgba(59,130,246,0.15), transparent 35%), radial-gradient(circle at 80% 0%, rgba(99,102,241,0.15), transparent 35%)'}} />\r\n            <div className=\"relative flex items-center justify-between\">\r\n              <div>\r\n                <h1 className=\"text-2xl md:text-3xl font-extrabold tracking-tight text-gray-900 mb-1\">\r\n                  ≡ƒôÜ {t('quizList.title')}\r\n                </h1>\r\n                <div className=\"flex items-center gap-3 text-gray-600\">\r\n                  <span className=\"px-2.5 py-1 rounded-full bg-white/70 border border-gray-200 text-sm\">\r\n                    {quizzes.length} {t('quizList.results.quizzes')}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={loadRealQuizzes}\r\n                className=\"inline-flex items-center px-4 py-2 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow hover:from-blue-700 hover:to-indigo-700 transition-colors\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4 mr-2\" />{t('refresh')}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quiz List */}\r\n        {quizzes.length === 0 ? (\r\n          <div className=\"bg-white rounded-lg p-8 shadow-sm text-center\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n              {t('quiz.noQuizzesInDatabase')}\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              {t('quiz.createQuizzesToTest')}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-4\">\r\n            {quizzes.map((quiz) => (\r\n              <div key={quiz.id} className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-lg hover:border-blue-200 transition-all\">\r\n                <div className=\"flex items-start justify-between gap-6\">\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"text-xl font-bold text-gray-900 mb-2 tracking-tight\">\r\n                      {quiz.title || t('quiz.noTitle')}\r\n                    </h3>\r\n                    \r\n                    <SafeHTML content={quiz.description || String(t('quiz.noDescription'))} className=\"text-gray-600 mb-4 line-clamp-2\" as=\"div\" />\r\n                    \r\n                    <div className=\"flex flex-wrap items-center gap-2 text-sm text-gray-600\">\r\n                      <span className=\"flex items-center gap-1\">ID: <code className=\"bg-gray-100 px-2 py-0.5 rounded\">{quiz.id}</code></span>\r\n                      {quiz.category && (\r\n                        <span className=\"px-2 py-0.5 rounded-full bg-gray-100 text-gray-700\">{t('quiz.category')}: {quiz.category}</span>\r\n                      )}\r\n                      {quiz.status && (\r\n                        <span className={`px-2.5 py-1 rounded-full text-xs font-medium border ${\r\n                          quiz.status === 'approved' ? 'bg-green-50 text-green-700 border-green-200' :\r\n                          quiz.status === 'pending' ? 'bg-yellow-50 text-yellow-700 border-yellow-200' :\r\n                          'bg-red-50 text-red-700 border-red-200'\r\n                        }`}>\r\n                          {quiz.status === 'approved' ? t('admin.quizManagement.filter.approved') :\r\n                           quiz.status === 'pending' ? t('admin.quizManagement.filter.pending') : t('status.rejected')}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <Link\r\n                       to={`/quiz/${quiz.id}/preview`}\r\n                      className=\"inline-flex items-center px-3 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 text-sm shadow\"\r\n                    >\r\n                      <Eye className=\"w-4 h-4 mr-2\" />\r\n                       {t('quiz.preview')}\r\n                    </Link>\r\n                    \r\n                    <Link\r\n                      to={`/quiz/${quiz.id}/reviews`}\r\n                      className=\"inline-flex items-center px-3 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 text-sm shadow\"\r\n                    >\r\n                      <MessageSquare className=\"w-4 h-4 mr-2\" />\r\n                       {t('quiz.reviewsTitle')}\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Quick Stats */}\r\n        {quizzes.length > 0 && (\r\n          <div className=\"mt-8 bg-white rounded-lg p-6 shadow-sm\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">≡ƒôè {t('dashboard.realTimeData')}</h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n              <div className=\"text-center\">\r\n                <p className=\"text-2xl font-bold text-blue-600\">{quizzes.length}</p>\r\n                <p className=\"text-sm text-gray-600\">{t('dashboard.totalQuizzes')}</p>\r\n              </div>\r\n              \r\n              <div className=\"text-center\">\r\n                <p className=\"text-2xl font-bold text-green-600\">\r\n                  {quizzes.filter(q => q.status === 'approved').length}\r\n                </p>\r\n                <p className=\"text-sm text-gray-600\">{t(\"admin.quizManagement.filter.approved\")}</p>\r\n              </div>\r\n              \r\n              <div className=\"text-center\">\r\n                <p className=\"text-2xl font-bold text-yellow-600\">\r\n                  {quizzes.filter(q => q.status === 'pending').length}\r\n                </p>\r\n                <p className=\"text-sm text-gray-600\">{t(\"admin.quizManagement.filter.pending\")}</p>\r\n              </div>\r\n              \r\n              <div className=\"text-center\">\r\n                <p className=\"text-2xl font-bold text-purple-600\">\r\n                  {new Set(quizzes.map(q => q.category).filter(Boolean)).size}\r\n                </p>\r\n                <p className=\"text-sm text-gray-600\">{t(\"admin.preview.category\")}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RealQuizListPage;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button onClick={() => navigate('/quiz-list')}>\r\n            Back to Quiz List\r\n          </Button>","line":305,"column":58,"nodeType":"JSXText","endLine":307,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"bg-yellow-100 border border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg mb-6\">\r\n                ΓÅ░ Time's up! Quiz was automatically submitted.\r\n              </div>","line":328,"column":113,"nodeType":"JSXText","endLine":330,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h1 className=\"text-3xl font-bold text-gray-900 mt-4 mb-2\">\r\n                Quiz Completed!\r\n              </h1>","line":334,"column":74,"nodeType":"JSXText","endLine":336,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n                You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n                <span className=\"font-bold\">{total}</span> questions correct\r\n              </div>","line":345,"column":59,"nodeType":"JSXText","endLine":346,"endColumn":25},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n                You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n                <span className=\"font-bold\">{total}</span> questions correct\r\n              </div>","line":346,"column":83,"nodeType":"JSXText","endLine":346,"endColumn":90},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n                You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n                <span className=\"font-bold\">{total}</span> questions correct\r\n              </div>","line":347,"column":59,"nodeType":"JSXText","endLine":348,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-md text-gray-500 mt-2\">\r\n                  ΓÅ▒∩╕Å Time taken: <span className=\"font-semibold text-blue-700\">{formatTime(safeNumber(result.timeSpent))}</span>\r\n                </div>","line":351,"column":61,"nodeType":"JSXText","endLine":352,"endColumn":34},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Correct Answers</div>","line":363,"column":44,"nodeType":"JSXText","endLine":363,"endColumn":59},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Incorrect Answers</div>","line":368,"column":44,"nodeType":"JSXText","endLine":368,"endColumn":61},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Final Score</div>","line":373,"column":44,"nodeType":"JSXText","endLine":373,"endColumn":55},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Performance Analysis</h2>","line":379,"column":64,"nodeType":"JSXText","endLine":379,"endColumn":84},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">Accuracy Rate</span>","line":383,"column":47,"nodeType":"JSXText","endLine":383,"endColumn":60},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">Quiz Difficulty</span>","line":396,"column":47,"nodeType":"JSXText","endLine":396,"endColumn":62},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">Time Management</span>","line":407,"column":47,"nodeType":"JSXText","endLine":407,"endColumn":62},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-xl font-bold text-gray-900\">Review Answers</h2>","line":418,"column":61,"nodeType":"JSXText","endLine":418,"endColumn":75},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowAnswers(!showAnswers)}\r\n            >\r\n              {showAnswers ? 'Hide' : 'Show'} Detailed Review\r\n            </Button>","line":423,"column":46,"nodeType":"JSXText","endLine":424,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-auto text-green-600 font-medium\">\r\n                                Γ£ô Correct Answer\r\n                              </span>","line":465,"column":84,"nodeType":"JSXText","endLine":467,"endColumn":31},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-auto text-red-600 font-medium\">\r\n                                Your Answer\r\n                              </span>","line":470,"column":82,"nodeType":"JSXText","endLine":472,"endColumn":31},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-blue-800\">Explanation: </span>","line":481,"column":69,"nodeType":"JSXText","endLine":481,"endColumn":82},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">≡ƒÅå Leaderboard</h2>","line":494,"column":65,"nodeType":"JSXText","endLine":494,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-blue-600 ml-2\">(You)</span>","line":523,"column":93,"nodeType":"JSXText","endLine":523,"endColumn":98},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-500\">\r\n                        {entry.correctAnswers}/{entry.totalQuestions} correct\r\n                      </div>","line":526,"column":70,"nodeType":"JSXText","endLine":527,"endColumn":23},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-500\">\r\n                      ΓÅ▒∩╕Å {formatTime(safeNumber(entry.timeSpent))}\r\n                    </div>","line":532,"column":60,"nodeType":"JSXText","endLine":533,"endColumn":26},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-blue-800 font-medium\">Your Rank: #{userRank}</span>","line":544,"column":67,"nodeType":"JSXText","endLine":544,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-lg\">No results yet!</p>","line":553,"column":38,"nodeType":"JSXText","endLine":553,"endColumn":53},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>Be the first to complete this quiz and claim the top spot!</p>","line":554,"column":18,"nodeType":"JSXText","endLine":554,"endColumn":76},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n            onClick={() => navigate(`/quiz/${quiz.id}`)}\r\n            className=\"bg-blue-600 hover:bg-blue-700\"\r\n          >\r\n            Retake Quiz\r\n          </Button>","line":574,"column":12,"nodeType":"JSXText","endLine":576,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n            onClick={() => navigate('/quizzes')}\r\n            variant=\"outline\"\r\n          >\r\n            More Quizzes\r\n          </Button>","line":581,"column":12,"nodeType":"JSXText","endLine":583,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n            variant=\"outline\"\r\n            onClick={() => {\r\n              // Share functionality\r\n              navigator.clipboard.writeText(\r\n                `I scored ${percentage}% on \"${quiz.title}\" quiz! ≡ƒÄ»`\r\n              );\r\n              toast.success('Result copied to clipboard!');\r\n            }}\r\n          >\r\n            Share Result\r\n          </Button>","line":594,"column":12,"nodeType":"JSXText","endLine":596,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n            onClick={() => navigate('/profile')}\r\n            variant=\"outline\"\r\n          >\r\n            View All Results\r\n          </Button>","line":601,"column":12,"nodeType":"JSXText","endLine":603,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":30,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../lib/store';\r\nimport { Quiz } from '../types';\r\nimport Button from '../../../shared/components/ui/Button';\r\nimport { getQuizResults, getQuizResultById, getQuizById } from '../services/quizService';\r\nimport { toast } from 'react-toastify';\r\nimport QuickReviewSection from '../../../shared/components/QuickReviewSection';\r\nimport { quizStatsService } from '../../../services/quizStatsService';\r\nimport SafeHTML from '../../../shared/components/ui/SafeHTML';\r\n\r\n\r\ninterface ResultState {\r\n  score: number;\r\n  correct: number;\r\n  total: number;\r\n  answers: Record<string, string>;\r\n  isTimeUp?: boolean;\r\n  timeSpent?: number;\r\n  quizId?: string;\r\n  tracked?: boolean; // Add this to prevent duplicate tracking\r\n}\r\n\r\ninterface LeaderboardEntry {\r\n  id: string;\r\n  userId: string;\r\n  userName: string;\r\n  userEmail: string;\r\n  score: number;\r\n  correctAnswers: number;\r\n  totalQuestions: number;\r\n  timeSpent: number;\r\n  completedAt: Date;\r\n}\r\n\r\n// **TH├èM Mß╗ÜI**: Confetti animation component\r\nconst Confetti: React.FC = () => {\r\n  return (\r\n    <div className=\"fixed inset-0 pointer-events-none overflow-hidden\">\r\n      {[...Array(50)].map((_, i) => (\r\n        <div\r\n          key={i}\r\n          className=\"absolute animate-bounce\"\r\n          style={{\r\n            left: `${Math.random() * 100}%`,\r\n            animationDelay: `${Math.random() * 3}s`,\r\n            animationDuration: `${2 + Math.random() * 3}s`\r\n          }}\r\n        >\r\n          <div \r\n            className=\"w-2 h-2 bg-yellow-400 rounded-full\"\r\n            style={{\r\n              backgroundColor: ['#f59e0b', '#10b981', '#3b82f6', '#8b5cf6', '#ef4444'][Math.floor(Math.random() * 5)]\r\n            }}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// **TH├èM Mß╗ÜI**: Score circle component\r\nconst ScoreCircle: React.FC<{ score: number }> = ({ score }) => {\r\n  const [animatedScore, setAnimatedScore] = useState(0);\r\n  \r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      let current = 0;\r\n      const increment = score / 50; // Animation in 50 steps\r\n      const stepTimer = setInterval(() => {\r\n        current += increment;\r\n        if (current >= score) {\r\n          setAnimatedScore(score);\r\n          clearInterval(stepTimer);\r\n        } else {\r\n          setAnimatedScore(Math.floor(current));\r\n        }\r\n      }, 20);\r\n    }, 500);\r\n    \r\n    return () => clearTimeout(timer);\r\n  }, [score]);\r\n\r\n  const getScoreColor = (score: number) => {\r\n    if (score >= 80) return 'text-green-600';\r\n    if (score >= 60) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n\r\n\r\n  const circumference = 2 * Math.PI * 45;\r\n  const strokeDasharray = circumference;\r\n  const strokeDashoffset = circumference - (animatedScore / 100) * circumference;\r\n\r\n  return (\r\n    <div className=\"relative w-32 h-32\">\r\n      <svg className=\"w-32 h-32 transform -rotate-90\" viewBox=\"0 0 100 100\">\r\n        <circle\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          r=\"45\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"6\"\r\n          fill=\"transparent\"\r\n          className=\"text-gray-200\"\r\n        />\r\n        <circle\r\n          cx=\"50\"\r\n          cy=\"50\"\r\n          r=\"45\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"6\"\r\n          fill=\"transparent\"\r\n          strokeDasharray={strokeDasharray}\r\n          strokeDashoffset={strokeDashoffset}\r\n          strokeLinecap=\"round\"\r\n          className={`transition-all duration-1000 ease-out ${\r\n            animatedScore >= 80 ? 'text-green-500' :\r\n            animatedScore >= 60 ? 'text-yellow-500' : 'text-red-500'\r\n          }`}\r\n        />\r\n      </svg>\r\n      <div className=\"absolute inset-0 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className={`text-2xl font-bold ${getScoreColor(animatedScore)}`}>\r\n            {animatedScore}%\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Helper: format seconds to mm:ss\r\nconst formatTime = (seconds: number) => {\r\n  const m = Math.floor(seconds / 60);\r\n  const s = seconds % 60;\r\n  return `${m}:${s.toString().padStart(2, '0')}`;\r\n};\r\n\r\n// Helper ├⌐p kiß╗âu an to├án cho sß╗æ\r\nconst safeNumber = (val: any, fallback = 0) => {\r\n  const n = Number(val);\r\n  return isNaN(n) ? fallback : n;\r\n};\r\n\r\nexport const ResultPage: React.FC = () => {\r\n  const { attemptId } = useParams<{ attemptId: string }>();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { quizzes } = useSelector((state: RootState) => state.quiz);\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  \r\n  const [result, setResult] = useState<ResultState | null>(location.state as ResultState || null);\r\n  const [quizId, setQuizId] = useState<string | null>(null);\r\n  const [quiz, setQuiz] = useState<Quiz | null>(null);\r\n  const [showAnswers, setShowAnswers] = useState(false);\r\n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([]);\r\n  const [userRank, setUserRank] = useState<number | null>(null);\r\n  const [loadingStats, setLoadingStats] = useState(true);\r\n\r\n  useEffect(() => {\r\n    console.log('≡ƒöì ResultPage useEffect - attemptId:', attemptId, 'location.state:', location.state);\r\n    \r\n    if (location.state) {\r\n      // C├│ state tß╗½ navigation - sß╗¡ dß╗Ñng ngay\r\n      const resultData = location.state as ResultState;\r\n      console.log('Γ£à Using state from navigation:', resultData);\r\n      setResult(resultData);\r\n      setQuizId(resultData.quizId || attemptId || null);\r\n    } else if (attemptId) {\r\n      // Kh├┤ng c├│ state, cß║ºn fetch tß╗½ Firestore\r\n      console.log('≡ƒôí Fetching result from Firestore for attemptId:', attemptId);\r\n      getQuizResultById(attemptId).then((res: any) => {\r\n        if (res) {\r\n          console.log('Γ£à Fetched result from Firestore:', res);\r\n          const resultData = res as ResultState;\r\n          setResult(resultData);\r\n          setQuizId(resultData.quizId || null);\r\n        } else {\r\n          console.error('Γ¥î No result found for attemptId:', attemptId);\r\n          toast.error('Kh├┤ng t├¼m thß║Ñy kß║┐t quß║ú quiz!');\r\n          navigate('/quiz-list');\r\n        }\r\n      }).catch(error => {\r\n        console.error('Γ¥î Error fetching result:', error);\r\n        toast.error('Kh├┤ng thß╗â tß║úi kß║┐t quß║ú quiz!');\r\n        navigate('/quiz-list');\r\n      });\r\n    } else {\r\n      console.error('Γ¥î No attemptId or state provided');\r\n      navigate('/quiz-list');\r\n    }\r\n  }, [attemptId, location.state, navigate]);\r\n\r\n  useEffect(() => {\r\n    if (!quizId) return;\r\n    \r\n    console.log('≡ƒöì Looking for quiz with ID:', quizId);\r\n    const foundQuiz = quizzes.find(q => q.id === quizId);\r\n    \r\n    if (foundQuiz) {\r\n      console.log('Γ£à Found quiz in store:', foundQuiz.title);\r\n      setQuiz(foundQuiz);\r\n    } else {\r\n      console.log('≡ƒôí Quiz not in store, fetching from Firestore...');\r\n      // Nß║┐u kh├┤ng c├│ trong store, fetch tß╗½ Firestore\r\n      getQuizById(quizId).then(qz => {\r\n        if (qz) {\r\n          console.log('Γ£à Fetched quiz from Firestore:', qz.title);\r\n          setQuiz(qz);\r\n        } else {\r\n          console.error('Γ¥î Quiz not found:', quizId);\r\n          toast.error('Kh├┤ng t├¼m thß║Ñy quiz!');\r\n          navigate('/quiz-list');\r\n        }\r\n      }).catch(error => {\r\n        console.error('Γ¥î Error fetching quiz:', error);\r\n        toast.error('Kh├┤ng thß╗â tß║úi quiz!');\r\n        navigate('/quiz-list');\r\n      });\r\n    }\r\n  }, [quizId, quizzes, navigate]);\r\n\r\n  // Track completion when result and quiz are both available\r\n  useEffect(() => {\r\n    if (result && quiz && user && !result.tracked) {\r\n      console.log('≡ƒôè Tracking quiz completion for user:', user.uid);\r\n      const score = safeNumber(result.correct, 0);\r\n      const total = safeNumber(result.total, quiz.questions.length);\r\n      \r\n      quizStatsService.trackCompletion(quiz.id, user.uid, score, total);\r\n      \r\n      // Mark as tracked to prevent duplicate tracking\r\n      setResult(prev => prev ? { ...prev, tracked: true } : null);\r\n    }\r\n  }, [result, quiz, user]);\r\n\r\n  useEffect(() => {\r\n    const fetchLeaderboard = async () => {\r\n      if (!quizId) return;\r\n      \r\n      try {\r\n        setLoadingStats(true);\r\n        console.log('≡ƒôè Fetching leaderboard for quiz:', quizId);\r\n        const results = await getQuizResults(quizId);\r\n        console.log('≡ƒôè Raw results from Firebase:', results);\r\n        \r\n        // Transform results to leaderboard entries with user info\r\n        const leaderboardData: LeaderboardEntry[] = results.map((result: any) => {\r\n          console.log('≡ƒöì Processing result:', result);\r\n          return {\r\n            id: result.id,\r\n            userId: result.userId,\r\n            userName: result.userName || result.userEmail?.split('@')[0] || 'Anonymous',\r\n            userEmail: result.userEmail || '',\r\n            score: result.score,\r\n            correctAnswers: result.correctAnswers,\r\n            totalQuestions: result.totalQuestions,\r\n            timeSpent: result.timeSpent || 0,\r\n            completedAt: result.completedAt?.toDate?.() || new Date(result.completedAt)\r\n          };\r\n        });\r\n\r\n        console.log('≡ƒôè Leaderboard data processed:', leaderboardData);\r\n\r\n        // Sort by score (descending) then by time (ascending) for same scores\r\n        const sortedLeaderboard = leaderboardData.sort((a, b) => {\r\n          if (a.score !== b.score) {\r\n            return b.score - a.score; // Higher score first\r\n          }\r\n          return a.timeSpent - b.timeSpent; // Faster time first if same score\r\n        });\r\n\r\n        console.log('≡ƒôè Sorted leaderboard:', sortedLeaderboard);\r\n        setLeaderboard(sortedLeaderboard.slice(0, 10)); // Top 10\r\n\r\n        // Find current user's rank\r\n        if (user) {\r\n          const userResultIndex = sortedLeaderboard.findIndex(r => r.userId === user.uid);\r\n          setUserRank(userResultIndex >= 0 ? userResultIndex + 1 : null);\r\n          console.log('≡ƒæñ User rank:', userResultIndex >= 0 ? userResultIndex + 1 : 'Not found');\r\n        }\r\n\r\n        console.log('≡ƒôè Leaderboard loaded:', sortedLeaderboard.length, 'entries');\r\n      } catch (error) {\r\n        console.error('Γ¥î Failed to fetch leaderboard:', error);\r\n        toast.error('Kh├┤ng thß╗â tß║úi bß║úng xß║┐p hß║íng!');\r\n      } finally {\r\n        setLoadingStats(false);\r\n      }\r\n    };\r\n\r\n    fetchLeaderboard();\r\n  }, [quizId, user]);\r\n\r\n  if (!result || !quiz) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mb-4\"></div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Loading results...</h2>\r\n          <Button onClick={() => navigate('/quiz-list')}>\r\n            Back to Quiz List\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // T├¡nh to├ín ─æiß╗âm sß╗æ, kiß╗âm tra hß╗úp lß╗ç\r\n  const correct = safeNumber(result.correct);\r\n  const total = safeNumber(result.total);\r\n  const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;\r\n  const isExcellent = percentage >= 80;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-8\">\r\n      {isExcellent && <Confetti />}\r\n      \r\n      <div className=\"max-w-4xl mx-auto px-4\">\r\n        {/* Kß║┐t quß║ú tß╗òng quan */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 mb-6\">\r\n            {result.isTimeUp && (\r\n              <div className=\"bg-yellow-100 border border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg mb-6\">\r\n                ΓÅ░ Time's up! Quiz was automatically submitted.\r\n              </div>\r\n            )}\r\n            <div className=\"flex flex-col items-center\">\r\n              <ScoreCircle score={percentage} />\r\n              <h1 className=\"text-3xl font-bold text-gray-900 mt-4 mb-2\">\r\n                Quiz Completed!\r\n              </h1>\r\n              <p className=\"text-xl text-gray-600 mb-4\">\r\n                {percentage >= 90 ? 'Outstanding! ≡ƒÅå' :\r\n                 percentage >= 80 ? 'Excellent! ≡ƒîƒ' :\r\n                 percentage >= 70 ? 'Great Job! ≡ƒæÅ' :\r\n                 percentage >= 60 ? 'Good Work! ≡ƒæì' :\r\n                 percentage >= 50 ? 'Not Bad! ≡ƒôÜ' :\r\n                 'Keep Practicing! ≡ƒÆ¬'}\r\n              </p>\r\n              <div className=\"text-lg text-gray-700 mb-2\">\r\n                You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n                <span className=\"font-bold\">{total}</span> questions correct\r\n              </div>\r\n              {/* Hiß╗ân thß╗ï thß╗¥i gian l├ám b├ái */}\r\n              {typeof result.timeSpent === 'number' && (\r\n                <div className=\"text-md text-gray-500 mt-2\">\r\n                  ΓÅ▒∩╕Å Time taken: <span className=\"font-semibold text-blue-700\">{formatTime(safeNumber(result.timeSpent))}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* **TH├èM Mß╗ÜI**: Stats Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n            <div className=\"text-3xl font-bold text-green-600 mb-2\">{correct}</div>\r\n            <div className=\"text-gray-600\">Correct Answers</div>\r\n          </div>\r\n          \r\n          <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n            <div className=\"text-3xl font-bold text-red-600 mb-2\">{total - correct}</div>\r\n            <div className=\"text-gray-600\">Incorrect Answers</div>\r\n          </div>\r\n          \r\n          <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n            <div className=\"text-3xl font-bold text-blue-600 mb-2\">{percentage}%</div>\r\n            <div className=\"text-gray-600\">Final Score</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* **TH├èM Mß╗ÜI**: Performance Analysis */}\r\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-8\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Performance Analysis</h2>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-gray-600\">Accuracy Rate</span>\r\n              <div className=\"flex items-center\">\r\n                <div className=\"w-32 bg-gray-200 rounded-full h-2 mr-3\">\r\n                  <div \r\n                    className=\"bg-blue-500 h-2 rounded-full transition-all duration-1000\"\r\n                    style={{ width: `${percentage}%` }}\r\n                  ></div>\r\n                </div>\r\n                <span className=\"font-semibold\">{percentage}%</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-gray-600\">Quiz Difficulty</span>\r\n              <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                quiz.difficulty === 'easy' ? 'bg-green-100 text-green-800' :\r\n                quiz.difficulty === 'medium' ? 'bg-yellow-100 text-yellow-800' :\r\n                'bg-red-100 text-red-800'\r\n              }`}>\r\n                {quiz.difficulty.charAt(0).toUpperCase() + quiz.difficulty.slice(1)}\r\n              </span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-gray-600\">Time Management</span>\r\n              <span className=\"font-semibold text-green-600\">\r\n                {result.isTimeUp ? 'Used full time' : 'Completed early'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* **TH├èM Mß╗ÜI**: Review Answers Section */}\r\n        <div className=\"bg-white rounded-xl shadow-lg p-6 mb-8\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h2 className=\"text-xl font-bold text-gray-900\">Review Answers</h2>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowAnswers(!showAnswers)}\r\n            >\r\n              {showAnswers ? 'Hide' : 'Show'} Detailed Review\r\n            </Button>\r\n          </div>\r\n\r\n          {showAnswers && (\r\n            <div className=\"space-y-6\">\r\n              {quiz.questions.map((question, index) => {\r\n                const userAnswerId = result.answers[question.id];\r\n                const userAnswer = question.answers.find(a => a.id === userAnswerId);\r\n                const isCorrect = userAnswer?.isCorrect || false;\r\n\r\n                return (\r\n                  <div key={question.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                    <div className=\"flex items-start justify-between mb-3\">\r\n                      <h3 className=\"text-lg font-medium text-gray-900\">\r\n                        {index + 1}. {question.text}\r\n                      </h3>\r\n                      <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                        isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                      }`}>\r\n                        {isCorrect ? 'Γ£ô Correct' : 'Γ£ù Incorrect'}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-2\">\r\n                      {question.answers.map(answer => (\r\n                        <div\r\n                          key={answer.id}\r\n                          className={`p-3 rounded-lg border ${\r\n                            answer.isCorrect \r\n                              ? 'border-green-300 bg-green-50' \r\n                              : answer.id === userAnswerId \r\n                              ? 'border-red-300 bg-red-50'\r\n                              : 'border-gray-200 bg-gray-50'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-center\">\r\n                            <span className=\"font-medium mr-3\">\r\n                              {String.fromCharCode(65 + question.answers.indexOf(answer))}.\r\n                            </span>\r\n                            <span>{answer.text}</span>\r\n                            {answer.isCorrect && (\r\n                              <span className=\"ml-auto text-green-600 font-medium\">\r\n                                Γ£ô Correct Answer\r\n                              </span>\r\n                            )}\r\n                            {answer.id === userAnswerId && !answer.isCorrect && (\r\n                              <span className=\"ml-auto text-red-600 font-medium\">\r\n                                Your Answer\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    \r\n                    {question.explanation && (\r\n                      <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                        <span className=\"font-medium text-blue-800\">Explanation: </span>\r\n                        <SafeHTML content={question.explanation} className=\"text-blue-700\" />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Leaderboard */}\r\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 mb-8\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">≡ƒÅå Leaderboard</h2>\r\n          {loadingStats ? (\r\n            <div className=\"flex justify-center items-center h-24\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n              <span className=\"ml-3 text-gray-600\">Loading leaderboard...</span>\r\n            </div>\r\n          ) : leaderboard.length > 0 ? (\r\n            <div className=\"space-y-3\">\r\n              {leaderboard.map((entry, index) => (\r\n                <div \r\n                  key={entry.id}\r\n                  className={`flex items-center justify-between p-4 rounded-lg border ${\r\n                    entry.userId === user?.uid \r\n                      ? 'bg-blue-50 border-blue-200 shadow-md' \r\n                      : 'bg-gray-50 border-gray-200'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${\r\n                      index === 0 ? 'bg-yellow-400 text-yellow-900' :\r\n                      index === 1 ? 'bg-gray-300 text-gray-700' :\r\n                      index === 2 ? 'bg-amber-600 text-amber-100' :\r\n                      'bg-gray-200 text-gray-600'\r\n                    }`}>\r\n                      {index === 0 ? '≡ƒÑç' : index === 1 ? '≡ƒÑê' : index === 2 ? '≡ƒÑë' : index + 1}\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"font-medium text-gray-900\">\r\n                        {entry.userName}\r\n                        {entry.userId === user?.uid && <span className=\"text-blue-600 ml-2\">(You)</span>}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {entry.correctAnswers}/{entry.totalQuestions} correct\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <div className=\"font-bold text-xl text-gray-900\">{safeNumber(entry.score)}%</div>\r\n                    <div className=\"text-sm text-gray-500\">\r\n                      ΓÅ▒∩╕Å {formatTime(safeNumber(entry.timeSpent))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              {/* Show user rank if not in top 10 */}\r\n              {user && userRank && userRank > 10 && (\r\n                <div className=\"mt-6 pt-4 border-t border-gray-200\">\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                    <div className=\"text-center\">\r\n                      <span className=\"text-blue-800 font-medium\">Your Rank: #{userRank}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-12 text-gray-500\">\r\n              <div className=\"text-6xl mb-4\">≡ƒÅå</div>\r\n              <p className=\"text-lg\">No results yet!</p>\r\n              <p>Be the first to complete this quiz and claim the top spot!</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quiz Review Section */}\r\n        {quiz && (\r\n          <div className=\"mb-8\">\r\n            <QuickReviewSection \r\n              quizId={quiz.id} \r\n              quizTitle={quiz.title}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex flex-wrap gap-4 justify-center\">\r\n          <Button\r\n            onClick={() => navigate(`/quiz/${quiz.id}`)}\r\n            className=\"bg-blue-600 hover:bg-blue-700\"\r\n          >\r\n            Retake Quiz\r\n          </Button>\r\n          \r\n          <Button\r\n            onClick={() => navigate('/quizzes')}\r\n            variant=\"outline\"\r\n          >\r\n            More Quizzes\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => {\r\n              // Share functionality\r\n              navigator.clipboard.writeText(\r\n                `I scored ${percentage}% on \"${quiz.title}\" quiz! ≡ƒÄ»`\r\n              );\r\n              toast.success('Result copied to clipboard!');\r\n            }}\r\n          >\r\n            Share Result\r\n          </Button>\r\n          \r\n          <Button\r\n            onClick={() => navigate('/profile')}\r\n            variant=\"outline\"\r\n          >\r\n            View All Results\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResultPage;\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\ActionButtons.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n        onClick={() => navigate(`/quiz/${quiz.id}`)}\r\n        className=\"bg-blue-600 hover:bg-blue-700\"\r\n      >\r\n        ≡ƒöä L├ám lß║íi Quiz\r\n      </Button>","line":27,"column":8,"nodeType":"JSXText","endLine":29,"endColumn":7},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n        onClick={() => {\r\n          console.log('≡ƒôÜ Navigating to /quizzes...');\r\n          navigate('/quizzes');\r\n        }}\r\n        variant=\"outline\"\r\n      >\r\n        ≡ƒôÜ Xem th├¬m Quiz\r\n      </Button>","line":38,"column":8,"nodeType":"JSXText","endLine":40,"endColumn":7},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n        onClick={() => navigate('/dashboard')}\r\n        variant=\"outline\"\r\n      >\r\n        ≡ƒÅá Vß╗ü Dashboard\r\n      </Button>","line":45,"column":8,"nodeType":"JSXText","endLine":47,"endColumn":7},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n        variant=\"outline\"\r\n        onClick={handleShareResult}\r\n      >\r\n        ≡ƒôñ Chia sß║╗ kß║┐t quß║ú\r\n      </Button>","line":52,"column":8,"nodeType":"JSXText","endLine":54,"endColumn":7},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n        onClick={() => navigate('/profile')}\r\n        variant=\"outline\"\r\n      >\r\n        ≡ƒæñ Xem tß║Ñt cß║ú kß║┐t quß║ú\r\n      </Button>","line":59,"column":8,"nodeType":"JSXText","endLine":61,"endColumn":7}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Quiz } from '../../../types';\r\nimport Button from '../../../../../shared/components/ui/Button';\r\nimport { toast } from 'react-toastify';\r\n\r\ninterface ActionButtonsProps {\r\n  quiz: Quiz;\r\n  percentage: number;\r\n}\r\n\r\nexport const ActionButtons: React.FC<ActionButtonsProps> = ({ quiz, percentage }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleShareResult = () => {\r\n    navigator.clipboard.writeText(\r\n      `I scored ${percentage}% on \"${quiz.title}\" quiz! ≡ƒÄ»`\r\n    );\r\n    toast.success('Result copied to clipboard!');\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap gap-4 justify-center\">\r\n      <Button\r\n        onClick={() => navigate(`/quiz/${quiz.id}`)}\r\n        className=\"bg-blue-600 hover:bg-blue-700\"\r\n      >\r\n        ≡ƒöä L├ám lß║íi Quiz\r\n      </Button>\r\n\r\n\r\n      <Button\r\n        onClick={() => {\r\n          console.log('≡ƒôÜ Navigating to /quizzes...');\r\n          navigate('/quizzes');\r\n        }}\r\n        variant=\"outline\"\r\n      >\r\n        ≡ƒôÜ Xem th├¬m Quiz\r\n      </Button>\r\n      \r\n      <Button\r\n        onClick={() => navigate('/dashboard')}\r\n        variant=\"outline\"\r\n      >\r\n        ≡ƒÅá Vß╗ü Dashboard\r\n      </Button>\r\n      \r\n      <Button\r\n        variant=\"outline\"\r\n        onClick={handleShareResult}\r\n      >\r\n        ≡ƒôñ Chia sß║╗ kß║┐t quß║ú\r\n      </Button>\r\n      \r\n      <Button\r\n        onClick={() => navigate('/profile')}\r\n        variant=\"outline\"\r\n      >\r\n        ≡ƒæñ Xem tß║Ñt cß║ú kß║┐t quß║ú\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\AnswerReview.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-xl font-bold text-gray-900\">Review Answers</h2>","line":19,"column":57,"nodeType":"JSXText","endLine":19,"endColumn":71},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button\r\n          variant=\"outline\"\r\n          onClick={() => setShowAnswers(!showAnswers)}\r\n        >\r\n          {showAnswers ? 'Hide' : 'Show'} Detailed Review\r\n        </Button>","line":24,"column":42,"nodeType":"JSXText","endLine":25,"endColumn":9},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-blue-800\">C├óu trß║ú lß╗¥i cß╗ºa bß║ín: </span>","line":90,"column":63,"nodeType":"JSXText","endLine":90,"endColumn":84},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-auto text-green-600 font-medium\">\r\n                              Γ£ô Correct Answer\r\n                            </span>","line":114,"column":82,"nodeType":"JSXText","endLine":116,"endColumn":29},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-auto text-red-600 font-medium\">\r\n                              Your Answer\r\n                            </span>","line":119,"column":80,"nodeType":"JSXText","endLine":121,"endColumn":29},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-auto text-green-600 font-medium\">\r\n                                Γ£ô Should Select\r\n                              </span>","line":152,"column":84,"nodeType":"JSXText","endLine":154,"endColumn":31},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-auto text-red-600 font-medium\">\r\n                                Wrong Selection\r\n                              </span>","line":157,"column":82,"nodeType":"JSXText","endLine":159,"endColumn":31},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"ml-auto text-green-600 font-medium\">\r\n                                Γ£ô Correct Selection\r\n                              </span>","line":162,"column":84,"nodeType":"JSXText","endLine":164,"endColumn":31},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-green-800\">─É├íp ├ín ─æ├║ng: </span>","line":177,"column":68,"nodeType":"JSXText","endLine":177,"endColumn":81},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm\"> (hoß║╖c: {question.acceptedAnswers.join(', ')})</span>","line":181,"column":53,"nodeType":"JSXText","endLine":181,"endColumn":61},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"font-medium text-blue-800\">Explanation: </span>","line":190,"column":65,"nodeType":"JSXText","endLine":190,"endColumn":78}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Quiz } from '../../../types';\r\nimport { ResultState } from '../types';\r\nimport Button from '../../../../../shared/components/ui/Button';\r\nimport SafeHTML from '../../../../../shared/components/ui/SafeHTML';\r\n\r\n\r\ninterface AnswerReviewProps {\r\n  quiz: Quiz;\r\n  result: ResultState;\r\n}\r\n\r\nexport const AnswerReview: React.FC<AnswerReviewProps> = ({ quiz, result }) => {\r\n  const [showAnswers, setShowAnswers] = useState(false);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg p-6 mb-8\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-xl font-bold text-gray-900\">Review Answers</h2>\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={() => setShowAnswers(!showAnswers)}\r\n        >\r\n          {showAnswers ? 'Hide' : 'Show'} Detailed Review\r\n        </Button>\r\n      </div>\r\n\r\n      {showAnswers && (\r\n        <div className=\"space-y-6\">\r\n          {quiz.questions.map((question, index) => {\r\n            const userAnswerValue = result.answers[question.id];\r\n            \r\n            // Logic ─æß╗â x├íc ─æß╗ïnh ─æ├íp ├ín ─æ├║ng sai dß╗▒a tr├¬n loß║íi c├óu hß╗Åi\r\n            let isCorrect = false;\r\n            let userAnswerText = '';\r\n            \r\n            switch (question.type) {\r\n              case 'boolean':\r\n              case 'multiple':\r\n              case 'image': {\r\n                const userAnswer = question.answers.find(a => a.id === userAnswerValue);\r\n                isCorrect = userAnswer?.isCorrect || false;\r\n                userAnswerText = userAnswer?.text || 'Ch╞░a trß║ú lß╗¥i';\r\n                break;\r\n              }\r\n              case 'short_answer': {\r\n                // Import checkShortAnswer function hoß║╖c t├¡nh to├ín tß║íi ─æ├óy\r\n                const normalizeAnswer = (answer: string) => \r\n                  answer.trim().toLowerCase().replace(/\\s+/g, ' ');\r\n                \r\n                const normalizedUserAnswer = normalizeAnswer(userAnswerValue || '');\r\n                \r\n                if (question.correctAnswer && normalizeAnswer(question.correctAnswer) === normalizedUserAnswer) {\r\n                  isCorrect = true;\r\n                } else if (question.acceptedAnswers) {\r\n                  isCorrect = question.acceptedAnswers.some(accepted => \r\n                    normalizeAnswer(accepted) === normalizedUserAnswer\r\n                  );\r\n                }\r\n                userAnswerText = userAnswerValue || 'Ch╞░a trß║ú lß╗¥i';\r\n                break;\r\n              }\r\n              case 'checkbox': {\r\n                const correctIds = question.answers.filter(a => a.isCorrect).map(a => a.id).sort();\r\n                const userIds = Array.isArray(userAnswerValue) ? [...userAnswerValue].sort() : [];\r\n                isCorrect = JSON.stringify(correctIds) === JSON.stringify(userIds);\r\n                const selectedAnswers = question.answers.filter(a => userIds.includes(a.id));\r\n                userAnswerText = selectedAnswers.length > 0 \r\n                  ? selectedAnswers.map(a => a.text).join(', ')\r\n                  : 'Ch╞░a trß║ú lß╗¥i';\r\n                break;\r\n              }\r\n            }\r\n\r\n            return (\r\n              <div key={question.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <h3 className=\"text-lg font-medium text-gray-900\">\r\n                    {index + 1}. {question.text}\r\n                  </h3>\r\n                  <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                    isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n                  }`}>\r\n                    {isCorrect ? 'Γ£ô Correct' : 'Γ£ù Incorrect'}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Hiß╗ân thß╗ï c├óu trß║ú lß╗¥i cß╗ºa user */}\r\n                <div className=\"mb-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                  <span className=\"font-medium text-blue-800\">C├óu trß║ú lß╗¥i cß╗ºa bß║ín: </span>\r\n                  <span className=\"text-blue-700\">{userAnswerText}</span>\r\n                </div>\r\n                \r\n                {/* Hiß╗ân thß╗ï ─æ├íp ├ín cho multiple choice, image v├á boolean */}\r\n                {(question.type === 'multiple' || question.type === 'image' || question.type === 'boolean') && (\r\n                  <div className=\"space-y-2\">\r\n                    {question.answers.map(answer => (\r\n                      <div\r\n                        key={answer.id}\r\n                        className={`p-3 rounded-lg border ${\r\n                          answer.isCorrect \r\n                            ? 'border-green-300 bg-green-50' \r\n                            : answer.id === userAnswerValue \r\n                            ? 'border-red-300 bg-red-50'\r\n                            : 'border-gray-200 bg-gray-50'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-center\">\r\n                          <span className=\"font-medium mr-3\">\r\n                            {String.fromCharCode(65 + question.answers.indexOf(answer))}.\r\n                          </span>\r\n                          <span>{answer.text}</span>\r\n                          {answer.isCorrect && (\r\n                            <span className=\"ml-auto text-green-600 font-medium\">\r\n                              Γ£ô Correct Answer\r\n                            </span>\r\n                          )}\r\n                          {answer.id === userAnswerValue && !answer.isCorrect && (\r\n                            <span className=\"ml-auto text-red-600 font-medium\">\r\n                              Your Answer\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                {/* Hiß╗ân thß╗ï ─æ├íp ├ín cho checkbox */}\r\n                {question.type === 'checkbox' && (\r\n                  <div className=\"space-y-2\">\r\n                    {question.answers.map(answer => {\r\n                      const userSelectedIds: string[] = Array.isArray(userAnswerValue) ? userAnswerValue : [];\r\n                      const isUserSelected = userSelectedIds.includes(answer.id);\r\n                      \r\n                      return (\r\n                        <div\r\n                          key={answer.id}\r\n                          className={`p-3 rounded-lg border ${\r\n                            answer.isCorrect \r\n                              ? 'border-green-300 bg-green-50' \r\n                              : isUserSelected \r\n                              ? 'border-red-300 bg-red-50'\r\n                              : 'border-gray-200 bg-gray-50'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-center\">\r\n                            <span className=\"font-medium mr-3\">\r\n                              {String.fromCharCode(65 + question.answers.indexOf(answer))}.\r\n                            </span>\r\n                            <span>{answer.text}</span>\r\n                            {answer.isCorrect && (\r\n                              <span className=\"ml-auto text-green-600 font-medium\">\r\n                                Γ£ô Should Select\r\n                              </span>\r\n                            )}\r\n                            {isUserSelected && !answer.isCorrect && (\r\n                              <span className=\"ml-auto text-red-600 font-medium\">\r\n                                Wrong Selection\r\n                              </span>\r\n                            )}\r\n                            {isUserSelected && answer.isCorrect && (\r\n                              <span className=\"ml-auto text-green-600 font-medium\">\r\n                                Γ£ô Correct Selection\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Hiß╗ân thß╗ï ─æ├íp ├ín cho short answer */}\r\n                {question.type === 'short_answer' && (\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n                      <span className=\"font-medium text-green-800\">─É├íp ├ín ─æ├║ng: </span>\r\n                      <span className=\"text-green-700\">\r\n                        {question.correctAnswer}\r\n                        {question.acceptedAnswers && question.acceptedAnswers.length > 0 && (\r\n                          <span className=\"text-sm\"> (hoß║╖c: {question.acceptedAnswers.join(', ')})</span>\r\n                        )}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {question.explanation && (\r\n                  <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                    <span className=\"font-medium text-blue-800\">Explanation: </span>\r\n                    <SafeHTML content={question.explanation} className=\"text-blue-700\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\Confetti.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\Leaderboard.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">≡ƒÅå Leaderboard</h2>","line":31,"column":61,"nodeType":"JSXText","endLine":31,"endColumn":75},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-white ml-2 font-bold bg-gradient-to-r from-green-500 to-emerald-600 px-3 py-1 rounded-full text-sm shadow-lg animate-pulse\">\r\n                          ∩┐╜ L╞»ß╗óT Mß╗ÜI NHß║ñT - Xß║╛P Hß║áNG #{index + 1}\r\n                        </span>","line":63,"column":171,"nodeType":"JSXText","endLine":64,"endColumn":55},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-500 ml-2 text-sm\">(L╞░ß╗út tr╞░ß╗¢c ─æ├│)</span>","line":69,"column":68,"nodeType":"JSXText","endLine":69,"endColumn":83},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-500\">\r\n                    {entry.correctAnswers}/{entry.totalQuestions} correct\r\n                  </div>","line":73,"column":66,"nodeType":"JSXText","endLine":74,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-500\">\r\n                  ΓÅ▒∩╕Å {formatDetailedTime(safeNumber(entry.timeSpent))}\r\n                </div>","line":82,"column":56,"nodeType":"JSXText","endLine":83,"endColumn":22},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-blue-800 font-medium\">Your Rank: #{userRank}</span>","line":94,"column":63,"nodeType":"JSXText","endLine":94,"endColumn":75},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-lg\">No results yet!</p>","line":103,"column":34,"nodeType":"JSXText","endLine":103,"endColumn":49},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>Be the first to complete this quiz and claim the top spot!</p>","line":104,"column":14,"nodeType":"JSXText","endLine":104,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../../../lib/store';\r\nimport { LeaderboardEntry } from '../types';\r\nimport { safeNumber, formatDetailedTime, formatDateTime, getRankDisplay, getRankBackgroundColor } from '../utils';\r\n\r\ninterface LeaderboardProps {\r\n  leaderboard: LeaderboardEntry[];\r\n  userRank: number | null;\r\n  loadingStats: boolean;\r\n}\r\n\r\nexport const Leaderboard: React.FC<LeaderboardProps> = ({ \r\n  leaderboard, \r\n  userRank, \r\n  loadingStats \r\n}) => {\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n\r\n  // Debug logging\r\n  console.log('≡ƒÅå Leaderboard render:', {\r\n    leaderboardLength: leaderboard.length,\r\n    loadingStats,\r\n    userRank,\r\n    hasUser: !!user,\r\n    leaderboard: leaderboard.slice(0, 3) // Show first 3 entries for debug\r\n  });\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl p-8 mb-8\">\r\n      <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">≡ƒÅå Leaderboard</h2>\r\n      {loadingStats ? (\r\n        <div className=\"flex justify-center items-center h-24\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <span className=\"ml-3 text-gray-600\">Loading leaderboard...</span>\r\n        </div>\r\n      ) : leaderboard.length > 0 ? (\r\n        <div className=\"space-y-3\">\r\n          {leaderboard.map((entry, index) => (\r\n            <div \r\n              key={entry.id}\r\n              className={`flex items-center justify-between p-4 rounded-lg border ${\r\n                entry.id === 'current-attempt'\r\n                  ? 'bg-gradient-to-r from-green-50 via-emerald-50 to-green-50 border-green-400 shadow-xl ring-4 ring-green-200 ring-opacity-50' \r\n                  : entry.userId === user?.uid \r\n                    ? 'bg-blue-50 border-blue-200 shadow-md' \r\n                    : 'bg-gray-50 border-gray-200'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className={`w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm ${\r\n                  entry.id === 'current-attempt' \r\n                    ? 'bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg transform scale-110' \r\n                    : getRankBackgroundColor(index)\r\n                }`}>\r\n                  {entry.id === 'current-attempt' ? '∩┐╜' : getRankDisplay(index)}\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-medium text-gray-900\">\r\n                    {entry.userName}\r\n                    {entry.id === 'current-attempt' && (\r\n                      <div className=\"flex items-center mt-1\">\r\n                        <span className=\"text-white ml-2 font-bold bg-gradient-to-r from-green-500 to-emerald-600 px-3 py-1 rounded-full text-sm shadow-lg animate-pulse\">\r\n                          ∩┐╜ L╞»ß╗óT Mß╗ÜI NHß║ñT - Xß║╛P Hß║áNG #{index + 1}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    {entry.userId === user?.uid && entry.id !== 'current-attempt' && (\r\n                      <span className=\"text-gray-500 ml-2 text-sm\">(L╞░ß╗út tr╞░ß╗¢c ─æ├│)</span>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">\r\n                    {entry.correctAnswers}/{entry.totalQuestions} correct\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-400 mt-1\">\r\n                    ≡ƒôà {formatDateTime(entry.completedAt instanceof Date ? entry.completedAt.getTime() : new Date(entry.completedAt).getTime())}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <div className=\"font-bold text-xl text-gray-900\">{safeNumber(entry.score)}%</div>\r\n                <div className=\"text-sm text-gray-500\">\r\n                  ΓÅ▒∩╕Å {formatDetailedTime(safeNumber(entry.timeSpent))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          \r\n          {/* Show user rank if not in top 10 */}\r\n          {user && userRank && userRank > 10 && (\r\n            <div className=\"mt-6 pt-4 border-t border-gray-200\">\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <div className=\"text-center\">\r\n                  <span className=\"text-blue-800 font-medium\">Your Rank: #{userRank}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <div className=\"text-6xl mb-4\">≡ƒÅå</div>\r\n          <p className=\"text-lg\">No results yet!</p>\r\n          <p>Be the first to complete this quiz and claim the top spot!</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\LoadingSpinner.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button onClick={() => navigate('/quiz-list')}>\r\n          Back to Quiz List\r\n        </Button>","line":13,"column":56,"nodeType":"JSXText","endLine":15,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Button from '../../../../../shared/components/ui/Button';\r\n\r\nexport const LoadingSpinner: React.FC = () => {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"text-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mb-4\"></div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Loading results...</h2>\r\n        <Button onClick={() => navigate('/quiz-list')}>\r\n          Back to Quiz List\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\PerformanceAnalysis.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Performance Analysis</h2>","line":18,"column":60,"nodeType":"JSXText","endLine":18,"endColumn":80},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">Accuracy Rate</span>","line":22,"column":43,"nodeType":"JSXText","endLine":22,"endColumn":56},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">Quiz Difficulty</span>","line":35,"column":43,"nodeType":"JSXText","endLine":35,"endColumn":58},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-gray-600\">Time Management</span>","line":46,"column":43,"nodeType":"JSXText","endLine":46,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Quiz } from '../../../types';\r\nimport { ResultState } from '../types';\r\n\r\ninterface PerformanceAnalysisProps {\r\n  quiz: Quiz;\r\n  result: ResultState;\r\n  percentage: number;\r\n}\r\n\r\nexport const PerformanceAnalysis: React.FC<PerformanceAnalysisProps> = ({ \r\n  quiz, \r\n  result, \r\n  percentage \r\n}) => {\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg p-6 mb-8\">\r\n      <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Performance Analysis</h2>\r\n      \r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <span className=\"text-gray-600\">Accuracy Rate</span>\r\n          <div className=\"flex items-center\">\r\n            <div className=\"w-32 bg-gray-200 rounded-full h-2 mr-3\">\r\n              <div \r\n                className=\"bg-blue-500 h-2 rounded-full transition-all duration-1000\"\r\n                style={{ width: `${percentage}%` }}\r\n              ></div>\r\n            </div>\r\n            <span className=\"font-semibold\">{percentage}%</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center justify-between\">\r\n          <span className=\"text-gray-600\">Quiz Difficulty</span>\r\n          <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n            quiz.difficulty === 'easy' ? 'bg-green-100 text-green-800' :\r\n            quiz.difficulty === 'medium' ? 'bg-yellow-100 text-yellow-800' :\r\n            'bg-red-100 text-red-800'\r\n          }`}>\r\n            {quiz.difficulty.charAt(0).toUpperCase() + quiz.difficulty.slice(1)}\r\n          </span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center justify-between\">\r\n          <span className=\"text-gray-600\">Time Management</span>\r\n          <span className=\"font-semibold text-green-600\">\r\n            {result.isTimeUp ? 'Used full time' : 'Completed early'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\ResultSummary.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"bg-yellow-100 border border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg mb-6\">\r\n            ΓÅ░ Time's up! Quiz was automatically submitted.\r\n          </div>","line":23,"column":109,"nodeType":"JSXText","endLine":25,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h1 className=\"text-3xl font-bold text-gray-900 mt-4 mb-2\">\r\n            Quiz Completed!\r\n          </h1>","line":29,"column":70,"nodeType":"JSXText","endLine":31,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n            You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n            <span className=\"font-bold\">{total}</span> questions correct\r\n          </div>","line":35,"column":55,"nodeType":"JSXText","endLine":36,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n            You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n            <span className=\"font-bold\">{total}</span> questions correct\r\n          </div>","line":36,"column":79,"nodeType":"JSXText","endLine":36,"endColumn":86},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-lg text-gray-700 mb-2\">\r\n            You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n            <span className=\"font-bold\">{total}</span> questions correct\r\n          </div>","line":37,"column":55,"nodeType":"JSXText","endLine":38,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-md text-gray-500 mt-2\">\r\n              ΓÅ▒∩╕Å Time taken: <span className=\"font-semibold text-blue-700\">{formatDetailedTime(safeNumber(result.timeSpent))}</span>\r\n            </div>","line":41,"column":57,"nodeType":"JSXText","endLine":42,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { ScoreCircle } from './ScoreCircle';\r\nimport { ResultState } from '../types';\r\nimport { getPerformanceMessage, formatDetailedTime, safeNumber } from '../utils';\r\n\r\ninterface ResultSummaryProps {\r\n  result: ResultState;\r\n  percentage: number;\r\n  correct: number;\r\n  total: number;\r\n}\r\n\r\nexport const ResultSummary: React.FC<ResultSummaryProps> = ({ \r\n  result, \r\n  percentage, \r\n  correct, \r\n  total \r\n}) => {\r\n  return (\r\n    <div className=\"text-center mb-8\">\r\n      <div className=\"bg-white rounded-2xl shadow-xl p-8 mb-6\">\r\n        {result.isTimeUp && (\r\n          <div className=\"bg-yellow-100 border border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg mb-6\">\r\n            ΓÅ░ Time's up! Quiz was automatically submitted.\r\n          </div>\r\n        )}\r\n        <div className=\"flex flex-col items-center\">\r\n          <ScoreCircle score={percentage} />\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mt-4 mb-2\">\r\n            Quiz Completed!\r\n          </h1>\r\n          <p className=\"text-xl text-gray-600 mb-4\">\r\n            {getPerformanceMessage(percentage)}\r\n          </p>\r\n          <div className=\"text-lg text-gray-700 mb-2\">\r\n            You got <span className=\"font-bold text-blue-600\">{correct}</span> out of{' '}\r\n            <span className=\"font-bold\">{total}</span> questions correct\r\n          </div>\r\n          {/* Hiß╗ân thß╗ï thß╗¥i gian l├ám b├ái - giß╗æng y hß╗çt Leaderboard */}\r\n          {typeof result.timeSpent === 'number' && (\r\n            <div className=\"text-md text-gray-500 mt-2\">\r\n              ΓÅ▒∩╕Å Time taken: <span className=\"font-semibold text-blue-700\">{formatDetailedTime(safeNumber(result.timeSpent))}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\ScoreCircle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\StatsGrid.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Correct Answers</div>","line":14,"column":40,"nodeType":"JSXText","endLine":14,"endColumn":55},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Incorrect Answers</div>","line":19,"column":40,"nodeType":"JSXText","endLine":19,"endColumn":57},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-gray-600\">Final Score</div>","line":24,"column":40,"nodeType":"JSXText","endLine":24,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface StatsGridProps {\r\n  correct: number;\r\n  total: number;\r\n  percentage: number;\r\n}\r\n\r\nexport const StatsGrid: React.FC<StatsGridProps> = ({ correct, total, percentage }) => {\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n      <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n        <div className=\"text-3xl font-bold text-green-600 mb-2\">{correct}</div>\r\n        <div className=\"text-gray-600\">Correct Answers</div>\r\n      </div>\r\n      \r\n      <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n        <div className=\"text-3xl font-bold text-red-600 mb-2\">{total - correct}</div>\r\n        <div className=\"text-gray-600\">Incorrect Answers</div>\r\n      </div>\r\n      \r\n      <div className=\"bg-white rounded-xl shadow-lg p-6 text-center\">\r\n        <div className=\"text-3xl font-bold text-blue-600 mb-2\">{percentage}%</div>\r\n        <div className=\"text-gray-600\">Final Score</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\hooks\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\hooks\\useLeaderboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\hooks\\useResultData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\pages\\ResultPage\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\base.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\fileProcessingService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\firebaseAIService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\geminiAIService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\learningService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\quiz.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\quizService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\realDataService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\reviewService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\services\\simpleAIService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\types\\learning.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\types\\quiz.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\features\\quiz\\types\\review.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\firebase\\config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\locales\\resources.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\fileProcessor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\firebase\\collections.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\firebase\\dataModels.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\firebase\\firestoreService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\firebase\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\firebase\\storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\firebase\\storageService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\geminiAI.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\imageUploadService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\services\\quizStatsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\AchievementSystem.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold text-gray-900\">≡ƒÅå Th├ánh t├¡ch</h2>","line":303,"column":60,"nodeType":"JSXText","endLine":303,"endColumn":73},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-sm text-gray-600\">\r\n            {unlockedCount}/{totalCount} ─æ├ú mß╗ƒ kh├│a\r\n          </div>","line":305,"column":41,"nodeType":"JSXText","endLine":306,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../lib/store';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\nimport SafeHTML from './ui/SafeHTML';\r\n\r\ninterface Achievement {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  icon: string;\r\n  condition: {\r\n    type: 'quiz_count' | 'score_average' | 'streak' | 'perfect_score' | 'time_record';\r\n    value: number;\r\n  };\r\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\r\n  unlocked: boolean;\r\n  unlockedAt?: Date;\r\n  progress: number; // 0-100\r\n}\r\n\r\nconst ACHIEVEMENTS: Omit<Achievement, 'unlocked' | 'unlockedAt' | 'progress'>[] = [\r\n  {\r\n    id: 'first_quiz',\r\n    title: '≡ƒÄ» B╞░ß╗¢c ─æß║ºu ti├¬n',\r\n    description: 'Ho├án th├ánh quiz ─æß║ºu ti├¬n',\r\n    icon: '≡ƒÄ»',\r\n    condition: { type: 'quiz_count', value: 1 },\r\n    rarity: 'common'\r\n  },\r\n  {\r\n    id: 'quiz_master',\r\n    title: '≡ƒôÜ Thß║íc s─⌐ Quiz',\r\n    description: 'Ho├án th├ánh 10 quiz',\r\n    icon: '≡ƒôÜ',\r\n    condition: { type: 'quiz_count', value: 10 },\r\n    rarity: 'rare'\r\n  },\r\n  {\r\n    id: 'quiz_legend',\r\n    title: '≡ƒææ Huyß╗ün thoß║íi Quiz',\r\n    description: 'Ho├án th├ánh 50 quiz',\r\n    icon: '≡ƒææ',\r\n    condition: { type: 'quiz_count', value: 50 },\r\n    rarity: 'legendary'\r\n  },\r\n  {\r\n    id: 'high_scorer',\r\n    title: 'Γ¡É ─Éiß╗âm cao',\r\n    description: '─Éß║ít ─æiß╗âm trung b├¼nh tr├¬n 80%',\r\n    icon: 'Γ¡É',\r\n    condition: { type: 'score_average', value: 80 },\r\n    rarity: 'rare'\r\n  },\r\n  {\r\n    id: 'perfectionist',\r\n    title: '≡ƒÆ» Ho├án hß║úo',\r\n    description: '─Éß║ít 100% trong 1 quiz',\r\n    icon: '≡ƒÆ»',\r\n    condition: { type: 'perfect_score', value: 100 },\r\n    rarity: 'epic'\r\n  },\r\n  {\r\n    id: 'streak_5',\r\n    title: '≡ƒöÑ Chuß╗ùi 5',\r\n    description: 'Ho├án th├ánh 5 quiz li├¬n tiß║┐p',\r\n    icon: '≡ƒöÑ',\r\n    condition: { type: 'streak', value: 5 },\r\n    rarity: 'rare'\r\n  },\r\n  {\r\n    id: 'speed_demon',\r\n    title: 'ΓÜí Tß╗æc ─æß╗Ö ├ính s├íng',\r\n    description: 'Ho├án th├ánh quiz trong thß╗¥i gian kß╗╖ lß╗Ñc',\r\n    icon: 'ΓÜí',\r\n    condition: { type: 'time_record', value: 60 }, // seconds\r\n    rarity: 'epic'\r\n  }\r\n];\r\n\r\nconst AchievementCard: React.FC<{ achievement: Achievement; onClaim: () => void }> = ({ \r\n  achievement, \r\n  onClaim \r\n}) => {\r\n  const { t } = useTranslation();\r\n\r\n  // Remove unused state since we use the modal from parent component\r\n\r\n  const getRarityStyle = (rarity: Achievement['rarity']) => {\r\n    switch (rarity) {\r\n      case 'common':\r\n        return 'border-gray-300 bg-gray-50';\r\n      case 'rare':\r\n        return 'border-blue-300 bg-blue-50';\r\n      case 'epic':\r\n        return 'border-purple-300 bg-purple-50';\r\n      case 'legendary':\r\n        return 'border-yellow-300 bg-yellow-50';\r\n      default:\r\n        return 'border-gray-300 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getRarityColor = (rarity: Achievement['rarity']) => {\r\n    switch (rarity) {\r\n      case 'common':\r\n        return 'text-gray-600';\r\n      case 'rare':\r\n        return 'text-blue-600';\r\n      case 'epic':\r\n        return 'text-purple-600';\r\n      case 'legendary':\r\n        return 'text-yellow-600';\r\n      default:\r\n        return 'text-gray-600';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`relative p-4 rounded-lg border-2 transition-all duration-300 ${\r\n        achievement.unlocked\r\n          ? getRarityStyle(achievement.rarity)\r\n          : 'border-gray-200 bg-gray-100 opacity-60'\r\n      } ${achievement.unlocked ? 'hover:scale-105 cursor-pointer' : ''}`}\r\n      onClick={() => achievement.unlocked && onClaim()}\r\n    >\r\n      {/* Achievement Icon */}\r\n      <div className=\"text-center mb-3\">\r\n        <div\r\n          className={`text-4xl ${\r\n            achievement.unlocked ? '' : 'grayscale'\r\n          }`}\r\n        >\r\n          {achievement.icon}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Achievement Info */}\r\n      <div className=\"text-center\">\r\n        <h3\r\n          className={`font-bold text-lg mb-1 ${\r\n            achievement.unlocked ? getRarityColor(achievement.rarity) : 'text-gray-500'\r\n          }`}\r\n        >\r\n          {achievement.title}\r\n        </h3>\r\n        <SafeHTML content={achievement.description} className=\"text-sm text-gray-600 mb-2\" />\r\n\r\n        {/* Progress Bar */}\r\n        {!achievement.unlocked && achievement.progress > 0 && (\r\n          <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\r\n            <div\r\n              className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n              style={{ width: `${achievement.progress}%` }}\r\n            ></div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Rarity Badge */}\r\n        <div className=\"flex items-center justify-center\">\r\n          <span\r\n            className={`text-xs px-2 py-1 rounded-full ${\r\n              achievement.unlocked\r\n                ? `${getRarityColor(achievement.rarity)} bg-white`\r\n                : 'text-gray-500 bg-gray-200'\r\n            }`}\r\n          >\r\n            {achievement.rarity.toUpperCase()}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Unlock Date */}\r\n        {achievement.unlocked && achievement.unlockedAt && (\r\n          <div className=\"text-xs text-gray-500 mt-2\">\r\n            {t('achievement.unlockedAt', {date: achievement.unlockedAt.toLocaleDateString('vi-VN')})}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Unlock Effect */}\r\n      {achievement.unlocked && (\r\n        <div className=\"absolute inset-0 rounded-lg bg-gradient-to-r from-yellow-200 to-orange-200 opacity-20\"></div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AchievementSystem: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const user = useSelector((state: RootState) => state.auth.user);\r\n  const userResults = useSelector((state: RootState) => state.quiz.userResults);\r\n  const [achievements, setAchievements] = useState<Achievement[]>([]);\r\n  const [newUnlocks, setNewUnlocks] = useState<Achievement[]>([]);\r\n  const [showModal, setShowModal] = useState<Achievement | null>(null);\r\n\r\n  const handleClaim = (achievement: Achievement) => {\r\n    if (achievement.unlocked) {\r\n      setShowModal(achievement);\r\n    }\r\n  };\r\n\r\n  // Calculate achievements based on user stats\r\n  useEffect(() => {\r\n    if (!user || !userResults) return;\r\n\r\n    // Mock user stats - replace with actual data\r\n    const userStats = {\r\n      quizCount: userResults.length || 5, // Mock: 5 quizzes completed\r\n      averageScore: userResults.length > 0 \r\n        ? userResults.reduce((sum, result) => sum + result.score, 0) / userResults.length \r\n        : 85, // Mock: 85% average\r\n      perfectScores: userResults.filter(result => result.score === 100).length || 1, // Mock: 1 perfect\r\n      currentStreak: 3, // Mock: 3 quiz streak\r\n      bestTime: 45 // Mock: 45 seconds record\r\n    };\r\n\r\n    const updatedAchievements = ACHIEVEMENTS.map(achievement => {\r\n      let progress = 0;\r\n      let unlocked = false;\r\n\r\n      switch (achievement.condition.type) {\r\n        case 'quiz_count':\r\n          progress = Math.min((userStats.quizCount / achievement.condition.value) * 100, 100);\r\n          unlocked = userStats.quizCount >= achievement.condition.value;\r\n          break;\r\n        case 'score_average':\r\n          progress = Math.min((userStats.averageScore / achievement.condition.value) * 100, 100);\r\n          unlocked = userStats.averageScore >= achievement.condition.value;\r\n          break;\r\n        case 'perfect_score':\r\n          progress = Math.min((userStats.perfectScores / 1) * 100, 100);\r\n          unlocked = userStats.perfectScores >= 1;\r\n          break;\r\n        case 'streak':\r\n          progress = Math.min((userStats.currentStreak / achievement.condition.value) * 100, 100);\r\n          unlocked = userStats.currentStreak >= achievement.condition.value;\r\n          break;\r\n        case 'time_record':\r\n          progress = userStats.bestTime <= achievement.condition.value ? 100 : 0;\r\n          unlocked = userStats.bestTime <= achievement.condition.value;\r\n          break;\r\n      }\r\n\r\n      return {\r\n        ...achievement,\r\n        unlocked,\r\n        progress,\r\n        unlockedAt: unlocked ? new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000) : undefined\r\n      };\r\n    });\r\n\r\n    setAchievements(updatedAchievements);\r\n  }, [user, userResults]);\r\n\r\n  // Show unlock notifications\r\n  useEffect(() => {\r\n    const newlyUnlocked = achievements.filter(a => \r\n      a.unlocked && !newUnlocks.find(nu => nu.id === a.id)\r\n    );\r\n    \r\n    if (newlyUnlocked.length > 0) {\r\n      setNewUnlocks(prev => [...prev, ...newlyUnlocked]);\r\n      \r\n      // Auto-hide notifications after 5 seconds\r\n      setTimeout(() => {\r\n        setNewUnlocks(prev => prev.filter(a => !newlyUnlocked.includes(a)));\r\n      }, 5000);\r\n    }\r\n  }, [achievements, newUnlocks]);\r\n\r\n  if (!user) return null;\r\n\r\n  const unlockedCount = achievements.filter(a => a.unlocked).length;\r\n  const totalCount = achievements.length;\r\n\r\n  return (\r\n    <div>\r\n      {/* Achievement Notifications */}\r\n      {newUnlocks.length > 0 && (\r\n        <div className=\"fixed top-4 right-4 z-50 space-y-2\">\r\n          {newUnlocks.map(achievement => (\r\n            <div\r\n              key={achievement.id}\r\n              className=\"bg-white border-2 border-yellow-300 rounded-lg p-4 shadow-lg animate-bounce\"\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"text-2xl\">{achievement.icon}</div>\r\n                <div>\r\n                  <h4 className=\"font-bold text-yellow-600\">{t('achievement.unlocked')}</h4>\r\n                  <p className=\"text-sm\">{achievement.title}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Achievement Progress */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">≡ƒÅå Th├ánh t├¡ch</h2>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {unlockedCount}/{totalCount} ─æ├ú mß╗ƒ kh├│a\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n          <div\r\n            className=\"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-500\"\r\n            style={{ width: `${(unlockedCount / totalCount) * 100}%` }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Achievements Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n        {achievements.map(achievement => (\r\n          <AchievementCard \r\n            key={achievement.id} \r\n            achievement={achievement} \r\n            onClaim={() => handleClaim(achievement)}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Achievement Details Modal */}\r\n      {showModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-6xl mb-4\">{showModal.icon}</div>\r\n              <h3 className=\"text-xl font-bold mb-2\">{showModal.title}</h3>\r\n              <SafeHTML content={showModal.description} className=\"text-gray-600 mb-4\" />\r\n              <div className=\"flex justify-center space-x-4\">\r\n                <button\r\n                  onClick={() => setShowModal(null)}\r\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\"\r\n                >{t('close')}\r\n                </button>\r\n                {showModal.unlocked && (\r\n                  <button\r\n                    onClick={() => {\r\n                      // Share achievement\r\n                      navigator.clipboard.writeText(`≡ƒÄë T├┤i vß╗½a mß╗ƒ kh├│a th├ánh t├¡ch \"${showModal.title}\" trong Quiz App!`);\r\n                      setShowModal(null);\r\n                    }}\r\n                    className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n                  >\r\n                    {t('share')}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AchievementSystem;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ErrorBoundary.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">─É├ú xß║úy ra lß╗ùi</h2>","line":53,"column":67,"nodeType":"JSXText","endLine":53,"endColumn":80},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n              onClick={() => window.location.reload()}\r\n              className=\"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200\"\r\n            >\r\n              Tß║úi lß║íi trang\r\n            </button>","line":60,"column":14,"nodeType":"JSXText","endLine":62,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <summary className=\"cursor-pointer font-medium\">Chi tiß║┐t lß╗ùi (Development only)</summary>","line":66,"column":65,"nodeType":"JSXText","endLine":66,"endColumn":96}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { Component, ErrorInfo, ReactNode } from 'react';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  errorInfo?: ErrorInfo;\r\n}\r\n\r\nclass ErrorBoundary extends Component<Props, State> {\r\n  public state: State = {\r\n    hasError: false,\r\n    error: null\r\n  };\r\n\r\n  public static getDerivedStateFromError(error: Error): State {\r\n    // Update state so the next render will show the fallback UI\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  public componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n    console.error('Error caught by ErrorBoundary:', error, errorInfo);\r\n    \r\n    // Prevent infinite loops with Suspense errors\r\n    if (error.message?.includes('suspended') || \r\n        error.message?.includes('Suspense') ||\r\n        error.message?.includes('lazy')) {\r\n      console.warn('Suspense-related error suppressed:', error.message);\r\n      // Don't update state for Suspense errors\r\n      return;\r\n    }\r\n    \r\n    this.setState({\r\n      hasError: true,\r\n      error: error,\r\n      errorInfo: errorInfo\r\n    });\r\n  }\r\n\r\n  public render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-100 px-4 py-8\">\r\n          <div className=\"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center\">\r\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n              <svg className=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-2.694-.833-3.464 0L3.349 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n              </svg>\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">─É├ú xß║úy ra lß╗ùi</h2>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              {this.state.error?.message || 'ß╗¿ng dß╗Ñng gß║╖p sß╗▒ cß╗æ kh├┤ng mong muß╗æn.'}\r\n            </p>\r\n            <button\r\n              onClick={() => window.location.reload()}\r\n              className=\"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200\"\r\n            >\r\n              Tß║úi lß║íi trang\r\n            </button>\r\n            \r\n            {import.meta.env.DEV && this.state.error && (\r\n              <details className=\"mt-4 text-left text-xs text-gray-500\">\r\n                <summary className=\"cursor-pointer font-medium\">Chi tiß║┐t lß╗ùi (Development only)</summary>\r\n                <pre className=\"mt-2 whitespace-pre-wrap\">\r\n                  {this.state.error.toString()}\r\n                  {this.state.errorInfo?.componentStack}\r\n                </pre>\r\n              </details>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\I18nProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\LanguageSwitcher.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-blue-600 font-bold\">Γ£ô</span>","line":98,"column":57,"nodeType":"JSXText","endLine":98,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Globe } from 'lucide-react';\r\n\r\ninterface LanguageSwitcherProps {\r\n  variant?: 'light' | 'dark' | 'header';\r\n}\r\n\r\nconst LanguageSwitcher: React.FC<LanguageSwitcherProps> = ({ variant = 'light' }) => {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const languages = [\r\n    { code: 'vi', name: 'Tiß║┐ng Viß╗çt', flag: '≡ƒç╗≡ƒç│' },\r\n    { code: 'en', name: 'English', flag: '≡ƒç║≡ƒç╕' }\r\n  ];\r\n\r\n  const currentLanguage = languages.find(lang => lang.code === i18n.language) || languages[0];\r\n\r\n  const changeLanguage = (languageCode: string) => {\r\n    i18n.changeLanguage(languageCode);\r\n  };\r\n\r\n  // Styling based on variant\r\n  const getButtonStyles = () => {\r\n    switch (variant) {\r\n      case 'dark': // For landing page with dark background\r\n        return \"flex items-center space-x-2 px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors border border-white/20 backdrop-blur-sm text-white\";\r\n      case 'header': // For authenticated header with white background\r\n        return \"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border border-gray-300 text-gray-700\";\r\n      default: // Light variant - for login/register pages\r\n        return \"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors text-white shadow-md\";\r\n    }\r\n  };\r\n\r\n  const getIconColor = () => {\r\n    switch (variant) {\r\n      case 'dark':\r\n        return \"text-white\";\r\n      case 'header':\r\n        return \"text-gray-600\";\r\n      default:\r\n        return \"text-white\";\r\n    }\r\n  };\r\n\r\n  const getTextColor = () => {\r\n    switch (variant) {\r\n      case 'dark':\r\n        return \"text-white\";\r\n      case 'header':\r\n        return \"text-gray-700\";\r\n      default:\r\n        return \"text-white\";\r\n    }\r\n  };\r\n\r\n  const getArrowColor = () => {\r\n    switch (variant) {\r\n      case 'dark':\r\n        return \"text-white/70\";\r\n      case 'header':\r\n        return \"text-gray-500\";\r\n      default:\r\n        return \"text-white/80\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative group z-[100]\">\r\n      <button className={getButtonStyles()}>\r\n        <Globe className={`w-4 h-4 ${getIconColor()}`} />\r\n        <span className={`${getTextColor()} text-sm font-medium hidden sm:inline`}>\r\n          {currentLanguage.flag} {currentLanguage.name}\r\n        </span>\r\n        <span className={`${getTextColor()} text-sm font-medium sm:hidden`}>\r\n          {currentLanguage.flag}\r\n        </span>\r\n        <svg className={`w-3 h-3 ${getArrowColor()} ml-1`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n        </svg>\r\n      </button>\r\n      \r\n      <div className=\"absolute right-0 top-full mt-2 bg-white rounded-lg shadow-xl border border-gray-200 py-1 min-w-[160px] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[200]\">\r\n        <div className=\"px-3 py-2 border-b border-gray-200\">\r\n          <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wide\">{t('common.selectLanguage')}</p>\r\n        </div>\r\n        {languages.map((language) => (\r\n          <button\r\n            key={language.code}\r\n            onClick={() => changeLanguage(language.code)}\r\n            className={`w-full px-4 py-3 text-left text-sm hover:bg-gray-50 transition-colors flex items-center space-x-3 ${\r\n              i18n.language === language.code ? 'text-blue-600 bg-blue-50 font-medium' : 'text-gray-700'\r\n            }`}\r\n          >\r\n            <span className=\"text-lg\">{language.flag}</span>\r\n            <span className=\"flex-1\">{language.name}</span>\r\n            {i18n.language === language.code && (\r\n              <span className=\"text-blue-600 font-bold\">Γ£ô</span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LanguageSwitcher;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\NotificationBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\NotificationCenter.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-lg\">Γ£ò</span>","line":91,"column":43,"nodeType":"JSXText","endLine":91,"endColumn":44},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                              onClick={() => markAsRead(notification.id)}\r\n                              className=\"text-xs text-blue-600 hover:text-blue-800\"\r\n                            >\r\n                              ─É├ính dß║Ñu ─æ├ú ─æß╗ìc\r\n                            </button>","line":144,"column":30,"nodeType":"JSXText","endLine":146,"endColumn":29},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button className=\"text-sm text-blue-600 hover:text-blue-800\">\r\n                Xem tß║Ñt cß║ú th├┤ng b├ío\r\n              </button>","line":174,"column":77,"nodeType":"JSXText","endLine":176,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../lib/store';\r\n\r\ninterface Notification {\r\n  id: string;\r\n  type: 'achievement' | 'quiz' | 'social' | 'system';\r\n  title: string;\r\n  message: string;\r\n  timestamp: Date;\r\n  read: boolean;\r\n  icon?: string;\r\n  action?: {\r\n    label: string;\r\n    onClick: () => void;\r\n  };\r\n}\r\n\r\nconst NotificationCenter: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const user = useSelector((state: RootState) => state.auth.user);\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  // Load real notifications\r\n  useEffect(() => {\r\n    if (user) {\r\n      // TODO: Load real notifications from Firebase\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n    }\r\n  }, [user]);\r\n\r\n  const markAsRead = (id: string) => {\r\n    setNotifications(prev => \r\n      prev.map(n => n.id === id ? { ...n, read: true } : n)\r\n    );\r\n    setUnreadCount(prev => Math.max(0, prev - 1));\r\n  };\r\n\r\n  const markAllAsRead = () => {\r\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n    setUnreadCount(0);\r\n  };\r\n\r\n  const deleteNotification = (id: string) => {\r\n    setNotifications(prev => prev.filter(n => n.id !== id));\r\n    const notification = notifications.find(n => n.id === id);\r\n    if (notification && !notification.read) {\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n    }\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"relative z-[100]\">\r\n      {/* Notification Bell */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-gray-600 hover:text-gray-900 transition-colors\"\r\n      >\r\n        <span className=\"text-xl\">≡ƒöö</span>\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\r\n            {unreadCount > 9 ? '9+' : unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Notification Dropdown */}\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-[200]\">\r\n          {/* Header */}\r\n          <div className=\"px-4 py-3 border-b border-gray-200 flex items-center justify-between\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900\">{t(\"notifications.title\")}</h3>\r\n            <div className=\"flex items-center space-x-2\">\r\n              {unreadCount > 0 && (\r\n                <button\r\n                  onClick={markAllAsRead}\r\n                  className=\"text-sm text-blue-600 hover:text-blue-800\"\r\n                >{t(\"notifications.markAllRead\")}\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <span className=\"text-lg\">Γ£ò</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Notifications List */}\r\n          <div className=\"max-h-96 overflow-y-auto\">\r\n            {notifications.length === 0 ? (\r\n              <div className=\"px-4 py-8 text-center text-gray-500\">\r\n                <div className=\"text-4xl mb-3\">≡ƒöö</div>\r\n                <p>{t('notifications.empty')}</p>\r\n              </div>\r\n            ) : (\r\n              notifications.map((notification) => (\r\n                <div\r\n                  key={notification.id}\r\n                  className={`px-4 py-3 border-b border-gray-100 hover:bg-gray-50 transition-colors ${\r\n                    !notification.read ? 'bg-blue-50' : ''\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-start space-x-3\">\r\n                    {notification.icon && (\r\n                      <div className=\"flex-shrink-0 mt-1 text-lg\">\r\n                        {notification.icon}\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <p className={`text-sm font-medium ${\r\n                          !notification.read ? 'text-gray-900' : 'text-gray-700'\r\n                        }`}>\r\n                          {notification.title}\r\n                        </p>\r\n                        {!notification.read && (\r\n                          <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <p className=\"text-sm text-gray-600 mt-1\">\r\n                        {notification.message}\r\n                      </p>\r\n                      \r\n                      <div className=\"flex items-center justify-between mt-2\">\r\n                        <p className=\"text-xs text-gray-400\">\r\n                          {notification.timestamp.toLocaleString('vi-VN')}\r\n                        </p>\r\n                        \r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {!notification.read && (\r\n                            <button\r\n                              onClick={() => markAsRead(notification.id)}\r\n                              className=\"text-xs text-blue-600 hover:text-blue-800\"\r\n                            >\r\n                              ─É├ính dß║Ñu ─æ├ú ─æß╗ìc\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => deleteNotification(notification.id)}\r\n                            className=\"text-xs text-red-600 hover:text-red-800\"\r\n                          >{t(\"action.clear\")}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {notification.action && (\r\n                        <button\r\n                          onClick={notification.action.onClick}\r\n                          className=\"mt-2 text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors\"\r\n                        >\r\n                          {notification.action.label}\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          {notifications.length > 0 && (\r\n            <div className=\"px-4 py-3 border-t border-gray-200 text-center\">\r\n              <button className=\"text-sm text-blue-600 hover:text-blue-800\">\r\n                Xem tß║Ñt cß║ú th├┤ng b├ío\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Backdrop */}\r\n      {isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 z-40\"\r\n          onClick={() => setIsOpen(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationCenter;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\PopularQuizzesRanking.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\QuickReviewSection.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\r\n          Bß║ín thß║Ñy quiz n├áy nh╞░ thß║┐ n├áo?\r\n        </h3>","line":33,"column":62,"nodeType":"JSXText","endLine":35,"endColumn":9},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-6\">\r\n          Chia sß║╗ cß║úm nhß║¡n cß╗ºa bß║ín ─æß╗â gi├║p nhß╗»ng ng╞░ß╗¥i kh├íc c├│ trß║úi nghiß╗çm tß╗æt h╞ín\r\n        </p>","line":37,"column":43,"nodeType":"JSXText","endLine":39,"endColumn":9},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n                onClick={() => setShowReviewForm(true)}\r\n                className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-md\"\r\n              >\r\n                <MessageSquare className=\"w-5 h-5 mr-2\" />\r\n                Viß║┐t ─æ├ính gi├í\r\n              </button>","line":48,"column":59,"nodeType":"JSXText","endLine":50,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Link\r\n                to={`/quiz/${quizId}/reviews`}\r\n                className=\"inline-flex items-center px-6 py-3 bg-white text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors border border-gray-300 shadow-sm\"\r\n              >\r\n                <Eye className=\"w-5 h-5 mr-2\" />\r\n                Xem tß║Ñt cß║ú ─æ├ính gi├í\r\n              </Link>","line":56,"column":49,"nodeType":"JSXText","endLine":58,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-4\">─É─âng nhß║¡p ─æß╗â ─æ├ính gi├í v├á xem c├íc ─æ├ính gi├í kh├íc</p>","line":62,"column":49,"nodeType":"JSXText","endLine":62,"endColumn":95},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900\">─É├ính gi├í: {quizTitle}</h3>","line":78,"column":63,"nodeType":"JSXText","endLine":78,"endColumn":73}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../lib/store';\r\nimport { Star, MessageSquare, Eye } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport ReviewForm from '../../features/quiz/components/ReviewForm';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\ninterface QuickReviewSectionProps {\r\n  quizId: string;\r\n  quizTitle: string;\r\n}\r\n\r\nconst QuickReviewSection: React.FC<QuickReviewSectionProps> = ({ quizId, quizTitle }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const user = useSelector((state: RootState) => state.auth.user);\r\n  const [showReviewForm, setShowReviewForm] = useState(false);\r\n\r\n  const handleReviewSubmitted = () => {\r\n    setShowReviewForm(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mt-8\">\r\n      <div className=\"text-center\">\r\n        <div className=\"flex justify-center mb-4\">\r\n          <div className=\"bg-white rounded-full p-3 shadow-lg\">\r\n            <Star className=\"w-8 h-8 text-yellow-500\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\r\n          Bß║ín thß║Ñy quiz n├áy nh╞░ thß║┐ n├áo?\r\n        </h3>\r\n        \r\n        <p className=\"text-gray-600 mb-6\">\r\n          Chia sß║╗ cß║úm nhß║¡n cß╗ºa bß║ín ─æß╗â gi├║p nhß╗»ng ng╞░ß╗¥i kh├íc c├│ trß║úi nghiß╗çm tß╗æt h╞ín\r\n        </p>\r\n\r\n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\r\n          {user ? (\r\n            <>\r\n              <button\r\n                onClick={() => setShowReviewForm(true)}\r\n                className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-md\"\r\n              >\r\n                <MessageSquare className=\"w-5 h-5 mr-2\" />\r\n                Viß║┐t ─æ├ính gi├í\r\n              </button>\r\n              \r\n              <Link\r\n                to={`/quiz/${quizId}/reviews`}\r\n                className=\"inline-flex items-center px-6 py-3 bg-white text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors border border-gray-300 shadow-sm\"\r\n              >\r\n                <Eye className=\"w-5 h-5 mr-2\" />\r\n                Xem tß║Ñt cß║ú ─æ├ính gi├í\r\n              </Link>\r\n            </>\r\n          ) : (\r\n            <div className=\"text-center\">\r\n              <p className=\"text-gray-600 mb-4\">─É─âng nhß║¡p ─æß╗â ─æ├ính gi├í v├á xem c├íc ─æ├ính gi├í kh├íc</p>\r\n              <Link\r\n                to=\"/login\"\r\n                className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >{t(\"auth.login\")}\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Review Form Modal */}\r\n      {showReviewForm && user && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-auto m-4\">\r\n            <div className=\"flex justify-between items-center p-6 border-b border-gray-200\">\r\n              <h3 className=\"text-xl font-bold text-gray-900\">─É├ính gi├í: {quizTitle}</h3>\r\n              <button\r\n                onClick={() => setShowReviewForm(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 text-2xl font-bold\"\r\n              >\r\n                ├ù\r\n              </button>\r\n            </div>\r\n            <div className=\"p-6\">\r\n              <ReviewForm\r\n                quizId={quizId}\r\n                onReviewSubmitted={handleReviewSubmitted}\r\n                onClose={() => setShowReviewForm(false)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuickReviewSection;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\QuizReviewSystem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\RoleBasedRedirect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ScrollToTop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\SearchComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\layout\\Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\layout\\Loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\layout\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\layout\\Unauthorized.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\AudioPlayer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-blue-200 text-sm\">Audio Player</p>","line":140,"column":50,"nodeType":"JSXText","endLine":140,"endColumn":62},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <kbd className=\"px-2 py-1 bg-white bg-opacity-10 rounded\">Space</kbd>","line":268,"column":74,"nodeType":"JSXText","endLine":268,"endColumn":79},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n            ≡ƒÆí <kbd className=\"px-2 py-1 bg-white bg-opacity-10 rounded\">Space</kbd> ─æß╗â ph├ít/dß╗½ng\r\n            ΓÇó <kbd className=\"px-2 py-1 bg-white bg-opacity-10 rounded\">ESC</kbd> ─æß╗â ─æ├│ng\r\n          </p>","line":268,"column":85,"nodeType":"JSXText","endLine":269,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n            ≡ƒÆí <kbd className=\"px-2 py-1 bg-white bg-opacity-10 rounded\">Space</kbd> ─æß╗â ph├ít/dß╗½ng\r\n            ΓÇó <kbd className=\"px-2 py-1 bg-white bg-opacity-10 rounded\">ESC</kbd> ─æß╗â ─æ├│ng\r\n          </p>","line":269,"column":82,"nodeType":"JSXText","endLine":270,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * AudioPlayer - Component ph├ít ├óm thanh fullscreen vß╗¢i waveform UI\r\n */\r\n\r\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { X, Play, Pause, Volume2, VolumeX, Download, SkipBack, SkipForward } from 'lucide-react';\r\n\r\ninterface AudioPlayerProps {\r\n  audioUrl: string;\r\n  title?: string;\r\n  onClose: () => void;\r\n}\r\n\r\nconst AudioPlayer: React.FC<AudioPlayerProps> = ({ audioUrl, title, onClose }) => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n  const togglePlayPause = useCallback(() => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    if (isPlaying) {\r\n      audio.pause();\r\n    } else {\r\n      audio.play();\r\n    }\r\n    setIsPlaying(!isPlaying);\r\n  }, [isPlaying]);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n      if (e.code === 'Space') {\r\n        e.preventDefault();\r\n        togglePlayPause();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, [onClose, togglePlayPause]);\r\n\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    const handleTimeUpdate = () => setCurrentTime(audio.currentTime);\r\n    const handleLoadedMetadata = () => setDuration(audio.duration);\r\n    const handleEnded = () => setIsPlaying(false);\r\n\r\n    audio.addEventListener('timeupdate', handleTimeUpdate);\r\n    audio.addEventListener('loadedmetadata', handleLoadedMetadata);\r\n    audio.addEventListener('ended', handleEnded);\r\n\r\n    return () => {\r\n      audio.removeEventListener('timeupdate', handleTimeUpdate);\r\n      audio.removeEventListener('loadedmetadata', handleLoadedMetadata);\r\n      audio.removeEventListener('ended', handleEnded);\r\n    };\r\n  }, []);\r\n\r\n  const handleSeek = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    const time = parseFloat(e.target.value);\r\n    audio.currentTime = time;\r\n    setCurrentTime(time);\r\n  };\r\n\r\n  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    const vol = parseFloat(e.target.value);\r\n    audio.volume = vol;\r\n    setVolume(vol);\r\n    setIsMuted(vol === 0);\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    if (isMuted) {\r\n      audio.volume = volume || 0.5;\r\n      setIsMuted(false);\r\n    } else {\r\n      audio.volume = 0;\r\n      setIsMuted(true);\r\n    }\r\n  };\r\n\r\n  const skip = (seconds: number) => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    audio.currentTime = Math.max(0, Math.min(duration, audio.currentTime + seconds));\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    const link = document.createElement('a');\r\n    link.href = audioUrl;\r\n    link.download = title || 'audio';\r\n    link.click();\r\n  };\r\n\r\n  const formatTime = (time: number) => {\r\n    const minutes = Math.floor(time / 60);\r\n    const seconds = Math.floor(time % 60);\r\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 z-50 flex items-center justify-center p-4\"\r\n      onClick={(e) => {\r\n        if (e.target === e.currentTarget) {\r\n          onClose();\r\n        }\r\n      }}\r\n    >\r\n      <audio ref={audioRef} src={audioUrl} />\r\n\r\n      <div className=\"bg-black bg-opacity-40 backdrop-blur-xl rounded-3xl shadow-2xl p-8 max-w-2xl w-full\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div className=\"flex-1\">\r\n            {title && (\r\n              <h2 className=\"text-white text-2xl font-bold mb-1\">\r\n                ≡ƒÄ╡ {title}\r\n              </h2>\r\n            )}\r\n            <p className=\"text-blue-200 text-sm\">Audio Player</p>\r\n          </div>\r\n          \r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-white hover:bg-red-600 rounded-lg transition-colors\"\r\n            title=\"─É├│ng (ESC)\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Waveform Visualization (Decorative) */}\r\n        <div className=\"mb-8 h-32 flex items-end justify-center gap-1\">\r\n          {Array.from({ length: 50 }).map((_, i) => {\r\n            const height = isPlaying \r\n              ? Math.random() * 100 + 20 \r\n              : 30;\r\n            const isActive = (currentTime / duration) * 50 > i;\r\n            \r\n            return (\r\n              <div\r\n                key={i}\r\n                className={`w-2 rounded-full transition-all duration-150 ${\r\n                  isActive \r\n                    ? 'bg-gradient-to-t from-blue-500 to-purple-500' \r\n                    : 'bg-white bg-opacity-20'\r\n                }`}\r\n                style={{\r\n                  height: `${height}%`,\r\n                  animation: isPlaying ? `wave 0.${Math.random() * 9 + 1}s ease-in-out infinite alternate` : 'none'\r\n                }}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        <div className=\"mb-6\">\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max={duration || 0}\r\n            value={currentTime}\r\n            onChange={handleSeek}\r\n            className=\"w-full h-2 bg-white bg-opacity-20 rounded-lg appearance-none cursor-pointer accent-blue-500\"\r\n            style={{\r\n              background: `linear-gradient(to right, rgb(59, 130, 246) 0%, rgb(59, 130, 246) ${(currentTime / duration) * 100}%, rgba(255,255,255,0.2) ${(currentTime / duration) * 100}%, rgba(255,255,255,0.2) 100%)`\r\n            }}\r\n          />\r\n          <div className=\"flex justify-between mt-2\">\r\n            <span className=\"text-white text-sm\">{formatTime(currentTime)}</span>\r\n            <span className=\"text-white text-sm\">{formatTime(duration)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        <div className=\"flex items-center justify-center gap-4 mb-6\">\r\n          {/* Skip Backward */}\r\n          <button\r\n            onClick={() => skip(-10)}\r\n            className=\"p-3 text-white hover:bg-white hover:bg-opacity-10 rounded-full transition-all\"\r\n            title=\"L├╣i 10s\"\r\n          >\r\n            <SkipBack className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Play/Pause */}\r\n          <button\r\n            onClick={togglePlayPause}\r\n            className=\"p-5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full hover:scale-110 transition-all shadow-lg\"\r\n            title={isPlaying ? \"Dß╗½ng (Space)\" : \"Ph├ít (Space)\"}\r\n          >\r\n            {isPlaying ? (\r\n              <Pause className=\"w-8 h-8\" fill=\"white\" />\r\n            ) : (\r\n              <Play className=\"w-8 h-8 ml-1\" fill=\"white\" />\r\n            )}\r\n          </button>\r\n\r\n          {/* Skip Forward */}\r\n          <button\r\n            onClick={() => skip(10)}\r\n            className=\"p-3 text-white hover:bg-white hover:bg-opacity-10 rounded-full transition-all\"\r\n            title=\"Tiß║┐n 10s\"\r\n          >\r\n            <SkipForward className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Volume & Download */}\r\n        <div className=\"flex items-center justify-between gap-4\">\r\n          {/* Volume Control */}\r\n          <div className=\"flex items-center gap-3 flex-1\">\r\n            <button\r\n              onClick={toggleMute}\r\n              className=\"p-2 text-white hover:bg-white hover:bg-opacity-10 rounded-lg transition-colors\"\r\n            >\r\n              {isMuted ? (\r\n                <VolumeX className=\"w-5 h-5\" />\r\n              ) : (\r\n                <Volume2 className=\"w-5 h-5\" />\r\n              )}\r\n            </button>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max=\"1\"\r\n              step=\"0.1\"\r\n              value={isMuted ? 0 : volume}\r\n              onChange={handleVolumeChange}\r\n              className=\"flex-1 h-2 bg-white bg-opacity-20 rounded-lg appearance-none cursor-pointer accent-blue-500\"\r\n            />\r\n          </div>\r\n\r\n          {/* Download */}\r\n          <button\r\n            onClick={handleDownload}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-10 rounded-lg transition-colors\"\r\n            title=\"Tß║úi xuß╗æng\"\r\n          >\r\n            <Download className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-6 text-center\">\r\n          <p className=\"text-white text-sm opacity-75\">\r\n            ≡ƒÆí <kbd className=\"px-2 py-1 bg-white bg-opacity-10 rounded\">Space</kbd> ─æß╗â ph├ít/dß╗½ng\r\n            ΓÇó <kbd className=\"px-2 py-1 bg-white bg-opacity-10 rounded\">ESC</kbd> ─æß╗â ─æ├│ng\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes wave {\r\n          0% { transform: scaleY(1); }\r\n          100% { transform: scaleY(0.5); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AudioPlayer;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\ConfirmDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\ImageViewer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n          ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          ΓÇó Cuß╗Ön chuß╗Öt ─æß╗â zoom ΓÇó Click v├á k├⌐o ─æß╗â di chuyß╗ân\r\n        </p>","line":165,"column":54,"nodeType":"JSXText","endLine":166,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n          ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          ΓÇó Cuß╗Ön chuß╗Öt ─æß╗â zoom ΓÇó Click v├á k├⌐o ─æß╗â di chuyß╗ân\r\n        </p>","line":166,"column":86,"nodeType":"JSXText","endLine":168,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ImageViewer - Component xem ß║únh fullscreen vß╗¢i zoom v├á download\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, ZoomIn, ZoomOut, Download, RotateCw, Maximize2, Minimize2 } from 'lucide-react';\r\n\r\ninterface ImageViewerProps {\r\n  imageUrl: string;\r\n  title?: string;\r\n  onClose: () => void;\r\n}\r\n\r\nconst ImageViewer: React.FC<ImageViewerProps> = ({ imageUrl, title, onClose }) => {\r\n  const [zoom, setZoom] = useState(100);\r\n  const [rotation, setRotation] = useState(0);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const handleZoomIn = () => setZoom(prev => Math.min(prev + 25, 300));\r\n  const handleZoomOut = () => setZoom(prev => Math.max(prev - 25, 50));\r\n  const handleRotate = () => setRotation(prev => (prev + 90) % 360);\r\n  const handleDownload = () => {\r\n    const link = document.createElement('a');\r\n    link.href = imageUrl;\r\n    link.download = title || 'image';\r\n    link.click();\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    const elem = document.documentElement;\r\n    if (!document.fullscreenElement) {\r\n      elem.requestFullscreen();\r\n      setIsFullscreen(true);\r\n    } else {\r\n      document.exitFullscreen();\r\n      setIsFullscreen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 bg-black bg-opacity-95 z-50 flex flex-col\"\r\n      onClick={(e) => {\r\n        if (e.target === e.currentTarget) {\r\n          onClose();\r\n        }\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-4 bg-black bg-opacity-50\">\r\n        <div className=\"flex-1\">\r\n          {title && (\r\n            <h2 className=\"text-white text-xl font-semibold truncate\">\r\n              {title}\r\n            </h2>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Zoom Out */}\r\n          <button\r\n            onClick={handleZoomOut}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n            title=\"Thu nhß╗Å\"\r\n            disabled={zoom <= 50}\r\n          >\r\n            <ZoomOut className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Zoom Level */}\r\n          <span className=\"text-white text-sm px-2 min-w-[60px] text-center\">\r\n            {zoom}%\r\n          </span>\r\n\r\n          {/* Zoom In */}\r\n          <button\r\n            onClick={handleZoomIn}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n            title=\"Ph├│ng to\"\r\n            disabled={zoom >= 300}\r\n          >\r\n            <ZoomIn className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Rotate */}\r\n          <button\r\n            onClick={handleRotate}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n            title=\"Xoay ß║únh\"\r\n          >\r\n            <RotateCw className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Download */}\r\n          <button\r\n            onClick={handleDownload}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n            title=\"Tß║úi xuß╗æng\"\r\n          >\r\n            <Download className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Fullscreen */}\r\n          <button\r\n            onClick={toggleFullscreen}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n            title={isFullscreen ? \"Tho├ít to├án m├án h├¼nh\" : \"To├án m├án h├¼nh\"}\r\n          >\r\n            {isFullscreen ? (\r\n              <Minimize2 className=\"w-5 h-5\" />\r\n            ) : (\r\n              <Maximize2 className=\"w-5 h-5\" />\r\n            )}\r\n          </button>\r\n\r\n          {/* Close */}\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-white hover:bg-red-600 rounded-lg transition-colors ml-2\"\r\n            title=\"─É├│ng (ESC)\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Image Container */}\r\n      <div className=\"flex-1 flex items-center justify-center p-8 overflow-auto\">\r\n        <img\r\n          src={imageUrl}\r\n          alt={title || \"Image\"}\r\n          style={{\r\n            transform: `scale(${zoom / 100}) rotate(${rotation}deg)`,\r\n            transition: 'transform 0.3s ease',\r\n            maxWidth: '100%',\r\n            maxHeight: '100%',\r\n            objectFit: 'contain'\r\n          }}\r\n          className=\"select-none\"\r\n        />\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"p-4 text-center\">\r\n        <p className=\"text-white text-sm opacity-75\">\r\n          ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          ΓÇó Cuß╗Ön chuß╗Öt ─æß╗â zoom ΓÇó Click v├á k├⌐o ─æß╗â di chuyß╗ân\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageViewer;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\PDFViewer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-sm\">Mß╗ƒ tab mß╗¢i</span>","line":87,"column":39,"nodeType":"JSXText","endLine":87,"endColumn":49},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n          ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          ΓÇó Sß╗¡ dß╗Ñng toolbar PDF ─æß╗â zoom, t├¼m kiß║┐m, in ß║Ñn\r\n        </p>","line":135,"column":54,"nodeType":"JSXText","endLine":136,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n          ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          ΓÇó Sß╗¡ dß╗Ñng toolbar PDF ─æß╗â zoom, t├¼m kiß║┐m, in ß║Ñn\r\n        </p>","line":136,"column":86,"nodeType":"JSXText","endLine":138,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PDFViewer - Component xem PDF fullscreen vß╗¢i navigation\r\n */\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { X, Download, ExternalLink, Maximize2, Minimize2 } from 'lucide-react';\r\n\r\ninterface PDFViewerProps {\r\n  pdfUrl: string;\r\n  title?: string;\r\n  onClose: () => void;\r\n}\r\n\r\nconst PDFViewer: React.FC<PDFViewerProps> = ({ pdfUrl, title, onClose }) => {\r\n  const [isFullscreen, setIsFullscreen] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const handleDownload = () => {\r\n    const link = document.createElement('a');\r\n    link.href = pdfUrl;\r\n    link.download = title || 'document.pdf';\r\n    link.target = '_blank';\r\n    link.click();\r\n  };\r\n\r\n  const handleOpenNewTab = () => {\r\n    window.open(pdfUrl, '_blank');\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    const elem = document.documentElement;\r\n    if (!document.fullscreenElement) {\r\n      elem.requestFullscreen();\r\n      setIsFullscreen(true);\r\n    } else {\r\n      document.exitFullscreen();\r\n      setIsFullscreen(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 bg-black bg-opacity-95 z-50 flex flex-col\"\r\n      onClick={(e) => {\r\n        if (e.target === e.currentTarget) {\r\n          onClose();\r\n        }\r\n      }}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-4 bg-black bg-opacity-50\">\r\n        <div className=\"flex-1\">\r\n          {title && (\r\n            <h2 className=\"text-white text-xl font-semibold truncate\">\r\n              ≡ƒôä {title}\r\n            </h2>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Open in New Tab */}\r\n          <button\r\n            onClick={handleOpenNewTab}\r\n            className=\"px-4 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors flex items-center gap-2\"\r\n            title=\"Mß╗ƒ trong tab mß╗¢i\"\r\n          >\r\n            <ExternalLink className=\"w-4 h-4\" />\r\n            <span className=\"text-sm\">Mß╗ƒ tab mß╗¢i</span>\r\n          </button>\r\n\r\n          {/* Download */}\r\n          <button\r\n            onClick={handleDownload}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n            title=\"Tß║úi xuß╗æng\"\r\n          >\r\n            <Download className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Fullscreen */}\r\n          <button\r\n            onClick={toggleFullscreen}\r\n            className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n            title={isFullscreen ? \"Tho├ít to├án m├án h├¼nh\" : \"To├án m├án h├¼nh\"}\r\n          >\r\n            {isFullscreen ? (\r\n              <Minimize2 className=\"w-5 h-5\" />\r\n            ) : (\r\n              <Maximize2 className=\"w-5 h-5\" />\r\n            )}\r\n          </button>\r\n\r\n          {/* Close */}\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-white hover:bg-red-600 rounded-lg transition-colors\"\r\n            title=\"─É├│ng (ESC)\"\r\n          >\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* PDF Container */}\r\n      <div className=\"flex-1 bg-gray-900\">\r\n        <iframe\r\n          src={`${pdfUrl}#toolbar=1&navpanes=1&scrollbar=1`}\r\n          title={title || \"PDF Document\"}\r\n          className=\"w-full h-full\"\r\n          style={{ border: 'none' }}\r\n        />\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <div className=\"p-4 text-center bg-black bg-opacity-50\">\r\n        <p className=\"text-white text-sm opacity-75\">\r\n          ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          ΓÇó Sß╗¡ dß╗Ñng toolbar PDF ─æß╗â zoom, t├¼m kiß║┐m, in ß║Ñn\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PDFViewer;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\PasswordModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\QuizPasswordModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\RichTextEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\RichTextViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\SafeHTML.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\ShareLinkModal.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold\">≡ƒÄë Quiz ─æ├ú ─æ╞░ß╗úc xuß║Ñt bß║ún!</h3>","line":86,"column":51,"nodeType":"JSXText","endLine":86,"endColumn":76},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-white/80 mt-1\">Chia sß║╗ quiz vß╗¢i hß╗ìc vi├¬n cß╗ºa bß║ín</p>","line":87,"column":59,"nodeType":"JSXText","endLine":87,"endColumn":92},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-600 mb-1\">Ti├¬u ─æß╗ü Quiz</p>","line":103,"column":55,"nodeType":"JSXText","endLine":103,"endColumn":67},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n              <Link2 className=\"w-4 h-4\" />\r\n              Link chia sß║╗\r\n            </label>","line":110,"column":44,"nodeType":"JSXText","endLine":112,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <>\r\n                    <Check className=\"w-4 h-4\" />\r\n                    ─É├ú copy\r\n                  </>","line":130,"column":50,"nodeType":"JSXText","endLine":132,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <>\r\n                    <Copy className=\"w-4 h-4\" />\r\n                    Copy\r\n                  </>","line":135,"column":49,"nodeType":"JSXText","endLine":137,"endColumn":19},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                <Lock className=\"w-4 h-4\" />\r\n                Mß║¡t khß║⌐u quiz\r\n              </label>","line":147,"column":45,"nodeType":"JSXText","endLine":149,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <>\r\n                      <Check className=\"w-4 h-4\" />\r\n                      ─É├ú copy\r\n                    </>","line":175,"column":52,"nodeType":"JSXText","endLine":177,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <>\r\n                      <Copy className=\"w-4 h-4\" />\r\n                      Copy\r\n                    </>","line":180,"column":51,"nodeType":"JSXText","endLine":182,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-sm text-gray-600 flex items-center gap-1.5\">\r\n                <Lock className=\"w-3.5 h-3.5\" />\r\n                Hß╗ìc vi├¬n cß║ºn nhß║¡p mß║¡t khß║⌐u n├áy ─æß╗â l├ám b├ái quiz\r\n              </p>","line":187,"column":49,"nodeType":"JSXText","endLine":189,"endColumn":15},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h5 className=\"font-semibold text-blue-900 mb-2 flex items-center gap-2\">\r\n              ≡ƒÆí H╞░ß╗¢ng dß║½n\r\n            </h5>","line":195,"column":86,"nodeType":"JSXText","endLine":197,"endColumn":13},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Quiz ─æang chß╗¥ admin ph├¬ duyß╗çt. Sau khi ─æ╞░ß╗úc duyß╗çt, quiz sß║╜ hiß╗ân thß╗ï c├┤ng khai.</span>","line":201,"column":23,"nodeType":"JSXText","endLine":201,"endColumn":101},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Bß║ín c├│ thß╗â chia sß║╗ link n├áy vß╗¢i hß╗ìc vi├¬n. {hasPassword ? 'Hß╗ì cß║ºn nhß║¡p mß║¡t khß║⌐u ─æß╗â truy cß║¡p.' : 'Hß╗ì c├│ thß╗â truy cß║¡p ngay.'}</span>","line":205,"column":23,"nodeType":"JSXText","endLine":205,"endColumn":65},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span>Quß║ún l├╜ quiz cß╗ºa bß║ín tß║íi trang \"My Quizzes\" trong Creator Dashboard.</span>","line":209,"column":23,"nodeType":"JSXText","endLine":209,"endColumn":91},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n            onClick={handleCopyAll}\r\n            className=\"px-4 py-2 text-sm font-semibold text-blue-700 hover:text-blue-900 transition-colors flex items-center gap-2\"\r\n          >\r\n            <Copy className=\"w-4 h-4\" />\r\n            Copy tß║Ñt cß║ú th├┤ng tin\r\n          </button>","line":221,"column":41,"nodeType":"JSXText","endLine":223,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-2.5 bg-gray-900 hover:bg-gray-800 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            ─É├│ng\r\n          </button>","line":227,"column":12,"nodeType":"JSXText","endLine":229,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link2, Copy, Check, X, Lock, Eye, EyeOff, Share2 } from 'lucide-react';\r\n\r\ninterface ShareLinkModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  quizId: string;\r\n  quizTitle: string;\r\n  hasPassword: boolean;\r\n  password?: string;\r\n}\r\n\r\nconst ShareLinkModal: React.FC<ShareLinkModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  quizId,\r\n  quizTitle,\r\n  hasPassword,\r\n  password,\r\n}) => {\r\n  const [copiedLink, setCopiedLink] = useState(false);\r\n  const [copiedPassword, setCopiedPassword] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const quizLink = `${window.location.origin}/quiz/${quizId}/preview`;\r\n\r\n  const handleCopyLink = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(quizLink);\r\n      setCopiedLink(true);\r\n      setTimeout(() => setCopiedLink(false), 2000);\r\n    } catch (error) {\r\n      console.error('Failed to copy link:', error);\r\n    }\r\n  };\r\n\r\n  const handleCopyPassword = async () => {\r\n    if (!password) return;\r\n    try {\r\n      await navigator.clipboard.writeText(password);\r\n      setCopiedPassword(true);\r\n      setTimeout(() => setCopiedPassword(false), 2000);\r\n    } catch (error) {\r\n      console.error('Failed to copy password:', error);\r\n    }\r\n  };\r\n\r\n  const handleCopyAll = async () => {\r\n    const textToCopy = hasPassword && password\r\n      ? `Quiz: ${quizTitle}\\nLink: ${quizLink}\\nMß║¡t khß║⌐u: ${password}`\r\n      : `Quiz: ${quizTitle}\\nLink: ${quizLink}`;\r\n    \r\n    try {\r\n      await navigator.clipboard.writeText(textToCopy);\r\n      setCopiedLink(true);\r\n      if (hasPassword) setCopiedPassword(true);\r\n      setTimeout(() => {\r\n        setCopiedLink(false);\r\n        setCopiedPassword(false);\r\n      }, 2000);\r\n    } catch (error) {\r\n      console.error('Failed to copy:', error);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[9999] flex items-center justify-center p-4\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\r\n        onClick={onClose}\r\n      />\r\n      \r\n      {/* Modal */}\r\n      <div className=\"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden animate-in fade-in zoom-in duration-200\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-5 text-white\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm\">\r\n                <Share2 className=\"w-6 h-6\" />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-xl font-bold\">≡ƒÄë Quiz ─æ├ú ─æ╞░ß╗úc xuß║Ñt bß║ún!</h3>\r\n                <p className=\"text-sm text-white/80 mt-1\">Chia sß║╗ quiz vß╗¢i hß╗ìc vi├¬n cß╗ºa bß║ín</p>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"w-8 h-8 rounded-lg hover:bg-white/20 flex items-center justify-center transition-colors\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Quiz Title */}\r\n          <div className=\"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200\">\r\n            <p className=\"text-sm text-gray-600 mb-1\">Ti├¬u ─æß╗ü Quiz</p>\r\n            <h4 className=\"text-lg font-bold text-gray-900\">{quizTitle}</h4>\r\n          </div>\r\n\r\n          {/* Quiz Link */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n              <Link2 className=\"w-4 h-4\" />\r\n              Link chia sß║╗\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                type=\"text\"\r\n                value={quizLink}\r\n                readOnly\r\n                className=\"flex-1 px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-gray-700 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              />\r\n              <button\r\n                onClick={handleCopyLink}\r\n                className={`px-4 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 ${\r\n                  copiedLink\r\n                    ? 'bg-green-500 text-white'\r\n                    : 'bg-blue-600 hover:bg-blue-700 text-white'\r\n                }`}\r\n              >\r\n                {copiedLink ? (\r\n                  <>\r\n                    <Check className=\"w-4 h-4\" />\r\n                    ─É├ú copy\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Copy className=\"w-4 h-4\" />\r\n                    Copy\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Password Section */}\r\n          {hasPassword && password && (\r\n            <div className=\"space-y-2\">\r\n              <label className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n                <Lock className=\"w-4 h-4\" />\r\n                Mß║¡t khß║⌐u quiz\r\n              </label>\r\n              <div className=\"flex gap-2\">\r\n                <div className=\"flex-1 relative\">\r\n                  <input\r\n                    type={showPassword ? 'text' : 'password'}\r\n                    value={password}\r\n                    readOnly\r\n                    className=\"w-full px-4 py-3 pr-12 bg-purple-50 border border-purple-300 rounded-xl text-gray-900 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                  />\r\n                  <button\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors\"\r\n                  >\r\n                    {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                  </button>\r\n                </div>\r\n                <button\r\n                  onClick={handleCopyPassword}\r\n                  className={`px-4 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 ${\r\n                    copiedPassword\r\n                      ? 'bg-green-500 text-white'\r\n                      : 'bg-purple-600 hover:bg-purple-700 text-white'\r\n                  }`}\r\n                >\r\n                  {copiedPassword ? (\r\n                    <>\r\n                      <Check className=\"w-4 h-4\" />\r\n                      ─É├ú copy\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Copy className=\"w-4 h-4\" />\r\n                      Copy\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n              <p className=\"text-sm text-gray-600 flex items-center gap-1.5\">\r\n                <Lock className=\"w-3.5 h-3.5\" />\r\n                Hß╗ìc vi├¬n cß║ºn nhß║¡p mß║¡t khß║⌐u n├áy ─æß╗â l├ám b├ái quiz\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Info Box */}\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\r\n            <h5 className=\"font-semibold text-blue-900 mb-2 flex items-center gap-2\">\r\n              ≡ƒÆí H╞░ß╗¢ng dß║½n\r\n            </h5>\r\n            <ul className=\"text-sm text-blue-800 space-y-1.5\">\r\n              <li className=\"flex items-start gap-2\">\r\n                <span className=\"text-blue-600 mt-0.5\">ΓÇó</span>\r\n                <span>Quiz ─æang chß╗¥ admin ph├¬ duyß╗çt. Sau khi ─æ╞░ß╗úc duyß╗çt, quiz sß║╜ hiß╗ân thß╗ï c├┤ng khai.</span>\r\n              </li>\r\n              <li className=\"flex items-start gap-2\">\r\n                <span className=\"text-blue-600 mt-0.5\">ΓÇó</span>\r\n                <span>Bß║ín c├│ thß╗â chia sß║╗ link n├áy vß╗¢i hß╗ìc vi├¬n. {hasPassword ? 'Hß╗ì cß║ºn nhß║¡p mß║¡t khß║⌐u ─æß╗â truy cß║¡p.' : 'Hß╗ì c├│ thß╗â truy cß║¡p ngay.'}</span>\r\n              </li>\r\n              <li className=\"flex items-start gap-2\">\r\n                <span className=\"text-blue-600 mt-0.5\">ΓÇó</span>\r\n                <span>Quß║ún l├╜ quiz cß╗ºa bß║ín tß║íi trang \"My Quizzes\" trong Creator Dashboard.</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"bg-gray-50 px-6 py-4 flex justify-between items-center border-t border-gray-200\">\r\n          <button\r\n            onClick={handleCopyAll}\r\n            className=\"px-4 py-2 text-sm font-semibold text-blue-700 hover:text-blue-900 transition-colors flex items-center gap-2\"\r\n          >\r\n            <Copy className=\"w-4 h-4\" />\r\n            Copy tß║Ñt cß║ú th├┤ng tin\r\n          </button>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-2.5 bg-gray-900 hover:bg-gray-800 text-white rounded-xl font-semibold transition-colors\"\r\n          >\r\n            ─É├│ng\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShareLinkModal;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\YouTubePlayer.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Link YouTube kh├┤ng hß╗úp lß╗ç</h3>","line":91,"column":64,"nodeType":"JSXText","endLine":91,"endColumn":89},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-gray-600 mb-4\">Vui l├▓ng kiß╗âm tra lß║íi URL video</p>","line":92,"column":45,"nodeType":"JSXText","endLine":92,"endColumn":76},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            ─É├│ng\r\n          </button>","line":96,"column":12,"nodeType":"JSXText","endLine":98,"endColumn":11},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n            ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          </p>","line":167,"column":56,"nodeType":"JSXText","endLine":168,"endColumn":21},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p className=\"text-white text-sm opacity-75\">\r\n            ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          </p>","line":168,"column":88,"nodeType":"JSXText","endLine":169,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * YouTubePlayer - Component hiß╗ân thß╗ï video YouTube nh├║ng trong web\r\n * Hß╗ù trß╗ú fullscreen, responsive v├á auto-play\r\n */\r\n\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { X, Maximize2, Minimize2 } from 'lucide-react';\r\n\r\ninterface YouTubePlayerProps {\r\n  videoUrl: string;\r\n  title?: string;\r\n  onClose: () => void;\r\n  onVideoEnd?: () => void;\r\n  isFullscreen?: boolean;\r\n}\r\n\r\nconst YouTubePlayer: React.FC<YouTubePlayerProps> = ({ \r\n  videoUrl, \r\n  title,\r\n  onClose,\r\n  isFullscreen: initialFullscreen = true\r\n}) => {\r\n  const [isFullscreen, setIsFullscreen] = React.useState(initialFullscreen);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Extract YouTube video ID from URL\r\n  const getYouTubeVideoId = (url: string): string | null => {\r\n    try {\r\n      const urlObj = new URL(url);\r\n      \r\n      // youtube.com/watch?v=VIDEO_ID\r\n      if (urlObj.hostname.includes('youtube.com')) {\r\n        return urlObj.searchParams.get('v');\r\n      }\r\n      \r\n      // youtu.be/VIDEO_ID\r\n      if (urlObj.hostname === 'youtu.be') {\r\n        return urlObj.pathname.slice(1);\r\n      }\r\n\r\n      // youtube.com/embed/VIDEO_ID\r\n      if (urlObj.pathname.includes('/embed/')) {\r\n        return urlObj.pathname.split('/embed/')[1];\r\n      }\r\n      \r\n      return null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const videoId = getYouTubeVideoId(videoUrl);\r\n\r\n  // Handle fullscreen toggle\r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement && containerRef.current) {\r\n      containerRef.current.requestFullscreen();\r\n      setIsFullscreen(true);\r\n    } else {\r\n      document.exitFullscreen();\r\n      setIsFullscreen(false);\r\n    }\r\n  };\r\n\r\n  // Handle ESC key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, [onClose]);\r\n\r\n  if (!videoId) {\r\n    return (\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center\">\r\n        <div className=\"bg-white rounded-xl p-8 max-w-md text-center\">\r\n          <div className=\"text-6xl mb-4\">Γ¥î</div>\r\n          <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Link YouTube kh├┤ng hß╗úp lß╗ç</h3>\r\n          <p className=\"text-gray-600 mb-4\">Vui l├▓ng kiß╗âm tra lß║íi URL video</p>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            ─É├│ng\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // YouTube embed URL with parameters\r\n  const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&enablejsapi=1`;\r\n\r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      className=\"fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center p-4\"\r\n      onClick={(e) => {\r\n        if (e.target === e.currentTarget) {\r\n          onClose();\r\n        }\r\n      }}\r\n    >\r\n      <div className=\"relative w-full h-full max-w-7xl max-h-[90vh] flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-4 px-2\">\r\n          <div className=\"flex-1\">\r\n            {title && (\r\n              <h2 className=\"text-white text-xl font-semibold truncate\">\r\n                {title}\r\n              </h2>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-2\">\r\n            {/* Fullscreen Toggle */}\r\n            <button\r\n              onClick={toggleFullscreen}\r\n              className=\"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\r\n              title={isFullscreen ? \"Tho├ít to├án m├án h├¼nh\" : \"To├án m├án h├¼nh\"}\r\n            >\r\n              {isFullscreen ? (\r\n                <Minimize2 className=\"w-6 h-6\" />\r\n              ) : (\r\n                <Maximize2 className=\"w-6 h-6\" />\r\n              )}\r\n            </button>\r\n\r\n            {/* Close Button */}\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 text-white hover:bg-red-600 rounded-lg transition-colors\"\r\n              title=\"─É├│ng (ESC)\"\r\n            >\r\n              <X className=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Video Player */}\r\n        <div className=\"relative flex-1 bg-black rounded-lg overflow-hidden shadow-2xl\">\r\n          <iframe\r\n            src={embedUrl}\r\n            title={title || \"YouTube Video\"}\r\n            className=\"absolute inset-0 w-full h-full\"\r\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\r\n            allowFullScreen\r\n            style={{ border: 'none' }}\r\n          />\r\n        </div>\r\n\r\n        {/* Instructions */}\r\n        <div className=\"mt-4 text-center\">\r\n          <p className=\"text-white text-sm opacity-75\">\r\n            ≡ƒÆí Nhß║Ñn <kbd className=\"px-2 py-1 bg-white bg-opacity-20 rounded\">ESC</kbd> hoß║╖c click b├¬n ngo├ái ─æß╗â ─æ├│ng\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default YouTubePlayer;\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\components\\ui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\pages\\Creator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\pages\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\pages\\Home.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <Button className=\"w-full sm:w-auto bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 font-bold px-8 py-4 text-lg rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 ring-2 ring-white/50\">\r\n                <span className=\"mr-2\">≡ƒÄ«</span>Ch╞íi Multiplayer\r\n              </Button>","line":144,"column":49,"nodeType":"JSXText","endLine":145,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState } from '../../lib/store';\r\nimport { ROUTES } from '../../config/routes';\r\nimport { fetchQuizzes } from '../../features/quiz/store';\r\nimport { Quiz } from '../../features/quiz/types';\r\nimport QuizCard from '../../features/quiz/components/QuizCard';\r\nimport Button from '../components/ui/Button';\r\nimport PopularQuizzesRanking from '../components/PopularQuizzesRanking';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { db } from '../../lib/firebase/config';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n// **TH├èM Mß╗ÜI**: Dashboard stats interface\r\ninterface DashboardStats {\r\n  totalQuizzes: number;\r\n  totalUsers: number;\r\n  completedQuizzes: number;\r\n  totalCreators: number;\r\n}\r\n\r\nconst Home: React.FC = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const { quizzes, loading } = useSelector((state: RootState) => state.quiz);\r\n  \r\n  // **TH├èM Mß╗ÜI**: Dashboard stats state vß╗¢i dß╗» liß╗çu thß║¡t\r\n  const [stats, setStats] = useState<DashboardStats>({\r\n    totalQuizzes: 0,\r\n    totalUsers: 0,\r\n    completedQuizzes: 0,\r\n    totalCreators: 0\r\n  });\r\n\r\n  const [featuredQuizzes, setFeaturedQuizzes] = useState<Quiz[]>([]);\r\n  const [statsLoading, setStatsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (quizzes.length === 0) {\r\n      dispatch(fetchQuizzes({}) as any);\r\n    }\r\n    loadRealStats();\r\n  }, [dispatch, user, quizzes.length]);\r\n\r\n  const loadRealStats = async () => {\r\n    try {\r\n      setStatsLoading(true);\r\n      \r\n      // Lß║Ñy dß╗» liß╗çu thß╗▒c tß╗½ Firebase - CHß╗ê QUIZ APPROVED\r\n      const [quizzesSnapshot, usersSnapshot] = await Promise.all([\r\n        getDocs(query(collection(db, 'quizzes'), where('status', '==', 'approved'))),\r\n        getDocs(collection(db, 'users'))\r\n      ]);\r\n      \r\n      // ─Éß║┐m chß╗ë users ACTIVE (kh├┤ng bß╗ï xo├í v├á isActive = true)\r\n      const users = usersSnapshot.docs.map(doc => doc.data());\r\n      const activeUsers = users.filter(user => \r\n        user.isActive !== false && \r\n        user.isDeleted !== true\r\n      );\r\n      \r\n      // ─Éß║┐m creators trong sß╗æ users ACTIVE\r\n      const creators = activeUsers.filter(user => \r\n        user.role === 'creator' || user.role === 'admin'\r\n      );\r\n      \r\n      // Quiz ho├án th├ánh tß║ím thß╗¥i = 0 v├¼ ch╞░a c├│ data vß╗ü quiz results\r\n      const completedQuizzes = 0;\r\n      \r\n      setStats({\r\n        totalQuizzes: quizzesSnapshot.size,\r\n        totalUsers: activeUsers.length, // CHß╗ê ─Éß║╛M USERS HOß║áT ─Éß╗ÿNG\r\n        completedQuizzes: completedQuizzes,\r\n        totalCreators: creators.length // CHß╗ê ─Éß║╛M CREATORS HOß║áT ─Éß╗ÿNG\r\n      });\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading real stats:', error);\r\n    } finally {\r\n      setStatsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (quizzes.length > 0) {\r\n      // **TH├èM Mß╗ÜI**: Set featured quizzes (trending/popular)\r\n      const trending = quizzes\r\n        .filter(q => q.isPublic)\r\n        .sort((a, b) => (b.attempts || 0) - (a.attempts || 0))\r\n        .slice(0, 6);\r\n      setFeaturedQuizzes(trending);\r\n    }\r\n  }, [quizzes]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-96\">\r\n        {Array.from({length: 4}).map((_,i) => (\r\n          <div key={i} className=\"animate-pulse bg-white rounded-xl shadow-lg h-40 w-80 m-4\" />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Hero Section */}\r\n      <div className=\"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-800 rounded-3xl p-8 lg:p-12 text-white shadow-2xl relative overflow-hidden\">\r\n        {/* Background Pattern */}\r\n        <div className=\"absolute inset-0 bg-white/5 backdrop-blur-3xl\"></div>\r\n        <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-24 -translate-x-24\"></div>\r\n        \r\n        <div className=\"relative max-w-5xl\">\r\n          <div className=\"flex items-center mb-6\">\r\n            <div className=\"w-16 h-16 lg:w-20 lg:h-20 bg-white/20 backdrop-blur-sm rounded-3xl flex items-center justify-center ring-4 ring-white/30 shadow-2xl mr-6\">\r\n              <span className=\"text-3xl lg:text-4xl\">≡ƒÄ»</span>\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-3xl lg:text-5xl font-bold mb-2 drop-shadow-lg\">\r\n                {t('home.hero.welcome', { name: user?.displayName?.split(' ')[0] || 'Quiz Master' })}\r\n              </h1>\r\n              <p className=\"text-blue-100 text-lg lg:text-xl\">\r\n                {t('home.hero.subtitle')}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <p className=\"text-xl lg:text-2xl text-blue-100 mb-8 leading-relaxed\">\r\n            {t('home.hero.description')}\r\n          </p>\r\n          \r\n          <div className=\"flex flex-col sm:flex-row gap-4 lg:gap-6\">\r\n            <Link to=\"/quizzes\">\r\n              <Button className=\"w-full sm:w-auto bg-white text-blue-600 hover:bg-blue-50 font-bold px-8 py-4 text-lg rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105\">\r\n                <span className=\"mr-2\">≡ƒôÜ</span>{t(\"quizList.exploreQuizzes\")}\r\n              </Button>\r\n            </Link>\r\n            <Link to=\"/multiplayer\">\r\n              <Button className=\"w-full sm:w-auto bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600 font-bold px-8 py-4 text-lg rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 ring-2 ring-white/50\">\r\n                <span className=\"mr-2\">≡ƒÄ«</span>Ch╞íi Multiplayer\r\n              </Button>\r\n            </Link>\r\n            <Link to={ROUTES.CREATOR}>\r\n              <Button className=\"w-full sm:w-auto border-2 border-white text-white hover:bg-white hover:text-blue-600 font-bold px-8 py-4 text-lg rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105\">\r\n                <span className=\"mr-2\">Γ£¿</span>{t(\"creator.createNewQuiz\")}\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* **TH├èM Mß╗ÜI**: Dashboard Stats */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <div className=\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-blue-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium mb-2\">{t(\"dashboard.totalQuizzes\")}</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">\r\n                {statsLoading ? '...' : stats.totalQuizzes}\r\n              </p>\r\n              <p className=\"text-xs text-green-600 font-medium mt-1\">{t('home.stats.realData')}</p>\r\n            </div>\r\n            <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-green-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium mb-2\">{t(\"admin.tabs.users\")}</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">\r\n                {statsLoading ? '...' : stats.totalUsers}\r\n              </p>\r\n              <p className=\"text-xs text-green-600 font-medium mt-1\">{t('home.stats.registered')}</p>\r\n            </div>\r\n            <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-purple-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium mb-2\">{t(\"dashboard.completedQuizzes\")}</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">\r\n                {statsLoading ? '...' : stats.completedQuizzes}\r\n              </p>\r\n              <p className=\"text-xs text-purple-600 font-medium mt-1\">{t('home.stats.pending')}</p>\r\n            </div>\r\n            <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border border-gray-100 group hover:border-yellow-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-gray-600 text-sm font-medium mb-2\">{t(\"admin.quizManagement.table.creator\")}</p>\r\n              <p className=\"text-3xl font-bold text-gray-900\">\r\n                {statsLoading ? '...' : stats.totalCreators}\r\n              </p>\r\n              <p className=\"text-xs text-yellow-600 font-medium mt-1\">{t('home.stats.creatorsAndAdmins')}</p>\r\n            </div>\r\n            <div className=\"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl p-4 group-hover:scale-110 transition-transform duration-300 shadow-lg\">\r\n              <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* **TH├èM Mß╗ÜI**: Featured/Trending Quizzes */}\r\n      {featuredQuizzes.length > 0 && (\r\n        <div className=\"bg-white rounded-3xl shadow-xl p-8 border border-gray-100\">\r\n          <div className=\"flex items-center justify-between mb-8\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mr-4 shadow-lg\">\r\n                <span className=\"text-2xl\">≡ƒöÑ</span>\r\n              </div>\r\n              <div>\r\n                <h2 className=\"text-2xl lg:text-3xl font-bold text-gray-900\">{t('home.trending.title')}</h2>\r\n                <p className=\"text-gray-600\">{t('home.trending.subtitle')}</p>\r\n              </div>\r\n            </div>\r\n            <Link \r\n              to=\"/quizzes\" \r\n              className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-2xl font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-300 flex items-center shadow-lg hover:shadow-xl transform hover:scale-105\"\r\n            >\r\n              <span>{t('home.trending.viewAll')}</span>\r\n              <svg className=\"w-5 h-5 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\r\n              </svg>\r\n            </Link>\r\n          </div>\r\n          \r\n          {featuredQuizzes.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 lg:gap-8\">\r\n              {featuredQuizzes.map((quiz) => (\r\n                <div key={quiz.id} className=\"transform hover:scale-105 transition-all duration-300\">\r\n                  <QuizCard quiz={quiz} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                <span className=\"text-4xl\">≡ƒô¥</span>\r\n              </div>\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-3\">{t('home.trending.noQuizzes')}</h3>\r\n              <p className=\"text-gray-600 mb-6\">{t('home.trending.createFirst')}</p>\r\n              <Link to={ROUTES.CREATOR}>\r\n                <Button className=\"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-300\">\r\n                  {t('home.trending.createNow')}\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* **TH├èM Mß╗ÜI**: Quick Actions */}\r\n      <div className=\"bg-white rounded-3xl shadow-xl p-8 border border-gray-100\">\r\n        <div className=\"flex items-center mb-8\">\r\n          <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mr-4 shadow-lg\">\r\n            <span className=\"text-2xl\">ΓÜí</span>\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl lg:text-3xl font-bold text-gray-900\">{t('home.quickActions.title')}</h2>\r\n            <p className=\"text-gray-600\">{t('home.quickActions.subtitle')}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          <Link \r\n            to={ROUTES.CREATOR}\r\n            className=\"group bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 rounded-2xl p-8 transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-blue-200\"\r\n          >\r\n            <div className=\"text-blue-600 mb-6 group-hover:scale-110 transition-transform duration-300\">\r\n              <svg className=\"w-14 h-14\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-3\">{t(\"creator.createNewQuiz\")}</h3>\r\n            <p className=\"text-gray-600 leading-relaxed\">{t('home.quickActions.createDescription')}</p>\r\n            <div className=\"mt-4 text-blue-600 font-semibold group-hover:translate-x-1 transition-transform duration-300 flex items-center\">\r\n              {t('home.quickActions.startCreating')} <span className=\"ml-2\">ΓåÆ</span>\r\n            </div>\r\n          </Link>\r\n          \r\n          <Link \r\n            to=\"/quizzes?filter=random\" \r\n            className=\"group bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 rounded-2xl p-8 transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-green-200\"\r\n          >\r\n            <div className=\"text-green-600 mb-6 group-hover:scale-110 transition-transform duration-300\">\r\n              <svg className=\"w-14 h-14\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-3\">{t('home.quickActions.randomQuiz')}</h3>\r\n            <p className=\"text-gray-600 leading-relaxed\">{t('home.quickActions.randomDescription')}</p>\r\n            <div className=\"mt-4 text-green-600 font-semibold group-hover:translate-x-1 transition-transform duration-300 flex items-center\">\r\n              {t('home.quickActions.playNow')} <span className=\"ml-2\">ΓåÆ</span>\r\n            </div>\r\n          </Link>\r\n          \r\n          <Link \r\n            to=\"/profile\" \r\n            className=\"group bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 rounded-2xl p-8 transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-purple-200\"\r\n          >\r\n            <div className=\"text-purple-600 mb-6 group-hover:scale-110 transition-transform duration-300\">\r\n              <svg className=\"w-14 h-14\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\" />\r\n              </svg>\r\n            </div>\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-3\">{t('home.quickActions.viewProgress')}</h3>\r\n            <p className=\"text-gray-600 leading-relaxed\">{t('home.quickActions.progressDescription')}</p>\r\n            <div className=\"mt-4 text-purple-600 font-semibold group-hover:translate-x-1 transition-transform duration-300 flex items-center\">\r\n              {t(\"viewDetails\")} <span className=\"ml-2\">ΓåÆ</span>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Popular Quizzes Section */}\r\n      <div className=\"bg-white rounded-3xl shadow-xl p-8 border border-gray-100\">\r\n        <div className=\"flex items-center mb-8\">\r\n          <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mr-4 shadow-lg\">\r\n            <span className=\"text-2xl\">≡ƒÅå</span>\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl lg:text-3xl font-bold text-gray-900\">{t('home.popular.title')}</h2>\r\n            <p className=\"text-gray-600\">{t('home.popular.subtitle')}</p>\r\n          </div>\r\n        </div>\r\n        <PopularQuizzesRanking />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\pages\\LandingPage.tsx","messages":[{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <span className=\"text-white text-lg sm:text-xl font-bold\">Quiz Trivia</span>","line":17,"column":69,"nodeType":"JSXText","endLine":17,"endColumn":80},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-3xl sm:text-4xl mb-3 sm:mb-4\">ΓÅ▒∩╕Å</div>","line":60,"column":66,"nodeType":"JSXText","endLine":60,"endColumn":68},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-purple-300 mb-1 sm:mb-2\">10K+</div>","line":95,"column":104,"nodeType":"JSXText","endLine":95,"endColumn":108},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <div className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-indigo-300 mb-1 sm:mb-2\">50K+</div>","line":99,"column":104,"nodeType":"JSXText","endLine":99,"endColumn":108},{"ruleId":"i18next/no-literal-string","severity":1,"message":"disallow literal string: <p>&copy; 2025 Quiz Trivia. {t('landing.footer.rights')}</p>","line":112,"column":12,"nodeType":"JSXText","endLine":112,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport LanguageSwitcher from '../components/LanguageSwitcher';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport const LandingPage: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  \r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900\">\r\n      {/* Navigation */}\r\n      <nav className=\"flex items-center justify-between p-4 sm:p-6\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\"h-8 w-8 sm:h-10 sm:w-10 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full flex items-center justify-center mr-2 sm:mr-3\">\r\n            <span className=\"text-white text-lg sm:text-xl font-bold\">Q</span>\r\n          </div>\r\n          <span className=\"text-white text-lg sm:text-xl font-bold\">Quiz Trivia</span>\r\n        </div>\r\n        <LanguageSwitcher variant=\"dark\" />\r\n      </nav>\r\n\r\n      {/* Hero Section */}\r\n      <div className=\"flex items-center justify-center min-h-[80vh] px-4\">\r\n        <div className=\"text-center text-white max-w-4xl\">\r\n          <h1 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-blue-200 to-purple-200 bg-clip-text text-transparent leading-tight\">\r\n            {t('landing.hero.title')}\r\n          </h1>\r\n          \r\n          <p className=\"text-lg sm:text-xl text-blue-100 mb-6 sm:mb-8 max-w-2xl mx-auto px-4 leading-relaxed\">\r\n            {t('landing.hero.subtitle')}\r\n          </p>\r\n          \r\n          <div className=\"flex flex-col gap-3 sm:gap-4 justify-center mb-8 sm:mb-12 px-4\">\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold text-base sm:text-lg transition-all duration-200 transform hover:scale-105 shadow-lg\"\r\n            >\r\n              {t('landing.cta.primary')}\r\n            </Link>\r\n            \r\n            <Link\r\n              to=\"/login\"\r\n              className=\"border-2 border-white text-white hover:bg-white hover:text-blue-900 px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold text-base sm:text-lg transition-all duration-200\"\r\n            >\r\n              {t('landing.cta.secondary')}\r\n            </Link>\r\n          </div>\r\n\r\n          {/* Features */}\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 mt-8 sm:mt-12 lg:mt-16 px-4\">\r\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6\">\r\n              <div className=\"text-3xl sm:text-4xl mb-3 sm:mb-4\">≡ƒÄ»</div>\r\n              <h3 className=\"text-lg sm:text-xl font-semibold mb-2\">{t('landing.features.diversity.title')}</h3>\r\n              <p className=\"text-blue-100 text-sm sm:text-base\">\r\n                {t('landing.features.diversity.description')}\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6\">\r\n              <div className=\"text-3xl sm:text-4xl mb-3 sm:mb-4\">ΓÅ▒∩╕Å</div>\r\n              <h3 className=\"text-lg sm:text-xl font-semibold mb-2\">{t('landing.features.realtime.title')}</h3>\r\n              <p className=\"text-blue-100 text-sm sm:text-base\">\r\n                {t('landing.features.realtime.description')}\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6\">\r\n              <div className=\"text-3xl sm:text-4xl mb-3 sm:mb-4\">≡ƒÄ«</div>\r\n              <h3 className=\"text-lg sm:text-xl font-semibold mb-2\">{t('landing.features.multiplayer.title')}</h3>\r\n              <p className=\"text-blue-100 text-sm sm:text-base\">\r\n                {t('landing.features.multiplayer.description')}\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6\">\r\n              <div className=\"text-3xl sm:text-4xl mb-3 sm:mb-4\">≡ƒÅå</div>\r\n              <h3 className=\"text-lg sm:text-xl font-semibold mb-2\">{t('landing.features.ranking.title')}</h3>\r\n              <p className=\"text-blue-100 text-sm sm:text-base\">\r\n                {t('landing.features.ranking.description')}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Section */}\r\n      <div className=\"py-8 sm:py-12 lg:py-16 bg-white/5 backdrop-blur-sm\">\r\n        <div className=\"max-w-6xl mx-auto px-4\">\r\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 text-center text-white\">\r\n            <div>\r\n              <div className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-300 mb-1 sm:mb-2\">1000+</div>\r\n              <div className=\"text-blue-100 text-xs sm:text-sm lg:text-base\">{t('landing.stats.quizzes')}</div>\r\n            </div>\r\n            <div>\r\n              <div className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-purple-300 mb-1 sm:mb-2\">10K+</div>\r\n              <div className=\"text-blue-100 text-xs sm:text-sm lg:text-base\">{t('landing.stats.players')}</div>\r\n            </div>\r\n            <div>\r\n              <div className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-indigo-300 mb-1 sm:mb-2\">50K+</div>\r\n              <div className=\"text-blue-100 text-xs sm:text-sm lg:text-base\">{t('landing.stats.plays')}</div>\r\n            </div>\r\n            <div>\r\n              <div className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-cyan-300 mb-1 sm:mb-2\">24/7</div>\r\n              <div className=\"text-blue-100 text-xs sm:text-sm lg:text-base\">{t('landing.stats.support')}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <footer className=\"text-center text-blue-200 py-4 sm:py-6 lg:py-8 px-4\">\r\n        <p>&copy; 2025 Quiz Trivia. {t('landing.footer.rights')}</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\pages\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\shared\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\tests\\testStorageUpload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\utils\\htmlUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"D:\\Thuctap_WebQuiz\\QuizTrivia-App\\src\\utils\\initializeCategories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
